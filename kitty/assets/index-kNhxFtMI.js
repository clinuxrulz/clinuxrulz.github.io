const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CodeMirror-CL-wF66e.js","./lib-Dbgxobrh.js","./index-XNH-lkY3.js","./dev-B9-ass9r.js","./dev-CC7pdsS5.js","./AppV2-DB6vR3Fd.js","./PixelEditor-BEk1u82L.js","./ColourPicker-BYsZfYke.js","./ScriptEditor-rC8KKWhD.js","./solid-js-C16mITwu.js","./pixi-js-CTVzrHHI.js","./FederatedEventTarget-DFQx8mKK.js","./Filter-BDK7ILDO.js","./State-3sV0XrC-.js","./CanvasTextSystem-BKHjFPHo.js","./colorToUniform-W8Zlj3HA.js","./SharedSystems-BwGi1NkL.js","./AnimatedSprite-CrPahPC5.js","./WebGLRenderer-DzfsPnmv.js","./WebGPURenderer-DziseXTR.js","./solid-js-store-D4PqY48D.js","./AppV2-DQoE4ujd.css","./KittyDemo-xaDEBH_J.js","./ReactiveSimulator-CrYrdXJp.js","./VectorEditor-qIaeYoVr.js","./GravityTest-KmSBkBfx.js","./ThreeBody-CMLcVY2a.js","./VirtualFileSystemTest-Bvitkndk.js","./AutomergeWebRtcTest-CtLjPCmm.js","./DebugProjection-DE7hDG-A.js","./AutoFormsTest-B_dKKVpU.js"])))=>i.map(i=>d[i]);
import{dG as Ft,i as Dr,d as cs,dH as us,_ as Ie}from"./index-XNH-lkY3.js";import{M as ds,d as xe,J as vi,w as Fe,x as de,i as K,u as ge,t as V,N as Ot,n as ct,P as qe,Vec2 as fn,v as st,s as H,Q as ki,k as jr,g as hn,R as ps,W as fs,X as mn,Y as gn,Z as hs}from"./lib-Dbgxobrh.js";import{U as wi,q as S,C as Lr,n as xi,Z as Si,c as J,s as X,N as ae,X as ms,T as gs,b as Oe,Y as ie,l as T,k as Ci,K as ys,S as ne,u as Xe,O as ke,V as sr,m as oe,F as Ge,h as zr,M as ut,J as Qe,Q as Ur,p as Te,W as Br,H as Ee,t as bs}from"./dev-B9-ass9r.js";import{a as Se,p as _t}from"./dev-CC7pdsS5.js";function vs(i,e){for(var r=0;r<e.length;r++){const t=e[r];if(typeof t!="string"&&!Array.isArray(t)){for(const n in t)if(n!=="default"&&!(n in i)){const o=Object.getOwnPropertyDescriptor(t,n);o&&Object.defineProperty(i,n,o.get?o:{enumerable:!0,get:()=>t[n]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}function Pi(){let i=new Set;function e(n){return i.add(n),()=>i.delete(n)}let r=!1;function t(n,o){if(r)return!(r=!1);const a={to:n,options:o,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const s of i)s.listener({...a,from:s.location,retry:u=>{u&&(r=!0),s.navigate(n,{...o,resolve:!1})}});return!a.defaultPrevented}return{subscribe:e,confirm:t}}let Cr;function qr(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Cr=window.history.state._depth}qr();function ks(i){return{...i,_depth:window.history.state&&window.history.state._depth}}function ws(i,e){let r=!1;return()=>{const t=Cr;qr();const n=t==null?null:Cr-t;if(r){r=!1;return}n&&e(n)?(r=!0,window.history.go(-n)):i()}}const xs=/^(?:[a-z0-9]+:)?\/\//i,Ss=/^\/+|(\/)\/+$/g,_i="http://sr";function Et(i,e=!1){const r=i.replace(Ss,"$1");return r?e||/^[?#]/.test(r)?r:"/"+r:""}function Ut(i,e,r){if(xs.test(e))return;const t=Et(i),n=r&&Et(r);let o="";return!n||e.startsWith("/")?o=t:n.toLowerCase().indexOf(t.toLowerCase())!==0?o=t+n:o=n,(o||"/")+Et(e,!o)}function Cs(i,e){if(i==null)throw new Error(e);return i}function Ps(i,e){return Et(i).replace(/\/*(\*.*)?$/g,"")+Et(e)}function Ti(i){const e={};return i.searchParams.forEach((r,t)=>{t in e?Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r]:e[t]=r}),e}function _s(i,e,r){const[t,n]=i.split("/*",2),o=t.split("/").filter(Boolean),a=o.length;return s=>{const u=s.split("/").filter(Boolean),l=u.length-a;if(l<0||l>0&&n===void 0&&!e)return null;const c={path:a?"":"/",params:{}},p=f=>r===void 0?void 0:r[f];for(let f=0;f<a;f++){const d=o[f],y=d[0]===":",m=y?u[f]:u[f].toLowerCase(),h=y?d.slice(1):d.toLowerCase();if(y&&lr(m,p(h)))c.params[h]=m;else if(y||!lr(m,h))return null;c.path+=`/${m}`}if(n){const f=l?u.slice(-l).join("/"):"";if(lr(f,p(n)))c.params[n]=f;else return null}return c}}function lr(i,e){const r=t=>t===i;return e===void 0?!0:typeof e=="string"?r(e):typeof e=="function"?e(i):Array.isArray(e)?e.some(r):e instanceof RegExp?e.test(i):!1}function Ts(i){const[e,r]=i.pattern.split("/*",2),t=e.split("/").filter(Boolean);return t.reduce((n,o)=>n+(o.startsWith(":")?2:3),t.length-(r===void 0?0:1))}function $i(i){const e=new Map,r=Lr();return new Proxy({},{get(t,n){return e.has(n)||wi(r,()=>e.set(n,S(()=>i()[n]))),e.get(n)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(i())}})}function Ii(i){let e=/(\/?\:[^\/]+)\?/.exec(i);if(!e)return[i];let r=i.slice(0,e.index),t=i.slice(e.index+e[0].length);const n=[r,r+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(t);)n.push(r+=e[1]),t=t.slice(e[0].length);return Ii(t).reduce((o,a)=>[...o,...n.map(s=>s+a)],[])}const $s=100,Ei=xi(),Ri=xi(),Is=()=>Cs(Si(Ei),"<A> and 'use' router primitives can be only used inside a Route."),Es=()=>Is().navigatorFactory();function Rs(i,e=""){const{component:r,preload:t,load:n,children:o,info:a}=i,s=!o||Array.isArray(o)&&!o.length,u={key:i,component:r,preload:t||n,info:a};return Mi(i.path).reduce((l,c)=>{for(const p of Ii(c)){const f=Ps(e,p);let d=s?f:f.split("/*",1)[0];d=d.split("/").map(y=>y.startsWith(":")||y.startsWith("*")?y:encodeURIComponent(y)).join("/"),l.push({...u,originalPath:c,pattern:d,matcher:_s(d,!s,i.matchFilters)})}return l},[])}function Ms(i,e=0){return{routes:i,score:Ts(i[i.length-1])*1e4-e,matcher(r){const t=[];for(let n=i.length-1;n>=0;n--){const o=i[n],a=o.matcher(r);if(!a)return null;t.unshift({...a,route:o})}return t}}}function Mi(i){return Array.isArray(i)?i:[i]}function Ai(i,e="",r=[],t=[]){const n=Mi(i);for(let o=0,a=n.length;o<a;o++){const s=n[o];if(s&&typeof s=="object"){s.hasOwnProperty("path")||(s.path="");const u=Rs(s,e);for(const l of u){r.push(l);const c=Array.isArray(s.children)&&s.children.length===0;if(s.children&&!c)Ai(s.children,l.pattern,r,t);else{const p=Ms([...r],t.length);t.push(p)}r.pop()}}}return r.length?t:t.sort((o,a)=>a.score-o.score)}function cr(i,e){for(let r=0,t=i.length;r<t;r++){const n=i[r].matcher(e);if(n)return n}return[]}function As(i,e,r){const t=new URL(_i),n=S(c=>{const p=i();try{return new URL(p,t)}catch{return console.error(`Invalid path ${p}`),c}},t,{equals:(c,p)=>c.href===p.href}),o=S(()=>n().pathname),a=S(()=>n().search,!0),s=S(()=>n().hash),u=()=>"",l=ae(a,()=>Ti(n()));return{get pathname(){return o()},get search(){return a()},get hash(){return s()},get state(){return e()},get key(){return u()},query:r?r(l):$i(l)}}let lt;function Ns(){return lt}function Fs(i,e,r,t={}){const{signal:[n,o],utils:a={}}=i,s=a.parsePath||(M=>M),u=a.renderPath||(M=>M),l=a.beforeLeave||Pi(),c=Ut("",t.base||"");if(c===void 0)throw new Error(`${c} is not a valid base path`);c&&!n().value&&o({value:c,replace:!0,scroll:!1});const[p,f]=J(!1);let d;const y=(M,E)=>{E.value===m()&&E.state===g()||(d===void 0&&f(!0),lt=M,d=E,ms(()=>{d===E&&(h(d.value),b(d.state),gs(),x[1](F=>F.filter(B=>B.pending)))}).finally(()=>{d===E&&Oe(()=>{lt=void 0,M==="navigate"&&O(d),f(!1),d=void 0})}))},[m,h]=J(n().value),[g,b]=J(n().state),k=As(m,g,a.queryWrapper),v=[],x=J([]),w=S(()=>typeof t.transformUrl=="function"?cr(e(),t.transformUrl(k.pathname)):cr(e(),k.pathname)),P=()=>{const M=w(),E={};for(let F=0;F<M.length;F++)Object.assign(E,M[F].params);return E},C=a.paramsWrapper?a.paramsWrapper(P,e):$i(P),_={pattern:c,path:()=>c,outlet:()=>null,resolvePath(M){return Ut(c,M)}};return X(ae(n,M=>y("native",M),{defer:!0})),{base:_,location:k,params:C,isRouting:p,renderPath:u,parsePath:s,navigatorFactory:$,matches:w,beforeLeave:l,preloadRoute:D,singleFlight:t.singleFlight===void 0?!0:t.singleFlight,submissions:x};function R(M,E,F){ie(()=>{if(typeof E=="number"){E&&(a.go?a.go(E):console.warn("Router integration does not support relative routing"));return}const B=!E||E[0]==="?",{replace:U,resolve:q,scroll:W,state:ee}={replace:!1,resolve:!B,scroll:!0,...F},A=q?M.resolvePath(E):Ut(B&&k.pathname||"",E);if(A===void 0)throw new Error(`Path '${E}' is not a routable path`);if(v.length>=$s)throw new Error("Too many redirects");const Y=m();(A!==Y||ee!==g())&&(ds||l.confirm(A,F)&&(v.push({value:Y,replace:U,scroll:W,state:g()}),y("navigate",{value:A,state:ee})))})}function $(M){return M=M||Si(Ri)||_,(E,F)=>R(M,E,F)}function O(M){const E=v[0];E&&(o({...M,replace:E.replace,scroll:E.scroll}),v.length=0)}function D(M,E){const F=cr(e(),M.pathname),B=lt;lt="preload";for(let U in F){const{route:q,params:W}=F[U];q.component&&q.component.preload&&q.component.preload();const{preload:ee}=q;E&&ee&&wi(r(),()=>ee({params:W,location:{pathname:M.pathname,search:M.search,hash:M.hash,query:Ti(M),state:null,key:""},intent:"preload"}))}lt=B}}function Os(i,e,r,t){const{base:n,location:o,params:a}=i,{pattern:s,component:u,preload:l}=t().route,c=S(()=>t().path);u&&u.preload&&u.preload();const p=l?l({params:a,location:o,intent:lt||"initial"}):void 0;return{parent:e,pattern:s,path:c,outlet:()=>u?T(u,{params:a,location:o,data:p,get children(){return r()}}):r(),resolvePath(d){return Ut(n.path(),d,c())}}}const Ds=i=>e=>{const{base:r}=e,t=Ci(()=>e.children),n=S(()=>Ai(t(),e.base||""));let o;const a=Fs(i,n,()=>o,{base:r,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return i.create&&i.create(a),T(Ei.Provider,{value:a,get children(){return T(js,{routerState:a,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[S(()=>(o=Lr())&&null),T(Ls,{routerState:a,get branches(){return n()}})]}})}})};function js(i){const e=i.routerState.location,r=i.routerState.params,t=S(()=>i.preload&&ie(()=>{i.preload({params:r,location:e,intent:Ns()||"initial"})}));return T(ne,{get when(){return i.root},keyed:!0,get fallback(){return i.children},children:n=>T(n,{params:r,location:e,get data(){return t()},get children(){return i.children}})})}function Ls(i){const e=[];let r;const t=S(ae(i.routerState.matches,(n,o,a)=>{let s=o&&n.length===o.length;const u=[];for(let l=0,c=n.length;l<c;l++){const p=o&&o[l],f=n[l];a&&p&&f.route.key===p.route.key?u[l]=a[l]:(s=!1,e[l]&&e[l](),Xe(d=>{e[l]=d,u[l]=Os(i.routerState,u[l-1]||i.routerState.base,yn(()=>t()[l+1]),()=>i.routerState.matches()[l])}))}return e.splice(n.length).forEach(l=>l()),a&&s?a:(r=u[0],u)}));return yn(()=>t()&&r)()}const yn=i=>()=>T(ne,{get when(){return i()},keyed:!0,children:e=>T(Ri.Provider,{value:e,get children(){return e.outlet()}})}),be=i=>{const e=Ci(()=>i.children);return ys(i,{get children(){return e()}})};function zs([i,e],r,t){return[i,t?n=>e(t(n)):e]}function Us(i){let e=!1;const r=n=>typeof n=="string"?{value:n}:n,t=zs(J(r(i.get()),{equals:(n,o)=>n.value===o.value&&n.state===o.state}),void 0,n=>(!e&&i.set(n),sr.registry&&!sr.done&&(sr.done=!0),n));return i.init&&ke(i.init((n=i.get())=>{e=!0,t[1](r(n)),e=!1})),Ds({signal:t,create:i.create,utils:i.utils})}function Bs(i,e,r){return i.addEventListener(e,r),()=>i.removeEventListener(e,r)}function qs(i,e){const r=i&&document.getElementById(i);r?r.scrollIntoView():e&&window.scrollTo(0,0)}const Vs=new Map;function Gs(i=!0,e=!1,r="/_server",t){return n=>{const o=n.base.path(),a=n.navigatorFactory(n.base);let s,u;function l(m){return m.namespaceURI==="http://www.w3.org/2000/svg"}function c(m){if(m.defaultPrevented||m.button!==0||m.metaKey||m.altKey||m.ctrlKey||m.shiftKey)return;const h=m.composedPath().find(w=>w instanceof Node&&w.nodeName.toUpperCase()==="A");if(!h||e&&!h.hasAttribute("link"))return;const g=l(h),b=g?h.href.baseVal:h.href;if((g?h.target.baseVal:h.target)||!b&&!h.hasAttribute("state"))return;const v=(h.getAttribute("rel")||"").split(/\s+/);if(h.hasAttribute("download")||v&&v.includes("external"))return;const x=g?new URL(b,document.baseURI):new URL(b);if(!(x.origin!==window.location.origin||o&&x.pathname&&!x.pathname.toLowerCase().startsWith(o.toLowerCase())))return[h,x]}function p(m){const h=c(m);if(!h)return;const[g,b]=h,k=n.parsePath(b.pathname+b.search+b.hash),v=g.getAttribute("state");m.preventDefault(),a(k,{resolve:!1,replace:g.hasAttribute("replace"),scroll:!g.hasAttribute("noscroll"),state:v?JSON.parse(v):void 0})}function f(m){const h=c(m);if(!h)return;const[g,b]=h;n.preloadRoute(b,g.getAttribute("preload")!=="false")}function d(m){clearTimeout(s);const h=c(m);if(!h)return u=null;const[g,b]=h;u!==g&&(s=setTimeout(()=>{n.preloadRoute(b,g.getAttribute("preload")!=="false"),u=g},20))}function y(m){if(m.defaultPrevented)return;let h=m.submitter&&m.submitter.hasAttribute("formaction")?m.submitter.getAttribute("formaction"):m.target.getAttribute("action");if(!h)return;if(!h.startsWith("https://action/")){const b=new URL(h,_i);if(h=n.parsePath(b.pathname+b.search),!h.startsWith(r))return}if(m.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const g=Vs.get(h);if(g){m.preventDefault();const b=new FormData(m.target,m.submitter);g.call({r:n,f:m.target},m.target.enctype==="multipart/form-data"?b:new URLSearchParams(b))}}xe(["click","submit"]),document.addEventListener("click",p),i&&(document.addEventListener("mousemove",d,{passive:!0}),document.addEventListener("focusin",f,{passive:!0}),document.addEventListener("touchstart",f,{passive:!0})),document.addEventListener("submit",y),ke(()=>{document.removeEventListener("click",p),i&&(document.removeEventListener("mousemove",d),document.removeEventListener("focusin",f),document.removeEventListener("touchstart",f)),document.removeEventListener("submit",y)})}}function Ws(i){const e=i.replace(/^.*?#/,"");if(!e.startsWith("/")){const[,r="/"]=window.location.hash.split("#",2);return`${r}#${e}`}return e}function Hs(i){const e=()=>window.location.hash.slice(1),r=Pi();return Us({get:e,set({value:t,replace:n,scroll:o,state:a}){n?window.history.replaceState(ks(a),"","#"+t):window.history.pushState(a,"","#"+t);const s=t.indexOf("#"),u=s>=0?t.slice(s+1):"";qs(u,o),qr()},init:t=>Bs(window,"hashchange",ws(t,n=>!r.confirm(n&&n<0?n:e()))),create:Gs(i.preload,i.explicitLinks,i.actionBase),utils:{go:t=>window.history.go(t),renderPath:t=>`#${t}`,parsePath:Ws,beforeLeave:r}})(i)}var Bt={exports:{}},Ks=Bt.exports,bn;function Ys(){return bn||(bn=1,function(i,e){(function(r,t){t()})(Ks,function(){function r(l,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function t(l,c,p){var f=new XMLHttpRequest;f.open("GET",l),f.responseType="blob",f.onload=function(){u(f.response,c,p)},f.onerror=function(){console.error("could not download file")},f.send()}function n(l){var c=new XMLHttpRequest;c.open("HEAD",l,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function o(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(c)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ft=="object"&&Ft.global===Ft?Ft:void 0,s=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(l,c,p){var f=a.URL||a.webkitURL,d=document.createElement("a");c=c||l.name||"download",d.download=c,d.rel="noopener",typeof l=="string"?(d.href=l,d.origin===location.origin?o(d):n(d.href)?t(l,c,p):o(d,d.target="_blank")):(d.href=f.createObjectURL(l),setTimeout(function(){f.revokeObjectURL(d.href)},4e4),setTimeout(function(){o(d)},0))}:"msSaveOrOpenBlob"in navigator?function(l,c,p){if(c=c||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(r(l,p),c);else if(n(l))t(l,c,p);else{var f=document.createElement("a");f.href=l,f.target="_blank",setTimeout(function(){o(f)})}}:function(l,c,p,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof l=="string")return t(l,c,p);var d=l.type==="application/octet-stream",y=/constructor/i.test(a.HTMLElement)||a.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||d&&y||s)&&typeof FileReader<"u"){var h=new FileReader;h.onloadend=function(){var k=h.result;k=m?k:k.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=k:location=k,f=null},h.readAsDataURL(l)}else{var g=a.URL||a.webkitURL,b=g.createObjectURL(l);f?f.location=b:location.href=b,f=null,setTimeout(function(){g.revokeObjectURL(b)},4e4)}});a.saveAs=u.saveAs=u,i.exports=u})}(Bt)),Bt.exports}var Js=Ys();const Ni=Dr(Js);let fh=async i=>{let e=i.vfs,r=new vi,t=async(n,o)=>{let a=o.contents;for(let s of a)switch(s.type){case"File":{let u=await new Promise(c=>{Xe(p=>{let f=o.openFileById(s.id);oe(()=>{let d=f();if(d.type=="Pending")return;if(p(),d.type=="Failed"){c(Fe(d.message));return}let y=d.value,m;if(y.name().toLowerCase().endsWith(".json"))m=new Blob([JSON.stringify(y.doc,void 0,2)],{type:"application/json"});else if(y.name().toLowerCase().endsWith(".ts"))m=new Blob([y.doc.source],{type:"application/typescript"});else{let h=y.doc.mimeType,g=y.doc.data;m=new Blob([g],{type:h})}c(de(m))})})});if(u.type=="Err")continue;let l=u.value;n.file(s.name,l);break}case"Folder":{let u=n.folder(s.name);if(u==null)continue;await new Promise(l=>{Xe(c=>{let p=o.openFolderById(s.id);oe(()=>{let f=p();if(f.type=="Pending")return;if(f.type=="Failed"){console.log(f.message),c(),l();return}let d=f.value;(async()=>(await t(u,d),c(),l()))()})})});break}}};Xe(n=>{let o=e.rootFolder();oe(()=>{let a=o();if(a.type!="Pending"){if(a.type=="Failed"){console.log(a.message),n();return}(async()=>{let s=a.value;await t(r,s);let u=await r.generateAsync({type:"blob"});Ni.saveAs(u,"kitty_export.zip"),n()})()}})})},Zs=async i=>{let e=i.vfs,r;{let t=await new Promise(n=>{Xe(o=>{let a=e.rootFolder();oe(()=>{let s=a();if(s.type=="Pending")return;if(s.type=="Failed"){o(),n(Fe(s.message));return}let u=s.value;ie(()=>{let l=u.contents;for(let c of l)u.removeFileOrFolderById(c.id)}),o(),n(de(u))})})});if(t.type=="Err")return t;r=t.value}{let t=await vi.loadAsync(i.file);async function n(o,a){let s;if(o=="")s=t;else{let c=t.folder(o);if(c==null)return;s=c}if(!s){console.warn(`Folder "${o}" not found in the zip.`);return}const u=[];s.forEach((c,p)=>{const f=o+(o&&!o.endsWith("/")?"/":"")+c;u.push({name:f,relativePath:c,isFolder:p.dir})});let l=[];for(let c of u)c.isFolder&&l.push(c.relativePath);for(const c of u)if(!l.some(p=>c.relativePath.startsWith(p))&&!c.isFolder){let p=t.file(c.name);if(p==null)continue;let f=await p.async("blob");if(c.relativePath.toLowerCase().endsWith(".json")){let d=await f.text(),y=JSON.parse(d);a.createFile(c.relativePath,y)}else if(c.relativePath.toLowerCase().endsWith(".ts")){let d=await f.text();a.createFile(c.relativePath,{source:d})}else{let d=new Uint8Array(await f.arrayBuffer());a.createFile(c.relativePath,{mimeType:f.type,data:d})}}for(const c of u)if(c.isFolder){let p=c.relativePath;p.endsWith("/")&&(p=p.slice(0,p.length-1));let f=a.createFolder(p);if(f.type=="Err")continue;let{id:d}=f.value;await new Promise(y=>{Xe(m=>{let h=a.openFolderById(d);oe(ae(h,g=>{if(g.type=="Pending")return;if(g.type=="Failed"){console.log(g.message),m(),y();return}let b=g.value;(async()=>(await n(c.name,b),m(),y()))()}))})})}}await n("",r)}return de({})};var Xs=V('<div style=flex-grow:1;overflow:auto;><button class="btn btn-primary">Share Virtual File System</button><br><button class="btn btn-secondary">Delete Virtual File System</button><br><br><b>Links:</b><br><div><div><button class=btn>Kitty Demo</button><button class=btn>Pixel Editor</button><button class=btn>Level Builder</button><button class=btn>Music Editor</button><button class=btn>Model Editor</button><button class=btn>Script Editor</button><button class=btn>Colour Picker</button><button class=btn>Reactive Simulator</button><button class=btn>Vector Editor</button><button class=btn>Gravity Test</button><button class=btn>Three Body</button><button class=btn>Virtual File System Test</button><button class=btn>Automerge WebRTC Test</button><button class=btn>Connection Management</button><button class=btn>Debug Projection</button><button class=btn>App</button><button class=btn>Auto Forms Test'),Qs=V('<button class="btn btn-primary">Import Virtual File System<input type=file hidden>');const el=i=>{let e=Es();return(()=>{var r=Xs(),t=r.firstChild,n=t.nextSibling,o=n.nextSibling,a=o.nextSibling,s=a.nextSibling,u=s.nextSibling,l=u.nextSibling,c=l.nextSibling,p=c.firstChild,f=p.firstChild,d=f.nextSibling,y=d.nextSibling,m=y.nextSibling,h=m.nextSibling,g=h.nextSibling,b=g.nextSibling,k=b.nextSibling,v=k.nextSibling,x=v.nextSibling,w=x.nextSibling,P=w.nextSibling,C=P.nextSibling,_=C.nextSibling,R=_.nextSibling,$=R.nextSibling,O=$.nextSibling;return t.$$click=()=>{i.onShareVfs()},o.$$click=()=>{window.confirm("Are you sure you wish to delete your virtual file system?")&&i.onDeleteVfs()},K(r,()=>ie(()=>{let D;return(()=>{var M=Qs(),E=M.firstChild,F=E.nextSibling;M.$$click=()=>{D.click()},F.addEventListener("change",()=>{let U=D.files;U!=null&&U.length==1&&Zs({file:U[0],vfs:i.vfs})});var B=D;return typeof B=="function"?ge(B,F):D=F,M})()}),s),c.style.setProperty("margin-left","10px"),c.style.setProperty("margin-top","10px"),c.style.setProperty("display","inline-block"),p.style.setProperty("display","flex"),p.style.setProperty("flex-direction","column"),f.$$click=()=>e("/kitty-demo"),d.$$click=()=>e("/pixel-editor"),y.$$click=()=>e("/level-builder"),m.$$click=()=>e("/music-editor"),h.$$click=()=>e("/model-editor"),g.$$click=()=>e("/script-editor"),b.$$click=()=>e("/colour-picker"),k.$$click=()=>e("/reactive-sim"),v.$$click=()=>e("/vector-editor"),x.$$click=()=>e("/gravity-test"),w.$$click=()=>e("/three-body"),P.$$click=()=>e("/vfs-test"),C.$$click=()=>e("/automerge-webrtc-test"),_.$$click=()=>e("/connection-management"),R.$$click=()=>e("/debug-projection"),$.$$click=()=>e("/app"),O.$$click=()=>e("/auto-forms-test"),r})()};xe(["click"]);class tl extends cs{peerId;peerMetadata}var ur={},nt={},Dt={},vn;function rl(){return vn||(vn=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=["other","new","good","old","little","great","small","young","long","black","high","only","big","white","political","right","large","real","sure","different","important","public","possible","full","whole","certain","human","major","military","bad","social","dead","true","economic","open","early","free","national","strong","hard","special","clear","local","private","wrong","late","short","poor","recent","dark","fine","foreign","ready","red","cold","low","heavy","serious","single","personal","difficult","left","blue","federal","necessary","general","easy","likely","beautiful","happy","past","hot","close","common","afraid","simple","natural","main","various","available","nice","present","final","sorry","entire","current","similar","deep","huge","rich","nuclear","empty","strange","quiet","front","wide","modern","concerned","green","very","alone","particular","bright","supposed","basic","medical","aware","total","financial","legal","original","international","soft","alive","interested","tall","warm","popular","tiny","top","normal","powerful","silent","religious","impossible","quick","safe","thin","familiar","gray","fresh","physical","individual","willing","crazy","sick","angry","perfect","tired","wild","moral","brown","dangerous","famous","married","terrible","successful","fair","professional","official","obvious","glad","central","chief","effective","light","complete","interesting","thick","proper","involved","responsible","narrow","civil","industrial","dry","yellow","specific","sharp","sudden","direct","following","growing","significant","traditional","slow","previous","vast","surprised","busy","usual","clean","funny","regular","scientific","ordinary","ancient","senior","sweet","future","annual","secret","equal","independent","wonderful","tough","broad","additional","careful","domestic","brief","enormous","commercial","grand","average","sexual","nervous","pale","immediate","critical","proud","like","complex","separate","considerable","still","extra","expensive","guilty","active","mad","asleep","wooden","cool","presidential","apparent","weak","essential","living","pretty","cultural","useful","actual","unusual","daily","potential","wet","solid","lovely","comfortable","formal","outside","massive","sad","corporate","distant","loose","rare","stupid","visible","liberal","flat","pleased","pure","curious","practical","upper","technical","male","appropriate","fat","just","due","mere","handsome","mental","conservative","positive","leading","naked","false","drunk","dirty","friendly","constant","well","used","emotional","internal","odd","historical","female","ill","broken","capable","southern","pleasant","bare","minor","eager","lucky","urban","steady","fiscal","rough","primary","reasonable","typical","inner","favorite","attractive","slight","innocent","limited","straight","pink","excellent","double","dramatic","violent","honest","electric","fellow","substantial","opposite","awful","severe","joint","armed","hungry","remarkable","increased","gentle","illegal","middle","bitter","mass","permanent","increasing","damn","golden","correct","intense","round","northern","proposed","so-called","criminal","healthy","plain","vital","blind","native","intellectual","unknown","extreme","existing","raw","prime","brilliant","sensitive","extraordinary","sufficient","remaining","ultimate","unique","royal","initial","negative","fundamental","nearby","smart","strategic","educational","unlikely","smooth","modest","conventional","giant","scared","cheap","dear","delicate","anxious","valuable","standard","desperate","lonely","diplomatic","firm","wise","principal","congressional","occasional","ugly","vice","radical","faint","working","absolute","intelligent","racial","mutual","silly","fast","musical","tight","complicated","numerous","crucial","square","contemporary","bloody","western","endless","inevitable","environmental","constitutional","rapid","worried","lost","genuine","temporary","democratic","rural","regional","given","painful","literary","chemical","sophisticated","decent","academic","awake","conscious","revolutionary","surprising","elderly","agricultural","psychological","pregnant","live","adequate","superior","grateful","prominent","frightened","remote","overall","stiff","harsh","electronic","spiritual","okay","closed","excited","convinced","long-term","unexpected","dull","evident","civilian","mysterious","romantic","impressive","continuing","exciting","logical","peculiar","exact","widespread","foolish","extensive","evil","continued","confident","generous","legislative","stable","vulnerable","elegant","embarrassed","hostile","efficient","blond","dumb","advanced","defensive","outer","neat","estimated","wealthy","dying","loud","creative","acceptable","unhappy","sheer","competitive","concrete","reluctant","precious","tremendous","burning","precise","uncertain","holy","artificial","vague","ideal","universal","moderate","subtle","mild","peaceful","assistant","invisible","casual","crowded","crude","running","classic","controversial","ridiculous","frequent","grim","accurate","detailed","goddamn","fun","fierce","cruel","incredible","blank","dim","suitable","classical","elaborate","collective","eastern","legitimate","aggressive","rear","administrative","automatic","dependent","ashamed","distinct","fit","clever","brave","ethnic","maximum","relative","primitive","uncomfortable","profound","sacred","biological","identical","furious","loyal","rational","mechanical","mean","naval","noble","ambitious","purple","historic","dominant","suburban","developing","calm","frozen","subsequent","charming","damp","fixed","rigid","offensive","electrical","shy","continuous","urgent","weary","immense","splendid","downtown","uneasy","disappointed","helpless","voluntary","polite","junior","gross","striking","overwhelming","unconscious","steep","outstanding","tender","tragic","costly","miserable","near","useless","welcome","external","helpful","weekly","middle-aged","suspicious","old-fashioned","technological","damned","awkward","visual","organized","ideological","orange","horrible","strict","magnificent","deadly","dusty","mighty","puzzled","bold","global","passing","magic","fond","judicial","missing","definite","changing","rubber","theoretical","satisfied","promising","abstract","excessive","comparable","fatal","distinguished","inadequate","slender","artistic","known","sympathetic","favorable","cheerful","faithful","delighted","unnecessary","sole","cautious","productive","reliable","patient","sensible","desirable","depressed","atomic","able","instant","relevant","alien","spectacular","lesser","swift","comic","enthusiastic","marvelous","experimental","weird","retired","fascinating","content","medieval","inclined","bored","ruling","flying","consistent","organic","alleged","grave","smiling","realistic","amazing","exotic","symbolic","confused","underground","spare","philosophical","vigorous","troubled","shallow","amused","lively","genetic","impatient","brutal","solar","unfair","formidable","tense","unfortunate","minimum","sleeping","secondary","shiny","jealous","insane","gay","vivid","wounded","hurt","intimate","monthly","sour","socialist","worthy","preliminary","colonial","middle-class","alternative","influential","unpleasant","comprehensive","devoted","upset","secure","absurd","neutral","frightening","profitable","fragile","civilized","slim","partial","added","fearful","optimistic","isolated","eternal","vocal","beloved","alert","verbal","rising","skilled","antique","municipal","written","restless","outdoor","governmental","driving","sore","informal","loving","retail","hidden","determined","monetary","convenient","thoughtful","colored","progressive","bizarre","sweeping","fancy","expected","fantastic","editorial","intact","bottom","multiple","well-known","nasty","protective","acute","combined","related","fortunate","earnest","divine","passionate","icy","noisy","vicious","dreadful","apt","boring","unprecedented","decisive","sunny","marked","experienced","disturbing","satisfactory","sober","random","electoral","shocked","deliberate","coming","orderly","surrounding","unwilling","inherent","mixed","naive","dense","hopeless","aesthetic","supreme","encouraging","institutional","solemn","stubborn","required","relaxed","bald","frantic","exclusive","rotten","filthy","flexible","explicit","glorious","lean","ignorant","extended","embarrassing","architectural","mortal","corrupt","hopeful","regulatory","valid","characteristic","tribal","capitalist","diverse","functional","improved","ironic","graceful","unaware","respectable","eligible","lousy","established","postwar","objective","wary","elementary","moving","superb","cute","minimal","meaningful","notable","structural","developed","rolling","fashionable","persistent","distinctive","terrific","thorough","skeptical","secular","chronic","level","everyday","visiting","infinite","short-term","terrorist","youthful","unemployed","forced","liquid","explosive","rude","colorful","renewed","semantic","astonishing","passive","heroic","gleaming","indifferent","vertical","prior","anonymous","absent","customary","mobile","uniform","solitary","probable","amazed","petty","bleak","athletic","tentative","harmless","ample","right-wing","polished","obscure","sincere","dried","intensive","equivalent","convincing","idle","vacant","mature","amusing","competent","ominous","savage","motionless","tropical","blunt","drunken","delicious","lazy","ragged","longtime","nationwide","startling","civic","freezing","muscular","circular","imperial","irrelevant","countless","gloomy","startled","disastrous","skinny","hollow","upward","ethical","underlying","careless","wholesale","abandoned","unfamiliar","mandatory","imaginary","bewildered","annoyed","magnetic","dazzling","lengthy","stern","surgical","clinical","full-time","metropolitan","moist","unlike","doubtful","prosperous","keen","awesome","humble","interior","psychiatric","clumsy","outraged","theatrical","educated","gigantic","scattered","privileged","sleepy","battered","meaningless","predictable","gradual","miniature","radioactive","prospective","aging","destructive","authentic","portable","bearded","balanced","shining","spontaneous","bureaucratic","inferior","sturdy","cynical","exquisite","talented","immune","imaginative","ripe","shared","kind","parliamentary","glowing","frail","astonished","forward","inside","operational","faded","closing","pro","coastal","shrewd","preoccupied","celebrated","wicked","bourgeois","marginal","transparent","dynamic","psychic","plump","coarse","bleeding","striped","eventual","residential","hysterical","pathetic","planned","fake","imminent","sentimental","stunning","worldwide","militant","sizable","representative","incapable","provincial","poetic","injured","tactical","selfish","winning","foul","repeated","novel","dubious","part-time","abrupt","lone","overseas","grey","varied","cooperative","muddy","scheduled","legendary","arrogant","conspicuous","varying","devastating","vulgar","martial","amateur","mathematical","deaf","scarce","specialized","honorable","outrageous","confidential","fallen","goddamned","five-year","feminine","monstrous","brisk","systematic","exhausted","frank","lunar","daring","shadowy","respected","stark","accepted","successive","pending","prolonged","unseen","uniformed","wretched","sullen","arbitrary","drastic","crooked","resulting","intricate","unpredictable","printed","utter","satisfying","delightful","linguistic","shabby","statistical","accessible","prestigious","trivial","waiting","futile","prepared","aged","misleading","cognitive","shocking","childish","elected","magical","forthcoming","exceptional","gifted","stricken","fiery","cardboard","shaky","conflicting","commanding","starving","accustomed","rocky","long-range","floating","sinister","potent","phony","lasting","understandable","curved","barren","lethal","toxic","deserted","ambiguous","notorious","synthetic","worthwhile","imported","intent","reduced","painted","taut","sociological","questionable","crisp","pointed","harmful","horizontal","rival","somber","benign","prevailing","selected","organizational","excess","dedicated","veteran","implicit","prudent","plausible","confusing","smoking","large-scale","subdued","constructive","marital","scarlet","rugged","darkened","untouched","above","matching","covert","communal","sticky","affluent","energetic","stale","controlled","qualified","reminiscent","shut","blonde","handy","ritual","straightforward","terminal","dizzy","sane","twisted","occupied","finished","opposing","sly","depressing","irregular","marine","communist","obscene","wrinkled","unsuccessful","gracious","static","consecutive","reserve","exposed","scholarly","sleek","reckless","oral","comforting","pressing","swollen","viable","carved","obsessed","projected","hideous","unthinkable","mock","susceptible","respective","goddam","downward","memorable","worn","raised","glittering","beneficial","lingering","patriotic","stunned","hairy","worrying","lighted","sexy","abundant","tangled","perpetual","irresistible","terrified","compelling","unmistakable","feeble","uneven","trained","folded","relentless","killed","gorgeous","conservation","serene","eerie","premature","dismal","competing","risky","unacceptable","indirect","witty","muffled","feasible","interstate","heated","uncommon","accidental","queer","innovative","parallel","fried","unnatural","cracked","persuasive","integrated","ongoing","homosexual","sound","fertile","canned","preceding","worldly","onstage","declining","advisory","juvenile","slippery","numb","postal","olive","eccentric","lay","chilly","shrill","ceremonial","registered","boiling","contradictory","irresponsible","then","industrialized","obsolete","rusty","inflationary","split","discreet","intolerable","barefoot","territorial","outspoken","audible","adverse","associate","impending","decorative","luminous","two-year","expanding","unchanged","outstretched","momentary","good-looking","cunning","overnight","sprawling","unbelievable","bland","liable","terrifying","televised","appealing","breathless","alarming","supporting","greasy","affirmative","guiding","homeless","triumphant","rainy","stolen","empirical","timid","provocative","knowledgeable","pragmatic","touching","desired","amiable","attempted","humane","adjacent","superficial","greedy","assorted","elusive","ruthless","lush","soothing","imposing","preferred","lavish","pervasive","managing","sandy","inappropriate","desolate","nude","reassuring","shimmering","first-class","unfinished","insistent","comparative","conceivable","admirable","courageous","aristocratic","meager","subjective","vain","disgusted","dual","towering","responsive","ailing","compact","torn","sortal","entertaining","dreary","metallic","tedious","irrational","immoral","teen-age","interim","jagged","selective","volatile","cozy","unanimous","unlimited","hired","cosmic","indoor","retarded","gold","fabulous","dignified","long-distance","high-school","classified","luxurious","insufficient","pious","incomplete","oblivious","imperialist","stately","lifelong","subordinate","extravagant","intrinsic","unpopular","scant","surplus","radiant","ruined","grotesque","hazardous","disabled","intriguing","worthless","reported","hoarse","utmost","muted","bony","disgusting","monumental","pleasing","sterile","agreeable","three-year","tricky","lucrative","respectful","inexpensive","bulky","troublesome","affectionate","coherent","unreasonable","nineteenth-century","curly","indispensable","nursing","incompetent","governing","alternate","suspected","left-wing","refined","overt","chilling","virtual","devoid","perverse","enduring","outright","overhead","unnoticed","nonprofit","pointless","appalling","dental","chosen","enlightened","robust","commonplace","damaging","conscientious","eloquent","erratic","applied","merry","ardent","flowing","incoming","chaotic","noticeable","pitiful","locked","swelling","definitive","homemade","super","pronounced","kindly","prone","attentive","unstable","unrelated","charitable","armored","unclear","tangible","medium","winding","slick","credible","frustrating","shifting","spacious","day-to-day","surviving","expanded","arid","unwanted","unbearable","hesitant","recognizable","multinational","abdominal","murderous","glossy","mute","working-class","insignificant","ingenious","masculine","blessed","gaunt","miraculous","unconstitutional","parental","rigorous","bodily","impersonal","backward","computerized","four-year","unmarried","wry","resident","luxury","high-level","partisan","powerless","seasonal","self-conscious","triple","onetime","ecological","periodic","racist","exaggerated","facial","erotic","unreal","durable","manual","rounded","concentrated","literal","mystical","stimulating","staggering","tempting","last-minute","erect","feudal","head","emerging","hind","brooding","candid","paranoid","defective","linear","immortal","shattered","unsure","swinging","compatible","ghastly","investigative","rosy","convicted","sensational","committed","makeshift","tolerant","forceful","supernatural","joyous","limp","improper","hanging","sliding","renowned","tattered","nonexistent","supportive","frustrated","undercover","handicapped","apprehensive","plentiful","authoritative","sustained","disappointing","hereditary","photographic","impoverished","ornate","respiratory","substantive","acting","nutritional","unofficial","innumerable","prevalent","dire","menacing","outward","brittle","hasty","sparkling","sled","geographical","therapeutic","melancholy","adolescent","hearty","disturbed","sweaty","poisonous","paid","ineffective","humorous","burly","rebellious","reddish","stout","teenage","eminent","rhythmic","physiological","guaranteed","opaque","folding","fleeting","full-scale","low-income","infectious","stringent","stained","beige","stirring","soaring","glamorous","airborne","improbable","austere","anticipated","designated","oval","restrictive","yearly","precarious","relieved","said","feverish","occupational","holding","speculative","abnormal","challenging","healing","boyish","forbidding","divorced","famed","sluggish","struggling","united","undesirable","steaming","consulting","answering","recreational","accompanying","cramped","journalistic","neighboring","fictional","chopped","phenomenal","bankrupt","illicit","advancing","upcoming","racing","protected","padded","venerable","fuzzy","behavioral","roast","mocking","reactionary","inefficient","packed","sloppy","sparse","foster","revealing","reverse","gaping","blue-collar","thankful","down","unimportant","traveling","corresponding","maternal","autonomous","conceptual","smoky","baked","stuffed","murky","totalitarian","ghostly","seeming","flickering","sensual","clenched","offshore","stinging","oppressive","strained","messy","executive","evolutionary","theological","damaged","unrealistic","rectangular","off","mainstream","benevolent","thirsty","blinding","loaded","applicable","unused","crushed","tan","factual","involuntary","brand-new","akin","scary","modified","mindless","born","feminist","integral","uncanny","aloof","spreading","watery","playful","stocky","wasted","compulsory","indignant","pertinent","incredulous","simultaneous","turbulent","framed","aching","falling","cardiac","trim","silvery","accused","pastoral","barbed","adjoining","inspired","courteous","skillful","majestic","gilded","published","perennial","upright","seasoned","continual","papal","victorious","optical","ecstatic","agonizing","shameful","expressive","inconsistent","insulting","cloudy","defiant","restricted","approaching","aggregate","orthodox","unified","all-out","wooded","nationalist","favored","lofty","assured","smug","earthly","improving","instrumental","stray","clandestine","managerial","animated","intended","flawed","bent","clerical","outgoing","righteous","unspoken","poignant","faulty","defeated","authoritarian","treacherous","catastrophic","refreshing","unidentified","suicidal","sickly","disciplined","meticulous","preferable","trusted","hectic","husky","distraught","select","snowy","ferocious","crumpled","humiliating","divided","crippled","infamous","chic","broke","sovereign","continental","idealistic","first-rate","guarded","learned","nameless","runaway","metaphysical","senseless","boiled","needy","silver","recorded","polar","real-estate","stormy","incomprehensible","wiry","raging","composite","flamboyant","crimson","reproductive","intermediate","ubiquitous","repressive","hefty","listening","good-natured","parochial","stylish","high-tech","flaming","coronary","overweight","bathing","three-day","tidy","beleaguered","manifest","ludicrous","indigenous","adamant","placid","inept","exuberant","stony","salty","seductive","accomplished","impassive","grazing","congenial","misguided","wide-eyed","revised","bass","sonic","budgetary","halfway","ensuing","admiring","palpable","nightly","hooded","best-known","eighteenth-century","dissident","morbid","incumbent","demanding","inexperienced","hazy","revolving","rented","disadvantaged","innate","dietary","minute","cultivated","sealed","contemptuous","rhetorical","conciliatory","articulate","jobless","macho","forgotten","lifeless","proven","latent","secretive","perilous","token","graphic","alcoholic","overdue","permissible","shattering","preventive","illiterate","back","atmospheric","thermal","quaint","negotiated","preposterous","temporal","restrained","triangular","mayoral","spatial","heady","biblical","fitting","pessimistic","mammoth","allied","failed","intuitive","nagging","tidal","angular","speechless","finishing","protracted","watchful","businesslike","automated","versatile","booming","pouring","misty","deceptive","sunken","singular","suspended","unworthy","immigrant","expressionless","airy","mournful","neurotic","cubic","unauthorized","economical","fund-raising","captive","blatant","far-reaching","subversive","imperfect","jolly","inaccurate","resentful","strenuous","suffering","hardened","malicious","unjust","perceptive","newborn","promised","differing","virgin","alarmed","grassy","frivolous","apologetic","wasteful","endangered","unarmed","adept","unavoidable","approved","trembling","stuck","high-ranking","crushing","prescribed","dependable","fragrant","expansive","unfriendly","covered","bemused","digital","probing","sloping","man-made","festive","unilateral","unmarked","bipartisan","statewide","burgeoning","devout","sickening","mediocre","adventurous","elevated","suggestive","accountable","virtuous","lame","heavenly","bruised","unbroken","irritable","affected","inconceivable","sometime","vile","baggy","timely","glistening","imagined","unprepared","unresolved","windy","humanitarian","overriding","detached","annoying","narrative","interminable","appalled","penal","unsatisfactory","instinctive","variable","cumulative","obedient","deficient","colossal","unaffected","extinct","routine","microscopic","compassionate","nominal","forlorn","distorted","mistaken","enclosed","infected","fervent","analogous","frigid","instructive","appointed","one-way","gnarled","problematic","sardonic","two-hour","hypothetical","prompt","anguished","electromagnetic","sensuous","homely","beaten","malignant","rotting","concealed","peripheral","creaking","impeccable","khaki","grinning","irreversible","rampant","wondrous","inward","manufactured","grisly","cooked","discriminatory","cerebral","knowing","auxiliary","operative","losing","genial","phonetic","ecclesiastical","sarcastic","incorrect","ruddy","well-to-do","inexplicable","unreliable","developmental","woolen","agitated","lyrical","consequent","calculated","molecular","pompous","present-day","shaggy","even","inhuman","sublime","diagnostic","manly","raucous","balding","after","bilateral","mounted","blackened","assembled","separated","gaudy","evangelical","darling","juicy","impotent","receptive","irritating","pulmonary","dazed","cross-country","unavailable","parked","habitual","lexical","lowered","unwise","planetary","throbbing","enigmatic","superstitious","threatening","manned","childlike","sporting","right-hand","adult","reflective","white-haired","discernible","celestial","prodigious","translucent","equitable","epic","frayed","arduous","flimsy","penetrating","howling","disparate","alike","all-time","deformed","comical","inert","procedural","resistant","vibrant","geographic","wistful","specified","rightful","spirited","unborn","enjoyable","regal","cumbersome","burned","frenzied","gubernatorial","deteriorating","haunted","evasive","neglected","anthropological","inescapable","clear-cut","visionary","bloated","accumulated","agrarian","pained","dwindling","heightened","gray-haired","distressing","grinding","insecure","archaic","piercing","fluent","leisurely","giddy","slimy","oncoming","short-lived","spinal","wholesome","unanswered","illegitimate","staunch","two-day","rumpled","speedy","soaked","rocking","invaluable","gallant","tacit","finite","inviting","sporadic","powdered","cheery","volcanic","optional","mischievous","flowered","contagious","automotive","inflated","mythic","analytical","infrared","two-week","binding","ancestral","dissatisfied","upstate","veritable","unaccustomed","oily","monotonous","seated","feeding","fluorescent","undue","impassioned","picturesque","vocational","tranquil","tumultuous","rustic","patterned","two-story","pagan","flash","playing","exhilarating","maiden","three-dimensional","mythical","thriving","drab","black-and-white","honorary","dingy","founding","imperative","indistinguishable","lightweight","avid","dreamy","everlasting","obsessive","tional","homogeneous","inner-city","changed","tame","colorless","haggard","implacable","altered","unequal","focal","perceptual","literate","priceless","diminishing","harmonious","dark-haired","fatty","squat","undecided","banal","fruitful","pioneering","innocuous","cordial","rewarding","unsafe","maritime","overcrowded","timeless","fledgling","nostalgic","abreast","one-time","humid","astronomical","one-man","deepening","blazing","fleshy","dishonest","succeeding","qualitative","needless","rickety","joyful","stated","ambivalent","hybrid","six-month","limiting","workable","sleepless","unpaid","mundane","flashy","stagnant","bumper","recurring","sinful","immaculate","synonymous","measured","thrilling","long-standing","unruly","bewildering","unfit","edgy","numerical","sumptuous","fragmented","puffy","elastic","high-pitched","momentous","woven","unsteady","unnamed","cosmetic","snap","impenetrable","floral","waving","promotional","tenuous","lonesome","embroidered","strident","cherished","aghast","fundamentalist","white-collar","afloat","disruptive","law-enforcement","gathered","indefinite","intervening","publicized","geometric","disciplinary","descriptive","wavy","edible","disgruntled","obligatory","untrue","amber","snug","resolute","awed","simplistic","grandiose","crippling","high-speed","mounting","glaring","small-town","cavernous","hushed","wage-price","demographic","diseased","unpublished","causal","defenseless","sheltered","dormant","compulsive","loved","willful","truthful","punitive","disposable","ajar","drowsy","statutory","tanned","proprietary","informed","unheard","decision-making","transient","unlawful","dour","negligible","underwater","optimum","illusory","imaginable","borrowed","divergent","looking","exempt","contentious","forbidden","cowardly","masked","crazed","silken","parched","furry","wandering","insensitive","over-all","elated","waxed","veiled","envious","insidious","scrawny","unwarranted","lithe","abrasive","pretentious","far-off","murdered","deft","prickly","musty","shapeless","incongruous","gruesome","honored","perceived","grieving","unspecified","dizzying","privy","noteworthy","charred","median","fearless","twisting","unattractive","flawless","welcoming","flushed","hardy","glum","scenic","devious","recurrent","distasteful","jubilant","ballistic","hilarious","naughty","bustling","discarded","pristine","exemplary","fading","complacent","incessant","engaging","twentieth-century","protectionist","rudimentary","traumatic","steamy","emphatic","hard-line","teeming","generating","stuffy","connecting","stationary","genteel","populist","supple","hateful","retrospective","glazed","lawful","arched","tiresome","lucid","reserved","pivotal","grimy","surly","anti-Soviet","contrary","quarterly","old-time","residual","spiral","decaying","threatened","docile","appreciative","jovial","fascist","worrisome","red-haired","undisturbed","creamy","well-dressed","serial","existential","mountainous","pastel","self-sufficient","spoken","express","tasty","maroon","infrequent","deceased","full-fledged","transitional","leafy","gravitational","furtive","prophetic","nasal","unwelcome","troubling","immobile","merciful","uncontrollable","impartial","unfavorable","attendant","associated","high-rise","vascular","fateful","concerted","rash","stubby","paramount","impulsive","fraudulent","drooping","reciprocal","usable","fast-food","touchy","astute","oversized","mottled","slack","fruitless","unhealthy","decorated","shady","shaped","fanciful","quivering","charismatic","sordid","oppressed","inaccessible","fastidious","brazen","gloved","crumbling","underdeveloped","scarred","rambling","incipient","remedial","derelict","incompatible","fanatical","smoked","secondhand","hypnotic","failing","marching","flattened","paradoxical","unskilled","esthetic","tolerable","pungent","substitute","soggy","terse","tiring","fictitious","manageable","inventive","haughty","normative","premier","grudging","vested","exhausting","cross-legged","self-evident","away","horrified","prolific","incoherent","quantitative","full-length","year-round","unkind","provisional","exterior","brash","inconclusive","landed","breathtaking","acrid","noted","resultant","long-time","resounding","lovable","hypocritical","plush","foggy","acknowledged","idiotic","tracking","ceramic","taxable","enterprising","flashing","wee","barbaric","deafening","orbital","lurid","dated","hated","buoyant","mating","pictorial","overlapping","lax","archetypal","manic","limitless","puzzling","condescending","hapless","meek","faceless","uncommitted","horrid","greenish","unorthodox","unending","accelerated","day-care","undeniable","bushy","searing","fearsome","unharmed","divisive","overpowering","diving","telling","determining","uptight","cast","enlarged","ebullient","disagreeable","insatiable","grown-up","demented","puffing","inconvenient","uncontrolled","inland","repulsive","unintelligible","blue-eyed","pallid","nonviolent","dilapidated","unyielding","astounded","marvellous","low-cost","purposeful","courtly","predominant","conversational","erroneous","resourceful","converted","disconcerting","oblique","dreaded","indicative","silky","six-year","front-page","biting","flowering","sunlit","licensed","unspeakable","adrift","awash","identifiable","girlish","zealous","spooky","uncompromising","deserving","driven","certified","unlucky","temperate","budding","impractical","public-relations","inflexible","sensory","pornographic","outlandish","resonant","belligerent","wan","leftover","spotted","soybean","easygoing","vengeful","proportional","inaugural","dank","screaming","heterosexual","sliced","year-old","considerate","thunderous","distressed","warring","assertive","foreseeable","psychotic","intermittent","anti-Communist","generalized","unable","molten","excruciating","illustrious","voluminous","offending","trustworthy","grating","laughing","one-year","industrious","uninterrupted","dashing","speaking","metabolic","flattering","one-sided","ineffectual","primal","digestive","taped","floppy","jaunty","practiced","walled","hospitable","dutiful","melodramatic","intestinal","cluttered","conclusive","complementary","unprotected","buzzing","attributable","tasteless","forthright","wily","hourly","delayed","sweating","affable","studied","chubby","thyroid","chilled","conducive","childless","faltering","authorized","buried","land-based","observable","hurried","curving","dismayed","pernicious","upturned","believable","questioning","syndicated","pharmaceutical","high-risk","resigned","discrete","likable","imprisoned","cocky","outdated","autocratic","ablaze","askew","grammatical","wintry","incidental","matter-of-fact","disputed","exorbitant","low-level","sodden","skeletal","disproportionate","soiled","cellular","ephemeral","perfunctory","inconsequential","flourishing","intentional","two-way","elemental","whispered","four-day","stinking","informative","tenacious","outlying","virulent","horrendous","horrifying","burnt","longstanding","senile","unmoving","deprived","interpersonal","intimidating","posh","dainty","portly","nondescript","inquisitive","exiled","capricious","scandalous","severed","debilitating","widowed","horny","sallow","up-to-date","self-contained","carefree","boisterous","coordinated","anti-Semitic","superfluous","metric","expressed","enchanting","disorderly","paternal","wanton","frightful","free-lance","extremist","lined","scornful","inseparable","obese","ponderous","imperious","indistinct","adrenal","belated","rippling","valiant","livid","mystic","cracking","subterranean","invading","rusted","esoteric","red-faced","segregated","lanky","departmental","allergic","predatory","enforced","anti-inflation","implied","flagrant","best-selling","haphazard","trailing","seedy","real-life","unannounced","utilitarian","roving","despairing","immature","simulated","embattled","poisoned","patronizing","baffled","centralized","weathered","weeping","mutilated","painstaking","tax-exempt","socioeconomic","tearful","stringy","projecting","low-key","single-minded","shadowed","vehement","darn","fluffy","apocalyptic","completed","intelligible","furnished","elongated","worsening","eclectic","bacterial","earthy","sagging","wide-ranging","face-to-face","settled","dogmatic","anti","secluded","baffling","coy","pathological","echoing","bridal","autobiographical","instantaneous","ornamental","satirical","voluptuous","movable","kinetic","merciless","tireless","three-month","unconcerned","impromptu","turning","follow-up","retaliatory","arcane","waterproof","justifiable","glassy","unearthly","shuttered","inverted","bogus","petrified","simmering","guided","gritty","widening","generic","pretrial","returning","boundless","swirling","northeastern","swell","tive","minuscule","estranged","upbeat","explanatory","repetitive","repressed","vindictive","shrinking","canny","little-known","hydraulic","unrelenting","looming","supersonic","justified","lukewarm","unmoved","blurred","double-breasted","sanitary","unforgettable","diligent","unconventional","ashen","wordless","stainless","inlaid","irritated","spotless","pudgy","yellowish","lateral","adopted","lowly","obnoxious","utopian","called","unimaginable","hairless","foregoing","opulent","garish","nocturnal","rousing","unexplained","cosmopolitan","milky","medium-sized","all-night","bloodshot","rueful","hard-working","crafty","familial","iced","violet","arctic","ceaseless","exasperated","warped","aquatic","gruff","terrestrial","contrasting","egalitarian","needful","spent","untrained","escalating","liberated","long-haired","abortive","syntactic","consummate","lumpy","spoiled","ten-year-old","talkative","whimsical","weighty","audio","inflammatory","deplorable","spicy","corrugated","morose","sobering","southwestern","three-year-old","methodical","prehistoric","carpeted","smelly","processed","overheated","interstellar","agile","approximate","sadistic","living-room","irate","smashed","frontal","venereal","indiscriminate","suggested","cultured","creeping","recognized","toothless","handmade","mellow","fetal","disinterested","gratifying","trusting","small-scale","intravenous","crashing","exhaustive","afire","clammy","sleazy","florid","heartless","transcendent","restored","demonic","abusive","avowed","shrunken","objectionable","tailored","arms-control","listless","polluted","palatable","funded","elective","entrenched","classy","operatic","daunting","roaring","preferential","languid","three-hour","virile","inspiring","enhanced","scrupulous","bottomless","ginger","wispy","advantageous","rapt","umbilical","uphill","ordered","enraged","detrimental","curt","exalted","hard-pressed","intangible","fussy","forgiving","facile","populous","condemned","mashed","hard-boiled","introductory","rowdy","switching","perplexing","spilled","southeastern","undulating","fractured","inherited","inscrutable","measurable","stunted","hormonal","stylized","hierarchical","air-conditioned","aimless","subsidized","paying","symmetrical","nomadic","cloudless","reigning","thatched","perceptible","anesthetic","anti-American","miscellaneous","homesick","preparatory","seven-year","big-city","decadent","searching","all-important","inanimate","senatorial","diminutive","soft-spoken","contingent","dusky","smashing","precipitous","bulging","standardized","biographical","restive","indecent","upper-class","ecumenical","interchangeable","lumbering","fascinated","untidy","indulgent","leaden","wanted","endemic","doomed","wanting","receiving","engaged","unparalleled","abbreviated","malevolent","wishful","carnival","world-wide","protruding","resplendent","stranded","structured","biased","frosty","northwestern","viral","mindful","paved","indeterminate","painless","second-floor","geological","permissive","downhill","unsuspecting","expectant","fabled","jittery","windowless","evocative","unsolved","disoriented","monastic","soluble","misshapen","antiquated","repugnant","non-Communist","retiring","shaded","combative","high-powered","resilient","antagonistic","starched","vice-presidential","speckled","lopsided","bluish","late-night","prim","unrestrained","almighty","tyrannical","unkempt","menstrual","bleached","overgrown","idiosyncratic","shoddy","hallowed","trying","halting","princely","drugged","gratuitous","descending","fatherly","avant-garde","laborious","pinched","disguised","caustic","bespectacled","handwritten","goodly","itinerant","cryptic","undisclosed","affordable","outmoded","expedient","moody","tepid","firsthand","digging","elitist","observed","chartered","slain","five-day","unimpressed","tactful","idyllic","prostrate","ramshackle","expert","deferred","undistinguished","prized","transatlantic","crystalline","tacky","haunting","nutritious","bereft","turquoise","time-consuming","sanguine","culinary","fraught","precocious","assigned","scrambled","advisable","nationalistic","long-awaited","unwrapped","unchallenged","circumstantial","pleasurable","compressed","humanistic","unforeseen","diversified","frenetic","disapproving","proletarian","conspiratorial","featureless","going","commendable","no-nonsense","chipped","surreal","salient","pissed","insurmountable","backstage","contented","indebted","adoring","one-room","prewar","potted","accelerating","thorny","possessive","abiding","ever-increasing","bloodless","high-technology","counterproductive","attracting","entrepreneurial","cooling","unoccupied","craggy","leathery","degenerate","additive","weakened","quilted","untold","incandescent","intractable","middle-income","abject","self-made","gaseous","anal","displaced","unabashed","immutable","fluttering","ten-year","bearable","stamped","darkening","beefy","petite","charging","high-quality","left-hand","age-old","checkered","stupendous","priestly","loath","endearing","exacting","correctional","freak","sneaky","disgraceful","unholy","oriental","wayward","societal","hard-core","bilingual","flipping","staid","paramilitary","heartfelt","shapely","kosher","heedless","incurable","controlling","in-house","choral","manicured","cardinal","inconspicuous","steely","vanishing","misplaced","centre-fire","enchanted","unfounded","wrecked","womanly","delirious","deposed","panicky","differential","tawny","articulated","coded","wide-open","unregulated","lenient","feathered","simplified","beguiling","sectarian","producing","tiled","inorganic","frosted","lusty","scented","rotating","grievous","dissimilar","salaried","unequivocal","strangled","grubby","alluring","downcast","restraining","unjustified","contaminated","lacy","cinematic","second-class","splintered","adorable","derisive","state-owned","requisite","fleeing","uncomplicated","motherly","inter","high-heeled","climatic","republican","unqualified","leveraged","intercontinental","uncharacteristic","compositional","unwritten","patriarchal","brusque","unresponsive","replete","corrective","reflected","scraping","doctoral","premium","deductible","alternating","amorous","overjoyed","recalcitrant","presumptuous","vaulted","declared","inexorable","groggy","diminished","restful","retroactive","presumed","monolithic","curtained","tortured","ground","trendy","brassy","prosaic","inactive","chaste","bumpy","aggrieved","corny","centrist","trapped","noxious","jerky","concomitant","withholding","poorly","stolid","unguarded","methodological","primordial","retreating","telescopic","sidelong","off-duty","pleated","dissenting","agreed","double-action","optimal","plaintive","banned","kindred","quintessential","impervious","jumping","disenchanted","observant","congested","second-rate","reasoned","extrinsic","infantile","transitory","coveted","small-time","doctrinal","incomparable","jaded","special-interest","sociable","shameless","coloured","ascending","fraternal","queasy","wont","exhilarated","salted","disquieting","listed","unchanging","nine-year-old","unrestricted","uppermost","reputable","dummy","skimpy","crusty","corrosive","bubbling","decrepit","unsuitable","snarling","destitute","illuminating","systemic","material","unwashed","rushing","dialectical","jeweled","attached","liberating","judicious","errant","vanished","worn-out","erstwhile","uninformed","twelve-year-old","longterm","petulant","twin","self-righteous","afflicted","snappy","tantamount","sworn","unethical","drained","hydroelectric","perplexed","logistical","concentric","unifying","lunatic","invincible","diffident","inexhaustible","discouraging","dreamlike","artful","rolled","suppressed","secretarial","smoldering","redundant","forensic","million-dollar","self-styled","earned","weightless","signed","compensatory","glacial","unmanned","stalwart","funky","intensified","uninterested","submerged","urbane","glib","ascetic","contractual","warlike","high-priced","diagonal","cylindrical","gargantuan","illuminated","unconditional","hulking","supplementary","dictatorial","puny","sedate","moonlit","eight-year-old","gullible","counterfeit","alienated","spinning","analytic","nimble","adaptive","individualistic","numbered","blissful","insolent","supplemental","delectable","inordinate","unbalanced","tormented","unchecked","aspiring","punishing","self-serving","crossed","discretionary","box-office","snow-covered","improvised","squalid","orphaned","grizzled","unsmiling","disappearing","affiliated","readable","blocking","bullish","contending","burned-out","bloodied","subsidiary","complimentary","unclean","scanty","uprooted","farfetched","solicitous","regulated","threadbare","choppy","ever-present","negligent","nonstop","one-day","wild-eyed","infuriating","vivacious","abominable","wrought","inaudible","braided","transcendental","desultory","climactic","appellate","interlocking","submissive","unmatched","dapper","demeaning","adaptable","well-meaning","lustrous","tax-free","ungrateful","gentlemanly","missed","loathsome","incalculable","blistering","amenable","tremulous","massed","nonpartisan","unsettled","three-story","succulent","trite","masterful","reticent","unsettling","proverbial","strapping","spurious","invulnerable","paltry","embryonic","repeating","neural","sultry","metaphorical","foreign-policy","linked","pubic","beaming","ministerial","phantom","quizzical","hilly","cold-blooded","gregarious","three-piece","untroubled","bisexual","pensive","unpretentious","exploratory","unscathed","irrepressible","pelvic","newfound","starry","corned","overworked","illogical","unfaithful","interrelated","saintly","overcast","connected","ungainly","organizing","carnal","philosophic","nationalized","fickle","ultraviolet","crass","undeveloped","unprofitable","sheepish","archaeological","out-of-town","balmy","spongy","infallible","callous","scathing","rheumatic","audacious","participating","swarthy","hand-held","comatose","modernist","stellar","antinuclear","delinquent","time-honored","presiding","relaxing","high-pressure","impetuous","hypodermic","fringed","favourite","unscrupulous","inspirational","mystified","wobbly","intrepid","deferential","burdensome","stored","supervisory","seventeenth-century","six-day","interdependent","updated","all-powerful","unitary","stand-up","laconic","penniless","steadfast","dogged","scholastic","convertible","mingled","sorrowful","symptomatic","stylistic","well-intentioned","consuming","sketchy","weakening","generative","atrocious","first-quarter","irrevocable","charged","stoned","dividing","apathetic","debatable","uncomprehending","overhanging","galloping","kinky","uncritical","suave","undisputed","spiky","inarticulate","extracurricular","guttural","impressed","departing","yellowed","discontented","adroit","high-fiber","second-hand","blinking","formless","unsavory","new-found","withered","collected","menial","unobserved","flabby","afterward","vanquished","stained-glass","hour-long","bittersweet","invalid","incriminating","commensurate","all-American","assumed","tried","cursory","absorbing","clearing","confirmed","stressful","depleted","eight-year","participatory","stripped","concave","regrettable","fortified","effortless","regressive","irreverent","collegiate","defunct","grainy","inhospitable","gripping","grizzly","restoring","arterial","busted","indomitable","demure","rabid","headlong","blue-green","bound","breezy","materialistic","uneducated","scruffy","cohesive","full-blown","cranky","motivated","mauve","hardworking","melodic","genital","decorous","comely","rife","purported","hurtful","six-foot","macabre","odious","convulsive","well-trained","heterogeneous","curled","pearly","spindly","latter-day","innermost","clipped","checked","masterly","laughable","naturalistic","tinkling","impudent","fitful","illustrated","speeding","roasted","in-depth","helluva","vigilant","empty-handed","forged","wrought-iron","disgraced","agonized","infirm","preserving","tasteful","onerous","shredded","impregnable","slanted","tainted","opened","first-time","machine-gun","bottled","seismic","fetid","saturated","insubstantial","full-page","aromatic","stingy","promiscuous","unlit","regimental","spellbound","streamlined","bereaved","ruffled","creepy","treasured","ensconced","one-party","well-educated","pert","mercantile","all-purpose","voracious","tortuous","despised","unadorned","offhand","qualifying","manipulative","indelible","well-established","revolting","ethereal","roasting","prohibitive","domed","whipped","overstuffed","garrulous","skittish","revived","heartening","jumpy","grilled","melted","unfocused","spectral","unproductive","top-level","life-size","three-way","negotiable","disloyal","turn-of-the-century","four-hour","unopened","devilish","amorphous","antiseptic","sharpened","primeval","unrecognizable","ineligible","expendable","deathly","auspicious","insoluble","inimical","unquestioned","far-flung","medicinal","deep-seated","formative","iridescent","fragmentary","distinguishable","auburn","closed-circuit","emeritus","third-floor","hazel","tumbling","departed","obstinate","portentous","quixotic","scorched","adjustable","winged","intrusive","taxing","high-ceilinged","barbarous","decreasing","sleeveless","unattended","tight-lipped","concluding","unobtrusive","starved","quirky","big-time","sooty","copious","stalled","scriptural","unconvincing","earthen","throaty","august","extant","sexist","exultant","cancerous","psychedelic","yielding","matched","chunky","unfathomable","concise","admitting","knitted","projective","euphoric","garbled","divisional","despondent","recommended","passable","vegetarian","indefatigable","irreparable","feisty","untenable","contrite","angelic","reputed","untimely","dejected","appreciable","remembered","hellish","rear-view","open-air","ill-fated","nonpolitical","factional","separatist","contributing","post-war","uneventful","metaphoric","unsound","unwitting","venomous","harried","engraved","collapsing","reformist","thematic","inclusive","cheering","springy","obliging","contemplative","unbridled","state-run","reflex","allegorical","geopolitical","disembodied","issuing","bountiful","alright","overbearing","muddled","congenital","distinguishing","absorbed","tart","french","autumnal","verifiable","grueling","crackling","aft","punishable","freckled","indestructible","imprecise","hard-nosed","thoughtless","through","proficient","pent-up","never-ending","hunted","defensible","arresting","across-the-board","spotty","orchestral","undefined","stacked","implausible","antitank","unwary","inflamed","sacrificial","oil-producing","leaky","mint","chronological","conquering","jumbo","three-week","addictive","uninhibited","substandard","contracting","degenerative","triumphal","flowery","cardiovascular","shaken","undefeated","unassuming","luscious","unperturbed","gleeful","sentencing","brawny","perfumed","mild-mannered","healthful","left-handed","rancid","well-defined","unmanageable","drowning","clinging","anachronistic","revered","enriched","capitalistic","good-by","invigorating","practicing","unsold","long-legged","unruffled","aboriginal","inane","bedraggled","early-morning","run-down","straight-backed","reverent","acquired","bestselling","top-secret","woolly","foolhardy","sticking","blue-black","impassable","overcome","coiled","front-line","tinted","acquisitive","slatted","octagonal","receding","investing","doctrinaire","all-white","caring","prejudiced","slow-moving","circulating","science-fiction","shortsighted","disaffected","lawless","chastened","lewd","rubbery","foaming","unsympathetic","ladylike","betrayed","neurological","shouting","good-sized","electrostatic","untoward","flabbergasted","citywide","unanticipated","knotted","whitewashed","year-end","enticing","migratory","multicolored","hashish","ascorbic","topless","heathen","spherical","filmy","deviant","centennial","proportionate","instructional","contrived","savvy","over-the-counter","fast-moving","measuring","uptown","compliant","favourable","unforgivable","undamaged","psychoanalytic","gebling","bubbly","ready-made","caged","ostentatious","superhuman","busing","cream-colored","self-destructive","ostensible","cobbled","whirling","released","showy","baleful","red-hot","named","monogamous","fallow","disdainful","cyclical","long-running","pitiless","diffuse","omnipresent","mossy","cutting","astounding","lyric","dark-blue","unsophisticated","indigent","coincidental","imperceptible","veterinary","coercive","multilateral","ageless","law-abiding","functioning","beneficent","crawling","overturned","steamed","comprehensible","oil-rich","undetected","ribbed","nautical","textured","fast-growing","nauseous","vaunted","paralyzed","maimed","short-range","impure","unintended","practicable","intermediate-range","unfulfilled","behind-the-scenes","backhand","voluble","goofy","apolitical","contraceptive","waning","blasted","sundry","profane","binary","rock-and-roll","ruinous","open-ended","next-door","withering","conical","flustered","decided","able-bodied","round-trip","decreased","half-empty","sponsored","riotous","stereotyped","five-minute","irreplaceable","harrowing","uninteresting","salutary","frugal","disjointed","cupped","freshwater","shaven","ravenous","bulbous","stepped-up","swaying","two-room","valued","planted","bright-eyed","unreadable","trucking","infatuated","dysfunctional","pinkish","futuristic","airtight","unseemly","sizzling","mercurial","conic","unfettered","undisciplined","unrecognized","well-publicized","income-tax","self-appointed","ice-cold","biochemical","contemptible","barefooted","droll","mythological","tree-lined","rearing","luxuriant","heartbreaking","tufted","well-organized","selfless","world-class","unwieldy","contested","rasping","downright","ingratiating","self-proclaimed","parasitic","graying","reformed","cautionary","untested","beaded","maniacal","eucalyptus","pliable","air-conditioning","moot","traceable","anti-abortion","antisocial","reprehensible","self-imposed","yellowing","teasing","porous","ersatz","unwavering","untouchable","underprivileged","auditory","escaping","subservient","unspoiled","anterior","fatuous","lordly","infernal","bouncing","taboo","orthopedic","spiteful","surging","nuts","esteemed","outlawed","pushy","displeased","self-confident","attainable","bowed","cast-iron","despicable","unconvinced","famished","coed","bygone","nonaligned","sectional","typed","squeaky","disparaging","cut-rate","heart-shaped","offbeat","velvety","well-worn","upsetting","leery","long-lost","horse-drawn","puritanical","payable","fertilized","predicted","allowable","peaceable","soundless","marshy","discordant","intoxicating","concurrent","uncut","tantalizing","pedagogical","accursed","two-man","connective","hawkish","ripped","cleared","double-digit","unencumbered","yawning","manifold","stopped","untreated","subliminal","grayish","gory","upper-middle-class","avenging","self-fulfilling","equatorial","saucy","barred","arch","midwestern","blue-gray","tarnished","leafless","incisive","unearned","botanical","feline","extraneous","prep","intransigent","change-minimizing","insurgent","acrimonious","thermonuclear","blue-chip","crummy","acoustic","oversize","fated","galactic","cantankerous","ill-advised","detectable","lower-class","sacrosanct","palatial","conditional","insulated","step-by-step","nebulous","two-dimensional","well-heeled","bronchial","subatomic","semifinal","first-year","dark-eyed","tinny","attacking","indecisive","anatomical","brotherly","blooming","sinuous","meditative","socalled","rheumatoid","received","bleary","half-naked","leaded","woody","averse","shuddering","door-to-door","heretical","suspect","untapped","ravaged","decentralized","rutted","ineffable","intolerant","mechanized","fortuitous","equestrian","seven-year-old","darting","consoling","modern-day","ground-floor","emblematic","lurking","two-year-old","purplish","disorganized","vaudeville","circulatory","eight-hour","presentable","anarchic","unsatisfied","labored","maudlin","trampled","gibberish","unaccountable","sedentary","heavy-duty","thrilled","tutoring","self-centered","do-it-yourself","inquiring","uncaring","disillusioned","bloodstained","surface-to-air","consular","subconscious","four-year-old","collaborative","terraced","figurative","sinewy","horn-rimmed","impertinent","hit-and-run","standby","medium-size","peremptory","incremental","first-aid","dyed","centrifugal","omnipotent","lascivious","two-month","unionized","discredited","mass-produced","feathery","self-indulgent","liturgical","enviable","fifteen-year-old","buxom","abashed","urinary","newsworthy","flailing","beastly","undiscovered","strong-willed","prenatal","brownish","announced","flaky","washed","nightmarish","broad-shouldered","short-sleeved","two-bit","self-assured","whitish","suffocating","black-haired","full-size","self-help","created","uninhabited","smokeless","no-fault","unfashionable","mushy","forested","adhesive","creased","insufferable","down-to-earth","trifling","landless","disreputable","self-effacing","sporty","confined","adoptive","monogrammed","motley","duplicate","silver-haired","rejected","undifferentiated","blasphemous","institutionalized","blue-and-white","hip","winsome","button-down","discerning","abused","clean-cut","bracing","self-supporting","unsupported","premarital","flattered","studious","repetitious","marketable","anemic","meaty","airless","unhurried","galvanized","feal","peace-keeping","rapacious","bulletproof","well-placed","helmeted","packaged","court-ordered","aggravated","gastrointestinal","hand-to-hand","sixteen-year-old","fretful","fourth-quarter","conquered","satiric","nutty","befuddled","humorless","pitched","burnished","mirrored","fishy","fluted","conditioned","military-industrial","one-story","barbarian","branching","dynastic","unthinking","unconscionable","hunched","post-World","capital","putative","incendiary","shaving","topical","self-satisfied","farcical","narcissistic","kneeling","born-again","old-line","amateurish","ill-fitting","scaly","unpainted","eroding"]),Dt}var jt={},kn;function nl(){return kn||(kn=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.default=["man","world","hand","room","face","thing","place","door","woman","house","money","father","government","country","mother","water","state","family","voice","fact","moment","power","city","business","war","school","system","car","number","office","point","body","wife","air","mind","girl","home","company","table","group","boy","problem","bed","death","hair","child","sense","job","light","question","idea","law","word","party","food","floor","book","reason","story","son","heart","friend","interest","right","town","history","land","program","game","control","matter","policy","oil","window","nation","position","ground","blood","action","wall","street","husband","fire","mouth","arm","sound","service","chance","information","price","building","road","paper","court","attention","space","trouble","form","society","art","market","force","effect","nature","chair","period","order","television","president","tax","field","glass","thought","industry","process","phone","plan","center","truth","couple","decision","change","eye","campaign","issue","situation","effort","report","sun","experience","peace","letter","level","energy","role","development","result","evidence","meeting","smile","support","baby","team","show","community","brother","picture","kitchen","production","press","study","daughter","director","dinner","class","defense","piece","record","desk","stage","earth","movement","future","board","security","sea","horse","language","public","church","course","bill","river","coffee","wind","bank","corner","committee","pain","help","answer","subject","hospital","film","economy","trade","feeling","member","apartment","ship","silence","seat","gold","education","leader","pressure","doctor","shoulder","sight","scene","figure","crowd","fear","telephone","labor","success","population","style","station","value","sky","growth","foot","radio","sign","strength","capital","neck","college","budget","breath","choice","direction","guy","agreement","speech","skin","will","amount","plane","practice","marriage","audience","movie","gun","living","hall","concern","income","quality","dog","cause","hotel","race","difference","stone","box","army","trip","distance","attack","chairman","election","presence","computer","science","color","theory","spring","machine","purpose","organization","material","image","tree","surface","officer","administration","act","statement","battle","page","suit","lady","play","stock","list","freedom","bar","relationship","farm","authority","student","conference","ball","structure","nose","plant","career","wood","basis","deal","source","chest","message","stuff","middle","sister","drink","majority","sex","store","trial","character","boat","union","animal","ice","front","firm","heat","hope","rock","weight","disease","spirit","memory","king","response","manner","opinion","operation","increase","lawyer","expression","kid","bag","department","crime","train","executive","aid","dream","beginning","rain","prison","conversation","shirt","lunch","possibility","pleasure","management","danger","rule","throat","wine","behavior","return","hat","surprise","snow","property","flight","training","ability","project","camp","range","approach","agency","treatment","reality","village","bottle","attempt","crisis","drug","violence","inflation","enemy","responsibility","opposition","newspaper","victory","dress","condition","darkness","opportunity","account","degree","pocket","performance","manager","visit","threat","failure","brain","driver","charge","beer","coat","shot","metal","activity","influence","intelligence","bit","official","existence","example","truck","note","construction","shape","event","screen","faith","safety","path","culture","chief","relief","grass","contract","product","investment","weather","soul","murder","bedroom","magazine","model","cup","leg","traffic","writer","beauty","song","share","cancer","patient","credit","club","argument","speed","quarter","design","desire","vision","candidate","bottom","pattern","date","finger","teacher","tea","section","article","flesh","island","balance","spot","meaning","technology","crew","proposal","leadership","concept","object","impact","guard","analysis","birth","shop","knife","advantage","generation","appearance","variety","anger","religion","reaction","fight","star","exchange","agent","investigation","milk","judge","silver","region","steel","ear","sugar","strike","youth","hole","thinking","attitude","supply","start","jacket","jury","taste","secretary","mountain","confidence","master","artist","spokesman","demand","cigarette","track","captain","network","whole","university","conflict","noise","smoke","commission","mirror","accident","plastic","garden","debate","interview","command","tradition","protection","dust","watch","lead","solution","measure","motion","discussion","mission","opening","respect","extent","struggle","goal","tongue","moon","author","iron","breakfast","competition","cover","legislation","environment","sake","justice","fuel","hill","key","length","shock","band","version","contact","engine","settlement","mistake","restaurant","revolution","estate","camera","beach","post","pool","fashion","football","border","touch","laughter","title","background","principle","strategy","roof","forest","philosophy","entrance","pause","doubt","bird","tape","belief","card","ring","occasion","wheel","capacity","cat","collection","passage","writing","bridge","owner","novel","pride","damage","contrast","judgment","gift","division","professor","bathroom","plate","explanation","smell","district","park","wave","player","present","theater","atmosphere","emergency","leather","impression","painting","neighborhood","block","function","circle","sentence","priest","method","warning","editor","ceiling","target","tour","gate","site","baseball","airport","shadow","walk","approval","gesture","individual","difficulty","attorney","criticism","affair","request","doorway","reputation","minority","consumer","notion","general","convention","being","honor","partner","chain","commitment","weapon","joke","coal","meal","reading","detail","library","debt","other","mail","drive","fellow","profit","soldier","forehead","housing","excitement","soil","literature","pilot","dance","reform","volume","scale","imagination","challenge","desert","secret","poet","cabin","average","factor","corn","check","wonder","absence","search","wedding","yard","hero","address","confusion","fool","package","victim","fault","platform","democracy","regime","terror","nurse","stream","offer","medicine","flow","grain","row","county","self","glance","humor","promise","employment","advance","planet","recreation","trail","chicken","storm","creature","mass","stand","gaze","poetry","coast","lake","council","breast","corridor","conclusion","talent","tension","reporter","cut","appeal","total","belt","jail","passion","mayor","claim","combination","highway","wire","rifle","cheek","frame","exercise","incident","testimony","ticket","coach","connection","expert","disaster","valley","minister","deck","territory","chin","universe","independence","counter","resistance","cell","governor","salt","elevator","loan","release","schedule","porch","sheet","cloth","personality","actor","bomb","temperature","bench","break","code","journey","childhood","emphasis","aspect","pot","branch","identity","guest","arrival","recognition","hearing","lap","diet","factory","horror","fence","survey","fate","habit","lobby","bone","routine","discovery","comment","burden","treaty","knee","route","cry","ocean","fund","map","signal","ride","bear","deficit","height","element","sword","birthday","standing","cream","panel","fighting","travel","grandfather","creation","appointment","chapter","funeral","phrase","shore","planning","couch","survival","engineer","wagon","suggestion","waste","guilt","chamber","commander","clock","establishment","flag","content","supper","consciousness","proof","pack","beard","portion","comfort","resolution","sunlight","substance","benefit","honey","protest","prayer","stick","description","device","cloud","display","uniform","gasoline","tail","satisfaction","blanket","mess","consumption","drop","invasion","theme","mystery","belly","association","prospect","port","pipe","reference","skill","rear","heaven","destruction","worker","concentration","file","flat","cab","consideration","uncle","customer","laugh","radiation","favor","studio","boss","transportation","wage","fortune","tent","poem","procedure","clerk","surgery","percentage","expense","cap","household","match","bunch","column","intention","cousin","involvement","host","definition","wheat","permission","can","warmth","draft","silk","aide","lip","conviction","rope","illness","instrument","gap","string","adult","sweat","lover","evil","faculty","enthusiasm","farmer","missile","grin","tank","expansion","emotion","waist","discipline","distinction","technique","profession","wisdom","square","laboratory","tie","review","stranger","communication","pile","arrangement","palm","ceremony","tower","sympathy","deputy","script","nomination","friendship","institution","pass","civilization","magic","client","standard","significance","sport","defeat","announcement","reduction","grandmother","bowl","closet","genius","league","citizen","delivery","button","necessity","reader","lesson","trust","green","experiment","escape","craft","pistol","limit","witness","error","assistant","grace","salary","alarm","fist","potential","withdrawal","phase","bell","perspective","rose","score","amendment","fever","tip","god","crop","vehicle","barn","symbol","tale","exception","shift","scheme","tendency","logic","license","pollution","trend","bath","focus","producer","distribution","cotton","alternative","vacation","muscle","cycle","steam","palace","harm","location","beef","shame","policeman","compromise","tube","participation","fat","item","curiosity","blade","membership","lord","departure","shade","acid","enterprise","jet","selection","jungle","bond","retirement","alliance","bow","railroad","soup","airline","divorce","sofa","gear","gentleman","robe","plot","speaker","examination","egg","handful","recovery","embassy","entry","bastard","improvement","grip","invitation","barrel","context","controversy","fiction","revenue","reply","garage","crash","collar","landscape","grief","pen","teaching","angle","trunk","acceptance","recession","abortion","explosion","application","counsel","dignity","paint","landing","mixture","triumph","stove","winner","summit","thumb","depth","feature","setting","payment","grave","notice","museum","cop","graduate","sidewalk","taxi","trick","lamp","photograph","index","tray","essence","empire","tragedy","alcohol","flower","phenomenon","contribution","shower","castle","cross","booth","lawn","intensity","abuse","determination","passenger","opera","publication","wrist","hint","learning","punishment","ad","skirt","servant","prisoner","physician","midst","purse","rank","neighbor","elbow","contempt","round","cave","coverage","weakness","panic","basketball","juice","shooting","exposure","brick","miracle","unity","accent","coalition","fur","envelope","horizon","glory","stress","delight","politician","conscience","despair","rail","virtue","parent","dispute","killing","corruption","pound","core","stake","proportion","assault","curtain","efficiency","infant","count","suspicion","complex","formation","lock","entertainment","conduct","wit","outcome","shuttle","companion","discrimination","aunt","anxiety","shelter","confrontation","tool","climate","peak","cage","darling","assumption","stability","well","flame","marketing","currency","electricity","text","regulation","comedy","automobile","scientist","cake","scandal","contest","glow","cigar","arrest","brush","boom","basement","document","assembly","output","hut","slave","marble","breathing","pitch","loyalty","affection","resignation","guide","frustration","bureau","adviser","fleet","sector","privacy","awareness","fantasy","speculation","queen","tide","brass","formula","curve","zone","skull","sin","cable","corporation","foundation","achievement","countryside","monster","killer","strain","mask","breeze","whiskey","gang","rhythm","interpretation","basket","extension","tissue","satellite","doctrine","motor","hunger","intervention","kiss","fee","portrait","drawer","analyst","economist","reflection","visitor","transit","reception","provision","slope","sheriff","tunnel","complaint","devil","liquor","throne","hook","temple","tribe","preparation","handle","shoe","origin","helicopter","ruling","injury","crack","flash","gown","jaw","hallway","consequence","depression","subway","leave","drawing","cabinet","initiative","embarrassment","holiday","wilderness","towel","purchase","indication","sink","morality","impulse","rent","enforcement","utility","detective","comparison","critic","dish","hack","photo","crown","operator","conspiracy","rhetoric","bull","inquiry","humanity","demonstration","grade","alley","male","plain","pillow","remark","beast","seed","observation","guerrilla","straw","occupation","champion","excuse","possession","kingdom","snake","nerve","roll","horn","objective","cargo","mate","offense","resort","sequence","apple","bullet","presidency","strip","stroke","pig","print","champagne","saddle","dialogue","suitcase","protein","cook","quantity","toilet","chill","ranch","squad","priority","concert","van","adventure","representative","custom","shell","pension","prince","wound","video","courtroom","suffering","clay","actress","pencil","assignment","shelf","primary","waiter","charm","wool","sweater","soap","psychology","widow","delay","obligation","therapy","sergeant","shortage","myth","collapse","delegation","wish","perception","receiver","sauce","painter","reach","dear","fabric","carrier","ladder","hatred","dancing","cottage","opponent","dealer","prosecution","whisper","spread","poll","beam","exhibition","sigh","fog","harbor","successor","relation","gallery","prize","fireplace","fighter","pit","representation","prosecutor","liberty","bargaining","ownership","root","tin","celebration","stretch","nightmare","transport","link","diplomat","flood","architect","peasant","female","lab","category","inside","tune","carpet","mercy","fraud","introduction","facility","net","temper","rug","conception","eating","legend","tourist","refusal","disappointment","sensation","innocence","transfer","powder","parade","pursuit","parlor","pine","orbit","promotion","senator","colony","cart","interior","productivity","trap","identification","ambition","hip","admiration","corpse","emperor","patch","realm","barrier","ambassador","carriage","residence","maid","gathering","switch","lieutenant","sorrow","contrary","legislature","cliff","lightning","ritual","mist","salad","separation","flour","continent","poison","elite","radar","assessment","outfit","ideology","pad","exile","praise","employee","succession","gain","illusion","option","gravity","journalist","businessman","constitution","singer","sentiment","scope","transition","warrior","cast","march","herd","intent","inspection","episode","uncertainty","spell","isolation","observer","glimpse","privilege","spy","toy","thread","margin","anniversary","irony","organ","lecture","misery","needle","revolver","composition","admission","odor","candy","bid","classroom","bride","vitamin","refrigerator","sandwich","subcommittee","rescue","lad","defendant","blast","angel","compartment","vegetable","minimum","violation","agony","edition","compensation","evolution","treasure","salesman","log","clinic","layer","pitcher","publisher","suite","estimate","airplane","tournament","trace","hammer","reward","broadcasting","running","raid","specialist","mortgage","oak","pole","rocket","aisle","brandy","bureaucracy","mustache","vessel","penalty","export","orange","ignorance","hostility","integration","motive","ban","consultant","timing","equivalent","patrol","liver","assassination","instruction","leaf","railway","freeze","mention","designer","daylight","velvet","amusement","bush","fly","cloak","copper","orchestra","mechanism","chocolate","instinct","circuit","feed","courtyard","mob","profile","bombing","retreat","favorite","revenge","infection","historian","theatre","consent","bucket","mill","insult","pregnancy","psychiatrist","employer","presentation","swing","removal","financing","destiny","label","finish","ghost","channel","equality","requirement","dock","statue","doll","fan","mistress","oven","rim","scent","restraint","frontier","twin","framework","surveillance","diamond","pie","lion","cord","posture","wallet","stool","rally","realization","banker","invention","province","colonel","ally","inspiration","encounter","makeup","certainty","venture","takeover","daddy","ratio","fatigue","verdict","pardon","caution","scream","sleeve","coin","album","acquisition","laundry","transformation","handkerchief","candle","terminal","elephant","madness","appetite","rod","manufacturer","voyage","locker","pulse","indictment","riot","giant","sample","heritage","instance","hay","cure","clan","navy","monopoly","photographer","cowboy","bishop","linen","sacrifice","mortality","dilemma","frequency","harmony","junk","component","bargain","dragon","ruler","replacement","maker","blessing","resentment","surge","costume","editorial","mansion","hood","cellar","bout","driveway","championship","ambulance","sickness","guitar","rejection","compound","launch","journal","sculpture","preference","balcony","lid","toast","chart","motel","agenda","sadness","dimension","verse","scholar","submarine","confession","carbon","thunder","canal","socialism","merchant","bolt","insight","tub","topic","wolf","ridge","shed","gambling","arrow","con","lodge","bicycle","complexity","liberation","disorder","urge","circulation","pickup","distress","spine","romance","anticipation","military","lamb","gloom","pond","republic","ballet","bankruptcy","appreciation","rebellion","custody","feast","fluid","expedition","altar","recipe","array","anguish","harvest","sack","fraction","loneliness","trailer","notebook","surgeon","slip","festival","inability","pan","clearing","making","revival","rack","flashlight","sociology","heir","segment","moonlight","reign","exploration","burst","pet","charity","bundle","assurance","murderer","thrust","conservation","confirmation","outrage","quest","grant","perfection","liquid","stance","jar","essay","addition","diplomacy","rat","outlook","capability","broadcast","cocktail","breeding","immigration","optimism","urgency","helmet","correspondent","breakdown","domain","dressing","dancer","pork","colleague","crystal","insistence","guarantee","lane","dependence","chapel","transmission","hunt","turkey","veto","canoe","interference","sailor","arena","refuge","attraction","thesis","waitress","trigger","founder","briefcase","scholarship","commissioner","stack","lift","greeting","mining","partnership","cane","devotion","thief","troop","menu","finance","coincidence","sleeping","picnic","lounge","dose","jeep","brand","reasoning","proposition","administrator","cylinder","execution","commodity","drum","bronze","staircase","pin","whistle","robbery","catch","thigh","descent","canyon","ballot","shotgun","curb","nod","continuity","shaft","guess","gossip","jurisdiction","revolt","worry","recording","repair","saw","suspect","dome","globe","runway","resident","cemetery","conversion","black","passport","cease-fire","imitation","salvation","cement","creek","nephew","buddy","lung","embrace","ink","simplicity","sunset","astonishment","butt","oath","typewriter","outline","tribute","deadline","hostage","underwear","revelation","reluctance","dread","nest","nut","disposal","disclosure","destination","terrain","procession","recommendation","recorder","potato","ramp","accounting","bat","precision","heap","justification","fork","idiot","biography","prey","ivory","rumor","toll","robot","mix","glare","seal","sweep","haven","bike","courtesy","interaction","secrecy","ham","superiority","synagogue","calendar","ledge","engagement","lace","timber","turmoil","tooth","perfume","magnitude","veteran","lemon","cutting","tomb","accord","ammunition","spear","hunter","acquaintance","grocery","coming","pump","reservation","slide","award","institute","fringe","freight","accuracy","spectrum","ski","diameter","battery","desperation","pounding","variation","ankle","pepper","encouragement","cathedral","expectation","calf","monkey","suburb","rabbit","objection","dismay","boot","pipeline","lust","firing","aggression","ghetto","armor","merger","sphere","texture","moisture","kidney","broker","auction","hose","patent","hesitation","mound","cruise","goat","declaration","regret","conductor","terrace","contention","crap","manuscript","incentive","buyer","gin","principal","steak","novelist","criminal","heel","intellectual","conservative","quarterback","collector","motorcycle","refugee","punch","cluster","clown","preacher","torture","headache","pact","lump","buying","flavor","toe","spectacle","apron","banner","convenience","import","attendant","kindness","verge","dairy","umbrella","dam","inventory","turning","homeland","remainder","gum","plight","container","diversity","drought","reporting","biology","chemistry","curse","scar","merit","spray","reactor","shield","clarity","bamboo","metaphor","vocabulary","runner","luxury","diagnosis","bunk","white","statute","knock","garment","breed","railing","zoo","rival","supermarket","streak","pavement","discomfort","congregation","twilight","bacon","slot","scarf","dime","charter","grammar","theft","sensitivity","mainland","classification","coffin","rider","competence","adoption","reserve","fascination","specialty","mike","temptation","yield","evaluation","passing","intimacy","translation","philosopher","cafe","sitting","superintendent","pill","housewife","signature","correspondence","siege","inn","leftist","injustice","assertion","restoration","registration","farmhouse","denial","endorsement","predecessor","final","demon","greed","transaction","repression","mattress","nobility","embargo","bosom","gym","tenure","addiction","apology","double","litter","nail","incidence","merchandise","volunteer","labour","basin","fiber","whip","payroll","microphone","ax","supervisor","resource","maturity","resemblance","cult","stadium","limousine","welcome","knot","probability","menace","nominee","characteristic","stare","vodka","obsession","nursery","paragraph","discourse","candidacy","battlefield","saint","hierarchy","precedent","imperialism","pope","intake","burial","freshman","rebel","mandate","clause","tile","electorate","torch","adjustment","implication","farewell","curriculum","fountain","satin","subsidiary","humiliation","slaughter","discount","crest","princess","asset","greenhouse","reorganization","irritation","ending","messenger","jealousy","breakthrough","mineral","baggage","mouse","tiger","memorandum","kit","substitute","paradise","stride","deed","accumulation","pledge","hull","projection","apprehension","glue","excellence","composer","decay","ditch","slice","beating","syndrome","parole","pony","saying","vulnerability","rental","wax","renewal","disk","athlete","warehouse","organism","disagreement","suspension","documentary","soda","availability","dedication","delegate","reminder","domination","leap","span","obstacle","counselor","taxation","grandson","banana","rehabilitation","stamp","anchor","diary","tunic","boycott","meadow","backyard","dismissal","rating","disc","glove","pasture","catalogue","inspector","exploitation","missionary","density","sail","excess","chemical","disposition","headline","wartime","atom","bartender","blue","wash","shark","negotiation","monument","mom","faction","echo","tomato","scrap","expenditure","plague","fortress","web","briefing","luncheon","vanity","ribbon","nostalgia","drill","frown","dioxide","sovereignty","sweetheart","cot","tag","laser","purity","melody","sanctuary","citizenship","poster","pal","marketplace","girlfriend","programme","retaliation","researcher","allowance","bedside","yacht","scenario","concession","offering","instructor","motivation","litigation","tolerance","puzzle","compliance","duration","quarrel","aura","crusade","salute","intellect","debut","eternity","monastery","immunity","flock","choir","stern","medal","meter","auditorium","equity","fairy","windshield","mare","conquest","razor","push","kick","battalion","generosity","whale","den","mama","emptiness","hysteria","hillside","ideal","landlord","stem","drain","temperament","orientation","spoon","associate","ash","wig","elimination","bark","boost","activist","stature","liar","vein","tract","telegram","completion","pizza","urine","hollow","ordeal","admiral","psychologist","rehearsal","questioning","musician","installation","ministry","puppet","axe","nitrogen","contractor","poker","arch","tractor","reverse","relative","buffalo","deployment","outbreak","pier","veil","summary","courthouse","academy","confinement","catastrophe","technician","specimen","bachelor","lobster","tyranny","discharge","graduation","shout","monitor","traveler","dope","user","vegetation","deposit","investigator","attic","rabbi","reversal","knight","innovation","probe","altitude","legacy","raft","boyfriend","twist","plaza","paradox","witch","folly","physicist","prophet","threshold","plaster","dentist","telescope","vault","climax","parish","balloon","probation","prescription","liability","wheelchair","blackness","colour","booze","exhibit","vest","abundance","hatch","sketch","cartoon","horseback","investor","violin","hazard","trader","stall","healing","prejudice","scorn","rum","accomplishment","limb","produce","epidemic","tumor","camel","starvation","insect","tenderness","cockpit","maximum","patriotism","chauffeur","parliament","capsule","deficiency","massacre","dessert","bail","meditation","petition","hypothesis","ruin","voter","wait","saving","imprisonment","nationalism","lawsuit","surrender","celebrity","contradiction","disgrace","betrayal","slogan","thrill","enjoyment","narrative","canopy","might","vaccine","fort","stereo","hearth","relaxation","avenue","fright","drift","width","guardian","portfolio","longing","brutality","frenzy","chaplain","chop","tactic","viewpoint","chip","banquet","closing","re-election","impeachment","wardrobe","cradle","facade","finding","tangle","adaptation","hamburger","analogy","fancy","counterpart","dissent","skepticism","gut","advocate","granite","equation","slump","vice-president","nap","foam","buildup","geography","scratch","major","preservation","folder","entity","defiance","nickel","monarchy","shack","teaspoon","chase","remedy","disappearance","foreman","seller","rag","youngster","allegiance","earthquake","columnist","goose","feather","bulb","imagery","bomber","overcoat","harassment","outsider","maze","reproduction","printing","reconciliation","kinship","grease","harp","parallel","stew","particle","accusation","criterion","garlic","boundary","scalp","recess","bearing","warrant","dictatorship","breach","bladder","elegance","fervor","disapproval","monk","tweed","loser","hen","shrug","junta","disguise","gulf","landmark","bourbon","reconstruction","decency","register","feat","hostess","workshop","accommodation","wreck","referendum","viewer","niece","flank","autopsy","boarding","grove","decoration","stain","cape","prophecy","bubble","asylum","commentary","grandeur","subsidy","seizure","badge","limitation","armchair","pro","spark","blaze","centre","split","peril","fusion","goodbye","ringing","solitude","handwriting","crossing","onion","rubber","forefinger","bait","solidarity","measurement","multitude","dump","novelty","truce","perimeter","alien","decree","opposite","constituency","maneuver","ransom","supplier","performer","murmur","coordination","hobby","dough","lantern","cherry","fox","quota","deterioration","flaw","millionaire","raincoat","skeleton","bum","washing","plantation","spotlight","arsenal","villa","sermon","compliment","podium","collision","ratification","jam","loft","theology","escort","tyrant","ore","caste","brokerage","lighter","screw","inheritance","eagle","annoyance","napkin","rationale","flurry","mall","dresser","autobiography","slate","cheer","sulfur","assortment","memorial","electron","detachment","addict","shrine","mold","rookie","astronaut","diesel","neon","heroine","clash","recollection","sweetness","complexion","stewardess","adversary","trance","virgin","screening","classic","nuisance","uprising","shipment","mug","stairway","supporter","famine","stench","click","stupidity","bug","throw","lumber","current","mentality","regiment","galaxy","patron","tap","mischief","contingent","gospel","racket","liaison","honeymoon","foliage","leak","doom","irrigation","mechanic","chef","viewing","swamp","void","mule","lottery","pastor","steward","ranking","survivor","tuition","medication","misunderstanding","prediction","forum","oppression","ale","expanse","consultation","pawn","attachment","franchise","intercom","chunk","mat","pioneer","prairie","familiarity","undergraduate","tenant","chimney","cereal","pub","packet","aftermath","outburst","habitat","federation","deduction","pageant","circumstance","discontent","microscope","sausage","coma","want","intersection","detention","shrimp","deception","illustration","manipulation","ecstasy","dash","eyebrow","ray","persuasion","builder","injunction","foe","inclination","precinct","slab","anthropologist","amnesty","loaf","radical","intrusion","dwelling","calculation","paperback","usage","paste","ashtray","shovel","capture","ferry","preoccupation","joint","filing","spit","womb","puff","quilt","squadron","playwright","rotation","lease","brilliance","burn","cough","spouse","assassin","flu","cabbage","reliance","console","carpenter","dependency","advertisement","lipstick","mahogany","disadvantage","holder","furnace","certificate","alienation","collaboration","extinction","austerity","pupil","tenor","foyer","bluff","whisky","similarity","pouch","chant","nun","hike","babe","com","input","pianist","treason","brake","shake","dividend","repetition","fisherman","pinch","persecution","brightness","disdain","sunrise","gleam","premise","shawl","kettle","forecast","recipient","strap","outlet","chalk","plywood","nickname","fulfillment","doorbell","keyboard","peanut","compass","interval","intuition","clearance","format","shuffling","dent","ambush","chatter","lettuce","harness","hiring","ache","continuation","fit","friction","pretense","velocity","tavern","abdomen","scout","splendor","barber","flap","plateau","hedge","raising","visa","dictator","housekeeper","cafeteria","enrollment","sailing","ingenuity","limp","bard","consistency","ordinance","bathrobe","gauge","strand","taxpayer","spider","coward","reservoir","brigade","self-interest","crackdown","crib","hum","roommate","traitor","blend","kitten","setup","dagger","sophistication","clout","goddess","disability","touchdown","fertilizer","punk","agitation","seminar","hitter","crust","comprehension","nightgown","gamble","freak","stump","microwave","lever","libel","playground","exhaust","abstraction","picket","diversion","advancement","bourgeoisie","coordinator","myriad","dial","diagram","sensibility","donor","endurance","prominence","playgroup","transmitter","revision","consolation","storyteller","jewel","mourning","burglary","competitor","narrator","verb","butterfly","rationality","ant","mister","satire","placement","reunion","plunge","comb","commuter","carving","hormone","creator","swim","clip","necklace","frost","fix","allocation","thickness","happening","disruption","caravan","rodeo","axis","submission","insanity","protocol","caller","porcelain","aristocracy","interrogation","boyhood","muzzle","delicacy","teenager","undertaking","textile","tailor","defence","comeback","zero","wizard","cupboard","cynicism","behaviour","holster","bulletin","broom","receptionist","listener","exemption","flicker","exam","treasury","hug","interruption","no","drugstore","roast","trifle","jerk","exclusion","inmate","contra","permit","gene","melancholy","alcoholic","trainer","perspiration","instability","doorman","deterrent","occurrence","hem","pricing","wear","hog","cushion","commune","courtship","paradigm","down","participant","triangle","apprentice","prevention","forearm","symptom","flush","newcomer","announcer","gorge","frog","platoon","hawk","rivalry","trench","geometry","clubhouse","feller","hymn","dictionary","showing","homicide","crow","pneumonia","gourmet","flannel","congress","dislike","illumination","jockey","superpower","papa","absorption","fragment","catalog","genre","hypocrisy","duel","cone","organizer","fraternity","cubicle","hardship","restriction","gasp","authorization","partition","barrage","groan","waterfront","aerial","cinema","proximity","mockery","compulsion","slum","default","evacuation","fugitive","carton","chariot","masterpiece","nylon","dialect","tee","bathtub","congressman","vapor","disturbance","mailbox","take","groin","moss","shepherd","formulation","foreigner","solo","elder","textbook","predicament","trait","reef","intruder","captivity","commotion","farce","royalty","exasperation","developer","expulsion","plaid","believer","migration","gal","fitness","idealism","galley","offensive","hometown","sophomore","clump","launching","mast","slowdown","generator","make-up","mount","worm","chuckle","prototype","catcher","crotch","interpreter","graveyard","mane","premium","cuisine","jeopardy","reassurance","vantage","condemnation","vase","blackout","token","abandonment","maple","magician","bust","syrup","cassette","pick","madman","cleaner","throng","hanging","riding","villain","squeeze","wallpaper","lime","blur","modification","clatter","anonymity","lineup","polish","accountant","setback","neutrality","modernization","borrowing","kill","dwarf","amateur","expectancy","donkey","fella","contamination","ballroom","kidnapping","popcorn","entourage","crook","ambiguity","coral","roadside","fragrance","slack","spectator","stimulation","groom","rattle","synthesis","tan","skipper","distrust","siren","spin","revulsion","signing","booster","savage","glamour","flute","civilian","flask","tug","misfortune","therapist","plug","standpoint","weed","ecology","footing","patio","decor","malpractice","residue","passageway","chopper","batch","acceleration","depot","quarry","hound","pilgrimage","deference","splash","heartbeat","rap","wedge","indicator","pretext","make","saloon","clientele","poisoning","hemisphere","grotto","ignition","cover-up","ape","transcript","blizzard","crab","ration","puck","propriety","hunch","madam","imbalance","jug","manual","raise","silhouette","sponsor","bore","volcano","crate","humility","devaluation","rocker","rainbow","chap","informant","freezer","limestone","guise","valve","appraisal","handicap","correction","bra","sinking","turnout","manure","pail","cardinal","grape","bee","rumble","miner","dissatisfaction","pamphlet","plaque","chat","injection","pulpit","platter","symphony","molecule","rib","pyramid","shudder","dissolution","vinegar","calling","acreage","chick","cuff","scrub","orphan","porter","saucer","antenna","trophy","rig","convent","good-bye","troupe","ploy","niche","veal","semester","contender","grenade","hilt","spiral","stink","marathon","boulder","treasurer","cookie","peninsula","freeway","rainfall","showdown","parody","telling","statesman","decrease","symbolism","pillar","tremor","penetration","carcass","breadth","psyche","hiss","suppression","pottery","dormitory","scare","overtime","bean","schoolteacher","timetable","buzzer","mesh","jack","marshal","windfall","lance","uterus","inconvenience","chrome","brute","gardener","whim","pearl","fold","trim","ravine","critique","adultery","stretcher","trolley","elevation","worthy","vibration","bracelet","plank","jelly","foil","wrestling","colon","layout","quotation","sting","son-in-law","jargon","likeness","knack","defect","sedan","tilt","chore","moratorium","convoy","piety","acknowledgment","formality","thud","blockade","chord","hush","takeoff","lining","marsh","manifestation","humidity","ingredient","crater","liking","pigeon","abolition","granddaughter","vintage","flourish","playoff","prostitute","prick","oblivion","sociologist","helping","locomotive","contraction","bookstore","surrogate","hippie","sherry","scotch","packing","wink","spasm","conglomerate","ensemble","dugout","insider","sect","inclusion","feedback","trumpet","massage","constituent","brotherhood","directory","newsletter","comrade","grid","turtle","restructuring","reel","spur","comet","dummy","combustion","moustache","oversight","motto","mantle","handshake","mouthful","monologue","buffet","miss","crunch","waking","gray","exaggeration","gait","clutch","courier","hangar","dive","curator","ridicule","diaphragm","tow","projector","eclipse","parcel","lure","transplant","township","squash","commentator","mentor","gutter","stint","treat","germ","infinity","impasse","burglar","proprietor","tariff","dispatch","torment","dove","superstition","going","tempo","warden","sponge","rooster","barge","gorilla","draw","wharf","stallion","countenance","orchard","navigation","tar","biographer","wheelbarrow","imposition","hurricane","stronghold","distortion","starter","rash","feud","parting","interviewer","wrongdoing","lavender","low","leash","envoy","stairwell","backup","doorstep","negotiator","heading","excursion","sewer","endeavor","backbone","rite","vine","gypsy","directive","defender","scoring","esteem","torrent","gland","consortium","nightclub","swell","employe","obscenity","cavity","pulp","lifestyle","butler","peach","tack","fossil","glitter","liner","destroyer","flyer","individuality","roller","outcry","felony","artery","cruiser","bedding","dude","bounty","blindness","bodyguard","corral","coroner","spice","martini","contingency","gag","serving","wail","wrench","sock","safe","spite","broth","trustee","moth","vice","gender","cartel","casting","puppy","prohibition","ox","sculptor","treachery","stir","printer","audit","brim","handbag","lobbyist","jolt","comedian","distraction","challenger","telegraph","homage","evasion","detector","filling","overhead","cartridge","walnut","sonar","puddle","quake","flooding","crescent","thrift","following","tanker","stoop","clergyman","opener","latitude","anatomy","convertible","arbitration","leukemia","absurdity","stab","biologist","baseman","fuse","specialization","carnival","gangster","stalemate","trickle","mallet","working","receipt","charcoal","mortar","drainage","mother-in-law","regularity","emigration","plasma","condominium","muck","workplace","roster","stroll","softness","serpent","owl","infield","sill","swallow","backdrop","fidelity","historiography","thicket","baking","omen","yell","functioning","bribe","dynasty","trough","pudding","alcove","ancestor","ripple","flint","bracket","cube","pasta","proxy","groove","commercial","holocaust","countess","scroll","bang","planting","premiere","norm","bloom","gunman","vow","arithmetic","accelerator","postcard","relish","semblance","whine","inventor","sarcasm","designation","pat","symmetry","quiet","chisel","experimentation","cutter","differentiation","stud","apathy","relay","seminary","escalation","life-style","coil","mythology","futility","intimidation","childbirth","flare","glint","rue","mural","whiff","deposition","vogue","animation","migrant","caretaker","dot","mediator","lookout","captive","blackboard","pocketbook","recourse","negation","plaintiff","shriek","obstruction","latch","manor","casualty","grunt","gambler","erection","nationality","epic","starch","delusion","linkage","provocation","avalanche","offender","melodrama","contentment","appropriation","tonic","salon","accompaniment","paranoia","grimace","communion","cancellation","pendulum","shoreline","hail","refinery","subtlety","videotape","commando","repertoire","refinement","dryer","rust","lapse","haircut","errand","ailment","reanimation","ther","tab","prom","contemplation","bin","gilt","bunker","protector","sage","hilltop","hue","blueprint","correlation","brochure","roadway","arson","remnant","breaking","bouquet","exertion","garrison","beneficiary","colt","turbulence","refuse","bravery","indulgence","assimilation","coastline","livelihood","swarm","configuration","lecturer","paw","upheaval","switchboard","sub","claw","downfall","dye","immigrant","specter","deprivation","shrink","marker","sampling","fellowship","beak","pantry","mouthpiece","gratification","qualification","finality","debacle","extortion","chieftain","speaking","totalitarianism","mole","incumbent","jumper","crush","stubble","terrorist","comic","farmland","contributor","gravy","blossom","keeper","craftsman","pavilion","obscurity","loading","affiliation","vacancy","proclamation","gaiety","yarn","enclosure","clamor","sucker","recruitment","subversion","boiler","emblem","spade","stocking","staple","vocation","sling","maniac","musket","primitive","periphery","idol","snack","antique","redemption","listing","airliner","bandage","bulge","glimmer","priesthood","diner","astronomer","ovation","kindergarten","module","lifting","radiator","booklet","resurrection","precaution","affinity","thinker","quote","turbine","tally","vise","landslide","bakery","portal","majesty","abyss","admirer","turnaround","airfield","wastebasket","lapel","pennant","complication","slick","initiation","rustle","hearse","schooner","carrot","inscription","wench","embryo","vet","poise","disintegration","procurement","speck","kite","vent","plow","homosexual","membrane","waterfall","teevee","matron","utterance","buffer","memoir","cork","recital","loathing","cameraman","throttle","insecurity","trooper","hinge","hoard","umpire","slug","mountainside","affliction","pastime","felt","sentry","denomination","mushroom","linebacker","parachute","teller","fender","trademark","specification","harem","plum","metabolism","certification","neutron","organisation","heresy","relocation","payoff","lizard","termination","dropout","torpedo","stepmother","helm","resonance","heed","progression","braid","cardboard","walkout","shiver","gust","foreground","replica","repertory","sparkle","seam","bump","substitution","rapport","casket","dew","squirrel","palate","hitch","rebirth","reverie","boon","pirate","foresight","vinyl","delta","moat","presumption","tablespoon","aroma","digging","heartland","healer","malaise","creed","archway","exterior","screenplay","examiner","parity","copyright","strawberry","outpost","bookcase","cashmere","bikini","sheaf","pastry","respite","divinity","impossibility","legislator","saga","thump","inauguration","seaman","degradation","strategist","emerald","anthem","affront","burner","entrepreneur","thorn","marvel","stair","cavern","swivel","outlaw","underside","cleanup","fin","catalyst","forage","tapestry","dosage","covering","proletariat","turnover","notch","misconduct","onslaught","upbringing","coyote","bumper","champ","creep","boxer","mileage","vigil","fodder","occupant","dashboard","rarity","centerpiece","consul","ascent","paddle","martyr","doctorate","runoff","grudge","tattoo","robber","carbine","holding","oratory","distributor","heavyweight","footnote","terminology","infrastructure","drummer","chili","tableau","dung","magnet","deceit","caricature","itch","refund","cripple","rectangle","mortal","ancestry","inequality","generalization","furor","relativity","jukebox","dune","endowment","pathology","calibre","subpoena","attrition","hump","congestion","reflex","hoax","honour","herb","mantel","articulation","washer","judgement","brace","printout","helper","wording","crisp","shortstop","boulevard","characterization","cashier","matrix","documentation","deadlock","oyster","chasm","outing","expiration","heater","nutrient","beacon","bile","grievance","janitor","skyline","patrolman","juncture","antagonism","rump","hardwood","solace","warhead","assent","litany","enactment","chimpanzee","rye","feeding","suede","coke","inference","ivy","mosquito","eruption","symposium","variable","cooler","filter","storeroom","mailing","chancellor","beggar","antiquity","inertia","motif","absentee","float","blush","embankment","riverbank","demeanor","vampire","disciple","inadequacy","reinforcement","pedestrian","persona","berserker","tumult","incline","beaver","grill","morgue","denim","wreath","grouping","relic","syndicate","rancher","idiom","hegemony","seating","affirmation","physiology","repose","blight","jest","turret","slit","goalie","clarification","avoidance","volley","redhead","inefficiency","folklore","embodiment","afterthought","steer","cyanide","digestion","continuum","mania","giggle","buggy","willow","pantomime","fireman","growl","devastation","navel","halo","yearning","laborer","alligator","prelude","verification","brown","bead","midget","sleeper","riddle","portrayal","counterattack","lectern","tutor","chestnut","remembrance","aversion","taking","billing","regimen","translator","headmaster","duke","ace","snort","fanfare","imprint","calamity","exposition","cedar","intrigue","transistor","bowel","boardwalk","tramp","ornament","sticker","processor","voltage","sovereign","whistling","caliber","exuberance","snout","enclave","kilt","bombardment","corporal","overhaul","syllable","curfew","layman","consolidation","insignia","mediocrity","coherence","hospitalization","flick","pew","coloring","sanction","baritone","radicalism","savagery","pallet","stead","cadet","shutdown","supplement","unicorn","stepfather","excise","spelling","rebound","puzzlement","tenement","souvenir","veneer","safari","quartet","whirlwind","hamlet","practitioner","parasite","installment","emission","kissing","chronology","mosque","chairmanship","blonde","steamer","caption","shave","standstill","maiden","polling","condor","twinge","campfire","drinker","exhilaration","seafood","gala","crane","hickory","cathode","graph","deliberation","planner","marrow","bud","mediation","cutoff","tit","tic","parchment","noun","culprit","lair","showcase","hangover","chemist","aggregate","thriller","smack","efficacy","smear","heiress","crank","fig","finale","pea","staging","die","rebuke","curry","scum","potency","acclaim","collateral","schoolboy","canteen","radius","deportation","grate","madame","mop","pronunciation","sheen","respiration","breakup","professional","omission","gunshot","ugliness","fanatic","barbecue","dorm","trot","flattery","stereotype","hatchet","capitalist","purge","brew","totality","fern","enzyme","plumber","subscription","cholera","bruise","forge","nipple","commencement","superstar","ether","gem","sash","extraction","spaceship","golfer","realist","encampment","necktie","repayment","skillet","darky","disparity","bedspread","haul","questionnaire","promoter","wand","windowsill","victor","rector","enamel","hoop","coronation","patriot","chandelier","watchdog","glade","renovation","goblet","zipper","communique","crevice","motorcade","sequel","scourge","serum","single","icebox","junction","cache","berth","streetcar","syringe","antithesis","bureaucrat","blacksmith","oval","bun","loot","fiasco","tomahawk","ulcer","pinball","jersey","asthma","brook","pedestal","feeder","soot","inevitability","alteration","carrying","showroom","gimmick","lunatic","gall","fir","borough","hash","woe","controller","sponsorship","applicant","twig","screaming","librarian","intermission","sister-in-law","bushel","inflammation","pomp","vial","extravagance","pate","prostate","dolphin","tuxedo","mathematician","guinea","veranda","aperture","disillusionment","gavel","dating","knocking","oasis","nebula","woodland","yellow","ambivalence","hardness","oxide","socket","wasteland","leopard","blazer","follower","asking","urn","weaving","swimmer","closure","dart","loudspeaker","bazaar","bog","transfusion","reproach","sham","parka","affiliate","scowl","primate","attacker","rink","funnel","spate","elaboration","legality","tablet","heyday","tripod","bully","sharpness","demolition","flip","dandy","appliance","slant","sentimentality","knoll","gloss","defection","explorer","ram","stupor","clone","baton","cohesion","bearer","penance","bandit","aberration","gallop","swirl","coconut","spree","pedal","detergent","canon","teen","brood","phonograph","tabletop","enlargement","sniper","cohort","fable","rising","spill","affidavit","imperative","snapshot","apparition","stunt","wristwatch","chute","teammate","carelessness","over","stripe","postponement","rapture","savior","pacifist","admonition","pear","junkie","surcharge","wavelength","horseman","hag","confessional","comptroller","orthodoxy","financier","snarl","cliche","refreshment","adolescent","teapot","seaweed","drilling","roadblock","antibody","sheath","pallor","constable","misuse","arcade","lee","keep","anarchist","watering","rhyme","exclamation","backseat","great-grandfather","han","pod","daughter-in-law","mailman","alphabet","sloop","reckoning","grower","simulation","homer","birthplace","ence","actuality","depletion","novice","diffusion","concealment","cadre","pathway","fungus","ouster","loner","autograph","descendant","aspiration","better","sick","variant","fragmentation","pesticide","frigate","bestseller","propensity","foul","senate","trouser","airstrip","insurrection","chronicle","coating","stigma","toothbrush","pumpkin","apprenticeship","widower","paycheck","query","teen-ager","shifting","informer","doorknob","ardor","pebble","finesse","scrapbook","fiddle","dowager","sod","wrap","turtleneck","clipboard","rogue","mutiny","suitor","bulkhead","babble","fad","billboard","beverage","hairline","grille","exporter","pathologist","mesa","goblin","scapegoat","crucifix","backpack","observance","forgery","dungeon","methodology","gauze","bonanza","inkling","beret","shouting","ex-wife","wickedness","toil","preview","porridge","cornerstone","scanner","smoker","rebate","mite","brawl","axle","easel","allegation","grab","parrot","antidote","drawl","hijacker","telltale","venom","el","baron","intermediary","seduction","birch","contour","redistribution","cam","protagonist","enmity","hulk","stockbroker","decorator","cookbook","protege","mage","cricket","smock","apex","cortex","modem","shareholder","lament","determinism","rift","tablecloth","trajectory","preface","sneer","gamma","rendition","insemination","aristocrat","hare","labyrinth","thaw","invalid","staffer","alpha","fingernail","medic","crutch","entertainer","jade","eminence","discrepancy","yawn","flea","ledger","orphanage","getaway","manifesto","hijacking","incarnation","elm","adobe","spruce","gist","grit","boar","oracle","mobilization","cantor","crypt","cutback","musical","fallacy","corduroy","fray","racetrack","buckle","foreboding","pest","clap","ber","notation","peek","sow","ballad","brat","constellation","lard","industrialist","hunk","assailant","splinter","bridegroom","dip","fixture","cadence","watchman","windmill","prerogative","drawback","bungalow","heaving","nationalization","mating","writ","rationalization","milking","modernism","landlady","calculator","animosity","workout","skirmish","glycogen","discord","portico","vestibule","renegade","overdose","iceberg","lineage","mosaic","liturgy","watershed","playing","lobe","dowel","ranger","dossier","anvil","co-operation","satchel","fa","corollary","bridle","gateway","brothel","monotony","vendor","mysticism","saucepan","accomplice","hernia","guild","pup","hoof","sparrow","dreamer","craving","outpouring","blink","overlap","duct","brownstone","maneuvering","stagger","foothold","craze","monsoon","induction","handgun","scan","constraint","citadel","rigidity","anecdote","halter","occupancy","rightist","convict","tribunal","stalk","waterway","debtor","yoke","audition","inconsistency","peg","sliver","midwife","premonition","ruby","conduit","excavation","fart","condenser","hop","poodle","upsurge","attainment","stitch","crimson","anomaly","backlog","yeast","chimp","awning","gig","parable","drumming","tiptoe","prow","bypass","crease","reformer","intestine","counterpoint","enormity","anthology","rudder","shroud","magistrate","twitch","commonwealth","circumference","stuffing","sweating","scattering","lender","dripping","legion","refrain","mummy","covenant","morbidity","prop","initial","alignment","licence","infusion","unification","rebuttal","adjective","humour","larceny","mistrust","horde","assemblage","delinquency","testament","convert","patrician","dissension","cider","infidelity","bonnet","displacement","crackle","edifice","conciliation","bondage","schizophrenia","embroidery","standoff","monotone","oddity","mobile","tornado","semicircle","panorama","ex","ping","yogurt","screech","underdog","quay","tai-pan","extract","podesta","ticking","shrubbery","backside","communicator","sorcerer","interlude","dominion","battleground","taboo","blunder","conjecture","drone","cove","maverick","secondary","companionway","rook","gauntlet","ordering","violinist","rooftop","slash","thermometer","vomit","anteroom","deity","nave","acquittal","talker","reed","concussion","malfunction","tundra","cub","anemia","constructivist","cocoon","divide","keeping","percussion","freighter","noose","narcotic","expediency","grandchild","gully","innkeeper","pigment","bloodstream","quiver","alderman","halftime","stable","fission","aggressor","denunciation","abduction","expressway","uniformity","faucet","buff","broiler","allusion","jock","spike","herald","polyester","genocide","fer","parapet","classmate","tinge","sandstone","lurch","skunk","huddle","mum","tranquilizer","pharmacy","susceptibility","penicillin","lark","hoe","lily","hanger","headset","john","appointee","advisor","twine","slumber","magnetism","schoolgirl","smash","screwdriver","newsman","sleet","cleavage","lacquer","milestone","commandant","crick","splitting","rosary","edict","hurdle","fixation","appendix","lock-mechanism","eyelid","swath","fingerprint","carbohydrate","tick","magnate","heck","sailboat","donation","malady","polishing","clipping","collective","sensuality","loom","swagger","facet","variance","mean","walkway","aptitude","prodigy","solemnity","understatement","ebb","scoop","wrapper","narration","icon","prerequisite","planter","gash","interplay","evangelist","drip","vulgarity","subdivision","backwater","euphemism","lotion","corpus","broadcaster","toothpaste","curmudgeon","fo","thong","thatch","baptism","peacock","workman","downturn","scoundrel","machete","creak","five-year-old","dissertation","dishwasher","pimp","electrician","tycoon","otter","shove","snail","rendering","nobleman","booking","pronghorn","deadpan","shutter","escalator","girdle","fling","hire","alibi","flop","stampede","prognosis","itinerary","cologne","spoonful","detour","violet","watcher","falsehood","hype","locale","estimation","propeller","squaw","pickle","lass","pun","racist","scratching","rout","downpour","casing","complacency","camper","equator","reticence","learner","outcast","brunette","improvisation","stag","maxim","loophole","livery","blasphemy","shoot","solvent","misdemeanor","buyout","tiller","jetliner","checkbook","awakening","sideboard","romanticism","squire","newsstand","nuance","consulate","excrement","reprisal","bastion","beginner","obituary","softball","conjunction","scripture","phalanx","vindication","grub","swig","inaction","redwood","scabbard","bonfire","casserole","ovulation","unreality","totem","palette","choreographer","peasantry","skyscraper","penitentiary","outfield","melon","bounce","yolk","diver","archbishop","plurality","amber","recurrence","adulation","piston","insurgency","stoan","coop","tart","eyeball","toss","giveaway","cross-examination","dissident","hermit","ruse","ture","pore","leaving","dowry","gunner","epitome","snowstorm","summation","switchblade","crock","ity","frock","luster","piazza","rotor","impropriety","pivot","blender","immediacy","borrower","slaying","feminist","preserve","bidder","depiction","parasol","clover","intern","asteroid","stub","barricade","medley","multiplier","smirk","knapsack","hank","cognac","headway","treatise","homestead","troublemaker","giraffe","mover","allotment","drowning","naturalist","orderly","attribute","scalpel","shipyard","estrogen","educator","enrichment","grandstand","sire","sideline","landowner","confidant","gel","deviation","clemency","liberal","bigotry","filly","six-year-old","lifeguard","shred","adversity","shelling","pineapple","referee","knockout","jigsaw","retailer","extremity","outgrowth","amplifier","sinner","campground","teasing","steamboat","turban","mutton","cobra","contraption","chopping","schoolhouse","varnish","pane","observatory","ballerina","czar","immensity","lethargy","reimbursement","undershirt","concierge","fracture","variability","accordion","slime","meanness","gelding","practicality","advertiser","graft","gull","stockholder","pilgrim","hooker","puritan","benediction","barbershop","stanza","hallmark","mishap","harpy","silage","enchantment","whirlpool","conditioner","gadget","divestiture","lathe","incarceration","amalgam","antibiotic","annexation","martyrdom","pyre","shank","alert","shale","artifact","interchange","mystic","meet","grinding","triple","boutique","antagonist","fermentation","twinkle","sweetie","shin","creditor","amulet","pall","posse","homeowner","skier","vastness","smith","allegory","oxidation","cracker","levy","ark","sporophyte","enthusiast","snob","spinster","searchlight","waistband","lorry","repeat","reprieve","slalom","respirator","visor","reviewer","putt","miscalculation","shortfall","concourse","dialectic","native","hairdresser","normality","immorality","sprinkling","allure","lick","drudgery","habitation","gondola","vista","ice-cream","cheerleader","predator","countdown","juxtaposition","stumbling","muffler","derby","timer","salvage","boast","cabbie","clam","windbreaker","retardation","antelope","shampoo","raccoon","bible","glider","momma","valise","coffeepot","emissary","compression","grail","guideline","lavatory","glaze","outpatient","thunderstorm","foray","co-op","valet","baker","sycamore","thumbnail","nozzle","timidity","orator","liquidation","spokeswoman","militant","jig","naivete","motorist","dumping","armpit","margarine","exultation","headboard","plume","amplitude","flutter","pronouncement","finery","trepidation","airing","coupon","knuckle","gametophyte","deathbed","extermination","alleyway","hybrid","gambit","nova","binge","original","froth","lighthouse","coolant","continuance","collaborator","fuselage","profanity","whirl","saber","filmmaker","checkup","shaman","rancor","retort","earring","sieve","post-mortem","implantation","conceit","simplification","vat","proficiency","deluge","kiosk","outlay","tantrum","flooring","veterinarian","fireball","carousel","bandanna","glacier","censure","citation","oar","fridge","metamorphosis","superior","approximation","girth","tirade","grocer","holdup","forward","snobbery","cleansing","replay","recitation","facsimile","patter","jubilation","snare","frailty","rampage","pick-up","overture","tumble","residency","prevalence","repository","reentry","battleship","mutation","hammock","importation","thug","semiconductor","ballast","spurt","extreme","artichoke","convergence","circular","rigor","realignment","physique","handbook","bugle","precipice","sauna","skater","furcot","volatility","valuation","barbarian","peddler","layoff","overall","deliverance","chromosome","innuendo","lexicon","empress","polarization","dictum","fitting","impediment","piracy","crocodile","cucumber","keel","sitcom","hypocrite","roaring","encroachment","steamship","resin","fairway","eyewitness","broadside","washroom","sighting","mantra","swan","supposition","governess","upswing","rep","solicitude","rustling","invocation","heather","rectory","orchid","brocade","raiser","invective","fragility","acronym","ostrich","col","absolutism","vicar","psychotherapy","navigator","cartoonist","doe","landfill","invader","werowance","ble","flatness","locality","druid","visitation","headlight","rapist","benefactor","colonization","excerpt","nick","kangaroo","pink","buy","cascade","campsite","slander","headdress","topcoat","causality","karma","trestle","atheist","checkpoint","renunciation","eater","payload","pointer","theologian","beet","undertaker","lineman","hart","gourd","doubling","shuffle","cabaret","periscope","bodice","shootout","grandma","wildcat","proton","dioxin","sorcery","torchlight","stopover","executioner","collage","mesquite","reincarnation","kidnaping","programmer","disloyalty","muslin","throb","mint","aquarium","tel","eccentricity","purification","kerchief","warranty","rigging","breeder","nite","conservatory","fastball","magnification","spa","favour","regeneration","incision","saxophone","detriment","scam","android","coloration","bunny","restitution","rake","serf","despotism","pollen","sidewinder","upstart","revisionist","birthright","multiple","lifeline","queue","follow-up","swipe","boardinghouse","armament","travesty","stirrup","caper","chloride","crepe","primer","clich","inflection","skid","repudiation","serve","spire","peep","inducement","clothesline","fabrication","morsel","spleen","coon","bustle","crossword","back-up","assessor","biopsy","sidecar","hassle","shingle","tint","fixing","collarbone","taint","pusher","gestation","mantelpiece","vaulting","ra","peat","indignity","adequacy","genus","scrape","scaffolding","serial","neurologist","duffel","cipher","rote","horseshoe","bulldog","electrode","joker","juror","fibre","misconception","rut","connoisseur","flowering","op","flirtation","highlander","wisp","sounding","bugger","pharmacist","doughnut","toaster","pinnacle","slob","promenade","amphitheater","singsong","beau","whimper","importer","locket","watermelon","marking","beta","co-author","crossbow","atrocity","desktop","inhibition","draught","rowboat","volleyball","snowfall","extravaganza","teddy","miscarriage","storefront","toxicity","abode","hearty","handyman","centurion","phrasing","anachronism","newspaperman","annex","walker","till","volition","tributary","close-up","nook","cleric","ferment","proverb","inlet","heretic","waistcoat","duet","sniff","crewman","campaigner","wearing","grizzly","p","optimist","placard","overflow","pedigree","clang","brig","cinder","bunting","wag","dishonor","denominator","gong","siding","trilogy","deli","fluoride","questioner","squat","competency","partisan","putter","entree","cynic","tombstone","scoreboard","biscuit","souffle","homecoming","overseer","hideout","brewery","emancipation","interface","premier","auditor","troll","conscription","stout","trucker","beetle","dealing","bookkeeper","build-up","yardstick","da","polity","wick","wrinkle","private","outflow","borderline","outfielder","visage","leper","chiffon","arbor","weave","barnyard","checklist","granny","insensitivity","ex-husband","barometer","rupture","infirmary","desertion","wonderment","encyclopedia","slaughterhouse","nostril","ineptitude","implant","infatuation","laundromat","warship","rub","benchmark","polygraph","dinghy","behind","tween","filibuster","wearer","crayon","sensor","hustler","sinew","progeny","dig","pediatrician","foursome","buckskin","cornfield","safeguard","divergence","ting","coupling","dislocation","the","immersion","purchaser","cleft","overhang","booty","scuffle","rattlesnake","teacup","retinue","hallucination","potion","yeshiva","tapping","rip","multiplication","canister","gallantry","morn","thermostat","grind","aviator","ecosystem","pariah","recruit","vestige","ro","phosphate","abomination","laurel","sweatshirt","vaccination","psychoanalyst","blind","psychosis","sidekick","shopkeeper","theorist","delicatessen","sheepskin","billionaire","receptacle","salami","paddock","glen","beech","leer","mime","ty","perfectionist","seedling","wil","bind","intolerance","dint","plural","rouge","skylight","mammy","drab","microcosm","sole","organist","court-martial","matinee","bulwark","must","expatriate","stethoscope","daydream","backer","godfather","breech","artifice","auxiliary","adventurer","atrium","counterman","idiocy","grotesque","dishonesty","runaway","digit","baseline","reflector","preamble","sellout","falcon","scribe","retainer","louse","grapevine","sojourn","lash","marquee","schoolmaster","squeak","squeal","shooter","townhouse","nationalist","billiard","backfield","auctioneer","aria","avant-garde","hostler","smattering","giving","coaster","arraignment","duo","malignancy","throwback","doc","turnabout","seeker","deletion","vernacular","bulldozer","tedium","hustle","raspberry","estrangement","mutilation","styling","incinerator","wrong","shortcut","mastectomy","infringement","bonding","timbre","cameo","workroom","grassland","spraying","cooperative","tarpaulin","determinant","thyme","innocent","clique","racer","leakage","conflagration","jingle","duplicity","diaper","conqueror","committeeman","robin","reprimand","marina","cross-section","flagship","denouement","recluse","homemaker","moron","rind","gent","magnificence","dispatcher","detonation","harbour","toddler","rotunda","sedition","fell","dolly","laureate","woodsman","syndication","clot","guitarist","blemish","password","overview","eggplant","incantation","drapery","incapacity","florist","hive","civility","mod","screenwriter","intoxication","barman","ern","furrow","cant","clapboard","tumbler","walkie-talkie","pajama","vortex","defenseman","hostel","subjugation","interception","armory","fanaticism","sibling","inhalation","undercurrent","husk","mead","maw","padlock","abnormality","penguin","undersecretary","damnation","independent","airlift","peel","schoolroom","rascal","fingertip","cartilage","dichotomy","blank","lingo","clasp","racquet","acknowledgement","rebuff","bier","aerosol","taping","checkout","arse","thoroughfare","pelt","copse","keg","fissure","tern","mirage","blockbuster","balm","arbiter","shutout","schism","fluff","circumcision","insertion","pseudonym","heathen","eulogy","snowball","penthouse","kinsman","gebling","regulator","proponent","yearbook","barbarism","mutt","reopening","paunch","governorship","differential","airship","subscriber","alloy","adjunct","impairment","incongruity","pheasant","grownup","predicate","loo","sleigh","seer","flitter","sunburn","plebiscite","stockade","pout","sledge","stipulation","lordship","bayonet","wretch","vulture","postman","breaker","newsroom","consort","grinder","ballpoint","tequila","unpleasantness","wrapping","squall","adage","monograph","privation","streetlight","hilarity","sacrament","diminution","mannequin","duplication","banishment","rasp","biochemist","goatee","cranberry","sultan","blip","disservice","idealist","middleman","shaping","apocalypse","strut","oligarchy","moor","zombie","certitude","javelin","azure","turnpike","forger","commode","bleach","sideshow","banister","closeup","dysentery","steeple","offence","commandment","furlough","best-seller","filament","mountaintop","censor","snowmobile","kaleidoscope","elf","imp","slipper","lunacy","telecast","nanny","kernel","eventuality","subordination","sonnet","nitrate","foal","prank","expropriation","fedora","zigzag","resale","namesake","highlight","supplication","concurrence","medallion","jailer","loin","tread","quill","cardigan","prune","slur","surtax","internist","strait","smuggler","panacea","turd","wanderer","crude","darlin","epitaph","docking","seashore","cheeseburger","netting","provider","dispenser","intonation","marching","caress","hootch","morass","chum","sanctum","headband","powerhouse","axiom","terrier","springboard","tot","latrine","toad","clink","herbicide","figger","hick","manger","poppy","chaise","archetype","undoing","beehive","illustrator","withholding","sterility","paddy","coven","custodian","half-life","embezzlement","armoire","kickoff","possessor","rectum","sit","daisy","housecoat","pollster","policewoman","ointment","expressionist","stockpile","bombshell","impresario","co-pilot","chessboard","dazzle","scepter","archdiocese","linguist","odyssey","capitol","accession","lute","liter","multimillionaire","decoy","warp","conveyor","grandpa","ance","mumble","betterment","bullfighter","chador","ampule","indiscretion","shake-up","clarinet","catapult","normalcy","shanty","dinosaur","epithet","tang","scaffold","immunization","repairman","suntan","mu","environmentalist","nightcap","tempest","artisan","orbiter","spiel","needlepoint","geologist","humanist","stutter","perplexity","roundup","concoction","treadmill","cacophony","antipathy","blackberry","bloodbath","brassiere","allergy","hitchhiker","grunting","choke","sitter","elixir","ba","repatriation","whack","decanter","crusader","burlap","incursion","lyric","compilation","seaport","coachman","philanthropy","secretion","collie","inquest","taper","moral","quartermaster","jeweler","salutation","confluence","gullet","tram","hideaway","by-product","drybone","copulation","divorcee","mausoleum","peeling","annuity","set-up","skiff","neurosis","windpipe","buoy","glide","archaeologist","pendant","junkyard","bullhorn","porthole","quandary","irrationality","acidity","pragmatist","derivation","stylist","duplicate","panther","brigadier","introspection","depravity","keynote","vexation","psi","weighing","deserter","speculator","teak","armful","remission","precursor","sorghum","harmonica","olive","gangway","contraband","defector","purgatory","genie","expedient","crowbar","desecration","bathhouse","enhancement","tenet","seasoning","wrangling","downhill","venue","tracery","dictation","bailout","undertone","pecker","prep","forerunner","bandstand","letdown","luminosity","tonnage","catwalk","brunch","sapphire","ballplayer","wineglass","readout","genealogy","horsepower","messiah","blackjack","hemorrhage","damask","registry","gunwale","jerkin","humorist","bowler","tingle","engraving","chauvinist","spirituality","eyepiece","twang","constancy","blot","blob","chard","highschool","sportswriter","tiara","domino","contestant","migraine","newscast","mainstay","hammering","tracker","wager","offshoot","buster","informality","python","felon","imperfection","slag","convulsion","sedative","cellblock","punt","headwaiter","outhouse","monstrosity","nonwhite","override","raisin","inversion","pancake","flavour","cataract","reclamation","churchyard","pidgin","suction","chanting","aggravation","dynamo","pee","fistful","hogan","byproduct","brooch","lullaby","workday","slop","silencer","dealership","earner","anchorman","pittance","crumb","custard","rainstorm","tote","mulch","mason","earl","barroom","levee","discouragement","falsity","compressor","lodging","gynecologist","divination","calico","bibliography","cyclone","senor","gatehouse","lagoon","squirt","artwork","songwriter","derivative","supernova","divan","photon","surety","cobbler","fatality","gout","eleven-year-old","ent","cropping","mainspring","prism","confederation","weaver","neighbour","yuppie","muffin","juniper","ovum","lesbian","pi","shimmer","fax","increment","co-ordination","splashing","thanksgiving","exaltation","confiscation","fairy-tale","fudge","brief","priestess","re-creation","hydrocarbon","ford","usurper","maelstrom","spaceport","swordsman","vegetarian","newness","grad","potter","manservant","fullback","fiend","giver","subculture","debutante","striving","scorer","catechism","charger","armada","blond","paign","handball","wince","appetizer","guidebook","jog","millet","hoot","inferno","pardner","mash","mousse","mammography","launcher","battering","predilection","portent","beep","exhortation","notification","warm-up","diatribe","panda","menstruation","telex","revitalization","workingman","cordon","charmer","fumble","hamper","moralist","settler","chowder","ley","mannerism","drunkard","posting","turquoise","elasticity","abbot","bookie","tusk","paragon","precondition","rollback","lunge","conundrum","eviction","sealer","cellist","cosmology","turntable","outside","fortification","nightstand","spook","shoemaker","sac","sulfate","isle","antigen","steed","bacterium","utopia","stunner","hillock","clove","irritant","tat","memento","rung","gaffe","portraiture","solicitor","rodent","barter","intensification","gallbladder","condom","antiquarian","peck","cheering","meteor","inflow","stenographer","blinking","icing","jackass","dweller","fiesta","irrelevance","harpoon","appendage","stipend","mommy","cassock","microfilm","dead-end","vermouth","scarecrow","fielder","referral","mart","burger","ticker","hindrance","coverlet","speedboat","wafer","sluice","bellboy","hangout","figurehead","midterm","petticoat","matador","skein","beholder","flier","waiver","flotilla","smudge","inequity","mixer","sulfide","banality","roach","billy","tailgate","gaggle","softening","loincloth","gore","bib","chrissake","changer","muse","longitude","tourney","mil","aorta","poop","regression","soviet","placing","winch","apostle","constant","squabble","blimp","abdication","porpoise","puncture","workbench","parameter","conventionalist","flagpole","unfairness","reptile","typist","bookshop","hesitancy","strongman","headland","sprint","manhole","blowing","archipelago","ideologue","slouch","poke","gush","stratum","mulatto","echelon","postmaster","sheik","emigre","alto","affectation","rad","climber","deerskin","bower","idolatry","reciprocity","sweet","wasp","dissection","baby-sitter","purple","toothpick","lyre","archer","sprawl","councilor","contrivance","flake","kynd","suffocation","damp","ware","travail","candelabra","wrestler","patina","moaning","paisley","recruiter","moderator","respondent","marmalade","bellow","harpsichord","atrophy","ejector","jetty","stripper","monorail","dramatist","hysterectomy","riverbed","revaluation","stoppage","conspirator","fetish","sunflower","cognition","scrim","rec","retriever","aphrodisiac","redneck","palsy","pullover","flywheel","roundness","peculiarity","ernment","nectar","ruck","swimsuit","curd","underclass","polka","conservationist","mire","drumbeat","cinch","cordiality","deacon","speechwriter","purr","gelatin","muddle","booby","solid","cloakroom","stopwatch","sportsman","burlesque","overload","mademoiselle","divider","bailiff","handout","ordination","stiff","languor","paperweight","opiate","snap","causation","mower","snatch","touchstone","self-indulgence","shrub","interceptor","mammoth","proceeding","cheekbone","spoke","repellent","cardiologist","reminiscence","sprinter","evocation","postscript","enlistment","blotter","troika","dacha","cabdriver","fund-raiser","switching","para","tendon","fireside","effigy","leech","veneration","reek","schoolyard","pellet","shellac","weasel","jab","carcinogen","restroom","cauliflower","levity","caftan","topside","fruitcake","bickering","drawing-room","dovetail","culvert","chateau","bugging","tinker","hobo","corset","automaker","actualization","oration","handhold","nutmeg","tentacle","quicksand","handler","panoply","bowhead","testimonial","mammal","bellhop","devotee","technicality","trainee","mongrel","newscaster","aggregation","footpath","fawn","accreditation","heave","jib","rationalist","vendetta","midpoint","buckboard","screwball","hatchway","disinfectant","cramp","causeway","tease","corkscrew","sledgehammer","sloth","materialist","mogul","stopper","bevel","carbonate","berry","snore","throwaway","agribusiness","rerun","guillotine","nip","computation","keyhole","storybook","watercolor","cer","porcupine","urging","cockroach","esse","headman","settee","usher","short","obstetrician","faggot","ballpark","palisade","whimsy","co-owner","spout","nub","pectin","dun","cypress","trombone","scat","lite","dame","quip","invisibility","baboon","sneeze","swish","originator","biennial","newsreel","chameleon","dressmaker","storehouse","trapping","statistician","bloke","helmsman","ewe","drape","trump","great-grandmother","cloister","caterer","grounding","hotbed","life-span","urinal","funk","bedchamber","boudoir","theoretician","oddball","nameplate","raven","ditty","canary","anticommunist","reconsideration","playboy","skate","transparency","uplift","six-pack","rambling","commendation","wimp","pestilence","sufferer","kelp","counterforce","self-doubt","deformity","croak","marine","marksman","directorate","reversion","stimulant","dence","beloved","eraser","slurry","tracing","bigot","compendium","entitlement","monolith","misrepresentation","darkroom","nutshell","torque","concubine","peephole","lesion","bogey","spindle","birdie","nugget","tenon","supercomputer","weakling","provenance","vowel","empiricist","filet","co-founder","prelate","onlooker","tricycle","sax","catheter","accessory","fresco","prod","oscillator","self-image","refraction","excretion","prance","insurer","cask","impersonation","rangeland","toothache","magnum","accuser","rubbing","carver","carnation","masquerade","trapdoor","shaker","mittee","tux","poignancy","payday","captor","couplet","mutant","jogger","raider","dilution","sickle","prowl","blister","reassessment","infirmity","matchmaker","workload","restaurateur","tuning","wiretap","perpetrator","davenport","lamppost","inductivist","affect","sterilization","booming","rucksack","repurchase","starship","bystander","taker","spaniel","teletype","cuckoo","sneaker","aspen","soundtrack","sacrilege","surname","succor","co-chairman","anticlimax","hopper","jumpsuit","rinse","rummy","cigaret","washcloth","butchery","almond","cooker","implement","effluent","cheat","threshing","silicone","draining","vector","shopper","dandelion","pecking","brazier","cobblestone","slugger","sacrificer","airlock","lunchroom","zebra","ejection","cutthroat","wizardry","crony","kennel","internship","cohabitation","omelet","wheelhouse","redundancy","schema","psychopath","buttock","grasshopper","playmate","lamentation","socialite","cornucopia","lichen","coterie","warlord","discomfiture","frieze","montage","traveller","curvature","condensation","vineyard","scraper","generality","archive","half-sister","gangplank","intimation","doublet","pleading","tome","quadrangle","connotation","lifeboat","blueberry","coinage","prospector","bash","disciplinarian","dualism","bookshelf","adjutant","clod","apportionment","footbridge","tourniquet","spore","slicker","jetport","magenta","schizophrenic","oilman","harbinger","trespass","merry-go-round","sabra","old-timer","vigilante","melanoma","torpor","gliding","refutation","dab","jurist","plumage","kitty","cauldron","abbey","jasmine","lefty","cabal","detonator","retiree","abatement","clamp","roost","councilman","halfback","centimeter","shirttail","whispering","stratagem","exponent","cheesecake","truism","jaunt","node","ironclad","undertow","self-portrait","urchin","idealization","splendour","antechamber","living-room","sampler","friar","irregularity","lateness","playback","binder","washbasin","tummy","capitulation","felicity","canter","birthrate","earthenware","kitchenette","foundry","ladle","babushka","chlorophyll","adjournment","villager","recrimination","hotshot","blaster","pruning","soloist","hummingbird","recuperation","bequest","hemlock","cottonwood","drawbridge","alternation","malt","interconnection","mugger","tuft","keystone","riverboat","thrall","ayatollah","highland","mistrial","bunkhouse","anesthesiologist","dredging","anode","salsa","prizefighter","neckline","chile","foreclosure","cola","digression","scythe","lout","chamberlain","minefield","sabbatical","appraiser","isotope","demarcation","garnet","buzzard","repulsion","lowland","snifter","bending","weekly","dispensation","botanist","sari","stabbing","ovary","skullcap","journeyman","thievery","look-alike","parson","heartbreak","distillate","neophyte","blower","storekeeper","firmament","taxicab","corona","fusillade","publicist","resume","breather","casement","smokestack","interrogator","outcropping","mecca","dilettante","shoestring","belch","behemoth","negligee","heath","smut","negative","fistfight","regent","incumbency","curragh","toga","ministration","turnip","beamer","stepladder","loon","businesswoman","jumbo","whining","spoor","posturing","parlour","concertina","alkali","rampart","chime","warmup","taffeta","hyena","firehouse","sweetener","guessing","pronoun","madhouse","lioness","breadwinner","diocese","escarpment","mimic","retina","larder","gnat","hothouse","ponytail","markup","bevy","revocation","depressive","garner","redefinition","lifter","stateroom","nutritionist","isolationist","surveyor","polemic","ornamentation","gouge","counterweight","thrower","illegality","joining","lumberyard","wholesaler","obeisance","stagecoach","substage","lockup","nudge","rejoinder","compost","carburetor","peacemaker","prologue","swinger","right-of-way","precipitate","sprinkler","crone","valentine","vassal","tabloid","minstrel","nursemaid","attribution","courtier","docket","spool","convocation","serviceman","letterhead","zealot","negro","cackle","masthead","dispersion","underwriting","armload","noodle","squawk","periodical","reformation","boa","starlet","about-face","ejaculation","encore","harangue","woodpile","earlobe","reaffirmation","handlebar","compunction","contemporary","midriff","nimbus","householder","postgraduate","quirk","innovator","sneak","straitjacket","pussycat","belle","kidnapper","spacing","laying","standout","estuary","duster","jackpot","motorboat","welterweight","kicker","expectant","revue","senior","epistemology","yeoman","firearm","granddaddy","projectile","stammer","crossfire","toxin","hookup","phantom","transgression","flagstone","acuity","twick","acolyte","directorship","corpsman","worktable","mammogram","wart","liqueur","unbutton","receivership","duchess","delinquent","picker","earphone","blare","promontory","formalism","infamy","operative","hock","crusher","megaphone","retrenchment","chaser","dementia","wane","triviality","quadrant","curate","pairing","forging","dermatologist","mango","bon","moccasin","hayloft","marionette","seedship","ooze","interloper","twill","solicitation","trowel","professorship","scrimmage","scrawl","blockage","parkway","motorman","snapper","transcription","vasectomy","binary","flagon","choirboy","butte","throbbing","bound","thunderbolt","dike","cowbell","elect","prodding","lynching","rant","drifter","snot","preservative","brogue","tary","tortoise","lattice","strudel","composite","churn","median","neurosurgeon","mariner","kiln","boarder","ama","petal","friendly","clearinghouse","swastika","filler","enquiry","dispensary","chump","archeologist","rescuer","dy","draftsman","snicker","shakedown","romp","construct","conclave","winery","polarity","breakin","wailing","gurgle","bedroll","commissar","albatross","shading","peal","taverna","chicanery","has-been","waistline","oaf","satirist","faint","myosin","dimple","landfall","smithy","tough","gunboat","busboy","cassava","poplar","discontinuity","obelisk","blubber","demonstrator","meltdown","abolitionist","thorax","holler","pimple","sending","druggist","indirection","leotard","ken","showman","despot","ombudsman","lyricist","dearie","lumberjack","gaff","pagan","cremation","infarction","sturgeon","publican","bottleneck","chambermaid","pectoral","purser","godsend","whisk","canard","concentrate","copter","shipwreck","laundering","clipper","notepad","jackal","indentation","basilica","adhesive","mermaid","knighthood","personage","omelette","whoosh","embellishment","misgiving","tracer","brawling","crucifixion","steal","transference","sleight","threesome","windowpane","bereavement","viceroy","betrothal","refresher","seagull","jay","needler","discoverer","goiter","caterpillar","impostor","diminutive","cation","playpen","amputation","confidante","dockside","inquisition","chronicler","seamstress","lath","absolutist","cadaver","perusal","subterfuge","self-satisfaction","sawmill","agitator","shortcoming","breakwater","microcomputer","lima","greatcoat","mahout","prima","undress","superstructure","stopgap","moo","bio","fret","pomposity","bough","autocracy","anchorage","samovar","gen","burrow","rosebud","segregationist","mortise","hydrant","postmortem","oversimplification","entryway","paintbrush","rea","balustrade","chuck","trumpeter","ferret","opportunist","pinnace","salamander","transom","mace","individualist","synthesizer","thoroughbred","cupola","tomboy","ensign","bottling","whir","poultice","entranceway","saver","gurdwara","renegotiation","tossing","ruffle","footprint","skeptic","birthmark","tailspin","kickback","chalice","plagiarism","passer","inhumanity","ceremonial","sapling","babysitter","creeper","galleon","bellman","holly","hacienda","cur","transplantation","scab","ballgame","demotion","flimsy","hovel","lug","layup","firefighter","gravestone","nymph","cajole","tickle","boxcar","secession","refractor","somersault","personification","treacle","tutorial","voucher","thimble","stickler","front-runner","paroxysm","exorcism","psalm","infestation","scrubbing","castor","peppermint","orchestration","extremist","oppressor","lode","prompting","watchword","swindle","statehouse","floater","nightdress","bloak","elegy","woodshed","trembling","banning","adornment","redoubt","lightweight","postulate","anti-Semite","tasting","viewscreen","sentinel","nation-state","heft","nurture","villainy","manhunt","invoice","sprig","self-denial","selector","piglet","commemoration","crucible","piper","curtsy","lackey","breastplate","gadfly","octave","epilogue","self-examination","thyroid","apologist","chemise","super","figment","waif","essayist","brewer","miniature","sediment","cannibal","tulip","caramel","caseload","synonym","analogue","ver","shirtwaist","cornerback","insecticide","debauchery","lien","strangulation","intricacy","guesthouse","crumbling","glassware","cachet","thumping","damper","colonist","frolic","ogre","heist","sorting","pawl","muttering","refill","cowl","imbecile","painkiller","garter","creole","overpass","simile","potpourri","piling","predisposition","corsage","mobster","sandal","aphorism","vice-chairman","heartache","converter","pecan","ecologist","substrate","quagmire","trenchcoat","voyce","overstatement","soapbox","rediscovery","effusion","agronomist","firecracker","haunt","murmuring","henhouse","fluctuation","signora","mulberry","hoist","bullfight","discotheque","finder","tureen","hairstyle","dignitary","consummation","spar","pogrom","beeper","read","outboard","sho","skit","impurity","sadist","parafoil","bouncer","spender","locust","boardroom","burnout","inoculation","surfeit","welder","propagandist","mortuary","pessimist","equivalence","juke","spatter","incubator","reproof","gulch","notary","speedometer","lodger","mitt","southpaw","footman","amity","bloodline","cleaver","coffeehouse","confederate","assist","ation","lecher","abrasion","daybed","knit","laddie","forfeit","kebele","filigree","frisbee","cantina","oscillation","countryman","juggler","scion","acrobat","hourglass","realtor","onyx","pettiness","chancellery","footfall","slippage","mandarin","eral","lob","impertinence","providence","dom","idyll","democrat","deferral","sorority","slamming","badger","mutter","ling","strobe","explosive","municipality","crossover","bedstead","spatula","tug-of-war","goon","pauper","lation","sacking","alder","nightstick","salve","infraction","prowler","falsification","pant","drunk","rumbling","ce","minuet","plaything","yelling","kiddie","duction","buttress","carapace","sobbing","insufficiency","prig","bidet","bloodhound","madwoman","buffoon","vignette","doorjamb","caprice","gable","converse","cad","creche","mullah","spectre","spotter","ingenue","chalet","automatic","stash","truckload","tailback","static","productivist","dissipation","haunch","nag","awl","self-delusion","rattler","blacklist","beagle","trapeze","obstinacy","fiddler","theorem","rearrangement","changeover","reassignment","courtesan","fillet","nay","cutout","luncheonette","purveyor","incitement","remarriage","amelioration","executor","buttonhole","duality","churchman","sickroom","farmstead","jester","perfidy","cuticle","weal","snub","pretension","roadbed","furnishing","quickie","workweek","conveyance","pseudopatient","turbocharger","fleece","abbreviation","spigot","leaflet","great-aunt","ninny","beaker","experimenter","validation","inhabitant","grading","cantaloupe","potentiality","flue","commoner","playroom","readjustment","boathouse","vivacity","brakeman","petitioner","singularity","gage","delineation","fester","paratrooper","font","pitchfork","signifier","crossbar","playhouse","tripe","stylus","pacemaker","clustering","hone","runt","emporium","ragtag","aneurysm","trapper","pulley","thrashing","candlestick","checkerboard","swoop","surcoat","dystrophy","bristle","beck","toolbox","hunchback","subcompact","doze","seaway","disclaimer","arbitrator","miller","crackpot","loafer","instigation","sen","bale","skim","skip","dollop","tender","oeuvre","goner","sor","tort","cropland","profundity","caf","zoom","gabardine","quack","cataclysm","condolence","foxhole","circlet","brave","misfit","bivouac","artificiality","dachshund","puke","bagel","sortie","nomad","opal","ethnicity","firebox","ratchet","cud","worsted","squabbling","cheque","jean","avatar","dirge","footstool","velour","barrister","pression","microchip","coda","reappraisal","cess","hangman","centenary","plough","broomstick","headstone","tormentor","sore","rathorn","voyeur","world-view","co-star","warren","fail","deflation","noble","fleck","saleswoman","hap","machinist","waffle","tom","ell","prefab","suckling","guardhouse","sabre","entanglement","integrator","quarterly","paraffin","heifer","frivolity","good","bougainvillea","excommunication","distillation","cyclist","meteorologist","rubric","cul-de-sac","misnomer","phobia","demagogue","bloodletting","raconteur","ger","astrologer","zygote","counterrevolution","reinstatement","anchovy","getup","tryout","scullery","turnstile","cyst","mustang","gaslight","self-deception","emanation","grown-up","escapade","versity","fishery","paprika","grailstone","gurney","fount","holdout","licensee","jackknife","asterisk","still","fundamentalist","humbug","repast","christening","butternut","miniskirt","fortune-teller","spillway","ference","salver","payout","nodule","high","tugboat","gizzard","sympathizer","fibrillation","incompatibility","dodge","trove","mercenary","pigtail","matchbook","masterwork","barb","endeavour","confection","ephor","yarmulke","char","mimeograph","holdover","subtitle","saddlebag","metronome","tine","testicle","caveat","etching","auntie","guarantor","ringer","airman","boatman","carnivore","armband","polder","tryst","lem","sitting-room","barrow","reappearance","pastiche","bankroll","stroller","saxophonist","blanc","redesign","plotting","gruel","juicer","slat","scooter","socialist","gradient","ember","scorecard","remembering","bo","forecaster","flirt","backache","parakeet","pixie","guffaw","anesthetist","logjam","pursuer","physiologist","follicle","coverall","patsy","bunt","lubricant","jawbone","numeral","mourner","rune","bettor","solder","nitrite","rime","pinstripe","pistachio","monocle","equivocation","crystallization","twit","two-year-old","toupee","eyelash","recognizance","cy","sophistry","seesaw","loony","do-gooder","dusting","commonality","yearling","disbarment","self-congratulation","tsar","vagabond","rhinestone","viper","planetoid","crochet","laird","flatland","prompt","catamaran","wigwam","mainframe","shivering","stringer","vane","iniquity","hoodlum","tableware","smelter","overlay","umber","placenta","yew","right-hander","laggard","cornice","philanthropist","scouring","dissenter","mainsail","showplace","conch","sentimentalist","protectorate","sanitarium","truancy","angler","showpiece","carotene","pollutant","diabetic","hairbrush","videodisc","intellectualist","pothole","setter","tense","grader","kneecap","birdbath","dell","typhoid","tuba","torturer","commie","houseboat","revelry","medalist","hinterland","jowl","splotch","sable","mouf","ripoff","coolie","streetlamp","damn","sharecropper","oral","schoolmate","commander-in-chief","capitalization","flex","shtetl","chenille","pullback","pharaoh","claret","fulfilment","glower","remuneration","internationalist","pap","pediment","sonata","toke","co-director","dollhouse","salesgirl","greenback","analog","ofa","freelancer","hairpin","aphasia","kicking","bummer","lawmaker","thickening","juggernaut","comma","sander","claimant","triad","rhizome","prolongation","placer","transvestite","faceplate","shortening","coffle","surfer","greengrocer","roughage","dumbbell","coiffure","pinky","ex-President","start-up","bobby","sidearm","paean","raiment","conceptualization","surmise","agnostic","cranny","tassel","infarct","pitchman","minor","stationmaster","sublet","puter","dramatization","mounting","washstand","counsellor","penknife","curtailment","remake","millimeter","sextant","vocalist","blowup","walleye","pickax","fanny","ascendant","brushing","highball","bandleader","winning","godmother","horoscope","disequilibrium","run-up","grazer","sandbar","motorbike","hassock","piggy","teat","reprise","wheeling","psychotherapist","calabash","cob","relativist","packer","slayer","digger","banshee","autocrat","knave","muskrat","extinguisher","foreleg","sobriquet","hospice","accretion","mastermind","figurine","newsmagazine","epidemiologist","pic","minaret","dereliction","city-state","jawline","escapist","legation","weatherman","sinker","cabby","guardrail","objector","timepiece","cistern","werewolf","decadent","harlot","epiphany","bricklayer","doorkeeper","obsidian","bedpost","constriction","refectory","blackbird","enforcer","riposte","schmuck","squab","pop-up","handrail","sandbag","superman","underbelly","alarmist","sesame","paratroop","droplet","proclivity","theorizing","quark","tactician","sundae","poolhall","behaviorist","dipper","postmark","co-conspirator","carload","electrocution","mould","goodnight","appendectomy","statuette","coefficient","cornet","scolding","prude","platitude","carport","lilac","geisha","foist","mitigation","percussionist","lechery","wyrm","charlatan","tussle","slough","jamb","twister","lakeshore","scavenger","pinkie","changeling","pinhead","muster","exploring","fief","critter","haystack","skimmer","geyser","stumble","update","tabernacle","gargoyle","projectionist","requisite","suffix","ramrod","betrayer","perience","tance","fluting","flare-up","fatherland","guardianship","douche","good-night","trawler","headsman","stoplight","operetta","spend","hater","teakettle","geneticist","particular","wardroom","slider","deuce","gingham","telethon","acclamation","centrifuge","workstation","pretender","prong","lampshade","ureter","hiccup","acetate","molding","wallop","vagrant","three-star","carafe","blowout","equinox","rave","junior","spoof","confessor","troubleshooter","braggart","judgeship","rapier","landmass","stoic","cuckold","inheritor","forester","jangle","gymnast","wingman","stein","gnome","drumstick","whatnot","yachtsman","realty","glob","by-election","academic","deflection","knocker","wondering","mugging","petit","frosting","pillowcase","panelling","grendel","tribune","tabulation","simulator","whaler","stork","gill","cavalcade","workhorse","locksmith","preppie","henchman","countertop","groundcar","puree","wellspring","debasement","prankster","tration","insert","put-down","typer","chartreuse","crematorium","headpiece","noncom","wipe","drove","sportscaster","impersonator","shrew","twitching","loader","magnolia","dropping","functionary","dissonance","cudgel","forfeiture","glutton","reject","doubleheader","tarp","suburbanite","afghan","chaperone","bas-relief","oscilloscope","imposter","newel","trusteeship","shocker","cannonball","half-breed","woodpecker","tumbleweed","snip","consignment","left-hander","spoil","also-ran","exhalation","signification","tester","ashram","gardenia","deductible","frontline","subtraction","bowstring","upland","bearskin","gramophone","mock-up","serenade","mix-up","extrapolation","tidbit","semaphore","banging","dogwood","carol","mapping","exchanger","ignominy","retraction","videocassette","precept","sirloin","mortification","pagoda","belfry","cubbyhole","mindstone","greyhound","clank","snowbank","instep","sanatorium","savanna","longshoreman","copier","nightshirt","boatyard","brigand","usurpation","understudy","interrelationship","undercarriage","sulphate","quasar","marshmallow","thrush","sweeper","alleviation","feint","chimera","infidel","modifier","perennial","simpleton","gridiron","overlord","airway","binding","abstention","algorithm","amalgamation","ascension","herdsman","lollipop","pastel","laminate","tendril","synopsis","drawstring","intermarriage","restorer","swoon","firefight","civilisation","self-criticism","hanky","ventricle","jot","interferon","circel","avenger","stepson","amethyst","beachhead","loggia","sizzle","burp","watchtower","endearment","dryad","prefect","tong","croissant","blocker","brioche","thistle","sunburst","savor","dumpling","checker","soliloquy","marketer","wheeze","molar","oboe","inbound","masochist","superficiality","tabby","outcrop","deputation","bassist","particularity","strop","thang","doggy","zation","ghoul","domestic","frostbite","relapse","floorboard","clicking","paraphrase","sinkhole","pushcart","overdraft","spinnaker","sourdough","sweatshop","meteorite","lander","caboose","junket","planer","iguana","brouhaha","reaper","sharpshooter","eggshell","self-sacrifice","minnow","skyrocket","connexion","effrontery","oblong","biker","flinch","cog","bullock","retrial","underwriter","gentlewoman","noggin","sissy","collect","dogmatism","sweatsuit","biplane","polariser","server","hiker","electrolyte","thunderclap","bronc","snooze","mascot","sherbet","carillon","decal","womanizer","underground","tailcoat","worshipper","automaton","proscription","sleuth","honeybee","abutment","foller","palladium","partake","jailing","counterfeit","pompadour","moneymaker","acacia","monthly","geographer","doghouse","bludgeon","fitter","conservator","indecency","atoll","fife","acquit","barracuda","mortician","striker","plait","untruth","hoarding","eighteen-wheeler","shakeup","grounder","abuser","hamstring","parishioner","cherub","cubist","antler","kisser","shunt","cravat","admixture","whinny","scorpion","amenity","matchup","spacer","settling","insinuation","possum","tenancy","girder","adapter","mousetrap","cubble","steppe","hypochondriac","covey","whipping","taunt","pocketful","pug","panhandle","conga","citron","foul-up","plaint","nouveau","oilskin","meridian","lifer","bolster","wren","gripe","mountaineer","transceiver","treetop","hex","harrow","tampering","photocopy","redskin","cesspool","barrette","cleanser","missive","breakfront","mini","ridgeline","semi","pasha","byword","phoneme","seducer","miser","cookstove","limerick","cummerbund","labourer","ascot","wraith","tarantula","toffee","pituitary","liana","cleat","line-up","helix","highboy","bicep","partment","coed","expletive","dumpster","deferment","progenitor","sandbox","mignon","typhoon","sublimation","backdoor","alchemist","pacifier","insomniac","hairpiece","lintel","indemnity","blurb","republican","electrocardiogram","futurist","recliner","mote","sketchbook","fulcrum","gratuity","aqueduct","adherent","masque","sundial","template","handmaiden","hedgehog","coding","corsair","solstice","orifice","sonobuoy","prizewinner","spinner","townsman","rosette","mind-set","unkindness","pushover","bility","infielder","hutch","erasure","parallelism","avowal","fastness","broadcloth","hellhole","grandparent","toehold","ident","sleepwalker","watching","aerie","database","mismatch","hombre","scrambler","spoiler","putdown","rookery","spinoff","ringleader","duchy","sealskin","transformer","doggie","bedsheet","cowhide","ceramic","prostration","cheroot","houseboy","giantess","tomcat","speedster","basalt","minicomputer","rapacity","spaceman","in-law","equerry","humpback","academician","harvester","fairground","ream","carat","entreaty","groundswell","obfuscation","provocateur","fugue","denigration","rifleman","manipulator","panting","synod","glitch","nightie","goaltender","kingpin","comforter","anesthetic","klaxon","hijack","orb","hostelry","gladiator","misadventure","bombard","fixity","tanner","stringency","wonderland","x-ray","plainclothesman","roadhouse","travelogue","gasket","nibble","hacking","nude","tincture","receptor","fink","schoolmarm","washtub","homesteader","hacker","portiere","hatbox","tamer","howitzer","grouper","frontage","amoeba","clime","flashback","teamster","accolade","polluter","officeholder","inpatient","altercation","reverberation","coproduction","phosphor","substation","bandana","sapper","preserver","pigeonhole","prefecture","milkman","avocation","argyle","amphetamine","linker","leviathan","hamster","bondsman","comer","bumpkin","sheikh","beefsteak","tyke","discoloration","kingmaker","quotient","excision","whitey","asymmetry","trill","discourtesy","bleat","hatching","crier","creel","seabed","witticism","riser","lurcher","moviemaker","pantsuit","linchpin","deformation","deodorant","soybean","washboard","egotist","underpass","dysfunction","tingling","barstool","paramour","udder","microbe","radiologist","qualm","welt","salesperson","signpost","sepulcher","lumpectomy","slaver","shopgirl","peregrine","siesta","reiteration","profligacy","iodide","iconoclast","rollcall","fillip","oratorio","splat","incoherence","accompanist","motorcar","nunnery","busybody","carryall","nettle","jaguar","pretence","odometer","potentate","mussel","prophetess","monetarist","proach","typescript","hacksaw","broadsword","miter","fatty","terrarium","archangel","powerboat","stooge","cannery","pylon","pulsation","misstep","yucca","hearthstone","rumour","lockout","toboggan","trampoline","concatenation","debility","acorn","forklift","psion","dragonet","ligament","folio","tie-up","picking","swatch","arrowhead","martinet","fisher","quintet","ellipse","legitimation","nightwatch","hardback","schemer","conversationalist","collectivist","reallocation","diorama","cutaway","point-of-view","cattleman","abscess","talc","incubus","dribble","sis","rhododendron","rolling","spiderweb","nonsmoker","crissake","refusenik","save","obstructionist","suture","parenthesis","reefer","great-grandson","steelworker","bumblebee","bullfrog","festivity","embolism","defeatist","tankard","ferryman","garret","co-worker","consonant","copywriter","bookseller","compress","dogfight","embezzler","quiche","liege","dissector","taskmaster","prosthesis","emulsion","spitball","modulation","squint","retelling","baiting","whirr","air-conditioner","individuation","geezer","aspirant","pensioner","re-enactment","flapper","looker","marshland","sexton","adverb","coenzyme","misapprehension","inaccuracy","barmaid","beautician","daredevil","racehorse","oxford","spume","busload","tradesman","manicure","propellant","apothecary","ruffian","titillation","instigator","siting","ringmaster","enumeration","twirl","bookmaker","technocrat","mouth-harp","quaver","icehouse","ventilator","roadster","subpena","carter","comedienne","savannah","milkmaid","pumper","signer","deadbeat","cofounder","bootlegger","tribesman","wildfire","shard","hailstorm","struction","routing","dolmen","idiosyncrasy","poniard","honky-tonk","spendthrift","draftee","hermaphrodite","pinafore","roundabout","frill","redeployment","ophthalmologist","caldron","reinvestment","troubadour","fjord","leave-taking","elongation","clinch","trinket","suasion","neutralist","finalist","whiplash","ventriloquist","violator","monarchist","spanking","grindstone","initiator","standard-bearer","sender","atelier","distemper","ingot","frontiersman","altarpiece","endgame","homily","synapse","pillbox","ochre","scimitar","jubilee","presentiment","tation","aggrandizement","truncheon","damsel","fallibility","papaya","piggyback","puppeteer","workhouse","nightingale","entomologist","wicket","debriefing","logician","moorland","minimalist","matte","skirmishing","tonality","maidservant","yam","gatekeeper","whammy","drudge","angora","garland","manoeuvre","moviegoer","slingshot","titan","re-evaluation","ironwork","ambassadorship","lanch","pollination","riage","vocalization","brawler","shaving","particulate","inhaler","impoundment","surfboard","waterman","almanac","pepperoni","kook","colonnade","infantryman","scruple","functionalist","wisecrack","conscript","boor","bannister","pretzel","analgesic","firebrand","microprocessor","frame-up","guardsman","teetotaler","broad","pallbearer","airframe","wrangle","backboard","knockdown","reparation","poorhouse","milkshake","battlement","dragonfly","paymaster","snuffler","crudeness","nerd","blockhouse","donut","backhoe","principality","dimmer","wounding","collier","beater","footlocker","barkeep","absurdist","brickwork","great-uncle","rumination","appellation","joiner","hydrolysis","interlocutor","raindrop","hardtop","groping","cymbal","miscellany","pomegranate","hearer","abortionist","corncob","shoal","dunce","bellowing","bridgehead","mangrove","blotch","boxwood","briar","which","trickster","epileptic","dependent","encumbrance","claque","pickpocket","half-truth","bilge","overrun","caveman","posterior","derriere","sty","maggot","vibrator","imbecility","hang-up","syllogism","blindfold","sunbeam","chrysanthemum","amour","ne'er-do-well","odour","flowerpot","satrap","reconnoiter","tonsillectomy","clampdown","coliseum","warbler","hubcap","crudity","baseboard","lithograph","homeroom","stanchion","amphitheatre","disquisition","commonplace","feedlot","reprint","shire","kraken","careerist","goatskin","worldview","waddle","washout","doormat","diadem","sniffer","spat","superhighway","snooper","libation","zoologist","subtext","bailiwick","exterminator","popsicle","actuary","cabinetmaker","swami","contraceptive","softener","margarita","hatter","tention","earpiece","dormer","timberland","katun","crooner","one-liner","adjudication","snitch","referent","subset","disavowal","starburst","merchantman","dalliance","polymer","hypnotist","monogram","peerage","claymore","satyr","twerp","matchstick","rubber-stamp","clapper","exhibitionist","warhorse","eatery","seashell","radish","router","dinette","trombonist","rivet","requiem","breakaway","hard-liner","locator","shindig","corrective","truffle","whelp","expediter","savant","mitten","canton","wobble","misinterpretation","fense","headwrap","conciliator","chine","topping","assemblyman","divine","scuffling","boomlet","dervish","yellow-green","stockyard","hummock","trimming","royalist","calumny","vandal","prickle","strikeout","apologia","afterburner","hunker","flippancy","fop","embrasure","hornet","tithe","oilfield","lawman","turnkey","fledgling","coauthor","blowpipe","subjectivist","backstop","fishbowl","bedpan","sedge","protrusion","crybaby","freedman","seminarian","spacesuit","tautology","footstep","fiveyear","stoneware","mance","generalist","quitter","domicile","requisition","seance","cabana","wastrel","underling","looter","glassful","wallow","boater","disharmony","shiksa","herringbone","flyleaf","eyesore","lawnmower","walk-up","hemline","wiggle","posing","whirring","cropper","reappointment","psychodrama","shaver","orthodontist","granary","extrovert","calfskin","thinning","foghorn","trainload","carbide","metier","harpist","minim","ballcarrier","rayon","bursting","flipper","fastening","mullet","exploit","squatter","nullity","commodore","newlywed","eavesdropper","chiropractor","miler","arsonist","wrecker","transmutation","incompetency","subcontractor","tress","meatball","bobcat","distributorship","camcorder","pasty","glimmering","groaning","classicist","stakeout","supplicant","repeater","crackling","cryptographer","croupier","honeycomb","insincerity","inhibitor","mystification","greaser","barker","anthill","barbarity","strangle","myrtle","segmentation","marlin","capon","toenail","flip-flop","auger","blasphemer","dipping","pawnshop","penumbra","mohole","bauble","rube","flophouse","triplicate","sardine","master-mason","fang","brainstorm","derangement","hanker","molestation","smokescreen","cavalryman","edging","layover","signalman","clavicle","crewcut","tricolor","cochairman","liberationist","foreskin","bleacher","semi-circle","quince","flatcar","abattoir","farmboy","tibia","thrum","conformist","southerner","docudrama","whorl","break-up","conglomeration","exhibitor","bramble","cutie","woodchuck","compatriot","stole","tuner","housemother","dharma","femme","teahouse","banquette","bottomland","arranger","philistine","vacillation","chiton","retch","caddie","reissue","teaser","swampland","deejay","libertarian","pegboard","greenhorn","dork","cellmate","jobber","wishbone","millstone","haunting","blow-up","snorkel","snowplow","trespasser","punter","snowflake","snowdrift","gunnysack","surround","evergreen","clog","radioisotope","cougar","pundit","wattle","subgroup","oviduct","mixup","misstatement","sulfite","pansy","splint","counterproposal","pulsar","remove","landau","four-year-old","rebbe","disconnection","neomort","exegesis","meteoroid","meringue","sheepherder","radioman","strumpet","opment","millionth","speakeasy","conformation","cultivator","goof","annual","gazelle","demitasse","fishhook","preferment","homebody","skewer","chancre","sorbet","hologram","rivulet","oldster","prisoner-of-war","tulle","riff","restatement","debit","emplacement","repre","invariance","half-circle","objectivist","passer-by","scarlet","flail","impala","persimmon","purist","gation","burgher","snowman","starling","barony","annulment","lifespan","herder","embolden","swathe","ex-convict","trouper","half-wit","fuchsia","grange","ricochet","stinker","opacity","colander","absorber","armadillo","pleasantry","noncommunist","taxiway","overtone","debater","taillight","advisement","birdcage","baroness","aureole","breakout","colouring","astrophysicist","flatboat","stilt","eyeshade","barbell","deliverer","fishnet","prise","jackrabbit","manifold","chattel","jimmy","workshirt","thornbush","chatty","frisson","recount","patentee","oceanographer","forepaw","murderess","whalebone","frontrunner","cerebrum","jector","militiaman","lobsterman","earthling","clean","swindler","scree","begat","doorsill","housedress","strangler","shantytown","roughhouse","scenarist","foothill","contaminant","hamadryad","phony","fairyland","seascape","treble","prodigality","hobble","gantry","backroom","enticement","sawhorse","interviewee","cliffside","dustpan","scrubber","imbroglio","acquaintanceship","woodworker","aesthete","octogenarian","mauling","archivist","pungency","interweaving","jabber","bassinet","doubler","torte","linkup","outdoorsman","fixer","caddy","fumbling","defile","meristem","microbiologist","urologist","stovepipe","tambourine","constructionist","egomaniac","adjuster","liniment","impiety","timeline","cowgirl","sinecure","chillun","foreword","frat","retary","bagpipe","coif","visualization","colleen","shirtmaker","flounce","adder","riffle","underboss","reinterpretation","bender","seeding","fiver","sicken","decoder","holothete","figuring","stave","earplug","acrylic","epigraph","fairytale","flasher","sally","inkwell","nitwit","hussy","constrictor","stabilizer","stickup","seaplane","shimmy","dredge","updraft","speciality","insulator","frond","storyboard","shill","rafter","blowgun","dukedom","favourite","populist","striper","blowtorch","mallard","licking","poetess","tetracycline","ad-lib","toxicologist","fencer","gnawing","eration","photocell","golem","heirloom","penitence","gence","latecomer","broil","outdistance","howler","canine","replenishment","traditionalist","emcee","eyeglass","billow","eyelet","khaki","assignation","tepee","buccaneer","bellyache","parkland","musicologist","phaeton","spirochete","lanyard","mischance","tobacconist","blusher","castaway","meson","bouillabaisse","scrivener","stinger","life-cycle","harridan","motivator","mooring","crimp","inlay","purveyance","vertical","jackhammer","strongbox","dishpan","cobweb","couturier","chalkboard","basilisk","duckling","penitent","footrest","tangent","facing","peroration","floodlight","nouvelle","truss","sprite","drier","esplanade","banding","insulter","dialog","pincer","battlefront","missal","hayseed","parvenu","baronet","shipwright","whisker","no-hitter","double-dealing","moire","conjurer","rickshaw","crevasse","switchback","nicety","provincialism","novella","liberator","biggie","tune-up","ferryboat","remover","twosome","loveseat","tektite","sharpener","cartwheel","diva","flirting","disproportion","tortilla","rover","whodunit","birder","parley","birdsong","fiefdom","augury","harrier","tamale","judging","snakebite","diagnostician","tannin","qualifier","cheetah","distillery","protester","stockroom","factotum","newswoman","cosmopolitan","iridescence","aeroplane","toddy","co-defendant","parry","duocorn","boasting","elector","clarinetist","undergarment","psych","supergiant","armature","environ","collectivity","keepsake","gunfighter","wingspan","perforation","worshiper","groupie","cityscape","worrier","shipload","scallop","hatchery","portraitist","screamer","blaspheme","pacer","presenter","malcontent","seine","equivalency","scriptwriter","lieve","discard","bantam","centaur","typology","loiter","drubbing","airfoil","curio","grandmaster","finisher","luminary","alliteration","phantasy","blooper","fasting","samba","gearbox","islet","apricot","smidgen","inset","firestorm","madcap","seedbed","gunsight","forelock","disjunction","writhing","huckleberry","abstract","squirm","ironist","monosaccharide","pushbutton","terracotta","artiste","showgirl","cornea","temptress","popularization","free-fall","scribbling","conviviality","flange","thwack","droop","rower","sweatband","gopher","mandolin","slobber","stricture","calyx","dietician","rehash","padre","ancient","dotage","jacaranda","pensione","contravention","undulation","ironworker","currant","hankie","face-lift","anthropoid","depressant","war-horse","tithing","greeter","matchbox","woodcutter","magpie","wayfarer","handcuff","lawgiver","traverse","minion","cavalier","sonarman","defoliant","scamp","snowshoe","polyp","gainer","honkie","bottler","halloo","amputee","ontology","bromide","brisket","goodie","tavern-keeper","choker","preaching","molester","tonsure","recapitulation","aviary","stevedore","raffle","bootstrap","angiogram","plantain","tipper","hooting","seismometer","persecutor","lobotomy","pigsty","virologist","gamete","presbytery","stepping-stone","dressing-room","cyclamate","chipmunk","platelet","flogging","tuber","reservist","blinker","demographer","turncoat","demesne","fancier","ideologist","self-justification","bucketful","m'lord","rapping","bestiality","irrelevancy","oiler","mackinaw","flutist","trafficker","categorization","pram","world-system","cathouse","deceiver","idjit","double-take","reformulation","brushfire","separator","neigh","whimpering","crisscross","regurgitation","auteur","backwash","refiner","broadsheet","hedonist","recitative","nonentity","codger","tinting","policymaker","tutu","boondoggle","entrant","wok","small","boatload","searcher","taMing","sycophant","substructure","megalomaniac","rusher","saleslady","registrar","blackguard","neckerchief","oldie","clinician","flushing","pinwheel","dition","charioteer","beastie","stridency","verity","eyedropper","canvass","desperado","teardrop","farmyard","mannerist","macaw","valedictorian","whopper","pertinence","assay","puncher","manse","anatomist","dishtowel","nuke","egalitarian","tribulation","cinematographer","sailer","icicle","legume","spiritualist","nativist","these","progressive","blastocyst","harpooner","pedant","instrumentality","connector","masseur","vertebra","moonshiner","bowsprit","grabber","stele","clanking","renter","antihero","bankbook","jailbird","handicraft","fighter-bomber","streamer","retardant","wallflower","flamethrower","agate","cairn","bantamweight","agglomeration","roustabout","linden","roughneck","formance","moray","cession","rashness","capstone","derailment","declivity","snowfield","talon","haymaker","abductor","diffuser","geosector","camisole"]),jt}var wn;function xn(){if(wn)return nt;wn=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.nouns=nt.adjectives=void 0;const i=rl();nt.adjectives=i.default;const e=nl();return nt.nouns=e.default,nt}var Sn;function il(){return Sn||(Sn=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.nouns=i.adjectives=i.uniqueUsernameGenerator=i.generateUsername=i.generateFromEmail=void 0;const e=xn(),r=(u=0,l=4294967295)=>Math.random()*((l|0)-(u|0)+1)+(u|0)|0,t=u=>{let l;switch(u){case 1:l=Math.floor(r(1,9)).toString();break;case 2:l=Math.floor(r(10,90)).toString();break;case 3:l=Math.floor(r(100,900)).toString();break;case 4:l=Math.floor(r(1e3,9e3)).toString();break;case 5:l=Math.floor(r(1e4,9e4)).toString();break;case 6:l=Math.floor(r(1e5,9e5)).toString();break;default:l="";break}return l};function n(u,l){return u.replace(/@.+/,"").replace(/[&/\\#,+()$~%._@'":*?<>{}]/g,"")+t(l)}i.generateFromEmail=n;function o(u,l,c,p){const f=e.nouns[Math.floor(Math.random()*e.nouns.length)],d=p?p.replace(/\s{2,}/g," ").replace(/\s/g,u??"").toLocaleLowerCase():e.adjectives[Math.floor(Math.random()*e.adjectives.length)];let y;return u?y=d+u+f+t(l):y=d+f+t(l),c?y.substring(0,c):y}i.generateUsername=o;function a(u){if(u.dictionaries){const l=y=>u.dictionaries[y][r(0,u.dictionaries[y].length-1)],c=u.dictionaries.length,p=u.separator||"";let f="";for(let y=0;y<c;y++){const m=l(y);f?f+=p+m:f=m}let d=f+t(u.randomDigits);if(d=d.toLowerCase(),u.style==="lowerCase")d=d.toLowerCase();else if(u.style==="capital"){const[y,...m]=d.split("");d=y.toUpperCase()+m.join("")}else u.style==="upperCase"&&(d=d.toUpperCase());return u.length?d.substring(0,u.length):d.substring(0,15)}else throw new Error("Cannot find any dictionary. Please provide at least one, or leave the 'dictionary' field empty in the config object")}i.uniqueUsernameGenerator=a;var s=xn();Object.defineProperty(i,"adjectives",{enumerable:!0,get:function(){return s.adjectives}}),Object.defineProperty(i,"nouns",{enumerable:!0,get:function(){return s.nouns}})}(ur)),ur}var ol=il();class al{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const r of this._parts)e.push(r);return sl(e).buffer}}function sl(i){let e=0;for(const n of i)e+=n.byteLength;const r=new Uint8Array(e);let t=0;for(const n of i){const o=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);r.set(o,t),t+=n.byteLength}return r}function Fi(i){return new ll(i).unpack()}function Oi(i){const e=new cl,r=e.pack(i);return r instanceof Promise?r.then(()=>e.getBuffer()):e.getBuffer()}class ll{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let r;if((r=e^160)<=15)return this.unpack_raw(r);if((r=e^176)<=15)return this.unpack_string(r);if((r=e^144)<=15)return this.unpack_array(r);if((r=e^128)<=15)return this.unpack_map(r);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return r=this.unpack_uint16(),this.unpack_string(r);case 217:return r=this.unpack_uint32(),this.unpack_string(r);case 218:return r=this.unpack_uint16(),this.unpack_raw(r);case 219:return r=this.unpack_uint32(),this.unpack_raw(r);case 220:return r=this.unpack_uint16(),this.unpack_array(r);case 221:return r=this.unpack_uint32(),this.unpack_array(r);case 222:return r=this.unpack_uint16(),this.unpack_map(r);case 223:return r=this.unpack_uint32(),this.unpack_map(r)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),r=(e[0]&255)*256+(e[1]&255);return this.index+=2,r}unpack_uint32(){const e=this.read(4),r=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,r}unpack_uint64(){const e=this.read(8),r=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,r}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const r=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,r}unpack_string(e){const r=this.read(e);let t=0,n="",o,a;for(;t<e;)o=r[t],o<160?(a=o,t++):(o^192)<32?(a=(o&31)<<6|r[t+1]&63,t+=2):(o^224)<16?(a=(o&15)<<12|(r[t+1]&63)<<6|r[t+2]&63,t+=3):(a=(o&7)<<18|(r[t+1]&63)<<12|(r[t+2]&63)<<6|r[t+3]&63,t+=4),n+=String.fromCodePoint(a);return this.index+=e,n}unpack_array(e){const r=new Array(e);for(let t=0;t<e;t++)r[t]=this.unpack();return r}unpack_map(e){const r={};for(let t=0;t<e;t++){const n=this.unpack();r[n]=this.unpack()}return r}unpack_float(){const e=this.unpack_uint32(),r=e>>31,t=(e>>23&255)-127,n=e&8388607|8388608;return(r===0?1:-1)*n*2**(t-23)}unpack_double(){const e=this.unpack_uint32(),r=this.unpack_uint32(),t=e>>31,n=(e>>20&2047)-1023,a=(e&1048575|1048576)*2**(n-20)+r*2**(n-52);return(t===0?1:-1)*a}read(e){const r=this.index;if(r+e<=this.length)return this.dataView.subarray(r,r+e);throw new Error("BinaryPackFailure: read index out of range")}}class cl{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const r=e.constructor;if(e instanceof Array){const t=this.pack_array(e);if(t instanceof Promise)return t.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const t=e;this.pack_bin(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(t=>{this.pack_bin(new Uint8Array(t)),this._bufferBuilder.flush()});if(r==Object||r.toString().startsWith("class")){const t=this.pack_object(e);if(t instanceof Promise)return t.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${r.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const r=e.length;if(r<=15)this.pack_uint8(160+r);else if(r<=65535)this._bufferBuilder.append(218),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const r=this._textEncoder.encode(e),t=r.length;if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this._bufferBuilder.append(216),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(r)}pack_array(e){const r=e.length;if(r<=15)this.pack_uint8(144+r);else if(r<=65535)this._bufferBuilder.append(220),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(r);else throw new Error("Invalid length");const t=n=>{if(n<r){const o=this.pack(e[n]);return o instanceof Promise?o.then(()=>t(n+1)):t(n+1)}};return t(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let r=0;e<0&&(r=1,e=-e);const t=Math.floor(Math.log(e)/Math.LN2),n=e/2**t-1,o=Math.floor(n*2**52),a=2**32,s=r<<31|t+1023<<20|o/a&1048575,u=o%a;this._bufferBuilder.append(203),this.pack_int32(s),this.pack_int32(u)}pack_object(e){const r=Object.keys(e),t=r.length;if(t<=15)this.pack_uint8(128+t);else if(t<=65535)this._bufferBuilder.append(222),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(t);else throw new Error("Invalid length");const n=o=>{if(o<r.length){const a=r[o];if(e.hasOwnProperty(a)){this.pack(a);const s=this.pack(e[a]);if(s instanceof Promise)return s.then(()=>n(o+1))}return n(o+1)}};return n(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const r=e&4294967295;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_uint64(e){const r=e/4294967296,t=e%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const r=Math.floor(e/4294967296),t=e%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}constructor(){this._bufferBuilder=new al,this._textEncoder=new TextEncoder}}let Di=!0,ji=!0;function Tt(i,e,r){const t=i.match(e);return t&&t.length>=r&&parseFloat(t[r],10)}function pt(i,e,r){if(!i.RTCPeerConnection)return;const t=i.RTCPeerConnection.prototype,n=t.addEventListener;t.addEventListener=function(a,s){if(a!==e)return n.apply(this,arguments);const u=l=>{const c=r(l);c&&(s.handleEvent?s.handleEvent(c):s(c))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(s,u),n.apply(this,[a,u])};const o=t.removeEventListener;t.removeEventListener=function(a,s){if(a!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(s))return o.apply(this,arguments);const u=this._eventMap[e].get(s);return this._eventMap[e].delete(s),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[a,u])},Object.defineProperty(t,"on"+e,{get(){return this["_on"+e]},set(a){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),a&&this.addEventListener(e,this["_on"+e]=a)},enumerable:!0,configurable:!0})}function ul(i){return typeof i!="boolean"?new Error("Argument type: "+typeof i+". Please use a boolean."):(Di=i,i?"adapter.js logging disabled":"adapter.js logging enabled")}function dl(i){return typeof i!="boolean"?new Error("Argument type: "+typeof i+". Please use a boolean."):(ji=!i,"adapter.js deprecation warnings "+(i?"disabled":"enabled"))}function Li(){if(typeof window=="object"){if(Di)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Vr(i,e){ji&&console.warn(i+" is deprecated, please use "+e+" instead.")}function pl(i){const e={browser:null,version:null};if(typeof i>"u"||!i.navigator||!i.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:r}=i;if(r.userAgentData&&r.userAgentData.brands){const t=r.userAgentData.brands.find(n=>n.brand==="Chromium");if(t)return{browser:"chrome",version:parseInt(t.version,10)}}if(r.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Tt(r.userAgent,/Firefox\/(\d+)\./,1));else if(r.webkitGetUserMedia||i.isSecureContext===!1&&i.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Tt(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(i.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Tt(r.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=i.RTCRtpTransceiver&&"currentDirection"in i.RTCRtpTransceiver.prototype,e._safariVersion=Tt(r.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Cn(i){return Object.prototype.toString.call(i)==="[object Object]"}function zi(i){return Cn(i)?Object.keys(i).reduce(function(e,r){const t=Cn(i[r]),n=t?zi(i[r]):i[r],o=t&&!Object.keys(n).length;return n===void 0||o?e:Object.assign(e,{[r]:n})},{}):i}function Pr(i,e,r){!e||r.has(e.id)||(r.set(e.id,e),Object.keys(e).forEach(t=>{t.endsWith("Id")?Pr(i,i.get(e[t]),r):t.endsWith("Ids")&&e[t].forEach(n=>{Pr(i,i.get(n),r)})}))}function Pn(i,e,r){const t=r?"outbound-rtp":"inbound-rtp",n=new Map;if(e===null)return n;const o=[];return i.forEach(a=>{a.type==="track"&&a.trackIdentifier===e.id&&o.push(a)}),o.forEach(a=>{i.forEach(s=>{s.type===t&&s.trackId===a.id&&Pr(i,s,n)})}),n}const _n=Li;function Ui(i,e){const r=i&&i.navigator;if(!r.mediaDevices)return;const t=function(s){if(typeof s!="object"||s.mandatory||s.optional)return s;const u={};return Object.keys(s).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const c=typeof s[l]=="object"?s[l]:{ideal:s[l]};c.exact!==void 0&&typeof c.exact=="number"&&(c.min=c.max=c.exact);const p=function(f,d){return f?f+d.charAt(0).toUpperCase()+d.slice(1):d==="deviceId"?"sourceId":d};if(c.ideal!==void 0){u.optional=u.optional||[];let f={};typeof c.ideal=="number"?(f[p("min",l)]=c.ideal,u.optional.push(f),f={},f[p("max",l)]=c.ideal,u.optional.push(f)):(f[p("",l)]=c.ideal,u.optional.push(f))}c.exact!==void 0&&typeof c.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[p("",l)]=c.exact):["min","max"].forEach(f=>{c[f]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[p(f,l)]=c[f])})}),s.advanced&&(u.optional=(u.optional||[]).concat(s.advanced)),u},n=function(s,u){if(e.version>=61)return u(s);if(s=JSON.parse(JSON.stringify(s)),s&&typeof s.audio=="object"){const l=function(c,p,f){p in c&&!(f in c)&&(c[f]=c[p],delete c[p])};s=JSON.parse(JSON.stringify(s)),l(s.audio,"autoGainControl","googAutoGainControl"),l(s.audio,"noiseSuppression","googNoiseSuppression"),s.audio=t(s.audio)}if(s&&typeof s.video=="object"){let l=s.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const c=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!c)){delete s.video.facingMode;let p;if(l.exact==="environment"||l.ideal==="environment"?p=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(p=["front"]),p)return r.mediaDevices.enumerateDevices().then(f=>{f=f.filter(y=>y.kind==="videoinput");let d=f.find(y=>p.some(m=>y.label.toLowerCase().includes(m)));return!d&&f.length&&p.includes("back")&&(d=f[f.length-1]),d&&(s.video.deviceId=l.exact?{exact:d.deviceId}:{ideal:d.deviceId}),s.video=t(s.video),_n("chrome: "+JSON.stringify(s)),u(s)})}s.video=t(s.video)}return _n("chrome: "+JSON.stringify(s)),u(s)},o=function(s){return e.version>=64?s:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[s.name]||s.name,message:s.message,constraint:s.constraint||s.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(s,u,l){n(s,c=>{r.webkitGetUserMedia(c,u,p=>{l&&l(o(p))})})};if(r.getUserMedia=a.bind(r),r.mediaDevices.getUserMedia){const s=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(u){return n(u,l=>s(l).then(c=>{if(l.audio&&!c.getAudioTracks().length||l.video&&!c.getVideoTracks().length)throw c.getTracks().forEach(p=>{p.stop()}),new DOMException("","NotFoundError");return c},c=>Promise.reject(o(c))))}}}function Bi(i){i.MediaStream=i.MediaStream||i.webkitMediaStream}function qi(i){if(typeof i=="object"&&i.RTCPeerConnection&&!("ontrack"in i.RTCPeerConnection.prototype)){Object.defineProperty(i.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const e=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let o;i.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(s=>s.track&&s.track.id===n.track.id):o={track:n.track};const a=new Event("track");a.track=n.track,a.receiver=o,a.transceiver={receiver:o},a.streams=[t.stream],this.dispatchEvent(a)}),t.stream.getTracks().forEach(n=>{let o;i.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(s=>s.track&&s.track.id===n.id):o={track:n};const a=new Event("track");a.track=n,a.receiver=o,a.transceiver={receiver:o},a.streams=[t.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else pt(i,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Vi(i){if(typeof i=="object"&&i.RTCPeerConnection&&!("getSenders"in i.RTCPeerConnection.prototype)&&"createDTMFSender"in i.RTCPeerConnection.prototype){const e=function(n,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=n.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:n}};if(!i.RTCPeerConnection.prototype.getSenders){i.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=i.RTCPeerConnection.prototype.addTrack;i.RTCPeerConnection.prototype.addTrack=function(s,u){let l=n.apply(this,arguments);return l||(l=e(this,s),this._senders.push(l)),l};const o=i.RTCPeerConnection.prototype.removeTrack;i.RTCPeerConnection.prototype.removeTrack=function(s){o.apply(this,arguments);const u=this._senders.indexOf(s);u!==-1&&this._senders.splice(u,1)}}const r=i.RTCPeerConnection.prototype.addStream;i.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(a=>{this._senders.push(e(this,a))})};const t=i.RTCPeerConnection.prototype.removeStream;i.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],t.apply(this,[o]),o.getTracks().forEach(a=>{const s=this._senders.find(u=>u.track===a);s&&this._senders.splice(this._senders.indexOf(s),1)})}}else if(typeof i=="object"&&i.RTCPeerConnection&&"getSenders"in i.RTCPeerConnection.prototype&&"createDTMFSender"in i.RTCPeerConnection.prototype&&i.RTCRtpSender&&!("dtmf"in i.RTCRtpSender.prototype)){const e=i.RTCPeerConnection.prototype.getSenders;i.RTCPeerConnection.prototype.getSenders=function(){const t=e.apply(this,[]);return t.forEach(n=>n._pc=this),t},Object.defineProperty(i.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Gi(i){if(!(typeof i=="object"&&i.RTCPeerConnection&&i.RTCRtpSender&&i.RTCRtpReceiver))return;if(!("getStats"in i.RTCRtpSender.prototype)){const r=i.RTCPeerConnection.prototype.getSenders;r&&(i.RTCPeerConnection.prototype.getSenders=function(){const o=r.apply(this,[]);return o.forEach(a=>a._pc=this),o});const t=i.RTCPeerConnection.prototype.addTrack;t&&(i.RTCPeerConnection.prototype.addTrack=function(){const o=t.apply(this,arguments);return o._pc=this,o}),i.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(a=>Pn(a,o.track,!0))}}if(!("getStats"in i.RTCRtpReceiver.prototype)){const r=i.RTCPeerConnection.prototype.getReceivers;r&&(i.RTCPeerConnection.prototype.getReceivers=function(){const n=r.apply(this,[]);return n.forEach(o=>o._pc=this),n}),pt(i,"track",t=>(t.receiver._pc=t.srcElement,t)),i.RTCRtpReceiver.prototype.getStats=function(){const n=this;return this._pc.getStats().then(o=>Pn(o,n.track,!1))}}if(!("getStats"in i.RTCRtpSender.prototype&&"getStats"in i.RTCRtpReceiver.prototype))return;const e=i.RTCPeerConnection.prototype.getStats;i.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof i.MediaStreamTrack){const t=arguments[0];let n,o,a;return this.getSenders().forEach(s=>{s.track===t&&(n?a=!0:n=s)}),this.getReceivers().forEach(s=>(s.track===t&&(o?a=!0:o=s),s.track===t)),a||n&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Wi(i){i.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const e=i.RTCPeerConnection.prototype.addTrack;i.RTCPeerConnection.prototype.addTrack=function(a,s){if(!s)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const u=e.apply(this,arguments);return this._shimmedLocalStreams[s.id]?this._shimmedLocalStreams[s.id].indexOf(u)===-1&&this._shimmedLocalStreams[s.id].push(u):this._shimmedLocalStreams[s.id]=[s,u],u};const r=i.RTCPeerConnection.prototype.addStream;i.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(l=>{if(this.getSenders().find(p=>p.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const s=this.getSenders();r.apply(this,arguments);const u=this.getSenders().filter(l=>s.indexOf(l)===-1);this._shimmedLocalStreams[a.id]=[a].concat(u)};const t=i.RTCPeerConnection.prototype.removeStream;i.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],t.apply(this,arguments)};const n=i.RTCPeerConnection.prototype.removeTrack;i.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(s=>{const u=this._shimmedLocalStreams[s].indexOf(a);u!==-1&&this._shimmedLocalStreams[s].splice(u,1),this._shimmedLocalStreams[s].length===1&&delete this._shimmedLocalStreams[s]}),n.apply(this,arguments)}}function Hi(i,e){if(!i.RTCPeerConnection)return;if(i.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Wi(i);const r=i.RTCPeerConnection.prototype.getLocalStreams;i.RTCPeerConnection.prototype.getLocalStreams=function(){const c=r.apply(this);return this._reverseStreams=this._reverseStreams||{},c.map(p=>this._reverseStreams[p.id])};const t=i.RTCPeerConnection.prototype.addStream;i.RTCPeerConnection.prototype.addStream=function(c){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},c.getTracks().forEach(p=>{if(this.getSenders().find(d=>d.track===p))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[c.id]){const p=new i.MediaStream(c.getTracks());this._streams[c.id]=p,this._reverseStreams[p.id]=c,c=p}t.apply(this,[c])};const n=i.RTCPeerConnection.prototype.removeStream;i.RTCPeerConnection.prototype.removeStream=function(c){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[c.id]||c]),delete this._reverseStreams[this._streams[c.id]?this._streams[c.id].id:c.id],delete this._streams[c.id]},i.RTCPeerConnection.prototype.addTrack=function(c,p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(m=>m===c))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===c))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const y=this._streams[p.id];if(y)y.addTrack(c),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new i.MediaStream([c]);this._streams[p.id]=m,this._reverseStreams[m.id]=p,this.addStream(m)}return this.getSenders().find(m=>m.track===c)};function o(l,c){let p=c.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const d=l._reverseStreams[f],y=l._streams[d.id];p=p.replace(new RegExp(y.id,"g"),d.id)}),new RTCSessionDescription({type:c.type,sdp:p})}function a(l,c){let p=c.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const d=l._reverseStreams[f],y=l._streams[d.id];p=p.replace(new RegExp(d.id,"g"),y.id)}),new RTCSessionDescription({type:c.type,sdp:p})}["createOffer","createAnswer"].forEach(function(l){const c=i.RTCPeerConnection.prototype[l],p={[l](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?c.apply(this,[y=>{const m=o(this,y);f[0].apply(null,[m])},y=>{f[1]&&f[1].apply(null,y)},arguments[2]]):c.apply(this,arguments).then(y=>o(this,y))}};i.RTCPeerConnection.prototype[l]=p[l]});const s=i.RTCPeerConnection.prototype.setLocalDescription;i.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?s.apply(this,arguments):(arguments[0]=a(this,arguments[0]),s.apply(this,arguments))};const u=Object.getOwnPropertyDescriptor(i.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(i.RTCPeerConnection.prototype,"localDescription",{get(){const l=u.get.apply(this);return l.type===""?l:o(this,l)}}),i.RTCPeerConnection.prototype.removeTrack=function(c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!c._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(c._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(d=>{this._streams[d].getTracks().find(m=>c.track===m)&&(f=this._streams[d])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(c.track),this.dispatchEvent(new Event("negotiationneeded")))}}function _r(i,e){!i.RTCPeerConnection&&i.webkitRTCPeerConnection&&(i.RTCPeerConnection=i.webkitRTCPeerConnection),i.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const t=i.RTCPeerConnection.prototype[r],n={[r](){return arguments[0]=new(r==="addIceCandidate"?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}};i.RTCPeerConnection.prototype[r]=n[r]})}function Ki(i,e){pt(i,"negotiationneeded",r=>{const t=r.target;if(!((e.version<72||t.getConfiguration&&t.getConfiguration().sdpSemantics==="plan-b")&&t.signalingState!=="stable"))return r})}const Tn=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Ki,shimAddTrackRemoveTrack:Hi,shimAddTrackRemoveTrackWithNative:Wi,shimGetSendersWithDtmf:Vi,shimGetUserMedia:Ui,shimMediaStream:Bi,shimOnTrack:qi,shimPeerConnection:_r,shimSenderReceiverGetStats:Gi},Symbol.toStringTag,{value:"Module"}));function Yi(i,e){const r=i&&i.navigator,t=i&&i.MediaStreamTrack;if(r.getUserMedia=function(n,o,a){Vr("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(n).then(o,a)},!(e.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const n=function(a,s,u){s in a&&!(u in a)&&(a[u]=a[s],delete a[s])},o=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),n(a.audio,"autoGainControl","mozAutoGainControl"),n(a.audio,"noiseSuppression","mozNoiseSuppression")),o(a)},t&&t.prototype.getSettings){const a=t.prototype.getSettings;t.prototype.getSettings=function(){const s=a.apply(this,arguments);return n(s,"mozAutoGainControl","autoGainControl"),n(s,"mozNoiseSuppression","noiseSuppression"),s}}if(t&&t.prototype.applyConstraints){const a=t.prototype.applyConstraints;t.prototype.applyConstraints=function(s){return this.kind==="audio"&&typeof s=="object"&&(s=JSON.parse(JSON.stringify(s)),n(s,"autoGainControl","mozAutoGainControl"),n(s,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[s])}}}}function fl(i,e){i.navigator.mediaDevices&&"getDisplayMedia"in i.navigator.mediaDevices||i.navigator.mediaDevices&&(i.navigator.mediaDevices.getDisplayMedia=function(t){if(!(t&&t.video)){const n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return t.video===!0?t.video={mediaSource:e}:t.video.mediaSource=e,i.navigator.mediaDevices.getUserMedia(t)})}function Ji(i){typeof i=="object"&&i.RTCTrackEvent&&"receiver"in i.RTCTrackEvent.prototype&&!("transceiver"in i.RTCTrackEvent.prototype)&&Object.defineProperty(i.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Tr(i,e){if(typeof i!="object"||!(i.RTCPeerConnection||i.mozRTCPeerConnection))return;!i.RTCPeerConnection&&i.mozRTCPeerConnection&&(i.RTCPeerConnection=i.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const o=i.RTCPeerConnection.prototype[n],a={[n](){return arguments[0]=new(n==="addIceCandidate"?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};i.RTCPeerConnection.prototype[n]=a[n]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},t=i.RTCPeerConnection.prototype.getStats;i.RTCPeerConnection.prototype.getStats=function(){const[o,a,s]=arguments;return t.apply(this,[o||null]).then(u=>{if(e.version<53&&!a)try{u.forEach(l=>{l.type=r[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;u.forEach((c,p)=>{u.set(p,Object.assign({},c,{type:r[c.type]||c.type}))})}return u}).then(a,s)}}function Zi(i){if(!(typeof i=="object"&&i.RTCPeerConnection&&i.RTCRtpSender)||i.RTCRtpSender&&"getStats"in i.RTCRtpSender.prototype)return;const e=i.RTCPeerConnection.prototype.getSenders;e&&(i.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(o=>o._pc=this),n});const r=i.RTCPeerConnection.prototype.addTrack;r&&(i.RTCPeerConnection.prototype.addTrack=function(){const n=r.apply(this,arguments);return n._pc=this,n}),i.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Xi(i){if(!(typeof i=="object"&&i.RTCPeerConnection&&i.RTCRtpSender)||i.RTCRtpSender&&"getStats"in i.RTCRtpReceiver.prototype)return;const e=i.RTCPeerConnection.prototype.getReceivers;e&&(i.RTCPeerConnection.prototype.getReceivers=function(){const t=e.apply(this,[]);return t.forEach(n=>n._pc=this),t}),pt(i,"track",r=>(r.receiver._pc=r.srcElement,r)),i.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Qi(i){!i.RTCPeerConnection||"removeStream"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.removeStream=function(r){Vr("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&r.getTracks().includes(t.track)&&this.removeTrack(t)})})}function eo(i){i.DataChannel&&!i.RTCDataChannel&&(i.RTCDataChannel=i.DataChannel)}function to(i){if(!(typeof i=="object"&&i.RTCPeerConnection))return;const e=i.RTCPeerConnection.prototype.addTransceiver;e&&(i.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let t=arguments[1]&&arguments[1].sendEncodings;t===void 0&&(t=[]),t=[...t];const n=t.length>0;n&&t.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(n){const{sender:a}=o,s=a.getParameters();(!("encodings"in s)||s.encodings.length===1&&Object.keys(s.encodings[0]).length===0)&&(s.encodings=t,a.sendEncodings=t,this.setParametersPromises.push(a.setParameters(s).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return o})}function ro(i){if(!(typeof i=="object"&&i.RTCRtpSender))return;const e=i.RTCRtpSender.prototype.getParameters;e&&(i.RTCRtpSender.prototype.getParameters=function(){const t=e.apply(this,arguments);return"encodings"in t||(t.encodings=[].concat(this.sendEncodings||[{}])),t})}function no(i){if(!(typeof i=="object"&&i.RTCPeerConnection))return;const e=i.RTCPeerConnection.prototype.createOffer;i.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function io(i){if(!(typeof i=="object"&&i.RTCPeerConnection))return;const e=i.RTCPeerConnection.prototype.createAnswer;i.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const $n=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:to,shimCreateAnswer:io,shimCreateOffer:no,shimGetDisplayMedia:fl,shimGetParameters:ro,shimGetUserMedia:Yi,shimOnTrack:Ji,shimPeerConnection:Tr,shimRTCDataChannel:eo,shimReceiverGetStats:Xi,shimRemoveStream:Qi,shimSenderGetStats:Zi},Symbol.toStringTag,{value:"Module"}));function oo(i){if(!(typeof i!="object"||!i.RTCPeerConnection)){if("getLocalStreams"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in i.RTCPeerConnection.prototype)){const e=i.RTCPeerConnection.prototype.addTrack;i.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(n=>e.call(this,n,t)),t.getVideoTracks().forEach(n=>e.call(this,n,t))},i.RTCPeerConnection.prototype.addTrack=function(t,...n){return n&&n.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),e.apply(this,arguments)}}"removeStream"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(r);if(t===-1)return;this._localStreams.splice(t,1);const n=r.getTracks();this.getSenders().forEach(o=>{n.includes(o.track)&&this.removeTrack(o)})})}}function ao(i){if(!(typeof i!="object"||!i.RTCPeerConnection)&&("getRemoteStreams"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in i.RTCPeerConnection.prototype))){Object.defineProperty(i.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=t=>{t.streams.forEach(n=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(n))return;this._remoteStreams.push(n);const o=new Event("addstream");o.stream=n,this.dispatchEvent(o)})})}});const e=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(){const t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(n){n.streams.forEach(o=>{if(t._remoteStreams||(t._remoteStreams=[]),t._remoteStreams.indexOf(o)>=0)return;t._remoteStreams.push(o);const a=new Event("addstream");a.stream=o,t.dispatchEvent(a)})}),e.apply(t,arguments)}}}function so(i){if(typeof i!="object"||!i.RTCPeerConnection)return;const e=i.RTCPeerConnection.prototype,r=e.createOffer,t=e.createAnswer,n=e.setLocalDescription,o=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(l,c){const p=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[p]);return c?(f.then(l,c),Promise.resolve()):f},e.createAnswer=function(l,c){const p=arguments.length>=2?arguments[2]:arguments[0],f=t.apply(this,[p]);return c?(f.then(l,c),Promise.resolve()):f};let s=function(u,l,c){const p=n.apply(this,[u]);return c?(p.then(l,c),Promise.resolve()):p};e.setLocalDescription=s,s=function(u,l,c){const p=o.apply(this,[u]);return c?(p.then(l,c),Promise.resolve()):p},e.setRemoteDescription=s,s=function(u,l,c){const p=a.apply(this,[u]);return c?(p.then(l,c),Promise.resolve()):p},e.addIceCandidate=s}function lo(i){const e=i&&i.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const r=e.mediaDevices,t=r.getUserMedia.bind(r);e.mediaDevices.getUserMedia=n=>t(co(n))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(t,n,o){e.mediaDevices.getUserMedia(t).then(n,o)}.bind(e))}function co(i){return i&&i.video!==void 0?Object.assign({},i,{video:zi(i.video)}):i}function uo(i){if(!i.RTCPeerConnection)return;const e=i.RTCPeerConnection;i.RTCPeerConnection=function(t,n){if(t&&t.iceServers){const o=[];for(let a=0;a<t.iceServers.length;a++){let s=t.iceServers[a];s.urls===void 0&&s.url?(Vr("RTCIceServer.url","RTCIceServer.urls"),s=JSON.parse(JSON.stringify(s)),s.urls=s.url,delete s.url,o.push(s)):o.push(t.iceServers[a])}t.iceServers=o}return new e(t,n)},i.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(i.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function po(i){typeof i=="object"&&i.RTCTrackEvent&&"receiver"in i.RTCTrackEvent.prototype&&!("transceiver"in i.RTCTrackEvent.prototype)&&Object.defineProperty(i.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function fo(i){const e=i.RTCPeerConnection.prototype.createOffer;i.RTCPeerConnection.prototype.createOffer=function(t){if(t){typeof t.offerToReceiveAudio<"u"&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);const n=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");t.offerToReceiveAudio===!1&&n?n.direction==="sendrecv"?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":n.direction==="recvonly"&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):t.offerToReceiveAudio===!0&&!n&&this.addTransceiver("audio",{direction:"recvonly"}),typeof t.offerToReceiveVideo<"u"&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);const o=this.getTransceivers().find(a=>a.receiver.track.kind==="video");t.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):t.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function ho(i){typeof i!="object"||i.AudioContext||(i.AudioContext=i.webkitAudioContext)}const In=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:ho,shimCallbacksAPI:so,shimConstraints:co,shimCreateOfferLegacy:fo,shimGetUserMedia:lo,shimLocalStreamsAPI:oo,shimRTCIceServerUrls:uo,shimRemoteStreamsAPI:ao,shimTrackEventTransceiver:po},Symbol.toStringTag,{value:"Module"}));var dr={exports:{}},En;function hl(){return En||(En=1,function(i){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(r){return r.trim().split(`
`).map(t=>t.trim())},e.splitSections=function(r){return r.split(`
m=`).map((n,o)=>(o>0?"m="+n:n).trim()+`\r
`)},e.getDescription=function(r){const t=e.splitSections(r);return t&&t[0]},e.getMediaSections=function(r){const t=e.splitSections(r);return t.shift(),t},e.matchPrefix=function(r,t){return e.splitLines(r).filter(n=>n.indexOf(t)===0)},e.parseCandidate=function(r){let t;r.indexOf("a=candidate:")===0?t=r.substring(12).split(" "):t=r.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let o=8;o<t.length;o+=2)switch(t[o]){case"raddr":n.relatedAddress=t[o+1];break;case"rport":n.relatedPort=parseInt(t[o+1],10);break;case"tcptype":n.tcpType=t[o+1];break;case"ufrag":n.ufrag=t[o+1],n.usernameFragment=t[o+1];break;default:n[t[o]]===void 0&&(n[t[o]]=t[o+1]);break}return n},e.writeCandidate=function(r){const t=[];t.push(r.foundation);const n=r.component;n==="rtp"?t.push(1):n==="rtcp"?t.push(2):t.push(n),t.push(r.protocol.toUpperCase()),t.push(r.priority),t.push(r.address||r.ip),t.push(r.port);const o=r.type;return t.push("typ"),t.push(o),o!=="host"&&r.relatedAddress&&r.relatedPort&&(t.push("raddr"),t.push(r.relatedAddress),t.push("rport"),t.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(t.push("tcptype"),t.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(t.push("ufrag"),t.push(r.usernameFragment||r.ufrag)),"candidate:"+t.join(" ")},e.parseIceOptions=function(r){return r.substring(14).split(" ")},e.parseRtpMap=function(r){let t=r.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=t.length===3?parseInt(t[2],10):1,n.numChannels=n.channels,n},e.writeRtpMap=function(r){let t=r.payloadType;r.preferredPayloadType!==void 0&&(t=r.preferredPayloadType);const n=r.channels||r.numChannels||1;return"a=rtpmap:"+t+" "+r.name+"/"+r.clockRate+(n!==1?"/"+n:"")+`\r
`},e.parseExtmap=function(r){const t=r.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},e.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},e.parseFmtp=function(r){const t={};let n;const o=r.substring(r.indexOf(" ")+1).split(";");for(let a=0;a<o.length;a++)n=o[a].trim().split("="),t[n[0].trim()]=n[1];return t},e.writeFmtp=function(r){let t="",n=r.payloadType;if(r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const o=[];Object.keys(r.parameters).forEach(a=>{r.parameters[a]!==void 0?o.push(a+"="+r.parameters[a]):o.push(a)}),t+="a=fmtp:"+n+" "+o.join(";")+`\r
`}return t},e.parseRtcpFb=function(r){const t=r.substring(r.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},e.writeRtcpFb=function(r){let t="",n=r.payloadType;return r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(o=>{t+="a=rtcp-fb:"+n+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),t},e.parseSsrcMedia=function(r){const t=r.indexOf(" "),n={ssrc:parseInt(r.substring(7,t),10)},o=r.indexOf(":",t);return o>-1?(n.attribute=r.substring(t+1,o),n.value=r.substring(o+1)):n.attribute=r.substring(t+1),n},e.parseSsrcGroup=function(r){const t=r.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(n=>parseInt(n,10))}},e.getMid=function(r){const t=e.matchPrefix(r,"a=mid:")[0];if(t)return t.substring(6)},e.parseFingerprint=function(r){const t=r.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},e.getDtlsParameters=function(r,t){return{role:"auto",fingerprints:e.matchPrefix(r+t,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(r,t){let n="a=setup:"+t+`\r
`;return r.fingerprints.forEach(o=>{n+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),n},e.parseCryptoLine=function(r){const t=r.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},e.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?e.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const t=r.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},e.getCryptoParameters=function(r,t){return e.matchPrefix(r+t,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(r,t){const n=e.matchPrefix(r+t,"a=ice-ufrag:")[0],o=e.matchPrefix(r+t,"a=ice-pwd:")[0];return n&&o?{usernameFragment:n.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(r){let t="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(t+=`a=ice-lite\r
`),t},e.parseRtpParameters=function(r){const t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(r)[0].split(" ");t.profile=o[2];for(let s=3;s<o.length;s++){const u=o[s],l=e.matchPrefix(r,"a=rtpmap:"+u+" ")[0];if(l){const c=e.parseRtpMap(l),p=e.matchPrefix(r,"a=fmtp:"+u+" ");switch(c.parameters=p.length?e.parseFmtp(p[0]):{},c.rtcpFeedback=e.matchPrefix(r,"a=rtcp-fb:"+u+" ").map(e.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase());break}}}e.matchPrefix(r,"a=extmap:").forEach(s=>{t.headerExtensions.push(e.parseExtmap(s))});const a=e.matchPrefix(r,"a=rtcp-fb:* ").map(e.parseRtcpFb);return t.codecs.forEach(s=>{a.forEach(u=>{s.rtcpFeedback.find(c=>c.type===u.type&&c.parameter===u.parameter)||s.rtcpFeedback.push(u)})}),t},e.writeRtpDescription=function(r,t){let n="";n+="m="+r+" ",n+=t.codecs.length>0?"9":"0",n+=" "+(t.profile||"UDP/TLS/RTP/SAVPF")+" ",n+=t.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,n+=`c=IN IP4 0.0.0.0\r
`,n+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,t.codecs.forEach(a=>{n+=e.writeRtpMap(a),n+=e.writeFmtp(a),n+=e.writeRtcpFb(a)});let o=0;return t.codecs.forEach(a=>{a.maxptime>o&&(o=a.maxptime)}),o>0&&(n+="a=maxptime:"+o+`\r
`),t.headerExtensions&&t.headerExtensions.forEach(a=>{n+=e.writeExtmap(a)}),n},e.parseRtpEncodingParameters=function(r){const t=[],n=e.parseRtpParameters(r),o=n.fecMechanisms.indexOf("RED")!==-1,a=n.fecMechanisms.indexOf("ULPFEC")!==-1,s=e.matchPrefix(r,"a=ssrc:").map(f=>e.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),u=s.length>0&&s[0].ssrc;let l;const c=e.matchPrefix(r,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(y=>parseInt(y,10)));c.length>0&&c[0].length>1&&c[0][0]===u&&(l=c[0][1]),n.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let d={ssrc:u,codecPayloadType:parseInt(f.parameters.apt,10)};u&&l&&(d.rtx={ssrc:l}),t.push(d),o&&(d=JSON.parse(JSON.stringify(d)),d.fec={ssrc:u,mechanism:a?"red+ulpfec":"red"},t.push(d))}}),t.length===0&&u&&t.push({ssrc:u});let p=e.matchPrefix(r,"b=");return p.length&&(p[0].indexOf("b=TIAS:")===0?p=parseInt(p[0].substring(7),10):p[0].indexOf("b=AS:")===0?p=parseInt(p[0].substring(5),10)*1e3*.95-50*40*8:p=void 0,t.forEach(f=>{f.maxBitrate=p})),t},e.parseRtcpParameters=function(r){const t={},n=e.matchPrefix(r,"a=ssrc:").map(s=>e.parseSsrcMedia(s)).filter(s=>s.attribute==="cname")[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);const o=e.matchPrefix(r,"a=rtcp-rsize");t.reducedSize=o.length>0,t.compound=o.length===0;const a=e.matchPrefix(r,"a=rtcp-mux");return t.mux=a.length>0,t},e.writeRtcpParameters=function(r){let t="";return r.reducedSize&&(t+=`a=rtcp-rsize\r
`),r.mux&&(t+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(t+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),t},e.parseMsid=function(r){let t;const n=e.matchPrefix(r,"a=msid:");if(n.length===1)return t=n[0].substring(7).split(" "),{stream:t[0],track:t[1]};const o=e.matchPrefix(r,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(o.length>0)return t=o[0].value.split(" "),{stream:t[0],track:t[1]}},e.parseSctpDescription=function(r){const t=e.parseMLine(r),n=e.matchPrefix(r,"a=max-message-size:");let o;n.length>0&&(o=parseInt(n[0].substring(19),10)),isNaN(o)&&(o=65536);const a=e.matchPrefix(r,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:t.fmt,maxMessageSize:o};const s=e.matchPrefix(r,"a=sctpmap:");if(s.length>0){const u=s[0].substring(10).split(" ");return{port:parseInt(u[0],10),protocol:u[1],maxMessageSize:o}}},e.writeSctpDescription=function(r,t){let n=[];return r.protocol!=="DTLS/SCTP"?n=["m="+r.kind+" 9 "+r.protocol+" "+t.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+t.port+`\r
`]:n=["m="+r.kind+" 9 "+r.protocol+" "+t.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+t.port+" "+t.protocol+` 65535\r
`],t.maxMessageSize!==void 0&&n.push("a=max-message-size:"+t.maxMessageSize+`\r
`),n.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(r,t,n){let o;const a=t!==void 0?t:2;return r?o=r:o=e.generateSessionId(),`v=0\r
o=`+(n||"thisisadapterortc")+" "+o+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(r,t){const n=e.splitLines(r);for(let o=0;o<n.length;o++)switch(n[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[o].substring(2)}return t?e.getDirection(t):"sendrecv"},e.getKind=function(r){return e.splitLines(r)[0].split(" ")[0].substring(2)},e.isRejected=function(r){return r.split(" ",2)[1]==="0"},e.parseMLine=function(r){const n=e.splitLines(r)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},e.parseOLine=function(r){const n=e.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},e.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const t=e.splitLines(r);for(let n=0;n<t.length;n++)if(t[n].length<2||t[n].charAt(1)!=="=")return!1;return!0},i.exports=e}(dr)),dr.exports}var mo=hl();const mt=Dr(mo),ml=vs({__proto__:null,default:mt},[mo]);function qt(i){if(!i.RTCIceCandidate||i.RTCIceCandidate&&"foundation"in i.RTCIceCandidate.prototype)return;const e=i.RTCIceCandidate;i.RTCIceCandidate=function(t){if(typeof t=="object"&&t.candidate&&t.candidate.indexOf("a=")===0&&(t=JSON.parse(JSON.stringify(t)),t.candidate=t.candidate.substring(2)),t.candidate&&t.candidate.length){const n=new e(t),o=mt.parseCandidate(t.candidate);for(const a in o)a in n||Object.defineProperty(n,a,{value:o[a]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new e(t)},i.RTCIceCandidate.prototype=e.prototype,pt(i,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new i.RTCIceCandidate(r.candidate),writable:"false"}),r))}function $r(i){!i.RTCIceCandidate||i.RTCIceCandidate&&"relayProtocol"in i.RTCIceCandidate.prototype||pt(i,"icecandidate",e=>{if(e.candidate){const r=mt.parseCandidate(e.candidate.candidate);r.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return e})}function Vt(i,e){if(!i.RTCPeerConnection)return;"sctp"in i.RTCPeerConnection.prototype||Object.defineProperty(i.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(s){if(!s||!s.sdp)return!1;const u=mt.splitSections(s.sdp);return u.shift(),u.some(l=>{const c=mt.parseMLine(l);return c&&c.kind==="application"&&c.protocol.indexOf("SCTP")!==-1})},t=function(s){const u=s.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(u===null||u.length<2)return-1;const l=parseInt(u[1],10);return l!==l?-1:l},n=function(s){let u=65536;return e.browser==="firefox"&&(e.version<57?s===-1?u=16384:u=2147483637:e.version<60?u=e.version===57?65535:65536:u=2147483637),u},o=function(s,u){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const c=mt.matchPrefix(s.sdp,"a=max-message-size:");return c.length>0?l=parseInt(c[0].substring(19),10):e.browser==="firefox"&&u!==-1&&(l=2147483637),l},a=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:u}=this.getConfiguration();u==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const u=t(arguments[0]),l=n(u),c=o(arguments[0],u);let p;l===0&&c===0?p=Number.POSITIVE_INFINITY:l===0||c===0?p=Math.max(l,c):p=Math.min(l,c);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return p}}),this._sctp=f}return a.apply(this,arguments)}}function Gt(i){if(!(i.RTCPeerConnection&&"createDataChannel"in i.RTCPeerConnection.prototype))return;function e(t,n){const o=t.send;t.send=function(){const s=arguments[0],u=s.length||s.size||s.byteLength;if(t.readyState==="open"&&n.sctp&&u>n.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+n.sctp.maxMessageSize+" bytes)");return o.apply(t,arguments)}}const r=i.RTCPeerConnection.prototype.createDataChannel;i.RTCPeerConnection.prototype.createDataChannel=function(){const n=r.apply(this,arguments);return e(n,this),n},pt(i,"datachannel",t=>(e(t.channel,t.target),t))}function Ir(i){if(!i.RTCPeerConnection||"connectionState"in i.RTCPeerConnection.prototype)return;const e=i.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const t=e[r];e[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=n=>{const o=n.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const a=new Event("connectionstatechange",n);o.dispatchEvent(a)}return n},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}})}function Er(i,e){if(!i.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const r=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(n){if(n&&n.sdp&&n.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=n.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);i.RTCSessionDescription&&n instanceof i.RTCSessionDescription?arguments[0]=new i.RTCSessionDescription({type:n.type,sdp:o}):n.sdp=o}return r.apply(this,arguments)}}function Wt(i,e){if(!(i.RTCPeerConnection&&i.RTCPeerConnection.prototype))return;const r=i.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(i.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ht(i,e){if(!(i.RTCPeerConnection&&i.RTCPeerConnection.prototype))return;const r=i.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(i.RTCPeerConnection.prototype.setLocalDescription=function(){let n=arguments[0]||{};if(typeof n!="object"||n.type&&n.sdp)return r.apply(this,arguments);if(n={type:n.type,sdp:n.sdp},!n.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":n.type="offer";break;default:n.type="answer";break}return n.sdp||n.type!=="offer"&&n.type!=="answer"?r.apply(this,[n]):(n.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(a=>r.apply(this,[a]))})}const gl=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Er,shimAddIceCandidateNullOrEmpty:Wt,shimConnectionState:Ir,shimMaxMessageSize:Vt,shimParameterlessSetLocalDescription:Ht,shimRTCIceCandidate:qt,shimRTCIceCandidateRelayProtocol:$r,shimSendThrowTypeError:Gt},Symbol.toStringTag,{value:"Module"}));function yl({window:i}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=Li,t=pl(i),n={browserDetails:t,commonShim:gl,extractVersion:Tt,disableLog:ul,disableWarnings:dl,sdp:ml};switch(t.browser){case"chrome":if(!Tn||!_r||!e.shimChrome)return r("Chrome shim is not included in this adapter release."),n;if(t.version===null)return r("Chrome shim can not determine version, not shimming."),n;r("adapter.js shimming chrome."),n.browserShim=Tn,Wt(i,t),Ht(i),Ui(i,t),Bi(i),_r(i,t),qi(i),Hi(i,t),Vi(i),Gi(i),Ki(i,t),qt(i),$r(i),Ir(i),Vt(i,t),Gt(i),Er(i,t);break;case"firefox":if(!$n||!Tr||!e.shimFirefox)return r("Firefox shim is not included in this adapter release."),n;r("adapter.js shimming firefox."),n.browserShim=$n,Wt(i,t),Ht(i),Yi(i,t),Tr(i,t),Ji(i),Qi(i),Zi(i),Xi(i),eo(i),to(i),ro(i),no(i),io(i),qt(i),Ir(i),Vt(i,t),Gt(i);break;case"safari":if(!In||!e.shimSafari)return r("Safari shim is not included in this adapter release."),n;r("adapter.js shimming safari."),n.browserShim=In,Wt(i,t),Ht(i),uo(i),fo(i),so(i),oo(i),ao(i),po(i),lo(i),ho(i),qt(i),$r(i),Vt(i,t),Gt(i),Er(i,t);break;default:r("Unsupported browser!");break}return n}const Rn=yl({window:typeof window>"u"?void 0:window});function ft(i,e,r,t){Object.defineProperty(i,e,{get:r,set:t,enumerable:!0,configurable:!0})}class go{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const r=[],t=e.byteLength,n=Math.ceil(t/this.chunkedMTU);let o=0,a=0;for(;a<t;){const s=Math.min(t,a+this.chunkedMTU),u=e.slice(a,s),l={__peerData:this._dataCount,n:o,data:u,total:n};r.push(l),a=s,o++}return this._dataCount++,r}}}function bl(i){let e=0;for(const n of i)e+=n.byteLength;const r=new Uint8Array(e);let t=0;for(const n of i)r.set(n,t),t+=n.byteLength;return r}const pr=Rn.default||Rn,kt=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const i=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(i)?i==="chrome"?e>=this.minChromeVersion:i==="firefox"?e>=this.minFirefoxVersion:i==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return pr.browserDetails.browser}getVersion(){return pr.browserDetails.version||0}isUnifiedPlanSupported(){const i=this.getBrowser(),e=pr.browserDetails.version||0;if(i==="chrome"&&e<this.minChromeVersion)return!1;if(i==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let r,t=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),t=!0}catch{}finally{r&&r.close()}return t}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},vl=i=>!i||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(i),yo=()=>Math.random().toString(36).slice(2),Mn={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class kl extends go{noop(){}blobToArrayBuffer(e,r){const t=new FileReader;return t.onload=function(n){n.target&&r(n.target.result)},t.readAsArrayBuffer(e),t}binaryStringToArrayBuffer(e){const r=new Uint8Array(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t)&255;return r.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Mn,this.browser=kt.getBrowser(),this.browserVersion=kt.getVersion(),this.pack=Oi,this.unpack=Fi,this.supports=function(){const r={browser:kt.isBrowserSupported(),webRTC:kt.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!r.webRTC)return r;let t;try{t=new RTCPeerConnection(Mn),r.audioVideo=!0;let n;try{n=t.createDataChannel("_PEERJSTEST",{ordered:!0}),r.data=!0,r.reliable=!!n.ordered;try{n.binaryType="blob",r.binaryBlob=!kt.isIOS}catch{}}catch{}finally{n&&n.close()}}catch{}finally{t&&t.close()}return r}(),this.validateId=vl,this.randomToken=yo}}const Me=new kl,wl="PeerJS: ";var An;(function(i){i[i.Disabled=0]="Disabled",i[i.Errors=1]="Errors",i[i.Warnings=2]="Warnings",i[i.All=3]="All"})(An||(An={}));class xl{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...r){const t=[wl,...r];for(const n in t)t[n]instanceof Error&&(t[n]="("+t[n].name+") "+t[n].message);e>=3?console.log(...t):e>=2?console.warn("WARNING",...t):e>=1&&console.error("ERROR",...t)}constructor(){this._logLevel=0}}var j=new xl,Gr={},Sl=Object.prototype.hasOwnProperty,$e="~";function Mt(){}Object.create&&(Mt.prototype=Object.create(null),new Mt().__proto__||($e=!1));function Cl(i,e,r){this.fn=i,this.context=e,this.once=r||!1}function bo(i,e,r,t,n){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new Cl(r,t||i,n),a=$e?$e+e:e;return i._events[a]?i._events[a].fn?i._events[a]=[i._events[a],o]:i._events[a].push(o):(i._events[a]=o,i._eventsCount++),i}function Kt(i,e){--i._eventsCount===0?i._events=new Mt:delete i._events[e]}function Pe(){this._events=new Mt,this._eventsCount=0}Pe.prototype.eventNames=function(){var e=[],r,t;if(this._eventsCount===0)return e;for(t in r=this._events)Sl.call(r,t)&&e.push($e?t.slice(1):t);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Pe.prototype.listeners=function(e){var r=$e?$e+e:e,t=this._events[r];if(!t)return[];if(t.fn)return[t.fn];for(var n=0,o=t.length,a=new Array(o);n<o;n++)a[n]=t[n].fn;return a};Pe.prototype.listenerCount=function(e){var r=$e?$e+e:e,t=this._events[r];return t?t.fn?1:t.length:0};Pe.prototype.emit=function(e,r,t,n,o,a){var s=$e?$e+e:e;if(!this._events[s])return!1;var u=this._events[s],l=arguments.length,c,p;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,t),!0;case 4:return u.fn.call(u.context,r,t,n),!0;case 5:return u.fn.call(u.context,r,t,n,o),!0;case 6:return u.fn.call(u.context,r,t,n,o,a),!0}for(p=1,c=new Array(l-1);p<l;p++)c[p-1]=arguments[p];u.fn.apply(u.context,c)}else{var f=u.length,d;for(p=0;p<f;p++)switch(u[p].once&&this.removeListener(e,u[p].fn,void 0,!0),l){case 1:u[p].fn.call(u[p].context);break;case 2:u[p].fn.call(u[p].context,r);break;case 3:u[p].fn.call(u[p].context,r,t);break;case 4:u[p].fn.call(u[p].context,r,t,n);break;default:if(!c)for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];u[p].fn.apply(u[p].context,c)}}return!0};Pe.prototype.on=function(e,r,t){return bo(this,e,r,t,!1)};Pe.prototype.once=function(e,r,t){return bo(this,e,r,t,!0)};Pe.prototype.removeListener=function(e,r,t,n){var o=$e?$e+e:e;if(!this._events[o])return this;if(!r)return Kt(this,o),this;var a=this._events[o];if(a.fn)a.fn===r&&(!n||a.once)&&(!t||a.context===t)&&Kt(this,o);else{for(var s=0,u=[],l=a.length;s<l;s++)(a[s].fn!==r||n&&!a[s].once||t&&a[s].context!==t)&&u.push(a[s]);u.length?this._events[o]=u.length===1?u[0]:u:Kt(this,o)}return this};Pe.prototype.removeAllListeners=function(e){var r;return e?(r=$e?$e+e:e,this._events[r]&&Kt(this,r)):(this._events=new Mt,this._eventsCount=0),this};Pe.prototype.off=Pe.prototype.removeListener;Pe.prototype.addListener=Pe.prototype.on;Pe.prefixed=$e;Pe.EventEmitter=Pe;Gr=Pe;var ht={};ft(ht,"ConnectionType",()=>We);ft(ht,"PeerErrorType",()=>me);ft(ht,"BaseConnectionErrorType",()=>At);ft(ht,"DataConnectionErrorType",()=>Nt);ft(ht,"SerializationType",()=>gt);ft(ht,"SocketEventType",()=>Ve);ft(ht,"ServerMessageType",()=>we);var We;(function(i){i.Data="data",i.Media="media"})(We||(We={}));var me;(function(i){i.BrowserIncompatible="browser-incompatible",i.Disconnected="disconnected",i.InvalidID="invalid-id",i.InvalidKey="invalid-key",i.Network="network",i.PeerUnavailable="peer-unavailable",i.SslUnavailable="ssl-unavailable",i.ServerError="server-error",i.SocketError="socket-error",i.SocketClosed="socket-closed",i.UnavailableID="unavailable-id",i.WebRTC="webrtc"})(me||(me={}));var At;(function(i){i.NegotiationFailed="negotiation-failed",i.ConnectionClosed="connection-closed"})(At||(At={}));var Nt;(function(i){i.NotOpenYet="not-open-yet",i.MessageToBig="message-too-big"})(Nt||(Nt={}));var gt;(function(i){i.Binary="binary",i.BinaryUTF8="binary-utf8",i.JSON="json",i.None="raw"})(gt||(gt={}));var Ve;(function(i){i.Message="message",i.Disconnected="disconnected",i.Error="error",i.Close="close"})(Ve||(Ve={}));var we;(function(i){i.Heartbeat="HEARTBEAT",i.Candidate="CANDIDATE",i.Offer="OFFER",i.Answer="ANSWER",i.Open="OPEN",i.Error="ERROR",i.IdTaken="ID-TAKEN",i.InvalidKey="INVALID-KEY",i.Leave="LEAVE",i.Expire="EXPIRE"})(we||(we={}));var Wr={};Wr=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class Pl extends Gr.EventEmitter{constructor(e,r,t,n,o,a=5e3){super(),this.pingInterval=a,this._disconnected=!0,this._messagesQueue=[];const s=e?"wss://":"ws://";this._baseUrl=s+r+":"+t+n+"peerjs?key="+o}start(e,r){this._id=e;const t=`${this._baseUrl}&id=${e}&token=${r}`;this._socket||!this._disconnected||(this._socket=new WebSocket(t+"&version="+Wr.version),this._disconnected=!1,this._socket.onmessage=n=>{let o;try{o=JSON.parse(n.data),j.log("Server message received:",o)}catch{j.log("Invalid server message",n.data);return}this.emit(Ve.Message,o)},this._socket.onclose=n=>{this._disconnected||(j.log("Socket closed.",n),this._cleanup(),this._disconnected=!0,this.emit(Ve.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),j.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){j.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:we.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const r of e)this.send(r)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Ve.Error,"Invalid message");return}if(!this._wsOpen())return;const r=JSON.stringify(e);this._socket.send(r)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class vo{constructor(e){this.connection=e}startConnection(e){const r=this._startPeerConnection();if(this.connection.peerConnection=r,this.connection.type===We.Media&&e._stream&&this._addTracksToConnection(e._stream,r),e.originator){const t=this.connection,n={ordered:!!e.reliable},o=r.createDataChannel(t.label,n);t._initializeDataChannel(o),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){j.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const r=this.connection.peer,t=this.connection.connectionId,n=this.connection.type,o=this.connection.provider;j.log("Listening for ICE candidates."),e.onicecandidate=a=>{!a.candidate||!a.candidate.candidate||(j.log(`Received ICE candidates for ${r}:`,a.candidate),o.socket.send({type:we.Candidate,payload:{candidate:a.candidate,type:n,connectionId:t},dst:r}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":j.log("iceConnectionState is failed, closing connections to "+r),this.connection.emitError(At.NegotiationFailed,"Negotiation of connection to "+r+" failed."),this.connection.close();break;case"closed":j.log("iceConnectionState is closed, closing connections to "+r),this.connection.emitError(At.ConnectionClosed,"Connection to "+r+" closed."),this.connection.close();break;case"disconnected":j.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},j.log("Listening for data channel"),e.ondatachannel=a=>{j.log("Received data channel");const s=a.channel;o.getConnection(r,t)._initializeDataChannel(s)},j.log("Listening for remote stream"),e.ontrack=a=>{j.log("Received remote stream");const s=a.streams[0],u=o.getConnection(r,t);if(u.type===We.Media){const l=u;this._addStreamToMediaConnection(s,l)}}}cleanup(){j.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const r=e.signalingState!=="closed";let t=!1;const n=this.connection.dataChannel;n&&(t=!!n.readyState&&n.readyState!=="closed"),(r||t)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,r=this.connection.provider;try{const t=await e.createOffer(this.connection.options.constraints);j.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(t.sdp=this.connection.options.sdpTransform(t.sdp)||t.sdp);try{await e.setLocalDescription(t),j.log("Set localDescription:",t,`for:${this.connection.peer}`);let n={sdp:t,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===We.Data){const o=this.connection;n={...n,label:o.label,reliable:o.reliable,serialization:o.serialization}}r.socket.send({type:we.Offer,payload:n,dst:this.connection.peer})}catch(n){n!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(r.emitError(me.WebRTC,n),j.log("Failed to setLocalDescription, ",n))}}catch(t){r.emitError(me.WebRTC,t),j.log("Failed to createOffer, ",t)}}async _makeAnswer(){const e=this.connection.peerConnection,r=this.connection.provider;try{const t=await e.createAnswer();j.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(t.sdp=this.connection.options.sdpTransform(t.sdp)||t.sdp);try{await e.setLocalDescription(t),j.log("Set localDescription:",t,`for:${this.connection.peer}`),r.socket.send({type:we.Answer,payload:{sdp:t,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(n){r.emitError(me.WebRTC,n),j.log("Failed to setLocalDescription, ",n)}}catch(t){r.emitError(me.WebRTC,t),j.log("Failed to create answer, ",t)}}async handleSDP(e,r){r=new RTCSessionDescription(r);const t=this.connection.peerConnection,n=this.connection.provider;j.log("Setting remote description",r);const o=this;try{await t.setRemoteDescription(r),j.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await o._makeAnswer()}catch(a){n.emitError(me.WebRTC,a),j.log("Failed to setRemoteDescription, ",a)}}async handleCandidate(e){j.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),j.log(`Added ICE candidate for:${this.connection.peer}`)}catch(r){this.connection.provider.emitError(me.WebRTC,r),j.log("Failed to handleCandidate, ",r)}}_addTracksToConnection(e,r){if(j.log(`add tracks from stream ${e.id} to peer connection`),!r.addTrack)return j.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(t=>{r.addTrack(t,e)})}_addStreamToMediaConnection(e,r){j.log(`add stream ${e.id} to media connection ${r.connectionId}`),r.addStream(e)}}class ko extends Gr.EventEmitter{emitError(e,r){j.error("Error:",r),this.emit("error",new _l(`${e}`,r))}}class _l extends Error{constructor(e,r){typeof r=="string"?super(r):(super(),Object.assign(this,r)),this.type=e}}class wo extends ko{get open(){return this._open}constructor(e,r,t){super(),this.peer=e,this.provider=r,this.options=t,this._open=!1,this.metadata=t.metadata}}class Zt extends wo{static#e=this.ID_PREFIX="mc_";get type(){return We.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,r,t){super(e,r,t),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Zt.ID_PREFIX+Me.randomToken(),this._negotiator=new vo(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{j.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{j.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){j.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const r=e.type,t=e.payload;switch(e.type){case we.Answer:this._negotiator.handleSDP(r,t.sdp),this._open=!0;break;case we.Candidate:this._negotiator.handleCandidate(t.candidate);break;default:j.warn(`Unrecognized message type:${r} from peer:${this.peer}`);break}}answer(e,r={}){if(this._localStream){j.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const t=this.provider._getMessages(this.connectionId);for(const n of t)this.handleMessage(n);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class Tl{constructor(e){this._options=e}_buildRequest(e){const r=this._options.secure?"https":"http",{host:t,port:n,path:o,key:a}=this._options,s=new URL(`${r}://${t}:${n}${o}${a}/${e}`);return s.searchParams.set("ts",`${Date.now()}${Math.random()}`),s.searchParams.set("version",Wr.version),fetch(s.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){j.error("Error retrieving ID",e);let r="";throw this._options.path==="/"&&this._options.host!==Me.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let r="";throw this._options.host===Me.CLOUD_HOST?r="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":r="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw j.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}class Xt extends wo{static#e=this.ID_PREFIX="dc_";static#n=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return We.Data}constructor(e,r,t){super(e,r,t),this.connectionId=this.options.connectionId||Xt.ID_PREFIX+yo(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new vo(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{j.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=r=>{j.log(`DC#${this.connectionId} dc onmessage:`,r.data)},this.dataChannel.onclose=()=>{j.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,r=!1){if(!this.open){this.emitError(Nt.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,r)}async handleMessage(e){const r=e.payload;switch(e.type){case we.Answer:await this._negotiator.handleSDP(e.type,r.sdp);break;case we.Candidate:await this._negotiator.handleCandidate(r.candidate);break;default:j.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}}class Hr extends Xt{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",r=>this._handleDataMessage(r))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Xt.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(r){return j.error(`DC#:${this.connectionId} Error when sending:`,r),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class fr extends Hr{close(e){super.close(e),this._chunkedData={}}constructor(e,r,t){super(e,r,t),this.chunker=new go,this.serialization=gt.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const r=Fi(e),t=r.__peerData;if(t){if(t.type==="close"){this.close();return}this._handleChunk(r);return}this.emit("data",r)}_handleChunk(e){const r=e.__peerData,t=this._chunkedData[r]||{data:[],count:0,total:e.total};if(t.data[e.n]=new Uint8Array(e.data),t.count++,this._chunkedData[r]=t,t.total===t.count){delete this._chunkedData[r];const n=bl(t.data);this._handleDataMessage({data:n})}}_send(e,r){const t=Oi(e);if(t instanceof Promise)return this._send_blob(t);if(!r&&t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}async _send_blob(e){const r=await e;if(r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}_sendChunks(e){const r=this.chunker.chunk(e);j.log(`DC#${this.connectionId} Try to send ${r.length} chunks...`);for(const t of r)this.send(t,!0)}}class $l extends Hr{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,r){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=gt.None}}class Il extends Hr{_handleDataMessage({data:e}){const r=this.parse(this.decoder.decode(e)),t=r.__peerData;if(t&&t.type==="close"){this.close();return}this.emit("data",r)}_send(e,r){const t=this.encoder.encode(this.stringify(e));if(t.byteLength>=Me.chunkedMTU){this.emitError(Nt.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(t)}constructor(...e){super(...e),this.serialization=gt.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Kr extends ko{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[r,t]of this._connections)e[r]=t;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,r){super(),this._serializers={raw:$l,json:Il,binary:fr,"binary-utf8":fr,default:fr},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let t;if(e&&e.constructor==Object?r=e:e&&(t=e.toString()),r={debug:0,host:Me.CLOUD_HOST,port:Me.CLOUD_PORT,path:"/",key:Kr.DEFAULT_KEY,token:Me.randomToken(),config:Me.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...r},this._options=r,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Me.CLOUD_HOST?this._options.secure=Me.isSecure():this._options.host==Me.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&j.setLogFunction(this._options.logFunction),j.logLevel=this._options.debug||0,this._api=new Tl(r),this._socket=this._createServerConnection(),!Me.supports.audioVideo&&!Me.supports.data){this._delayedAbort(me.BrowserIncompatible,"The current browser does not support WebRTC");return}if(t&&!Me.validateId(t)){this._delayedAbort(me.InvalidID,`ID "${t}" is invalid`);return}t?this._initialize(t):this._api.retrieveId().then(n=>this._initialize(n)).catch(n=>this._abort(me.ServerError,n))}_createServerConnection(){const e=new Pl(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Ve.Message,r=>{this._handleMessage(r)}),e.on(Ve.Error,r=>{this._abort(me.SocketError,r)}),e.on(Ve.Disconnected,()=>{this.disconnected||(this.emitError(me.Network,"Lost connection to server."),this.disconnect())}),e.on(Ve.Close,()=>{this.disconnected||this._abort(me.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const r=e.type,t=e.payload,n=e.src;switch(r){case we.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case we.Error:this._abort(me.ServerError,t.msg);break;case we.IdTaken:this._abort(me.UnavailableID,`ID "${this.id}" is taken`);break;case we.InvalidKey:this._abort(me.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case we.Leave:j.log(`Received leave message from ${n}`),this._cleanupPeer(n),this._connections.delete(n);break;case we.Expire:this.emitError(me.PeerUnavailable,`Could not connect to peer ${n}`);break;case we.Offer:{const o=t.connectionId;let a=this.getConnection(n,o);if(a&&(a.close(),j.warn(`Offer received for existing Connection ID:${o}`)),t.type===We.Media){const u=new Zt(n,this,{connectionId:o,_payload:t,metadata:t.metadata});a=u,this._addConnection(n,a),this.emit("call",u)}else if(t.type===We.Data){const u=new this._serializers[t.serialization](n,this,{connectionId:o,_payload:t,metadata:t.metadata,label:t.label,serialization:t.serialization,reliable:t.reliable});a=u,this._addConnection(n,a),this.emit("connection",u)}else{j.warn(`Received malformed connection type:${t.type}`);return}const s=this._getMessages(o);for(const u of s)a.handleMessage(u);break}default:{if(!t){j.warn(`You received a malformed message from ${n} of type ${r}`);return}const o=t.connectionId,a=this.getConnection(n,o);a&&a.peerConnection?a.handleMessage(e):o?this._storeMessage(o,e):j.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,r){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(r)}_getMessages(e){const r=this._lostMessages.get(e);return r?(this._lostMessages.delete(e),r):[]}connect(e,r={}){if(r={serialization:"default",...r},this.disconnected){j.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(me.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const t=new this._serializers[r.serialization](e,this,r);return this._addConnection(e,t),t}call(e,r,t={}){if(this.disconnected){j.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(me.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){j.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const n=new Zt(e,this,{...t,_stream:r});return this._addConnection(e,n),n}_addConnection(e,r){j.log(`add connection ${r.type}:${r.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(r)}_removeConnection(e){const r=this._connections.get(e.peer);if(r){const t=r.indexOf(e);t!==-1&&r.splice(t,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,r){const t=this._connections.get(e);if(!t)return null;for(const n of t)if(n.connectionId===r)return n;return null}_delayedAbort(e,r){setTimeout(()=>{this._abort(e,r)},0)}_abort(e,r){j.error("Aborting!"),this.emitError(e,r),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(j.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const r=this._connections.get(e);if(r)for(const t of r)t.close()}disconnect(){if(this.disconnected)return;const e=this.id;j.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)j.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)j.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=r=>{}){this._api.listAllPeers().then(r=>e(r)).catch(r=>this._abort(me.ServerError,r))}}var Nn=Kr,hr={exports:{}},mr={exports:{}},Fn;function El(){return Fn||(Fn=1,function(){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(r,t){return r<<t|r>>>32-t},rotr:function(r,t){return r<<32-t|r>>>t},endian:function(r){if(r.constructor==Number)return e.rotl(r,8)&16711935|e.rotl(r,24)&4278255360;for(var t=0;t<r.length;t++)r[t]=e.endian(r[t]);return r},randomBytes:function(r){for(var t=[];r>0;r--)t.push(Math.floor(Math.random()*256));return t},bytesToWords:function(r){for(var t=[],n=0,o=0;n<r.length;n++,o+=8)t[o>>>5]|=r[n]<<24-o%32;return t},wordsToBytes:function(r){for(var t=[],n=0;n<r.length*32;n+=8)t.push(r[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(r){for(var t=[],n=0;n<r.length;n++)t.push((r[n]>>>4).toString(16)),t.push((r[n]&15).toString(16));return t.join("")},hexToBytes:function(r){for(var t=[],n=0;n<r.length;n+=2)t.push(parseInt(r.substr(n,2),16));return t},bytesToBase64:function(r){for(var t=[],n=0;n<r.length;n+=3)for(var o=r[n]<<16|r[n+1]<<8|r[n+2],a=0;a<4;a++)n*8+a*6<=r.length*8?t.push(i.charAt(o>>>6*(3-a)&63)):t.push("=");return t.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/ig,"");for(var t=[],n=0,o=0;n<r.length;o=++n%4)o!=0&&t.push((i.indexOf(r.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<o*2|i.indexOf(r.charAt(n))>>>6-o*2);return t}};mr.exports=e}()),mr.exports}var gr,On;function Dn(){if(On)return gr;On=1;var i={utf8:{stringToBytes:function(e){return i.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(i.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var r=[],t=0;t<e.length;t++)r.push(e.charCodeAt(t)&255);return r},bytesToString:function(e){for(var r=[],t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return r.join("")}}};return gr=i,gr}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var yr,jn;function Rl(){if(jn)return yr;jn=1,yr=function(r){return r!=null&&(i(r)||e(r)||!!r._isBuffer)};function i(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function e(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&i(r.slice(0,0))}return yr}var Ln;function Ml(){return Ln||(Ln=1,function(){var i=El(),e=Dn().utf8,r=Rl(),t=Dn().bin,n=function(o,a){o.constructor==String?a&&a.encoding==="binary"?o=t.stringToBytes(o):o=e.stringToBytes(o):r(o)?o=Array.prototype.slice.call(o,0):!Array.isArray(o)&&o.constructor!==Uint8Array&&(o=o.toString());for(var s=i.bytesToWords(o),u=o.length*8,l=1732584193,c=-271733879,p=-1732584194,f=271733878,d=0;d<s.length;d++)s[d]=(s[d]<<8|s[d]>>>24)&16711935|(s[d]<<24|s[d]>>>8)&4278255360;s[u>>>5]|=128<<u%32,s[(u+64>>>9<<4)+14]=u;for(var y=n._ff,m=n._gg,h=n._hh,g=n._ii,d=0;d<s.length;d+=16){var b=l,k=c,v=p,x=f;l=y(l,c,p,f,s[d+0],7,-680876936),f=y(f,l,c,p,s[d+1],12,-389564586),p=y(p,f,l,c,s[d+2],17,606105819),c=y(c,p,f,l,s[d+3],22,-1044525330),l=y(l,c,p,f,s[d+4],7,-176418897),f=y(f,l,c,p,s[d+5],12,1200080426),p=y(p,f,l,c,s[d+6],17,-1473231341),c=y(c,p,f,l,s[d+7],22,-45705983),l=y(l,c,p,f,s[d+8],7,1770035416),f=y(f,l,c,p,s[d+9],12,-1958414417),p=y(p,f,l,c,s[d+10],17,-42063),c=y(c,p,f,l,s[d+11],22,-1990404162),l=y(l,c,p,f,s[d+12],7,1804603682),f=y(f,l,c,p,s[d+13],12,-40341101),p=y(p,f,l,c,s[d+14],17,-1502002290),c=y(c,p,f,l,s[d+15],22,1236535329),l=m(l,c,p,f,s[d+1],5,-165796510),f=m(f,l,c,p,s[d+6],9,-1069501632),p=m(p,f,l,c,s[d+11],14,643717713),c=m(c,p,f,l,s[d+0],20,-373897302),l=m(l,c,p,f,s[d+5],5,-701558691),f=m(f,l,c,p,s[d+10],9,38016083),p=m(p,f,l,c,s[d+15],14,-660478335),c=m(c,p,f,l,s[d+4],20,-405537848),l=m(l,c,p,f,s[d+9],5,568446438),f=m(f,l,c,p,s[d+14],9,-1019803690),p=m(p,f,l,c,s[d+3],14,-187363961),c=m(c,p,f,l,s[d+8],20,1163531501),l=m(l,c,p,f,s[d+13],5,-1444681467),f=m(f,l,c,p,s[d+2],9,-51403784),p=m(p,f,l,c,s[d+7],14,1735328473),c=m(c,p,f,l,s[d+12],20,-1926607734),l=h(l,c,p,f,s[d+5],4,-378558),f=h(f,l,c,p,s[d+8],11,-2022574463),p=h(p,f,l,c,s[d+11],16,1839030562),c=h(c,p,f,l,s[d+14],23,-35309556),l=h(l,c,p,f,s[d+1],4,-1530992060),f=h(f,l,c,p,s[d+4],11,1272893353),p=h(p,f,l,c,s[d+7],16,-155497632),c=h(c,p,f,l,s[d+10],23,-1094730640),l=h(l,c,p,f,s[d+13],4,681279174),f=h(f,l,c,p,s[d+0],11,-358537222),p=h(p,f,l,c,s[d+3],16,-722521979),c=h(c,p,f,l,s[d+6],23,76029189),l=h(l,c,p,f,s[d+9],4,-640364487),f=h(f,l,c,p,s[d+12],11,-421815835),p=h(p,f,l,c,s[d+15],16,530742520),c=h(c,p,f,l,s[d+2],23,-995338651),l=g(l,c,p,f,s[d+0],6,-198630844),f=g(f,l,c,p,s[d+7],10,1126891415),p=g(p,f,l,c,s[d+14],15,-1416354905),c=g(c,p,f,l,s[d+5],21,-57434055),l=g(l,c,p,f,s[d+12],6,1700485571),f=g(f,l,c,p,s[d+3],10,-1894986606),p=g(p,f,l,c,s[d+10],15,-1051523),c=g(c,p,f,l,s[d+1],21,-2054922799),l=g(l,c,p,f,s[d+8],6,1873313359),f=g(f,l,c,p,s[d+15],10,-30611744),p=g(p,f,l,c,s[d+6],15,-1560198380),c=g(c,p,f,l,s[d+13],21,1309151649),l=g(l,c,p,f,s[d+4],6,-145523070),f=g(f,l,c,p,s[d+11],10,-1120210379),p=g(p,f,l,c,s[d+2],15,718787259),c=g(c,p,f,l,s[d+9],21,-343485551),l=l+b>>>0,c=c+k>>>0,p=p+v>>>0,f=f+x>>>0}return i.endian([l,c,p,f])};n._ff=function(o,a,s,u,l,c,p){var f=o+(a&s|~a&u)+(l>>>0)+p;return(f<<c|f>>>32-c)+a},n._gg=function(o,a,s,u,l,c,p){var f=o+(a&u|s&~u)+(l>>>0)+p;return(f<<c|f>>>32-c)+a},n._hh=function(o,a,s,u,l,c,p){var f=o+(a^s^u)+(l>>>0)+p;return(f<<c|f>>>32-c)+a},n._ii=function(o,a,s,u,l,c,p){var f=o+(s^(a|~u))+(l>>>0)+p;return(f<<c|f>>>32-c)+a},n._blocksize=16,n._digestsize=16,hr.exports=function(o,a){if(o==null)throw new Error("Illegal argument "+o);var s=i.wordsToBytes(n(o,a));return a&&a.asBytes?s:a&&a.asString?t.bytesToString(s):i.bytesToHex(s)}}()),hr.exports}var Al=Ml();const Nl=Dr(Al),Fl="7ae48d46-10f2-kitty-";function Ol(){let i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",e="";for(let r=0;r<6;++r){let t=Math.floor(Math.random()*i.length);e+=i.substring(t,t+1)}return e}function zn(i){return Nl(Fl+i)}var Dl=V("<button class=btn>Copy"),jl=V('<div class="toast toast-center toast-middle">'),Ll=V('<div><div><div class=pb-2><label><div style=display:inline-block;padding-right:5px;>Nickname:</div><input type=text class=input></label></div></div><div><button class="btn btn-outline btn-primary ml-1">Invite</button><button class="btn btn-outline btn-primary ml-1">Join</button></div><div><div>Connections:<table class="table table-zebra"><thead><tr><th></th><th>Nickname</th><th></th></tr></thead><tbody></tbody></table></div><div>Pending Invites:<table class="table table-zebra"><thead><tr><th></th><th>Invite Code</th><th></th></tr></thead><tbody></tbody></table></div></div><dialog class=modal><div class=modal-box>Invite Code:<input type=text class="input ml-2"><button class="btn btn-primary">Paste</button><div class=modal-action><button class="btn btn-primary">OK</button><form method=dialog><button class=btn>Close'),zl=V('<tr><td></td><td></td><td><button class="btn btn-primary">Kick'),Ul=V('<tr><td></td><td></td><td><button class="btn btn-primary">Copy</button><button class="btn btn-primary ml-1">Delete'),Bl=V('<div class="alert alert-info">');function ql(i){let[e,r]=Se({nickname:ol.generateUsername("_"),connections:[],pendingInvites:[],toastStack:[],joinDialogInviteCode:""}),[t,n]=J(),o=S(()=>e.connections.map(f=>f.value)),a=f=>{let d={};r("toastStack",_t(m=>m.push(new Ot({id:d,Render:f}))));let y=setTimeout(()=>{r("toastStack",e.toastStack.filter(m=>m.value.id!==d)),clearTimeout(y)},5e3)},s=()=>{let[f,d]=J(!1),y=Ol(),m=zn(y),h=new Nn(m),g={inviteCode:y,peer:h};h.on("open",()=>{h.on("connection",b=>{b.once("data",k=>{typeof k=="string"&&(r("connections",_t(v=>v.push(new Ot({nickname:k,peer:h,conn:b})))),b.send({nickname:e.nickname,documentUrl:i.documentUrl()??null}),r("pendingInvites",e.pendingInvites.filter(v=>v.value!=g)))}),b.once("close",()=>{r("connections",e.connections.filter(k=>k.value.peer!==h))})}),r("pendingInvites",_t(b=>b.push(new Ot(g)))),a(()=>["Invite Code: ",y,(()=>{var b=Dl();return b.$$click=async()=>{await navigator.clipboard.writeText(y),d(!0);let k=setTimeout(()=>{clearTimeout(k),d(!1)},1e3)},b})(),T(ne,{get when(){return f()},children:"Copied"})])})},u=()=>{r("joinDialogInviteCode",""),t()?.showModal()},l=()=>{t()?.close();let f=e.joinDialogInviteCode;r("joinDialogInviteCode","");let d=zn(f),y=new Nn;y.on("open",()=>{let m=y.connect(d);m.on("open",()=>{m.once("data",h=>{let g=h.nickname,b=h.documentUrl;typeof g=="string"&&typeof b=="string"&&(i.setDocumentUrl(b),r("connections",_t(k=>k.push(new Ot({nickname:g,peer:y,conn:m})))))}),m.send(e.nickname),m.once("close",()=>{r("connections",e.connections.filter(h=>h.value.peer!==y))})})})},c=f=>{f.peer.destroy()};return{connections:o,Render:()=>(()=>{var f=Ll(),d=f.firstChild,y=d.firstChild,m=y.firstChild,h=m.firstChild,g=h.nextSibling,b=d.nextSibling,k=b.firstChild,v=k.nextSibling,x=b.nextSibling,w=x.firstChild,P=w.firstChild,C=P.nextSibling,_=C.firstChild,R=_.nextSibling,$=w.nextSibling,O=$.firstChild,D=O.nextSibling,M=D.firstChild,E=M.nextSibling,F=x.nextSibling,B=F.firstChild,U=B.firstChild,q=U.nextSibling,W=q.nextSibling,ee=W.nextSibling,A=ee.firstChild;f.style.setProperty("width","100%"),f.style.setProperty("height","100%"),f.style.setProperty("display","flex"),f.style.setProperty("flex-direction","column"),f.style.setProperty("padding","10px"),f.style.setProperty("position","relative"),g.$$input=te=>{r("nickname",te.currentTarget.validationMessage)},k.$$click=()=>s(),v.$$click=()=>u(),x.style.setProperty("flex-grow","1"),x.style.setProperty("display","flex"),x.style.setProperty("flex-direction","column"),x.style.setProperty("margin-top","10px"),w.style.setProperty("flex-grow","1"),w.style.setProperty("overflow-y","auto"),K(R,T(Ge,{get each(){return e.connections},children:te=>(()=>{var ye=zl(),se=ye.firstChild,ce=se.nextSibling,je=ce.nextSibling,Ue=je.firstChild;return K(ce,()=>te.value.nickname),Ue.$$click=()=>{c(te.value)},ye})()})),$.style.setProperty("flex-grow","1"),$.style.setProperty("overflow-y","auto"),K(E,T(Ge,{get each(){return e.pendingInvites},children:te=>{let[ye,se]=J(!1);return(()=>{var ce=Ul(),je=ce.firstChild,Ue=je.nextSibling,rt=Ue.nextSibling,Ye=rt.firstChild,Be=Ye.nextSibling;return K(Ue,()=>te.value.inviteCode),Ye.$$click=async()=>{await navigator.clipboard.writeText(te.value.inviteCode),se(!0);let he=setTimeout(()=>{clearTimeout(he),se(!1)},1e3)},Be.$$click=()=>{te.value.peer.destroy(),r("pendingInvites",e.pendingInvites.filter(he=>he.value!==te.value))},K(rt,T(ne,{get when(){return ye()},children:"Copied"}),null),ce})()}})),K(f,T(ne,{get when(){return e.toastStack.length!=0},get children(){var te=jl();return K(te,T(Ge,{get each(){return e.toastStack},children:ye=>(()=>{var se=Bl();return K(se,T(ye.value.Render,{})),se})()})),te}}),F);var Y=n;return typeof Y=="function"?ge(Y,F):n=F,q.addEventListener("change",()=>{l()}),q.$$input=te=>{r("joinDialogInviteCode",te.currentTarget.value)},W.$$click=async()=>{let te=await navigator.clipboard.readText();r("joinDialogInviteCode",te)},A.$$click=()=>l(),X(()=>g.value=e.nickname),X(()=>q.value=e.joinDialogInviteCode),f})()}}xe(["click","input"]);class Vl extends tl{#e=!1;#n;connection;#r=!1;#i;#a=new Promise(e=>{this.#i=e});#t=[];isReady(){return this.#r}whenReady(){return this.#a}#s(){this.#r||(this.#r=!0,this.#i?.())}constructor(e){super(),this.#n=e,this.connection=e.connection}connect(e,r){this.peerId=e,this.peerMetadata=r,this.#e=!1,this.connection.on("data",t=>{if(typeof t!="string")return;const n=JSON.parse(t);if(console.log("message in, ",n),"targetId"in n&&n.targetId!==this.peerId||this.#e)return;const{senderId:o,type:a}=n;switch(a){case"arrive":{const{peerMetadata:s}=n;this.connection.send(JSON.stringify({senderId:this.peerId,targetId:o,type:"welcome",peerMetadata:this.peerMetadata})),this.#o(o,s)}break;case"welcome":{const{peerMetadata:s}=n;this.#o(o,s)}break;case"leave":this.#t=this.#t.filter(s=>s!==o),this.emit("peer-disconnected",{peerId:o});break;default:if(!("data"in n))this.emit("message",n);else{if(!n.data)throw new Error("We got a message without data, we can't send this.");const s=n.data;this.emit("message",{...n,data:new Uint8Array(s)})}break}}),this.connection.send(JSON.stringify({senderId:this.peerId,type:"arrive",peerMetadata:r}))}#o(e,r){this.#s(),this.#t.push(e),this.emit("peer-candidate",{peerId:e,peerMetadata:r})}send(e){if(this.#e)return!1;if("data"in e){let r=e.data?e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength):void 0,t=r==null?void 0:Array.from(new Uint8Array(r));this.connection.send(JSON.stringify({...e,data:t}))}else this.connection.send(JSON.stringify(e))}disconnect(){this.connection.send(JSON.stringify({senderId:this.peerId,type:"leave"}));for(const e of this.#t)this.emit("peer-disconnected",{peerId:e});this.#e=!0}}const Gl=261.63,Un=[{name:"C",type:"white"},{name:"C#",type:"black"},{name:"D",type:"white"},{name:"D#",type:"black"},{name:"E",type:"white"},{name:"F",type:"white"},{name:"F#",type:"black"},{name:"G",type:"white"},{name:"G#",type:"black"},{name:"A",type:"white"},{name:"A#",type:"black"},{name:"B",type:"white"}];class Wl{audioContext=void 0;pianoNodes=[];constructor(){}async init(){if(this.audioContext){this.audioContext.state==="suspended"?await this.audioContext.resume():this.audioContext.state==="running"&&await this.audioContext.suspend();return}this.audioContext=new AudioContext,await this.audioContext.audioWorklet.addModule(Rr),await this.audioContext.audioWorklet.addModule(xo),await this.audioContext.audioWorklet.addModule(So),await this.audioContext.audioWorklet.addModule(Co);let e=this.audioContext.createGain();e.gain.value=.1,e.connect(this.audioContext.destination),this.pianoNodes=[];for(let r=0;r<12;++r){let t=new AudioWorkletNode(this.audioContext,"piano-processor");t.connect(e),this.pianoNodes.push(t)}}async noteOn(e){if(this.audioContext==null){await this.init();return}this.audioContext.state==="suspended"&&await this.audioContext.resume();let r=Un.findIndex(n=>n.name==e);if(r==-1)return;let t=Gl*Math.pow(2,r/12);this.pianoNodes[r].port.postMessage({type:"noteOn",frequency:t})}async noteOff(e){this.audioContext==null&&await this.init();let r=Un.findIndex(t=>t.name==e);r!=-1&&this.pianoNodes[r].port.postMessage({type:"noteOff"})}play(){this.init()}}const Hl=`
class SineProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.phase = 0;
    this.frequency = 300; // Hz
  }

  process(inputs, outputs, parameters) {
    const output = outputs[0]; // Get the first output channel
    const outputChannel = output[0]; // Get the first channel (mono)

    // Generate sine wave samples
    for (let i = 0; i < outputChannel.length; i++) {
      // Calculate the phase increment based on frequency and sample rate
      // sampleRate is a global variable available in AudioWorkletGlobalScope
      this.phase += (2 * Math.PI * this.frequency) / sampleRate;
      outputChannel[i] = Math.sin(this.phase); // Generate sine wave sample
    }

    // Keep phase within [0, 2*PI] to prevent it from growing indefinitely
    this.phase %= (2 * Math.PI);

    return true; // Keep the processor alive
  }
}

registerProcessor('sine-processor', SineProcessor);
`,Kl=new Blob([Hl],{type:"application/javascript"}),Rr=URL.createObjectURL(Kl),Yl=`
class SawProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.phase = 0;
    this.frequency = 300; // Hz
  }

  process(inputs, outputs, parameters) {
    const output = outputs[0]; // Get the first output channel
    const outputChannel = output[0]; // Get the first channel (mono)

    // Generate sine wave samples
    for (let i = 0; i < outputChannel.length; i++) {
      // Calculate the phase increment based on frequency and sample rate
      // sampleRate is a global variable available in AudioWorkletGlobalScope
      this.phase += (2 * Math.PI * this.frequency) / sampleRate;
      outputChannel[i] = this.phase; // Generate sine wave sample
    }

    // Keep phase within [0, 2*PI] to prevent it from growing indefinitely
    this.phase %= (2 * Math.PI);

    return true; // Keep the processor alive
  }
}

registerProcessor('saw-processor', SawProcessor);
`,Jl=new Blob([Yl],{type:"application/javascript"}),xo=URL.createObjectURL(Jl),Zl=`
class SquareProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.phase = 0;
    this.frequency = 300; // Hz
  }

  process(inputs, outputs, parameters) {
    const output = outputs[0]; // Get the first output channel
    const outputChannel = output[0]; // Get the first channel (mono)

    // Generate sine wave samples
    for (let i = 0; i < outputChannel.length; i++) {
      // Calculate the phase increment based on frequency and sample rate
      // sampleRate is a global variable available in AudioWorkletGlobalScope
      this.phase += (2 * Math.PI * this.frequency) / sampleRate;
      outputChannel[i] = (this.phase < Math.PI ? 0 : 1); // Generate sine wave sample
    }

    // Keep phase within [0, 2*PI] to prevent it from growing indefinitely
    this.phase %= (2 * Math.PI);

    return true; // Keep the processor alive
  }
}

registerProcessor('square-processor', SquareProcessor);
`,Xl=new Blob([Zl],{type:"application/javascript"}),So=URL.createObjectURL(Xl),Ql=`
class PianoProcessor extends AudioWorkletProcessor {
    constructor() {
        super();
        this.phase = 0;
        this.sampleRate = sampleRate; // Global sampleRate from AudioWorkletGlobalScope

        // Define harmonics (fundamental + a few overtones) and their relative gains
        // These values are simplified and can be tweaked for different piano sounds
        this.harmonics = [
            { freqMultiplier: 1, gain: 1.0 },   // Fundamental
            { freqMultiplier: 2, gain: 0.6 },   // 1st overtone (octave)
            { freqMultiplier: 3, gain: 0.4 },   // 2nd overtone (fifth above octave)
            { freqMultiplier: 4, gain: 0.3 },   // 3rd overtone (two octaves)
            { freqMultiplier: 5, gain: 0.2 },   // 4th overtone (major third)
        ];

        // ADSR envelope parameters (simplified)
        this.attackTime = 0.01; // Very fast attack
        this.decayTime = 0.1;
        this.sustainLevel = 0.6;
        this.releaseTime = 0.8;

        this.envelopePhase = 0; // 0: idle, 1: attack, 2: decay, 3: sustain, 4: release
        this.currentGain = 0;
        this.noteOnTime = 0;
        this.noteOffTime = 0;
        this.frequency = 0; // Will be set via port.onmessage

        this.port.onmessage = (event) => {
            if (event.data.type === 'noteOn') {
                this.frequency = event.data.frequency;
                this.noteOnTime = currentTime; // Global currentTime from AudioWorkletGlobalScope
                this.envelopePhase = 1; // Start attack
                this.phase = 0; // Reset phase for new note
            } else if (event.data.type === 'noteOff') {
                this.noteOffTime = currentTime;
                this.envelopePhase = 4; // Start release
            }
        };
    }

    process(inputs, outputs, parameters) {
        const output = outputs[0]; // Assuming mono output for simplicity
        const channel = output[0]; // Get the first channel

        for (let i = 0; i < channel.length; ++i) {
            let sample = 0;

            // Update envelope
            if (this.envelopePhase === 1) { // Attack
                const timeElapsed = currentTime - this.noteOnTime;
                if (timeElapsed < this.attackTime) {
                    this.currentGain = timeElapsed / this.attackTime;
                } else {
                    this.currentGain = 1.0;
                    this.envelopePhase = 2; // Move to decay
                    this.decayStartTime = currentTime;
                }
            } else if (this.envelopePhase === 2) { // Decay
                const timeElapsed = currentTime - this.decayStartTime;
                if (timeElapsed < this.decayTime) {
                    this.currentGain = 1.0 - (1.0 - this.sustainLevel) * (timeElapsed / this.decayTime);
                } else {
                    this.currentGain = this.sustainLevel;
                    this.envelopePhase = 3; // Move to sustain
                }
            } else if (this.envelopePhase === 3) { // Sustain (maintain currentGain)
                // Nothing to do, just hold the sustain level
            } else if (this.envelopePhase === 4) { // Release
                const timeElapsed = currentTime - this.noteOffTime;
                if (timeElapsed < this.releaseTime) {
                    this.currentGain = this.sustainLevel * (1.0 - (timeElapsed / this.releaseTime));
                } else {
                    this.currentGain = 0;
                    this.envelopePhase = 0; // Go to idle
                    this.frequency = 0; // Stop generating sound
                }
            }

            // Generate sound if frequency and gain are active
            if (this.frequency > 0 && this.currentGain > 0.001) { // Threshold to prevent silence from generating
                for (const harmonic of this.harmonics) {
                    const freq = this.frequency * harmonic.freqMultiplier;
                    sample += Math.sin(this.phase * freq * 2 * Math.PI) * harmonic.gain;
                }
                sample *= this.currentGain; // Apply envelope gain
            } else {
                sample = 0; // No sound
            }

            channel[i] = sample;

            // Advance phase for the next sample
            this.phase += 1 / this.sampleRate;
            if (this.phase >= 1) {
                this.phase -= 1; // Keep phase within [0, 1)
            }
        }

        // Return false when the sound is completely silent to allow garbage collection
        //return this.envelopePhase !== 0 || this.currentGain > 0.001;
        return true;
    }
}

registerProcessor('piano-processor', PianoProcessor);`,ec=new Blob([Ql],{type:"application/javascript"}),Co=URL.createObjectURL(ec);window.addEventListener("beforeunload",()=>{Rr&&(URL.revokeObjectURL(Rr),URL.revokeObjectURL(xo),URL.revokeObjectURL(So),URL.revokeObjectURL(Co))});var tc=V("<div class=piano>"),rc=V("<div class=white-key>"),nc=V("<div class=black-key>");const ic=i=>{const e=[{name:"C",type:"white"},{name:"C#",type:"black"},{name:"D",type:"white"},{name:"D#",type:"black"},{name:"E",type:"white"},{name:"F",type:"white"},{name:"F#",type:"black"},{name:"G",type:"white"},{name:"G#",type:"black"},{name:"A",type:"white"},{name:"A#",type:"black"},{name:"B",type:"white"}],r=150,t=80;let n,o=new ct,a=new qe;return(()=>{var s=tc();s.$$pointermove=l=>{if(!o.get(l.pointerId))return;let c=n.getBoundingClientRect();o.set(l.pointerId,fn.create(l.clientX-c.left,l.clientY-c.top))},s.addEventListener("pointercancel",l=>{o.delete(l.pointerId),n.releasePointerCapture(l.pointerId)}),s.$$pointerup=l=>{o.delete(l.pointerId),n.releasePointerCapture(l.pointerId)},s.$$pointerdown=l=>{let c=n.getBoundingClientRect();o.set(l.pointerId,fn.create(l.clientX-c.left,l.clientY-c.top)),n.setPointerCapture(l.pointerId)};var u=n;return typeof u=="function"?ge(u,s):n=s,s.style.setProperty("display","flex"),s.style.setProperty("flex-direction","row"),s.style.setProperty("overflow-x","auto"),s.style.setProperty("user-select","none"),s.style.setProperty("touch-action","none"),K(s,T(Ge,{each:e,children:l=>{let[c,p]=J();l.type=="black"&&oe(()=>{let d=c();d!=null&&(a.add(d),ke(()=>a.delete(d)))});let f=S(()=>{let d=c();if(d==null)return!1;let y=n.getBoundingClientRect(),m=d.getBoundingClientRect();for(let h of o.values()){let g=y.left+h.x-m.left,b=y.top+h.y-m.top;if(0<g&&g<m.width&&0<b&&b<m.height){if(l.type=="white")for(let k of a){let v=k.getBoundingClientRect(),x=y.left+h.x-v.left,w=y.top+h.y-v.top;if(0<x&&x<v.width&&0<w&&w<v.height)return!1}return!0}}return!1});return oe(ae(f,d=>{d?i.onNoteOn(l.name):i.onNoteOff(l.name)},{defer:!0})),T(zr,{get children(){return[T(ut,{get when(){return l.type=="white"},get children(){var d=rc(),y=p;return typeof y=="function"?ge(y,d):p=d,d.style.setProperty("width","50px"),d.style.setProperty("pointer-events","none"),X(m=>{var h=!!f(),g=`${r+(f()?2:0)}px`;return h!==m.e&&d.classList.toggle("pressed",m.e=h),g!==m.t&&((m.t=g)!=null?d.style.setProperty("height",g):d.style.removeProperty("height")),m},{e:void 0,t:void 0}),d}}),T(ut,{get when(){return l.type=="black"},get children(){var d=nc(),y=p;return typeof y=="function"?ge(y,d):p=d,d.style.setProperty("margin-left","-16px"),d.style.setProperty("margin-right","-14px"),d.style.setProperty("width","30px"),d.style.setProperty("pointer-events","none"),X(m=>{var h=!!f(),g=`${t+(f()?2:0)}px`;return h!==m.e&&d.classList.toggle("pressed",m.e=h),g!==m.t&&((m.t=g)!=null?d.style.setProperty("height",g):d.style.removeProperty("height")),m},{e:void 0,t:void 0}),d}})]}})}})),s})()};xe(["pointerdown","pointerup","pointermove"]);function z(i){return{type:"MaybeUndefined",element:i}}function De(){return{type:"Number"}}function et(){return{type:"String"}}function G(i){return{type:"Object",properties:i}}function Q(i){return{type:"Array",element:i}}function Yr(i,e,r){return{type:"Invarant",fromFn:i,toFn:e,inner:r}}function oc(i,e){return{type:"Default",value:i,inner:e}}function _e(i,e){switch(i.type){case"Boolean":return typeof e!="boolean"?Fe("Expected a boolean."):de(e);case"Number":return typeof e!="number"?Fe("Expected a number."):de(e);case"String":return typeof e!="string"?Fe("Expected a string."):de(e);case"MaybeUndefined":return e==null?de(void 0):_e(i.element,e);case"MaybeNull":return e==null?de(null):_e(i.element,e);case"Union":{let r=e[i.selector];if(typeof r!="string")return Fe("Missing type param for union.");let t={...e};delete t[i.selector];let n=G(i.parts[r]),o=_e(n,t);if(o.type=="Err")return Fe(`Problem parsing union part ${r}: ${o.message}`);let s={...o.value};return s[i.selector]=r,de(s)}case"Array":{let r=[];for(let t of e){let n=_e(i.element,t);if(n.type=="Err")return n;r.push(n.value)}return de(r)}case"Object":{let r={};for(let t of Object.keys(i.properties)){let n=i.properties[t];Object.hasOwn(e,t)||(r[t]=Ne(n));let o=_e(i.properties[t],e[t]);if(o.type=="Err")return Fe(`Problem parsing field ${t}: ${o.message}`);r[t]=o.value}return de(r)}case"Recursive":{let r=i.inner();return _e(r,e)}case"Invarant":{let r=i.fromFn,t=_e(i.inner,e);return t.type=="Err"?t:de(r(t.value))}case"Default":{let r=i.inner,t;try{t=_e(r,e)}catch(n){t=Fe(""+n)}return t.type=="Err"?de(i.value):de(t.value)}case"Json":return de(e)}}function Ne(i){switch(i.type){case"Boolean":return!1;case"Number":return 0;case"String":return"";case"MaybeUndefined":return;case"MaybeNull":return null;case"Union":{let e=Object.keys(i.parts)[0],r=Ne(G(i.parts[e]));return r[i.selector]=e,r}case"Array":return[];case"Object":{let e={};for(let r of Object.keys(i.properties)){let t=i.properties[r];e[r]=Ne(t)}return e}case"Recursive":{let e=i.inner();return Ne(e)}case"Invarant":{let e=i.fromFn,r=Ne(i.inner);return e(r)}case"Default":return i.value;case"Json":return null}}function Ae(i,e){switch(i.type){case"Boolean":return e;case"Number":return e;case"String":return e;case"MaybeUndefined":return e==null?null:Ae(i.element,e);case"MaybeNull":return e==null?null:Ae(i.element,e);case"Union":{let r=e[i.selector],t={...e};delete t[i.selector];let n=Ae(G(i.parts[r]),t);return n[i.selector]=r,n}case"Object":{let r={};for(let t of Object.keys(i.properties))r[t]=Ae(i.properties[t],e[t]);return r}case"Array":return e.map(r=>Ae(i.element,r));case"Recursive":{let r=i.inner();return Ae(r,e)}case"Invarant":{let r=i.toFn,t=r(e);return Ae(i.inner,t)}case"Default":return Ae(i.inner,e);case"Json":return e}}function Jr(i,e,r){if(typeof i!="object"||i.type!="Object")return Fe("Only projections of objects are supported");let t={};for(let[n,o]of Object.entries(i.properties)){let a=o;Object.defineProperty(t,n,{get(){let s=e?.[n];if(typeof o=="object"){if(o.type=="Object"){let l=Jr(a,s,c=>r(p=>c(p[n])));if(l.type=="Err")throw new Error("Unreachable");return l.value}if(o.type=="Array"){let l=Po(a,s,c=>r(p=>{c(p[n])}));if(l.type=="Err")throw new Error("Unreachable");return l.value}}let u=_e(a,s);return u.type=="Err"?Ne(a):u.value},set(s){let u=Ae(a,s);JSON.stringify(e[n])!=JSON.stringify(u)&&r(l=>l[n]=u)}})}return de(t)}function Po(i,e,r){if(typeof i!="object"||i.type!="Array")return Fe("Expected an array for projection");let t=i.element,n=[],o=new Proxy(n,{get(a,s,u){if(s=="length")return n.length=e.length,e.length;if(typeof s=="string"&&!Number.isNaN(Number.parseInt(s))){let l=Number.parseInt(s),c=e?.[l];if(typeof t=="object"){if(t.type=="Object"){let f=Jr(t,c,d=>r(y=>{d(y[l])}));if(f.type=="Err")throw new Error("Unreachable");return f.value}if(t.type=="Array"){let f=Po(t,c,d=>r(y=>{d(y[s])}));if(f.type=="Err")throw new Error("Unreachable");return f.value}}let p=_e(t,c);return p.type=="Err"?Ne(t):p.value}return Reflect.get(n,s,n)},set(a,s,u,l){if(typeof s=="string"&&!Number.isNaN(Number.parseInt(s))){let c=Number.parseInt(s),p=Ae(t,u);if(JSON.stringify(e[c])==JSON.stringify(u))return!1;r(f=>f[c]=p)}return Reflect.set(n,s,u,n)}});return de(o)}function Qt(i,e,r){if(typeof r!="object"||r.type!="Object")throw new Error("Expected object.");{let o=Bn.get(i);if(o!=null)return o}let t=r.properties,n=new Proxy({},{defineProperty(o,a,s){return Reflect.defineProperty(o,a,s)},deleteProperty(o,a){return Reflect.deleteProperty(o,a)},getOwnPropertyDescriptor(o,a){if(t[a]!=null){let s=Reflect.getOwnPropertyDescriptor(t,a);return s==null?void 0:(s={...s},s.value=n[a],s)}return Reflect.getOwnPropertyDescriptor(o,a)},getPrototypeOf(o){return Reflect.getPrototypeOf(o)},has(o,a){return t[a]!=null?!0:Reflect.has(o,a)},isExtensible(o){return Reflect.isExtensible(o)},ownKeys(o){return[...Reflect.ownKeys(t),...Reflect.ownKeys(o)]},preventExtensions(o){return Reflect.preventExtensions(o)},setPrototypeOf(o,a){return Reflect.setPrototypeOf(o,a)},get(o,a,s){if(typeof a=="symbol")return o[a];if(typeof a=="string"){let u=t[a];if(u!=null){if(u.type=="Object")return Qt(i[a],c=>e(p=>c(p[a])),u);if(u.type=="Array")return Mr(i[a],c=>e(p=>c(p[a])),u);let l=_e(u,i[a]);return l.type=="Err"?Ne(u):l.value}}return Reflect.get(o,a,s)},set(o,a,s,u){if(typeof a=="symbol")return o[a]=s,!0;if(typeof a=="string"){let l=t[a];if(l!=null){let c=Ae(l,s);return e(p=>p[a]=c),!0}}return Reflect.set(o,a,s,u)}});return Bn.set(i,n),n}function Mr(i,e,r){if(typeof r!="object"||r.type!="Array")throw new Error("Expected object.");{let a=qn.get(i);if(a!=null)return a}let t=r.element,n=function*(){for(let a=0;a<i.length;++a)yield o[a]},o=new Proxy([void 0],{defineProperty(a,s,u){return Reflect.defineProperty(a,s,u)},deleteProperty(a,s){return Reflect.deleteProperty(a,s)},getOwnPropertyDescriptor(a,s){let u=typeof s=="string"?Number.parseInt(s):void 0;if(Number.isNaN(u)&&(u=void 0),u!=null){let c=Reflect.getOwnPropertyDescriptor(a,0);return c==null?void 0:(c={...c},c.value=o[s],c)}let l=Reflect.getOwnPropertyDescriptor(a,s);if(l!=null)return s==="length"&&(l={...l},l.value=i.length),l},getPrototypeOf(a){return Reflect.getPrototypeOf(a)},has(a,s){let u=typeof s=="string"?Number.parseInt(s):void 0;return Number.isNaN(u)&&(u=void 0),u!=null?0<=u&&u<i.length:Reflect.has(a,s)},isExtensible(a){return Reflect.isExtensible(a)},ownKeys(a){return[...Array(i.length).fill(void 0).map((s,u)=>u.toString()),...Reflect.ownKeys(a).filter(s=>s!="0")]},preventExtensions(a){return Reflect.preventExtensions(a)},setPrototypeOf(a,s){return Reflect.setPrototypeOf(a,s)},get(a,s,u){if(s==Symbol.iterator)return n;if(typeof s=="symbol")return a[s];if(s==="length")return i.length;if(s==="findIndex")return function(l,c){console.log("Intercepted findIndex call!");const p=[];for(let f=0;f<i.length;f++)if(t.type=="Object")p.push(Qt(i[f],d=>e(y=>d(y[f])),t));else if(t.type=="Array")p.push(Mr(i[f],d=>e(y=>d(y[f])),t));else{let d=_e(t,i[f]);d.type=="Err"?p.push(Ne(t)):p.push(d.value)}return Array.prototype.findIndex.call(p,l,c)};if(typeof s=="string"){let l=typeof s=="string"?Number.parseInt(s):void 0;if(Number.isNaN(l)&&(l=void 0),l!=null&&0<=l&&l<i.length){if(t.type=="Object")return Qt(i[l],p=>e(f=>p(f[s])),t);if(t.type=="Array")return Mr(i[l],p=>e(f=>p(f[s])),t);let c=_e(t,i[l]);return c.type=="Err"?Ne(t):c.value}}return Reflect.get(a,s,u)},set(a,s,u,l){if(typeof s=="symbol")return a[s]=u,!0;if(s==="length"){let p=u-i.length;if(p>0){let f=Array(p).fill(void 0).map(d=>Ne(t));e(d=>d.push(...f))}else p<0&&e(f=>f.splice(i.length+p,-p));return!0}if(typeof s=="string"){let c=typeof s=="string"?Number.parseInt(s):void 0;if(Number.isNaN(c)&&(c=void 0),c!=null){let p=Ae(t,u);return e(f=>f[s]=p),!0}}return Reflect.set(a,s,u,l)}});return qn.set(i,o),o}let Bn=new WeakMap,qn=new WeakMap;class Z{typeName;typeSchema;constructor(e){this.typeName=e.typeName,this.typeSchema=e.typeSchema}create(e){let[r,t]=Se(e);return new Lt({type:this,state:r,setState:t})}createJsonProjectionV3(e,r){let t=Qt(e,r,this.typeSchema),[n,o]=ie(()=>Se(t));return de(new Lt({type:this,state:t,setState:o}))}createJsonProjectionV2(e,r){let t=Jr(this.typeSchema,e,r);if(t.type=="Err")return Fe(t.message);let n=t.value,[o,a]=ie(()=>Se(n));return de(new Lt({type:this,state:o,setState:a}))}createJsonProjection(e,r){let t=S(()=>_e(this.typeSchema,e())),n=S(()=>{let s=t();return s.type=="Err"?s:de(t)},void 0,{equals:(s,u)=>s.type=="Ok"&&u.type=="Ok"?s.value==u.value:!1}),o=S(()=>{let s=n();return s.type=="Err"?s:de(S(()=>s.value().value))}),a=S(()=>{let s=o();if(s.type=="Err")return s;let u=s.value;return de(S(()=>{let[l,c]=Se(ie(u));oe(ae(u,f=>c(f),{defer:!0}));let p=S(()=>{let f=Ae(this.typeSchema,l);return{json:f,jsonString:JSON.stringify(f)}},void 0,{equals:(f,d)=>f.jsonString==d.jsonString});return oe(ae(()=>p().json,f=>{r(f)},{defer:!0})),new Lt({type:this,state:l,setState:c})}))});return S(()=>{let s=a();return s.type=="Err"?s:de(s.value())})}}class Lt{type;state;setState;constructor(e){this.type=e.type,this.state=e.state,this.setState=e.setState}}const ac=G({childIds:Q(et())}),$t=new Z({typeName:"Children",typeSchema:ac}),sc=G({parentId:et()}),It=new Z({typeName:"Parent",typeSchema:sc}),lc=G({orderIndex:De()}),cc=new Z({typeName:"SortOrderIndex",typeSchema:lc});class Zr{componentTypes;componentTypeMap;constructor(e){this.componentTypes=e,this.componentTypeMap=new Map(e.map(r=>[r.typeName,r]))}}const _o=new Zr([$t,It,cc]);class L{x;y;constructor(e,r){this.x=e,this.y=r}static create(e,r){return new L(e,r)}static zero=L.create(0,0);static unitX=L.create(1,0);static unitY=L.create(0,1);add(e){return L.create(this.x+e.x,this.y+e.y)}sub(e){return L.create(this.x-e.x,this.y-e.y)}multScalar(e){return L.create(this.x*e,this.y*e)}cross(e){return this.x*e.y-this.y*e.x}distanceSquared(e){let r=e.x-this.x,t=e.y-this.y;return r*r+t*t}distance(e){return Math.sqrt(this.distanceSquared(e))}lengthSquared(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.lengthSquared())}normalize(){return this.multScalar(1/this.length())}}class pe{x;y;static rot0=new pe(1,0);constructor(e,r){this.x=e,this.y=r}static xy(e){return new pe(e.x,e.y)}static fromAngle(e){let r=e*Math.PI/180;return new pe(Math.cos(r),Math.sin(r))}get u(){return L.create(this.x,this.y)}get v(){return L.create(-this.y,this.x)}getLengthSquared(){return this.x*this.x+this.y*this.y}getLength(){return Math.sqrt(this.getLengthSquared())}normalize(){let e=this.getLength();return new pe(this.x/e,this.y/e)}times(e){let r=this;return new pe(r.x*e.x-r.y*e.y,r.x*e.y+r.y*e.x)}conjugate(){return new pe(this.x,-this.y)}rotate(e){let r=this.x,t=this.y,n=-t,o=r;return L.create(e.x*r+e.y*n,e.x*t+e.y*o)}getAngle(){return(e=>e*180/Math.PI)(Math.atan2(this.y,this.x))}}class fe{origin;orientation;static identity=new fe(L.zero,pe.rot0);constructor(e,r){this.origin=e,this.orientation=r}static create(e,r){return new fe(e,r)}get u(){return this.orientation.u}get v(){return this.orientation.v}pointFromSpace(e){return this.orientation.rotate(e).add(this.origin)}pointToSpace(e){return this.orientation.conjugate().rotate(e.sub(this.origin))}vectorFromSpace(e){return this.orientation.rotate(e)}vectorToSpace(e){return this.orientation.conjugate().rotate(e)}transformFromSpace(e){return fe.create(this.pointFromSpace(e.origin),e.orientation.times(this.orientation))}transformToSpace(e){return fe.create(this.pointToSpace(e.origin),this.orientation.conjugate().times(e.orientation))}}function uc(i){let e=new ct,r=S(()=>{let t=[];for(let[n,o]of e.entries())t.push({id:n,pos:o});return t.sort((n,o)=>n.id-o.id),t});{let t=S(()=>r().length==1);oe(()=>{if((i.disableOneFingerPan?.()??!1)||!t())return;let n=S(()=>r()[0].pos),o=ie(()=>i.pan()),a=ie(()=>i.scale()),s=ie(()=>n()),u=1/a;Number.isFinite(u)&&oe(ae(n,l=>{i.setPan(o.sub(l.sub(s).multScalar(u)))},{defer:!0}))})}{let t=S(()=>r().length==2);oe(()=>{if(!t())return;let n=S(()=>r()[0].pos),o=S(()=>r()[1].pos),a=S(()=>n().add(o()).multScalar(.5)),s=S(()=>n().distance(o())),u=ie(()=>i.pan()),l=ie(()=>i.scale()),c=ie(()=>a()),p=ie(()=>s()),f=ie(()=>c.multScalar(1/l).add(u));!Number.isFinite(f.x)||!Number.isFinite(f.y)||oe(ae([a,s],([d,y])=>{let m=l*y/p,h=f.sub(d.multScalar(1/m));Oe(()=>{Number.isFinite(m)&&Number.isFinite(h.x)&&Number.isFinite(h.y)&&(i.setPan(h),i.setScale(m))})},{defer:!0}))})}return{onPointerDown(t){let n,o;if(t.currentTarget instanceof Element){let a=t.currentTarget.getBoundingClientRect();n=a.left,o=a.top}else n=0,o=0;e.set(t.pointerId,L.create(t.clientX-n,t.clientY-o))},onPointerUp(t){e.delete(t.pointerId),i.releasePointerCapture(t.pointerId)},onPointerCancel(t){e.delete(t.pointerId),i.releasePointerCapture(t.pointerId)},onPointerMove(t){if(!e.has(t.pointerId))return;let n,o;if(t.currentTarget instanceof Element){let a=t.currentTarget.getBoundingClientRect();n=a.left,o=a.top}else n=0,o=0;e.set(t.pointerId,L.create(t.clientX-n,t.clientY-o))},onWheel(t){let n,o;if(t.currentTarget instanceof Element){let c=t.currentTarget.getBoundingClientRect();n=c.left,o=c.top}else n=0,o=0;let a=L.create(t.clientX-n,t.clientY-o),s=i.scale(),u=i.scale();if(t.deltaY<0)u*=1.1;else if(t.deltaY>0)u/=1.1;else return;let l=i.pan().add(a.multScalar(1/s-1/u));Oe(()=>{i.setPan(l),i.setScale(u)})},numTouches:S(()=>r().length)}}class dc{canUndo;canRedo;undoDisplayName;redoDisplayName;undo;redo;pushUndoUnit;clear;constructor(){let e=[],r=-1,[t,n]=J(!1),[o,a]=J(!1),[s,u]=J(),[l,c]=J(),p=()=>{Oe(()=>{if(n(()=>r!=-1),a(()=>r<e.length-1),r!=-1){let m=e[r];u(m.displayName)}else u(void 0);if(r<e.length-1){let m=e[r+1];c(m.displayName)}else c(void 0)})},f=()=>{if(r==-1)return;e[r].run(!0),--r,p()},d=()=>{if(r>=e.length-1)return;++r,e[r].run(!1),p()},y=m=>{r<e.length-1&&e.splice(r+1,e.length-1-r),++r,e.push(m),p()};this.clear=()=>{e.splice(0,e.length),r=-1,p()},this.canUndo=t,this.canRedo=o,this.undoDisplayName=s,this.redoDisplayName=l,this.undo=f,this.redo=d,this.pushUndoUnit=y}}function To(i){return i==null?[]:[i]}function pc(i,e){let r,t=()=>{},n=0;return()=>{if(Lr()==null)return r!=null?r():i();if(r==null){let{cache:o,dispose:a}=Xe(s=>({cache:S(i),dispose:s}));r=o,t=a,n=1}else++n;return ke(()=>{--n==0&&(t(),t=()=>{},e?.(),r=void 0)}),r()}}class er{value;constructor(e){this.value=e}}class dt{entityMap;componentTypeEntitiesMap;componentTypeEntitiesMap_=new Map;constructor(){this.entityMap=new ct,this.componentTypeEntitiesMap=new ct}entities(){return Array.from(this.entityMap.keys())}entitiesWithComponentType(e){{let t=this.componentTypeEntitiesMap_.get(e.typeName);if(t!=null)return t()}let r=pc(()=>{let t=this.componentTypeEntitiesMap.get(e.typeName);if(t==null)return[];let n=[];for(let o of t)n.push(o);return n},()=>{this.componentTypeEntitiesMap_.delete(e.typeName)});return this.componentTypeEntitiesMap_.set(e.typeName,r),r()}createEntityWithId(e,r){ie(()=>Oe(()=>{this.entityMap.set(e,new ct(r.map(t=>[t.type.typeName,t])));for(let t of r){let n=this.componentTypeEntitiesMap.get(t.type.typeName);n==null&&(n=new qe,this.componentTypeEntitiesMap.set(t.type.typeName,n)),n.add(e)}}))}createEntity(e){let r=st();return this.createEntityWithId(r,e),r}destroyEntity(e){ie(()=>Oe(()=>{let r=this.entityMap.get(e);if(r!=null)for(let t of r.values()){let n=this.componentTypeEntitiesMap.get(t.type.typeName);n?.delete(e)}this.entityMap.delete(e)}))}attachToParent(e,r){ie(()=>{this.getComponent(e,It)?.state?.parentId!=null&&this.detactFromParent(e);let t=this.getComponent(r,$t);t==null?(t=$t.create({childIds:[e]}),this.setComponent(r,t)):t.setState("childIds",_t(n=>n.push(e))),this.setComponent(e,It.create({parentId:r}))})}detactFromParent(e){ie(()=>{let r=this.getComponent(e,It);if(r!=null){this.unsetComponent(e,It);let t=r.state.parentId,n=this.getComponent(t,$t);if(n!=null){let o=n.state.childIds.filter(a=>a!==e);o.length==0?this.unsetComponent(t,$t):n.setState("childIds",o)}}})}getComponent(e,r){let t=this.entityMap.get(e);if(t!=null)return t.get(r.typeName)}getComponents(e){return Array.from(this.entityMap.get(e)?.values()??[])}setComponent(e,r){this.setComponents(e,[r])}setComponents(e,r){let t=this.entityMap.get(e);if(t!=null)for(let n of r)t.set(n.type.typeName,n)}unsetComponent(e,r){let t=this.entityMap.get(e);t?.delete(r.typeName)}unsetComponents(e,r){let t=this.entityMap.get(e);if(t!=null)for(let n of r)t.delete(n.typeName)}toJson(){let e={};for(let r of this.entities()){let t={};for(let n of this.getComponents(r))t[n.type.typeName]=Ae(n.type.typeSchema,n.state);e[r]=t}return e}static fromJson(e,r){let t=new dt;for(let n of Object.keys(r)){let o=r[n],a=Object.keys(o),s=[];for(let u of a){let l=e.componentTypeMap.get(u);if(l==null)return Fe(`${u} not found`);let c=_e(l.typeSchema,o[u]);if(c.type=="Err")return c;let p=c.value,f=l.create(p);s.push(f)}t.createEntityWithId(n,s)}return de(t)}}const fc=Yr(i=>L.create(i.x,i.y),i=>({x:i.x,y:i.y}),G({x:De(),y:De()})),hc=Yr(i=>new pe(i.x,i.y),i=>({x:i.x,y:i.y}),G({x:De(),y:De()})),mc=Yr(({origin:i,orientation:e})=>fe.create(i,e),i=>({origin:i.origin,orientation:i.orientation}),G({origin:fc,orientation:hc})),gc=G({transform:mc}),ve=new Z({typeName:"Transform2D",typeSchema:gc});class $o{nodeTypes=[];noteTypeNameToNodeTypeMap=new Map;registerNodeType(e){this.nodeTypes.push(e),this.noteTypeNameToNodeTypeMap.set(e.componentType.typeName,e)}registerNodeTypes(e){for(let r of e)this.registerNodeType(r)}lookupNodeType(e){return this.noteTypeNameToNodeTypeMap.get(e)}}const I=G({target:et(),pin:et()});var yc=V("<svg><path fill=none stroke=blue stroke-width=2 vector-effect=non-scaling-stroke></svg>",!1,!0),bc=V("<svg><g><rect x=0 stroke=black rx=5 ry=5></rect><text style=user-select:none;></svg>",!1,!0),vc=V("<svg><foreignObject x=5></svg>",!1,!0),Vn=V("<svg><circle r=1></svg>",!1,!0),Gn=V("<svg><text></svg>",!1,!0);class Ar{Render;constructor(e){this.Render=()=>[T(Ge,{get each(){return e.nodes()},children:r=>T(wc,{node:r,get isHighlighted(){return e.highlightedEntitySet.has(r.node.nodeParams.entity)},get isSelected(){return e.selectedEntitySet.has(r.node.nodeParams.entity)}})}),T(Ge,{get each(){return e.nodes()},children:r=>T(Ge,{get each(){return r.node.inputPins?.()??[]},children:t=>T(ne,{get when(){return t.source()},children:n=>{let o=S(()=>e.lookupNodeById(n().target)),a=S(()=>{let u=o();if(u==null)return;let l=u.outputPinPositionMap()?.get(n().pin);if(l!=null)return u.space().pointFromSpace(l)}),s=S(()=>{let u=r.inputPinPositionMap()?.get(t.name);if(u!=null)return r.space().pointFromSpace(u)});return T(ne,{get when(){return a()},children:u=>T(ne,{get when(){return s()},children:l=>{let c=S(()=>Io(u().x,-u().y,l().x,-l().y,0));return(()=>{var p=yc();return X(()=>H(p,"d",c())),p})()}})})}})})})]}}let br=(()=>{let i=new Map;return e=>{let r=i.get(e);if(r!=null)return r;let{svg:t,dispose:n}=Xe(u=>({svg:Sc(),dispose:u})),o=document.createElementNS("http://www.w3.org/2000/svg","text"),a=document.createTextNode(e);o.appendChild(a),t.appendChild(o);let s=o.getBBox();return n(),r=L.create(s.width,s.height),i.set(e,r),r}})(),kc=(()=>{let i=new Map;return(e,r)=>{let t=i.get(e);return t!=null||(t=r(),i.set(e,t)),t}})();function wc(i){let e=S(()=>br(i.node.node.type.componentType.typeName)),r=S(Qe(()=>i.node.node.inputPins?.()??[],k=>{let v=br(k.name);return{name:k.name,size:v}})),t=S(Qe(()=>i.node.node.outputPins?.()??[],k=>{let v=br(k.name);return{name:k.name,size:v}})),n=S(()=>{let k=i.node.node.ui?.();if(k!=null)return kc(i.node.node.type.componentType.typeName,()=>{let v=xc(),x=document.createElement("div");x.style.setProperty("display","inline-block"),v.append(x);let w=ki(()=>T(k,{}),x),P=x.getBoundingClientRect();return w(),L.create(P.width,P.height)})});const o=5,a=5,s=S(()=>{let k=0;for(let v of r())k+=v.size.y;return k}),u=S(()=>{let k=0;for(let v of t())k+=v.size.y;return k});let l=S(()=>{let k=0;for(let v of r())k=Math.max(k,v.size.x);return k}),c=S(()=>{let k=0;for(let v of t())k=Math.max(k,v.size.x);return k}),p=S(()=>e().y+Math.max(s(),u())+(n()?.y??0)+2*o),f=S(()=>Math.max(e().x,l()+c()+4*a,n()?.x??0)+2*o),d=S(()=>L.create(f(),p())),y=S(()=>{let k={},v=p()-e().y;for(let x of r())v-=x.size.y,k[x.name]={dotPos:L.create(a,v+.28*x.size.y),textPos:L.create(2*a,v)};return k}),m=S(()=>{let k={},v=p()-e().y;for(let x of t())v-=x.size.y,k[x.name]={dotPos:L.create(f()-a,v+.28*x.size.y),textPos:L.create(f()-2*a-x.size.x,v)};return k}),h=S(()=>{let k=new Map;for(let[v,{dotPos:x}]of Object.entries(y()))k.set(v,x);return k}),g=S(()=>{let k=new Map;for(let[v,{dotPos:x}]of Object.entries(m()))k.set(v,x);return k});Ur(()=>{i.node.setRenderSizeAccessor(d),i.node.setInputPinPositionMapAccessor(h),i.node.setOutputPinPositionMapAccessor(g)});let b=S(()=>{let k=i.node.space(),v=k.origin,x=k.u,w=v.x,P=-v.y,C=x.x,_=-x.y,R=-_;return`matrix(${C} ${R} ${_} ${C} ${w} ${P})`});return(()=>{var k=bc(),v=k.firstChild,x=v.nextSibling;return K(k,T(ne,{get when(){return n()},children:w=>T(ne,{get when(){return i.node.node.ui?.()},keyed:!0,children:P=>(()=>{var C=vc();return K(C,T(P,{})),X(_=>{var R=-w().y-o,$=w().x,O=w().y;return R!==_.e&&H(C,"y",_.e=R),$!==_.t&&H(C,"width",_.t=$),O!==_.a&&H(C,"height",_.a=O),_},{e:void 0,t:void 0,a:void 0}),C})()})}),x),K(x,()=>i.node.node.type.componentType.typeName),K(k,T(Ge,{get each(){return i.node.node.inputPins?.()??[]},children:w=>{let P=S(()=>y()[w.name]),C=w.isEffectPin??!1;return T(ne,{get when(){return P()},children:_=>[(()=>{var R=Vn();return H(R,"fill",C?"purple":"black"),X($=>{var O=_().dotPos.x,D=-_().dotPos.y;return O!==$.e&&H(R,"cx",$.e=O),D!==$.t&&H(R,"cy",$.t=D),$},{e:void 0,t:void 0}),R})(),(()=>{var R=Gn();return H(R,"font-weight",C?"bold":"normal"),H(R,"fill",C?"purple":"black"),K(R,()=>w.name),X($=>{var O=_().textPos.x,D=-_().textPos.y;return O!==$.e&&H(R,"x",$.e=O),D!==$.t&&H(R,"y",$.t=D),$},{e:void 0,t:void 0}),R})()]})}}),null),K(k,T(Ge,{get each(){return i.node.node.outputPins?.()??[]},children:w=>{let P=S(()=>m()[w.name]),C=w.isEffectPin??!1;return T(ne,{get when(){return P()},children:_=>[(()=>{var R=Vn();return H(R,"fill",C?"purple":"black"),X($=>{var O=_().dotPos.x,D=-_().dotPos.y;return O!==$.e&&H(R,"cx",$.e=O),D!==$.t&&H(R,"cy",$.t=D),$},{e:void 0,t:void 0}),R})(),(()=>{var R=Gn();return H(R,"font-weight",C?"bold":"normal"),H(R,"fill",C?"purple":"black"),K(R,()=>w.name),X($=>{var O=_().textPos.x,D=-_().textPos.y;return O!==$.e&&H(R,"x",$.e=O),D!==$.t&&H(R,"y",$.t=D),$},{e:void 0,t:void 0}),R})()]})}}),null),X(w=>{var P=b(),C=-p(),_=f(),R=p(),$=i.isSelected?"green":i.isHighlighted?"blue":"white",O=.5*(f()-e().x),D=-p()+e().y;return P!==w.e&&H(k,"transform",w.e=P),C!==w.t&&H(v,"y",w.t=C),_!==w.a&&H(v,"width",w.a=_),R!==w.o&&H(v,"height",w.o=R),$!==w.i&&H(v,"fill",w.i=$),O!==w.n&&H(x,"x",w.n=O),D!==w.s&&H(x,"y",w.s=D),w},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),k})()}const xc=(()=>{let i=0,e;return()=>(e!=null?++i:(e=document.createElement("div"),e.style.setProperty("position","absolute"),e.style.setProperty("left","-1000px"),e.style.setProperty("top","-1000px"),e.style.setProperty("width","500px"),e.style.setProperty("height","500px"),document.body.append(e),i=1),ke(()=>{--i,i==0&&window.queueMicrotask(()=>{i==0&&e!=null&&(document.body.removeChild(e),e=void 0)})}),e)})(),Sc=(()=>{let i=0,e;return()=>(e!=null?++i:(e=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.style.setProperty("position","absolute"),e.style.setProperty("left","-1000px"),e.style.setProperty("top","-1000px"),document.body.append(e),i=1),ke(()=>{--i,i==0&&window.queueMicrotask(()=>{i==0&&e!=null&&(document.body.removeChild(e),e=void 0)})}),e)})();function Io(i,e,r,t,n=.5){const o=(i+r)/2,a=(e+t)/2;let s,u,l,c;return s=i+(o-i)*(1-n),u=e+(a-e)*n,l=r-(r-o)*(1-n),c=t-(t-a)*n,`M ${i} ${e} C ${s} ${u}, ${l} ${c}, ${r} ${t}`}var Cc=V("<svg><path fill=none stroke-width=2 pointer-events=none vector-effect=non-scaling-stroke></svg>",!1,!0);class Pc{overlaySvg;dragEnd;disablePan=()=>!0;constructor(e){let r=e.modeParams,t=S(()=>r.nodesSystem.lookupNodeById(e.fromNodeId)),n=S(()=>{let s=t();if(s==null)return;let u=s.outputPinPositionMap()?.get(e.fromPin.name);if(u!=null)return s.space().pointFromSpace(u)}),o=S(()=>{let s=r.mousePos();if(s!=null)return r.screenPtToWorldPt(s)}),a=S(()=>{let s=r.pickingSystem.nodeUnderMouseById();if(s==null)return;let u=r.nodesSystem.lookupNodeById(s);if(u==null)return;let l=r.pickingSystem.pinUnderMouse();if(l?.type=="Input")return{nodeId:s,node:u,pin:l}});this.overlaySvg=()=>T(ne,{get when(){return n()},children:s=>T(ne,{get when(){return o()},children:u=>{let l=S(()=>Io(s().x,-s().y,u().x,-u().y,0)),c=S(()=>a()!=null);return(()=>{var p=Cc();return X(f=>{var d=l(),y=c()?"blue":"red";return d!==f.e&&H(p,"d",f.e=d),y!==f.t&&H(p,"stroke",f.t=y),f},{e:void 0,t:void 0}),p})()}})}),this.dragEnd=()=>{let s=a();if(s!=null){let u=t();if(u!=null){let l=u.node.outputPins?.()??[],c;for(let p of l)if(p.name==e.fromPin.name){c=p;break}if(c!=null){let p=s.node.node.inputPins?.()??[];for(let f of p)if(f.name==s.pin.name){{let d={target:s.nodeId,pin:s.pin.name},y=!1;for(let m of c.sinks())if(m.target==d.target&&m.pin==d.pin){y=!0;break}y||c.setSinks([...c.sinks(),d])}{let d={target:e.fromNodeId,pin:e.fromPin.name};f.setSource(d)}}}}}r.onDone()}}}var _c=V("<svg><circle fill=blue pointer-events=none></svg>",!1,!0);class Wn{overlaySvg;click;dragStart;dragEnd;highlightedObjectsById;selectedObjectsById;disablePan;constructor(e){let[r,t]=Se({dragging:void 0}),n=new qe,o=S(()=>Array.from(n)),a=()=>e.pickingSystem.nodeUnderMouseById(),s=()=>e.pickingSystem.pinUnderMouse();Te(()=>{if(r.dragging==null)return;let l=r.dragging.value,c=e.mousePos();if(c==null)return;let p=e.screenPtToWorldPt(c);if(p==null)return;let f=e.nodesSystem.lookupNodeById(l.nodeId);f?.setSpace(fe.create(p.sub(l.pickupOffset),pe.rot0))}),this.overlaySvg=()=>T(ne,{get when(){return s()},children:l=>T(ne,{get when(){return e.nodesSystem.lookupNodeById(l().nodeId)},keyed:!0,children:c=>{let p=S(()=>{let f=l(),d;if(f.type=="Input"){let y=c.inputPinPositionMap()?.get(f.name);if(y==null)return;d=y}else if(f.type=="Output"){let y=c.outputPinPositionMap()?.get(f.name);if(y==null)return;d=y}else return;return c.space().pointFromSpace(d)});return T(ne,{get when(){return p()},children:f=>(()=>{var d=_c();return X(y=>{var m=f().x,h=-f().y,g=5/e.scale();return m!==y.e&&H(d,"cx",y.e=m),h!==y.t&&H(d,"cy",y.t=h),g!==y.a&&H(d,"r",y.a=g),y},{e:void 0,t:void 0,a:void 0}),d})()})}})}),this.click=()=>{let l=a();n.clear(),l!=null&&n.add(l)},this.dragStart=()=>{let l=e.mousePos();if(l==null)return;let c=e.screenPtToWorldPt(l);if(c==null)return;{let y=s();if(y!=null&&y.type=="Output"){let m={type:"Output",name:y.name};e.setMode(()=>new Pc({modeParams:e,fromNodeId:y.nodeId,fromPin:m}));return}}if(e.nodesSystem.disablePan())return;let p=a();if(p==null||!n.has(p))return;let f=e.nodesSystem.lookupNodeById(p);if(f==null)return;let d=f.space().pointToSpace(c);t("dragging",new er({nodeId:p,pickupOffset:d}))},this.dragEnd=()=>{t("dragging",void 0)};const u=[];this.highlightedObjectsById=S(()=>s()!=null?u:To(a())),this.selectedObjectsById=o,this.disablePan=S(()=>s()!=null||r.dragging!=null)}}class Nr{nodes;lookupNodeById;disablePan;constructor(e){let r=e.nodeRegistry,t=S(Qe(()=>e.world().entities(),u=>{let l=S(()=>{for(let c of e.world().getComponents(u)){let p=r.lookupNodeType(c.type.typeName);if(p!=null)return{nodeType:p,nodeComponent:c}}});return S(()=>{let c=l();if(c==null)return;let{nodeType:p,nodeComponent:f}=c,d=f,y=p.create({entity:u,state:d.state,setState:d.setState}),m=S(()=>e.world().getComponent(u,ve)?.state.transform??fe.identity),h=C=>ie(()=>{let _=e.world().getComponent(u,ve);_==null?(_=ve.create({transform:C}),e.world().setComponents(u,[_])):_.setState("transform",C)}),[g,b]=J(),[k,v]=J(),[x,w]=J();return{node:y,space:m,setSpace:h,setRenderSizeAccessor:C=>b(()=>C),setInputPinPositionMapAccessor:C=>v(()=>C),setOutputPinPositionMapAccessor:C=>w(()=>C),renderSize:()=>g()?.(),inputPinPositionMap:()=>k()?.(),outputPinPositionMap:()=>x()?.()}})})),n=S(()=>t().flatMap(u=>To(u()))),o=new ct,a=S(()=>{Qe(n,u=>{let l=u.node.nodeParams.entity;o.set(l,u),ke(()=>{o.delete(l)})})()}),s=u=>(a(),o.get(u));this.nodes=n,this.lookupNodeById=s,this.disablePan=S(()=>{for(let u of n())if(u.node.disablePan?.()??!1)return!0;return!1})}}const Hn=20,Kn=Hn*Hn;class Eo{nodeUnderMouseById;pinUnderMouse;constructor(e){let r=S(()=>{let o=e.mousePos();if(o==null)return;let a=e.screenPtToWorldPt(o);if(a!=null)for(let s of e.nodes()){let u=s.renderSize();if(u==null)continue;let l=s.space().pointToSpace(a);if(!(l.x<0||l.y<0||l.x>u.x||l.y>u.y))return s}}),t=()=>r()?.node.nodeParams.entity,n=S(()=>{let o=e.mousePos();if(o==null)return;let a,s;for(let u of e.nodes()){let l=u.inputPinPositionMap();if(l!=null)for(let[p,f]of l.entries()){let d=u.space().pointFromSpace(f),y=e.worldPtToScreenPt(d);if(y==null)continue;let m=y.distanceSquared(o);m>Kn||(s==null||m<s)&&(a={type:"Input",nodeId:u.node.nodeParams.entity,name:p},s=m)}let c=u.outputPinPositionMap();if(c!=null)for(let[p,f]of c.entries()){let d=u.space().pointFromSpace(f),y=e.worldPtToScreenPt(d);if(y==null)continue;let m=y.distanceSquared(o);m>Kn||(s==null||m<s)&&(a={type:"Output",nodeId:u.node.nodeParams.entity,name:p},s=m)}}return a});this.nodeUnderMouseById=t,this.pinUnderMouse=n}}var Tc=V('<button class="btn btn-primary">End Mode'),$c=V("<div>"),Ic=V("<svg>"),Ec=V("<div><svg><g>");class Rc{instructions;overlayHtmlUi;sideForm;constructor(e){let[r,t]=Se({pan:L.zero,scale:1,formMousePos:void 0,dragging:void 0}),n=new dt,o=0;for(let w of e.nodeRegistry.nodeTypes)o-=80,n.createEntity([w.componentType.create(Ne(w.componentType.typeSchema)),ve.create({transform:fe.create(L.create(0,o),pe.rot0)})]);let a=w=>L.create(r.pan.x+w.x/r.scale,-(r.pan.y+w.y/r.scale)),s=w=>L.create((w.x-r.pan.x)*r.scale,(-w.y-r.pan.y)*r.scale),u=new Nr({nodeRegistry:e.nodeRegistry,world:()=>n}),l=new Eo({mousePos:()=>r.formMousePos,screenPtToWorldPt:a,worldPtToScreenPt:s,nodes:()=>u.nodes()}),c=()=>l.nodeUnderMouseById(),p=new qe,f=new qe;oe(()=>{let w=c();w==null?p.clear():(p.clear(),p.add(w))});let d=new Ar({nodes:()=>u.nodes(),lookupNodeById:w=>u.lookupNodeById(w),highlightedEntitySet:p,selectedEntitySet:f}),y=S(()=>{let w={},P=0;for(let C of u.nodes()){let _=C.renderSize();if(_==null)return;P-=_.y,w[C.node.nodeParams.entity]=L.create(0,P)}return w}),m=S(()=>{let w=y();if(w==null)return 0;let P=0;for(let C of Object.values(w))P=Math.min(P,C.y);return Math.abs(P)});oe(()=>{let w=y();if(w!=null)for(let P of n.entities())ie(()=>{let C=w[P];if(C==null)return;let _=n.getComponent(P,ve);_?.setState("transform",fe.create(C,pe.rot0))})});let[h,g]=J(),b,k=w=>{{let P=b.getBoundingClientRect();t("formMousePos",L.create(w.clientX-P.left,w.clientY-P.top))}b.setPointerCapture(w.pointerId),queueMicrotask(()=>{let P=r.formMousePos;if(P==null)return;let C=c();if(C==null)return;let _=u.lookupNodeById(C);if(_==null)return;let R=_.space().origin,$=a(P);$!=null&&t("dragging",new er({nodeType:_.node.type,nodeSize:_.renderSize()??L.create(100,50),pickupOffset:$.sub(R)}))})},v=w=>{b.releasePointerCapture(w.pointerId);let P=h();if(r.formMousePos!=null&&r.dragging!=null&&P!=null){let C=r.formMousePos,_=b.getBoundingClientRect(),R=P.getBoundingClientRect(),$=r.dragging.value.pickupOffset,O=L.create(_.left-R.left+C.x-$.x,_.top-R.top+C.y+$.y),D=e.screenPtToWorldPt(O);if(D==null)return;e.world().createEntity([r.dragging.value.nodeType.componentType.create(Ne(r.dragging.value.nodeType.componentType.typeSchema)),ve.create({transform:fe.create(D,pe.rot0)})]),t("dragging",void 0)}},x=w=>{let P=b.getBoundingClientRect();t("formMousePos",L.create(w.clientX-P.left,w.clientY-P.top))};this.instructions=()=>(()=>{var w=Tc();return w.$$click=()=>{e.onDone()},w})(),this.overlayHtmlUi=()=>T(ne,{get when(){return r.dragging?.value},children:w=>T(ne,{get when(){return r.formMousePos},children:P=>{let[C,_]=J(!0);ke(()=>{g(void 0)}),Ur(()=>_(!1));let R=S(()=>{if(C())return;let E=h();if(E==null)return;let F=b.getBoundingClientRect(),B=E.getBoundingClientRect();return P().add(L.create(F.left-B.left-w().pickupOffset.x,F.top-B.top-w().nodeSize.y+w().pickupOffset.y))}),$=new dt,O=$.createEntity([ie(()=>w().nodeType.componentType.create(Ne(w().nodeType.componentType.typeSchema))),ve.create({transform:fe.create(L.create(0,ie(()=>-w().nodeSize.y)),pe.rot0)})]),D=new Nr({nodeRegistry:e.nodeRegistry,world:()=>$}),M=new Ar({nodes:()=>D.nodes(),lookupNodeById:E=>D.lookupNodeById(E),highlightedEntitySet:new qe([O]),selectedEntitySet:new qe});return(()=>{var E=$c(),F=g;return typeof F=="function"?ge(F,E):g=E,E.style.setProperty("position","absolute"),E.style.setProperty("left","0"),E.style.setProperty("top","0"),E.style.setProperty("right","0"),E.style.setProperty("bottom","0"),E.style.setProperty("pointer-events","none"),K(E,T(ne,{get when(){return R()},children:B=>(()=>{var U=Ic();return U.style.setProperty("position","absolute"),U.style.setProperty("touch-action","none"),U.style.setProperty("user-select","none"),K(U,T(M.Render,{})),X(q=>{var W=`${B().x}px`,ee=`${B().y}px`,A=`${w().nodeSize.x}px`,Y=`${w().nodeSize.y}px`;return W!==q.e&&((q.e=W)!=null?U.style.setProperty("left",W):U.style.removeProperty("left")),ee!==q.t&&((q.t=ee)!=null?U.style.setProperty("top",ee):U.style.removeProperty("top")),A!==q.a&&((q.a=A)!=null?U.style.setProperty("width",A):U.style.removeProperty("width")),Y!==q.o&&((q.o=Y)!=null?U.style.setProperty("height",Y):U.style.removeProperty("height")),q},{e:void 0,t:void 0,a:void 0,o:void 0}),U})()})),E})()}})}),this.sideForm=S(()=>()=>(()=>{var w=Ec(),P=w.firstChild,C=P.firstChild;w.style.setProperty("width","150px"),w.style.setProperty("height","100%"),w.style.setProperty("overflow-x","hidden"),w.style.setProperty("overflow-y","auto"),P.$$pointermove=x,P.$$pointerup=v,P.$$pointerdown=k;var _=b;return typeof _=="function"?ge(_,P):b=P,P.style.setProperty("width","100%"),P.style.setProperty("touch-action","pan-y"),P.style.setProperty("user-select","none"),K(C,T(d.Render,{})),X(R=>(R=`${m()}px`)!=null?P.style.setProperty("height",R):P.style.removeProperty("height")),w})())}}xe(["click","pointerdown","pointerup","pointermove"]);var Mc=V('<div><div><div><button class="btn btn-primary"style=margin-left:5px;><i class="fa-solid fa-upload"></i></button><input type=file hidden><button class="btn btn-primary"style=margin-left:5px;><i class="fa-solid fa-download"></i></button><button class="btn btn-primary"style=margin-left:5px;>Add Node</button><button class="btn btn-primary"style=margin-left:5px;>Delete</button><label class=label style=margin-left:5px;><input type=checkbox class=checkbox>Freeze Pan/Zoom</label></div><div><svg><g>'),Ac=V("<div>"),Yn=V("<div><div>");function Ro(i){let[e,r]=Br(i,["onInit","componentRegistry","nodeRegistry","world","toolbar"]),t=e.nodeRegistry,[n,o]=Se({pan:L.zero,scale:1,mousePos:void 0,mkMode:()=>new Wn(k),showCode:!1,makeSound:!1,freezePanZoom:!1}),a=new dc,s,[u,l]=J(L.zero);Ur(()=>{{let Y=s.getBoundingClientRect();o("pan",L.create(0,-Y.height))}let A=new ResizeObserver(()=>{let Y=s.getBoundingClientRect();queueMicrotask(()=>{l(L.create(Y.width,Y.height))})});A.observe(s),ke(()=>{A.unobserve(s),A.disconnect()})});let c=S(()=>`scale(${n.scale}) translate(${-n.pan.x} ${-n.pan.y})`),p=A=>{o("mkMode",()=>A)},f=A=>L.create(n.pan.x+A.x/n.scale,-(n.pan.y+A.y/n.scale)),d=A=>L.create((A.x-n.pan.x)*n.scale,(-A.y-n.pan.y)*n.scale),y=new Nr({nodeRegistry:t,world:()=>e.world}),m=new Eo({mousePos:()=>n.mousePos,screenPtToWorldPt:f,worldPtToScreenPt:d,nodes:()=>y.nodes()}),h=new qe,g=new qe,b=new Ar({nodes:()=>y.nodes(),lookupNodeById:A=>y.lookupNodeById(A),highlightedEntitySet:h,selectedEntitySet:g}),k={undoManager:a,nodeRegistry:t,nodesSystem:y,pickingSystem:m,mousePos:()=>n.mousePos,screenPtToWorldPt:f,worldPtToScreenPt:d,world:()=>e.world,onDone:()=>{p(()=>new Wn(k))},pan:()=>n.pan,setPan:A=>o("pan",A),scale:()=>n.scale,setScale:A=>o("scale",A),setMode:p},v=S(()=>n.mkMode()),x=uc({pan:()=>n.pan,setPan:A=>o("pan",A),scale:()=>n.scale,setScale:A=>o("scale",A),setPointerCapture:A=>s.setPointerCapture(A),releasePointerCapture:A=>s.releasePointerCapture(A),disableOneFingerPan:S(()=>(v().disablePan?.()??!1)||n.freezePanZoom||y.disablePan())}),w=S(()=>v().highlightedObjectsById?.()??[]),P=S(()=>v().selectedObjectsById?.()??[]);oe(Qe(w,A=>{h.add(A),ke(()=>{h.delete(A)})})),oe(Qe(P,A=>{g.add(A),ke(()=>{g.delete(A)})}));let C=()=>{v().click?.()},_,R=!1,$=A=>{let Y=s.getBoundingClientRect();o("mousePos",L.create(A.clientX-Y.left,A.clientY-Y.top)),v().dragStart?.(),R=!0,x.onPointerDown(A)},O=A=>{x.onPointerUp(A),x.numTouches()==0&&C(),R&&v().dragEnd?.(),window.clearTimeout(_),_=void 0},D=A=>{x.onPointerCancel(A)},M=A=>{let Y=s.getBoundingClientRect();o("mousePos",L.create(A.clientX-Y.left,A.clientY-Y.top)),x.onPointerMove(A)},E=A=>{x.numTouches()==0&&o("mousePos",void 0)},F=A=>{x.onWheel(A)},B=()=>{for(let A of P())e.world.destroyEntity(A);g.clear()};e.onInit({nodesSystem:y});let[U,q]=J();const W=async A=>{let Y=await A.text().then(se=>JSON.parse(se)),te=dt.fromJson(e.componentRegistry,Y);if(te.type=="Err"){alert(te.message);return}let ye=te.value;Oe(()=>{let se=e.world;for(let ce of[...se.entities()])se.destroyEntity(ce);for(let ce of ye.entities()){let je=ye.getComponents(ce);se.createEntityWithId(ce,je)}})},ee=()=>{let A=JSON.stringify(e.world.toJson(),void 0,2),Y=new Blob([A],{type:"application/json"});Ni.saveAs(Y,"node-graph.json")};return(()=>{var A=Mc(),Y=A.firstChild,te=Y.firstChild,ye=te.firstChild,se=ye.nextSibling,ce=se.nextSibling,je=ce.nextSibling,Ue=je.nextSibling,rt=Ue.nextSibling,Ye=rt.firstChild,Be=te.nextSibling,he=Be.firstChild,yt=he.firstChild;jr(A,r,!1,!0),Y.style.setProperty("width","100%"),Y.style.setProperty("height","100%"),Y.style.setProperty("display","flex"),Y.style.setProperty("flex-direction","column"),ye.$$click=()=>U()?.click(),se.addEventListener("change",ue=>{let le=ue.currentTarget.files;if(le?.length!=1)return;let Le=le[0];W(Le),ue.currentTarget.value=""});var bt=q;typeof bt=="function"?ge(bt,se):q=se,ce.$$click=()=>ee(),je.$$click=()=>p(()=>new Rc(k)),Ue.$$click=()=>{B()},K(te,()=>e.toolbar,rt),Ye.addEventListener("change",ue=>o("freezePanZoom",ue.currentTarget.checked)),Be.style.setProperty("flex-grow","1"),Be.style.setProperty("position","relative"),he.$$pointerout=E,he.addEventListener("wheel",F),he.$$pointermove=M,he.addEventListener("pointercancel",D),he.$$pointerup=O,he.$$pointerdown=$;var Ce=s;return typeof Ce=="function"?ge(Ce,he):s=he,he.style.setProperty("position","absolute"),he.style.setProperty("left","0"),he.style.setProperty("top","0"),he.style.setProperty("width","100%"),he.style.setProperty("height","100%"),he.style.setProperty("touch-action","none"),he.style.setProperty("user-select","none"),K(yt,T(b.Render,{}),null),K(yt,T(ne,{get when(){return v().overlaySvg},keyed:!0,children:ue=>T(ue,{})}),null),K(Be,T(ne,{get when(){return v().sideForm?.()==null},get children(){return T(ne,{get when(){return v().instructions},keyed:!0,children:ue=>(()=>{var le=Ac();return le.style.setProperty("position","absolute"),le.style.setProperty("left","0"),le.style.setProperty("top","0"),K(le,T(ue,{})),le})()})}}),null),K(Be,T(ne,{get when(){return v().sideForm?.()},keyed:!0,children:ue=>(()=>{var le=Yn(),Le=le.firstChild;return le.style.setProperty("position","absolute"),le.style.setProperty("left","0"),le.style.setProperty("top","0"),le.style.setProperty("height","100%"),le.style.setProperty("display","flex"),le.style.setProperty("flex-direction","row"),le.style.setProperty("pointer-events","none"),Le.style.setProperty("background","black"),Le.style.setProperty("pointer-events","auto"),K(Le,T(ue,{})),K(le,T(ne,{get when(){return v().instructions},keyed:!0,children:N=>(()=>{var Re=Yn(),ze=Re.firstChild;return ze.style.setProperty("pointer-events","auto"),K(ze,T(N,{})),Re})()}),null),le})()}),null),K(Be,T(ne,{get when(){return v().overlayHtmlUi},keyed:!0,children:ue=>T(ue,{})}),null),X(ue=>{var le=g.size==0,Le=c();return le!==ue.e&&(Ue.disabled=ue.e=le),Le!==ue.t&&H(yt,"transform",ue.t=Le),ue},{e:void 0,t:void 0}),X(()=>Ye.checked=n.freezePanZoom),A})()}xe(["click","pointerdown","pointerup","pointermove","pointerout"]);const Nc=G({frequency:z(I),amplitude:z(I),centre:z(I),out:Q(I)}),Xr=new Z({typeName:"SineWave",typeSchema:Nc});let Fc=class{nextFieldIdx=0;fieldDeclarations="";constructorCode="";messageHandlers=new Map;globalCode="";code_="";postCode="";allocField(e){let r=`x${this.nextFieldIdx++}`;return this.fieldDeclarations+=`  ${r} = ${e};\r
`,`this.${r}`}allocFieldNoDecl(){return`this.${`x${this.nextFieldIdx++}`}`}addDeclToExistingForField(e,r){e.startsWith("this.")&&(e=e.substring(5)),this.fieldDeclarations+=`  ${e} = ${r};\r
`}insertConstructorCode(e){this.constructorCode+=e.map(r=>`      ${r}\r
`).join("")}insertMessageHandlerCode(e,r){this.messageHandlers.get(e);let t=r.map(n=>`        ${n}\r
`).join("");this.messageHandlers.set(e,t)}insertGlobalCode(e){this.globalCode+=e.map(r=>`${r}\r
`).join("")}insertCode(e){this.code_+=e.map(r=>`      ${r}\r
`).join("")}insertPostCode(e){this.postCode+=e.map(r=>`      ${r}\r
`).join("")}get code(){let e="";return this.messageHandlers.size!=0?e=[`    this.port.onmessage = (e) => {\r
`,`      let data = e.data;\r
`,...this.messageHandlers.entries().map(([r,t],n)=>{let o,a=n==this.messageHandlers.size-1;return n==0?o="      if":o="      } else if",`${o} (data.type == "${r}") {\r
        let params = data.params;\r
${t}${a?`      }\r
`:""}`}),`    };\r
`].join(""):e="",[this.globalCode,"class CompiledGraphAudioWorkletProcessor extends AudioWorkletProcessor {","  runningEffectsHead = null;","  runningEffectsTail = null;","  variables = {};",this.fieldDeclarations,"  constructor(options) {","    super();",`${this.constructorCode}${e}  }`,"","  insertRunningEffect(effect) {","    if (this.runningEffectsTail == null) {","      this.runningEffectsHead = effect;","      this.runningEffectsTail = effect;","    } else {","      this.runningEffectsTail.next = effect;","      effect.prev = this.runningEffectsTail;","      this.runningEffectsTail = effect;","    }","  }","","  removeRunningEffect(effect) {","    if (effect.prev != null) {","      effect.prev.next = effect.next;","    }","    if (effect.next != null) {","      effect.next.prev = effect.prev;","    }","    if (this.runningEffectsHead == effect) {","      this.runningEffectsHead = effect.next;","    }","    if (this.runningEffectsTail == effect) {","      this.runningEffectsTail = effect.prev;","    }","    effect.prev = null;","    effect.next = null;","  }","","  process(inputs, outputs, parameters) {","    let output = outputs[0][0];","    debugger;","    for (let i = 0; i < output.length; ++i) {","      let result = 0.0;",`${this.code_}${this.postCode}      let effect = this.runningEffectsHead;`,"      while (effect != null) {","        let isDone = effect.update();","        if (isDone) {","          this.removeRunningEffect(effect);","          for (let onDone of effect.onDone) {","            onDone();","          }","        }","        effect = effect.next;","      }","      output[i] = result;","    }","    return true;","  }","}","",'registerProcessor("compiled-graph-audio-worklet-processor", CompiledGraphAudioWorkletProcessor);'].join(`\r
`)}};function Oc(i,e){let r=new Map,t=[i];for(;;){let n=t.pop();if(n==null)break;if(r.has(n))continue;let o={};for(let s of Object.entries(n.inputs))o[s[0]]={...s[1]};let a={id:0,inputs:o,outputs:{},height:n.height,node:n.node};e(a),r.set(n,a);for(let s of Object.values(n.outputs))for(let u of s)t.push(u.node)}for(let n of r.values())for(let o of Object.entries(n.inputs)){let a=r.get(o[1].node);a!=null&&(o[1].node=a)}for(let n of r.values())for(let[o,{node:a,pin:s}]of Object.entries(n.inputs)){let u=a.outputs[s],l={node:n,pin:o};u==null?(u=[l],a.outputs[s]=u):u.push(l)}return r.get(i)}function Dc(i){let e=i.nodesSystem,r=[];{let a=new Map;for(let s of e.nodes()){let u={id:0,inputs:{},outputs:{},height:0,node:s};a.set(s.node.nodeParams.entity,u),r.push(u)}for(let s of a.values())for(let u of s.node.node.inputPins?.()??[]){let l=u.source();if(l==null)continue;let c=a.get(l.target);c!=null&&(s.inputs[u.name]={node:c,pin:l.pin})}}for(let a of r)for(let[s,{node:u,pin:l}]of Object.entries(a.inputs)){let c=u.outputs[l],p={node:a,pin:s};c==null?(c=[p],u.outputs[l]=c):c.push(p)}let t=[];{let a=new Set;for(;;){let s=!1;Jn(r);for(let u of r){let l=t[u.height];l==null?(l=[u],t[u.height]=l):l.push(u)}for(let u=0;u<t.length;++u){let l=t[u]??[];for(let c of l){if(a.has(c))continue;let p=c.node.node;if(p.ext.macro!=null){p.ext.macro(c,f=>r.push(f)),a.add(c),s=!0;break}}if(s)break}if(!s)break}}Jn(r);{let a=0;for(let s of r)s.id=a++}let n=new Fc;{let a=new Set;for(let s of e.nodes()){let u=s.node.type;a.has(u.componentType.typeName)||(a.add(u.componentType.typeName),u.ext.generateInitOnceCode?.({ctx:n}))}}t.splice(0,t.length);for(let a of r){let s=t[a.height];s==null?(s=[a],t[a.height]=s):s.push(a)}let o=new Map;for(let a=0;a<t.length;++a){let s=t[a]??[];for(let u of s){let l=u.node.node,c=new Map;for(let p of Object.entries(u.inputs)){let f=o.get(p[1].node)?.get(p[1].pin);f!=null?c.set(p[0],f):c.set(p[0],`this.n_${p[1].node.id}_${p[1].pin}`)}if(l.ext.generateCode!=null){let p=l.ext.generateCode({ctx:n,inputAtoms:c,codeGenNodeId:u.id});if(p.length==1){let f=p[0].outputAtoms;o.set(u,f)}}}}return n.code}function Jn(i){let e=new Set,r=[...i],t=[];for(;;){let n=r.pop();if(n==null){let s=r;if(r=t,t=s,n=r.pop(),n==null)break}if(e.has(n))continue;let o=!0;for(let[s,{node:u}]of Object.entries(n.inputs))if(!(n.node.node.inputPins?.().find(l=>l.name==s)?.isEffectPin??!1)&&!e.has(u)){o=!1;break}if(!o){t.push(n);continue}let a=0;for(let[,{node:s,pin:u}]of Object.entries(n.inputs))(s.node.node.outputPins?.().find(({name:l})=>l==u)?.isEffectPin??!1)||s.height>=a&&(a=s.height+1);n.height=a,e.add(n)}}var it={},zt={},vr,Zn;function jc(){if(Zn)return vr;Zn=1;function i(n){var o=new t(n),a=o.readChunk();if(a.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+a.id+"'";for(var s=e(a.data),u=[],l=0;!o.eof()&&l<s.numTracks;l++){var c=o.readChunk();if(c.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+c.id+"'";var p=r(c.data);u.push(p)}return{header:s,tracks:u}}function e(n){var o=new t(n),a=o.readUInt16(),s=o.readUInt16(),u={format:a,numTracks:s},l=o.readUInt16();return l&32768?(u.framesPerSecond=256-(l>>8),u.ticksPerFrame=l&255):u.ticksPerBeat=l,u}function r(n){for(var o=new t(n),a=[];!o.eof();){var s=l();a.push(s)}return a;var u;function l(){var c={};c.deltaTime=o.readVarInt();var p=o.readUInt8();if((p&240)===240)if(p===255){c.meta=!0;var f=o.readUInt8(),d=o.readVarInt();switch(f){case 0:if(c.type="sequenceNumber",d!==2)throw"Expected length for sequenceNumber event is 2, got "+d;return c.number=o.readUInt16(),c;case 1:return c.type="text",c.text=o.readString(d),c;case 2:return c.type="copyrightNotice",c.text=o.readString(d),c;case 3:return c.type="trackName",c.text=o.readString(d),c;case 4:return c.type="instrumentName",c.text=o.readString(d),c;case 5:return c.type="lyrics",c.text=o.readString(d),c;case 6:return c.type="marker",c.text=o.readString(d),c;case 7:return c.type="cuePoint",c.text=o.readString(d),c;case 32:if(c.type="channelPrefix",d!=1)throw"Expected length for channelPrefix event is 1, got "+d;return c.channel=o.readUInt8(),c;case 33:if(c.type="portPrefix",d!=1)throw"Expected length for portPrefix event is 1, got "+d;return c.port=o.readUInt8(),c;case 47:if(c.type="endOfTrack",d!=0)throw"Expected length for endOfTrack event is 0, got "+d;return c;case 81:if(c.type="setTempo",d!=3)throw"Expected length for setTempo event is 3, got "+d;return c.microsecondsPerBeat=o.readUInt24(),c;case 84:if(c.type="smpteOffset",d!=5)throw"Expected length for smpteOffset event is 5, got "+d;var y=o.readUInt8(),m={0:24,32:25,64:29,96:30};return c.frameRate=m[y&96],c.hour=y&31,c.min=o.readUInt8(),c.sec=o.readUInt8(),c.frame=o.readUInt8(),c.subFrame=o.readUInt8(),c;case 88:if(c.type="timeSignature",d!=2&&d!=4)throw"Expected length for timeSignature event is 4 or 2, got "+d;return c.numerator=o.readUInt8(),c.denominator=1<<o.readUInt8(),d===4?(c.metronome=o.readUInt8(),c.thirtyseconds=o.readUInt8()):(c.metronome=36,c.thirtyseconds=8),c;case 89:if(c.type="keySignature",d!=2)throw"Expected length for keySignature event is 2, got "+d;return c.key=o.readInt8(),c.scale=o.readUInt8(),c;case 127:return c.type="sequencerSpecific",c.data=o.readBytes(d),c;default:return c.type="unknownMeta",c.data=o.readBytes(d),c.metatypeByte=f,c}}else if(p==240){c.type="sysEx";var d=o.readVarInt();return c.data=o.readBytes(d),c}else if(p==247){c.type="endSysEx";var d=o.readVarInt();return c.data=o.readBytes(d),c}else throw"Unrecognised MIDI event type byte: "+p;else{var h;if(p&128)h=o.readUInt8(),u=p;else{if(u===null)throw"Running status byte encountered before status byte";h=p,p=u,c.running=!0}var g=p>>4;switch(c.channel=p&15,g){case 8:return c.type="noteOff",c.noteNumber=h,c.velocity=o.readUInt8(),c;case 9:var b=o.readUInt8();return c.type=b===0?"noteOff":"noteOn",c.noteNumber=h,c.velocity=b,b===0&&(c.byte9=!0),c;case 10:return c.type="noteAftertouch",c.noteNumber=h,c.amount=o.readUInt8(),c;case 11:return c.type="controller",c.controllerType=h,c.value=o.readUInt8(),c;case 12:return c.type="programChange",c.programNumber=h,c;case 13:return c.type="channelAftertouch",c.amount=h,c;case 14:return c.type="pitchBend",c.value=h+(o.readUInt8()<<7)-8192,c;default:throw"Unrecognised MIDI event type: "+g}}}}function t(n){this.buffer=n,this.bufferLen=this.buffer.length,this.pos=0}return t.prototype.eof=function(){return this.pos>=this.bufferLen},t.prototype.readUInt8=function(){var n=this.buffer[this.pos];return this.pos+=1,n},t.prototype.readInt8=function(){var n=this.readUInt8();return n&128?n-256:n},t.prototype.readUInt16=function(){var n=this.readUInt8(),o=this.readUInt8();return(n<<8)+o},t.prototype.readInt16=function(){var n=this.readUInt16();return n&32768?n-65536:n},t.prototype.readUInt24=function(){var n=this.readUInt8(),o=this.readUInt8(),a=this.readUInt8();return(n<<16)+(o<<8)+a},t.prototype.readInt24=function(){var n=this.readUInt24();return n&8388608?n-16777216:n},t.prototype.readUInt32=function(){var n=this.readUInt8(),o=this.readUInt8(),a=this.readUInt8(),s=this.readUInt8();return(n<<24)+(o<<16)+(a<<8)+s},t.prototype.readBytes=function(n){var o=this.buffer.slice(this.pos,this.pos+n);return this.pos+=n,o},t.prototype.readString=function(n){var o=this.readBytes(n);return String.fromCharCode.apply(null,o)},t.prototype.readVarInt=function(){for(var n=0;!this.eof();){var o=this.readUInt8();if(o&128)n+=o&127,n<<=7;else return n+o}return n},t.prototype.readChunk=function(){var n=this.readString(4),o=this.readUInt32(),a=this.readBytes(o);return{id:n,length:o,data:a}},vr=i,vr}var kr,Xn;function Lc(){if(Xn)return kr;Xn=1;function i(o,a){if(typeof o!="object")throw"Invalid MIDI data";a=a||{};var s=o.header||{},u=o.tracks||[],l,c=u.length,p=new n;for(e(p,s,c),l=0;l<c;l++)r(p,u[l],a);return p.buffer}function e(o,a,s){var u=a.format==null?1:a.format,l=128;a.timeDivision?l=a.timeDivision:a.ticksPerFrame&&a.framesPerSecond?l=-(a.framesPerSecond&255)<<8|a.ticksPerFrame&255:a.ticksPerBeat&&(l=a.ticksPerBeat&32767);var c=new n;c.writeUInt16(u),c.writeUInt16(s),c.writeUInt16(l),o.writeChunk("MThd",c.buffer)}function r(o,a,s){var u=new n,l,c=a.length,p=null;for(l=0;l<c;l++)(s.running===!1||!s.running&&!a[l].running)&&(p=null),p=t(u,a[l],p,s.useByte9ForNoteOff);o.writeChunk("MTrk",u.buffer)}function t(o,a,s,u){var l=a.type,c=a.deltaTime,p=a.text||"",f=a.data||[],d=null;switch(o.writeVarInt(c),l){case"sequenceNumber":o.writeUInt8(255),o.writeUInt8(0),o.writeVarInt(2),o.writeUInt16(a.number);break;case"text":o.writeUInt8(255),o.writeUInt8(1),o.writeVarInt(p.length),o.writeString(p);break;case"copyrightNotice":o.writeUInt8(255),o.writeUInt8(2),o.writeVarInt(p.length),o.writeString(p);break;case"trackName":o.writeUInt8(255),o.writeUInt8(3),o.writeVarInt(p.length),o.writeString(p);break;case"instrumentName":o.writeUInt8(255),o.writeUInt8(4),o.writeVarInt(p.length),o.writeString(p);break;case"lyrics":o.writeUInt8(255),o.writeUInt8(5),o.writeVarInt(p.length),o.writeString(p);break;case"marker":o.writeUInt8(255),o.writeUInt8(6),o.writeVarInt(p.length),o.writeString(p);break;case"cuePoint":o.writeUInt8(255),o.writeUInt8(7),o.writeVarInt(p.length),o.writeString(p);break;case"channelPrefix":o.writeUInt8(255),o.writeUInt8(32),o.writeVarInt(1),o.writeUInt8(a.channel);break;case"portPrefix":o.writeUInt8(255),o.writeUInt8(33),o.writeVarInt(1),o.writeUInt8(a.port);break;case"endOfTrack":o.writeUInt8(255),o.writeUInt8(47),o.writeVarInt(0);break;case"setTempo":o.writeUInt8(255),o.writeUInt8(81),o.writeVarInt(3),o.writeUInt24(a.microsecondsPerBeat);break;case"smpteOffset":o.writeUInt8(255),o.writeUInt8(84),o.writeVarInt(5);var y={24:0,25:32,29:64,30:96},m=a.hour&31|y[a.frameRate];o.writeUInt8(m),o.writeUInt8(a.min),o.writeUInt8(a.sec),o.writeUInt8(a.frame),o.writeUInt8(a.subFrame);break;case"timeSignature":o.writeUInt8(255),o.writeUInt8(88),o.writeVarInt(4),o.writeUInt8(a.numerator);var h=Math.floor(Math.log(a.denominator)/Math.LN2)&255;o.writeUInt8(h),o.writeUInt8(a.metronome),o.writeUInt8(a.thirtyseconds||8);break;case"keySignature":o.writeUInt8(255),o.writeUInt8(89),o.writeVarInt(2),o.writeInt8(a.key),o.writeUInt8(a.scale);break;case"sequencerSpecific":o.writeUInt8(255),o.writeUInt8(127),o.writeVarInt(f.length),o.writeBytes(f);break;case"unknownMeta":a.metatypeByte!=null&&(o.writeUInt8(255),o.writeUInt8(a.metatypeByte),o.writeVarInt(f.length),o.writeBytes(f));break;case"sysEx":o.writeUInt8(240),o.writeVarInt(f.length),o.writeBytes(f);break;case"endSysEx":o.writeUInt8(247),o.writeVarInt(f.length),o.writeBytes(f);break;case"noteOff":var g=u!==!1&&a.byte9||u&&a.velocity==0?144:128;d=g|a.channel,d!==s&&o.writeUInt8(d),o.writeUInt8(a.noteNumber),o.writeUInt8(a.velocity);break;case"noteOn":d=144|a.channel,d!==s&&o.writeUInt8(d),o.writeUInt8(a.noteNumber),o.writeUInt8(a.velocity);break;case"noteAftertouch":d=160|a.channel,d!==s&&o.writeUInt8(d),o.writeUInt8(a.noteNumber),o.writeUInt8(a.amount);break;case"controller":d=176|a.channel,d!==s&&o.writeUInt8(d),o.writeUInt8(a.controllerType),o.writeUInt8(a.value);break;case"programChange":d=192|a.channel,d!==s&&o.writeUInt8(d),o.writeUInt8(a.programNumber);break;case"channelAftertouch":d=208|a.channel,d!==s&&o.writeUInt8(d),o.writeUInt8(a.amount);break;case"pitchBend":d=224|a.channel,d!==s&&o.writeUInt8(d);var b=8192+a.value,k=b&127,v=b>>7&127;o.writeUInt8(k),o.writeUInt8(v);break;default:throw"Unrecognized event type: "+l}return d}function n(){this.buffer=[]}return n.prototype.writeUInt8=function(o){this.buffer.push(o&255)},n.prototype.writeInt8=n.prototype.writeUInt8,n.prototype.writeUInt16=function(o){var a=o>>8&255,s=o&255;this.writeUInt8(a),this.writeUInt8(s)},n.prototype.writeInt16=n.prototype.writeUInt16,n.prototype.writeUInt24=function(o){var a=o>>16&255,s=o>>8&255,u=o&255;this.writeUInt8(a),this.writeUInt8(s),this.writeUInt8(u)},n.prototype.writeInt24=n.prototype.writeUInt24,n.prototype.writeUInt32=function(o){var a=o>>24&255,s=o>>16&255,u=o>>8&255,l=o&255;this.writeUInt8(a),this.writeUInt8(s),this.writeUInt8(u),this.writeUInt8(l)},n.prototype.writeInt32=n.prototype.writeUInt32,n.prototype.writeBytes=function(o){this.buffer=this.buffer.concat(Array.prototype.slice.call(o,0))},n.prototype.writeString=function(o){var a,s=o.length,u=[];for(a=0;a<s;a++)u.push(o.codePointAt(a));this.writeBytes(u)},n.prototype.writeVarInt=function(o){if(o<0)throw"Cannot write negative variable-length integer";if(o<=127)this.writeUInt8(o);else{var a=o,s=[];for(s.push(a&127),a>>=7;a;){var u=a&127|128;s.push(u),a>>=7}this.writeBytes(s.reverse())}},n.prototype.writeChunk=function(o,a){this.writeString(o),this.writeUInt32(a.length),this.writeBytes(a)},kr=i,kr}var Qn;function Mo(){return Qn||(Qn=1,zt.parseMidi=jc(),zt.writeMidi=Lc()),zt}var wr={},ot={},ei;function Ao(){if(ei)return ot;ei=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.insert=ot.search=void 0;function i(r,t,n){n===void 0&&(n="ticks");var o=0,a=r.length,s=a;if(a>0&&r[a-1][n]<=t)return a-1;for(;o<s;){var u=Math.floor(o+(s-o)/2),l=r[u],c=r[u+1];if(l[n]===t){for(var p=u;p<r.length;p++){var f=r[p];f[n]===t&&(u=p)}return u}else{if(l[n]<t&&c[n]>t)return u;l[n]>t?s=u:l[n]<t&&(o=u+1)}}return-1}ot.search=i;function e(r,t,n){if(n===void 0&&(n="ticks"),r.length){var o=i(r,t[n],n);r.splice(o+1,0,t)}else r.push(t)}return ot.insert=e,ot}var ti;function Fr(){return ti||(ti=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Header=i.keySignatureKeys=void 0;var e=Ao(),r=new WeakMap;i.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var t=function(){function n(o){var a=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",r.set(this,480),o){r.set(this,o.header.ticksPerBeat),o.tracks.forEach(function(u){u.forEach(function(l){l.meta&&(l.type==="timeSignature"?a.timeSignatures.push({ticks:l.absoluteTime,timeSignature:[l.numerator,l.denominator]}):l.type==="setTempo"?a.tempos.push({bpm:6e7/l.microsecondsPerBeat,ticks:l.absoluteTime}):l.type==="keySignature"&&a.keySignatures.push({key:i.keySignatureKeys[l.key+7],scale:l.scale===0?"major":"minor",ticks:l.absoluteTime}))})});var s=0;o.tracks[0].forEach(function(u){s+=u.deltaTime,u.meta&&(u.type==="trackName"?a.name=u.text:(u.type==="text"||u.type==="cuePoint"||u.type==="marker"||u.type==="lyrics")&&a.meta.push({text:u.text,ticks:s,type:u.type}))}),this.update()}}return n.prototype.update=function(){var o=this,a=0,s=0;this.tempos.sort(function(u,l){return u.ticks-l.ticks}),this.tempos.forEach(function(u,l){var c=l>0?o.tempos[l-1].bpm:o.tempos[0].bpm,p=u.ticks/o.ppq-s,f=60/c*p;u.time=f+a,a=u.time,s+=p}),this.timeSignatures.sort(function(u,l){return u.ticks-l.ticks}),this.timeSignatures.forEach(function(u,l){var c=l>0?o.timeSignatures[l-1]:o.timeSignatures[0],p=(u.ticks-c.ticks)/o.ppq,f=p/c.timeSignature[0]/(c.timeSignature[1]/4);c.measures=c.measures||0,u.measures=f+c.measures})},n.prototype.ticksToSeconds=function(o){var a=(0,e.search)(this.tempos,o);if(a!==-1){var s=this.tempos[a],u=s.time,l=(o-s.ticks)/this.ppq;return u+60/s.bpm*l}else{var c=o/this.ppq;return 60/120*c}},n.prototype.ticksToMeasures=function(o){var a=(0,e.search)(this.timeSignatures,o);if(a!==-1){var s=this.timeSignatures[a],u=(o-s.ticks)/this.ppq;return s.measures+u/(s.timeSignature[0]/s.timeSignature[1])/4}else return o/this.ppq/4},Object.defineProperty(n.prototype,"ppq",{get:function(){return r.get(this)},enumerable:!1,configurable:!0}),n.prototype.secondsToTicks=function(o){var a=(0,e.search)(this.tempos,o,"time");if(a!==-1){var s=this.tempos[a],u=s.time,l=o-u,c=l/(60/s.bpm);return Math.round(s.ticks+c*this.ppq)}else{var p=o/.5;return Math.round(p*this.ppq)}},n.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(o){return{bpm:o.bpm,ticks:o.ticks}}),timeSignatures:this.timeSignatures}},n.prototype.fromJSON=function(o){this.name=o.name,this.tempos=o.tempos.map(function(a){return Object.assign({},a)}),this.timeSignatures=o.timeSignatures.map(function(a){return Object.assign({},a)}),this.keySignatures=o.keySignatures.map(function(a){return Object.assign({},a)}),this.meta=o.meta.map(function(a){return Object.assign({},a)}),r.set(this,o.ppq),this.update()},n.prototype.setTempo=function(o){this.tempos=[{bpm:o,ticks:0}],this.update()},n}();i.Header=t}(wr)),wr}var wt={},xr={},ri;function No(){return ri||(ri=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ControlChange=i.controlChangeIds=i.controlChangeNames=void 0,i.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},i.controlChangeIds=Object.keys(i.controlChangeNames).reduce(function(n,o){return n[i.controlChangeNames[o]]=o,n},{});var e=new WeakMap,r=new WeakMap,t=function(){function n(o,a){e.set(this,a),r.set(this,o.controllerType),this.ticks=o.absoluteTime,this.value=o.value}return Object.defineProperty(n.prototype,"number",{get:function(){return r.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return i.controlChangeNames[this.number]?i.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"time",{get:function(){var o=e.get(this);return o.ticksToSeconds(this.ticks)},set:function(o){var a=e.get(this);this.ticks=a.secondsToTicks(o)},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},n}();i.ControlChange=t}(xr)),xr}var xt={},ni;function zc(){if(ni)return xt;ni=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.createControlChanges=void 0;var i=No();function e(){return new Proxy({},{get:function(r,t){if(r[t])return r[t];if(i.controlChangeIds.hasOwnProperty(t))return r[i.controlChangeIds[t]]},set:function(r,t,n){return i.controlChangeIds.hasOwnProperty(t)?r[i.controlChangeIds[t]]=n:r[t]=n,!0}})}return xt.createControlChanges=e,xt}var St={},ii;function Uc(){if(ii)return St;ii=1,Object.defineProperty(St,"__esModule",{value:!0}),St.PitchBend=void 0;var i=new WeakMap,e=function(){function r(t,n){i.set(this,n),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(r.prototype,"time",{get:function(){var t=i.get(this);return t.ticksToSeconds(this.ticks)},set:function(t){var n=i.get(this);this.ticks=n.secondsToTicks(t)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},r}();return St.PitchBend=e,St}var Ct={},Ke={},oi;function Bc(){return oi||(oi=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.DrumKitByPatchID=Ke.InstrumentFamilyByID=Ke.instrumentByPatchID=void 0,Ke.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],Ke.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],Ke.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}),Ke}var ai;function qc(){if(ai)return Ct;ai=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.Instrument=void 0;var i=Bc(),e=new WeakMap,r=function(){function t(n,o){if(this.number=0,e.set(this,o),this.number=0,n){var a=n.find(function(s){return s.type==="programChange"});a&&(this.number=a.programNumber)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.percussion?i.DrumKitByPatchID[this.number]:i.instrumentByPatchID[this.number]},set:function(n){var o=i.instrumentByPatchID.indexOf(n);o!==-1&&(this.number=o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.percussion?"drums":i.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"percussion",{get:function(){var n=e.get(this);return n.channel===9},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},t.prototype.fromJSON=function(n){this.number=n.number},t}();return Ct.Instrument=r,Ct}var Pt={},si;function Vc(){if(si)return Pt;si=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.Note=void 0;function i(a){var s=Math.floor(a/12)-1;return e(a)+s.toString()}function e(a){var s=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],u=a%12;return s[u]}function r(a){var s=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return s.indexOf(a)}var t=function(){var a=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,s={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(u){var l=a.exec(u),c=l[1],p=l[2],f=s[c.toLowerCase()];return f+(parseInt(p,10)+1)*12}}(),n=new WeakMap,o=function(){function a(s,u,l){n.set(this,l),this.midi=s.midi,this.velocity=s.velocity,this.noteOffVelocity=u.velocity,this.ticks=s.ticks,this.durationTicks=u.ticks-s.ticks}return Object.defineProperty(a.prototype,"name",{get:function(){return i(this.midi)},set:function(s){this.midi=t(s)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(s){var u=s-this.octave;this.midi+=u*12},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"pitch",{get:function(){return e(this.midi)},set:function(s){this.midi=12*(this.octave+1)+r(s)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"duration",{get:function(){var s=n.get(this);return s.ticksToSeconds(this.ticks+this.durationTicks)-s.ticksToSeconds(this.ticks)},set:function(s){var u=n.get(this),l=u.secondsToTicks(this.time+s);this.durationTicks=l-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"time",{get:function(){var s=n.get(this);return s.ticksToSeconds(this.ticks)},set:function(s){var u=n.get(this);this.ticks=u.secondsToTicks(s)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bars",{get:function(){var s=n.get(this);return s.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),a.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},a}();return Pt.Note=o,Pt}var li;function ci(){if(li)return wt;li=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.Track=void 0;var i=Ao(),e=No(),r=zc(),t=Uc(),n=qc(),o=Vc(),a=new WeakMap,s=function(){function u(l,c){var p=this;if(this.name="",this.notes=[],this.controlChanges=(0,r.createControlChanges)(),this.pitchBends=[],a.set(this,c),l){var f=l.find(function(v){return v.type==="trackName"});this.name=f?f.text:""}if(this.instrument=new n.Instrument(l,this),this.channel=0,l){for(var d=l.filter(function(v){return v.type==="noteOn"}),y=l.filter(function(v){return v.type==="noteOff"}),m=function(){var v=d.shift();h.channel=v.channel;var x=y.findIndex(function(P){return P.noteNumber===v.noteNumber&&P.absoluteTime>=v.absoluteTime});if(x!==-1){var w=y.splice(x,1)[0];h.addNote({durationTicks:w.absoluteTime-v.absoluteTime,midi:v.noteNumber,noteOffVelocity:w.velocity/127,ticks:v.absoluteTime,velocity:v.velocity/127})}},h=this;d.length;)m();var g=l.filter(function(v){return v.type==="controller"});g.forEach(function(v){p.addCC({number:v.controllerType,ticks:v.absoluteTime,value:v.value/127})});var b=l.filter(function(v){return v.type==="pitchBend"});b.forEach(function(v){p.addPitchBend({ticks:v.absoluteTime,value:v.value/Math.pow(2,13)})});var k=l.find(function(v){return v.type==="endOfTrack"});this.endOfTrackTicks=k!==void 0?k.absoluteTime:void 0}}return u.prototype.addNote=function(l){var c=a.get(this),p=new o.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},c);return Object.assign(p,l),(0,i.insert)(this.notes,p,"ticks"),this},u.prototype.addCC=function(l){var c=a.get(this),p=new e.ControlChange({controllerType:l.number},c);return delete l.number,Object.assign(p,l),Array.isArray(this.controlChanges[p.number])||(this.controlChanges[p.number]=[]),(0,i.insert)(this.controlChanges[p.number],p,"ticks"),this},u.prototype.addPitchBend=function(l){var c=a.get(this),p=new t.PitchBend({},c);return Object.assign(p,l),(0,i.insert)(this.pitchBends,p,"ticks"),this},Object.defineProperty(u.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var l=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,c=0;c<this.notes.length-1;c++){var p=this.notes[c].time+this.notes[c].duration;l<p&&(l=p)}return l},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var l=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,c=0;c<this.notes.length-1;c++){var p=this.notes[c].ticks+this.notes[c].durationTicks;l<p&&(l=p)}return l},enumerable:!1,configurable:!0}),u.prototype.fromJSON=function(l){var c=this;this.name=l.name,this.channel=l.channel,this.instrument=new n.Instrument(void 0,this),this.instrument.fromJSON(l.instrument),l.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=l.endOfTrackTicks);for(var p in l.controlChanges)l.controlChanges[p]&&l.controlChanges[p].forEach(function(f){c.addCC({number:f.number,ticks:f.ticks,value:f.value})});l.notes.forEach(function(f){c.addNote({durationTicks:f.durationTicks,midi:f.midi,ticks:f.ticks,velocity:f.velocity})})},u.prototype.toJSON=function(){for(var l={},c=0;c<127;c++)this.controlChanges.hasOwnProperty(c)&&(l[c]=this.controlChanges[c].map(function(f){return f.toJSON()}));var p={channel:this.channel,controlChanges:l,pitchBends:this.pitchBends.map(function(f){return f.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(f){return f.toJSON()})};return this.endOfTrackTicks!==void 0&&(p.endOfTrackTicks=this.endOfTrackTicks),p},u}();return wt.Track=s,wt}var at={};function Gc(i){var e=[];return Fo(i,e),e}function Fo(i,e){for(var r=0;r<i.length;r++){var t=i[r];Array.isArray(t)?Fo(t,e):e.push(t)}}const Wc=Object.freeze(Object.defineProperty({__proto__:null,flatten:Gc},Symbol.toStringTag,{value:"Module"})),Hc=us(Wc);var ui;function Kc(){if(ui)return at;ui=1;var i=at&&at.__spreadArray||function(g,b,k){if(k||arguments.length===2)for(var v=0,x=b.length,w;v<x;v++)(w||!(v in b))&&(w||(w=Array.prototype.slice.call(b,0,v)),w[v]=b[v]);return g.concat(w||Array.prototype.slice.call(b))};Object.defineProperty(at,"__esModule",{value:!0}),at.encode=void 0;var e=Mo(),r=Fr(),t=Hc;function n(g,b){return[{absoluteTime:g.ticks,channel:b,deltaTime:0,noteNumber:g.midi,type:"noteOn",velocity:Math.floor(g.velocity*127)},{absoluteTime:g.ticks+g.durationTicks,channel:b,deltaTime:0,noteNumber:g.midi,type:"noteOff",velocity:Math.floor(g.noteOffVelocity*127)}]}function o(g){return(0,t.flatten)(g.notes.map(function(b){return n(b,g.channel)}))}function a(g,b){return{absoluteTime:g.ticks,channel:b,controllerType:g.number,deltaTime:0,type:"controller",value:Math.floor(g.value*127)}}function s(g){for(var b=[],k=0;k<127;k++)g.controlChanges.hasOwnProperty(k)&&g.controlChanges[k].forEach(function(v){b.push(a(v,g.channel))});return b}function u(g,b){return{absoluteTime:g.ticks,channel:b,deltaTime:0,type:"pitchBend",value:g.value}}function l(g){var b=[];return g.pitchBends.forEach(function(k){b.push(u(k,g.channel))}),b}function c(g){return{absoluteTime:0,channel:g.channel,deltaTime:0,programNumber:g.instrument.number,type:"programChange"}}function p(g){return{absoluteTime:0,deltaTime:0,meta:!0,text:g,type:"trackName"}}function f(g){return{absoluteTime:g.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/g.bpm),type:"setTempo"}}function d(g){return{absoluteTime:g.ticks,deltaTime:0,denominator:g.timeSignature[1],meta:!0,metronome:24,numerator:g.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function y(g){var b=r.keySignatureKeys.indexOf(g.key);return{absoluteTime:g.ticks,deltaTime:0,key:b+7,meta:!0,scale:g.scale==="major"?0:1,type:"keySignature"}}function m(g){return{absoluteTime:g.ticks,deltaTime:0,meta:!0,text:g.text,type:g.type}}function h(g){var b={header:{format:1,numTracks:g.tracks.length+1,ticksPerBeat:g.header.ppq},tracks:i([i(i(i(i([{absoluteTime:0,deltaTime:0,meta:!0,text:g.header.name,type:"trackName"}],g.header.keySignatures.map(function(k){return y(k)}),!0),g.header.meta.map(function(k){return m(k)}),!0),g.header.tempos.map(function(k){return f(k)}),!0),g.header.timeSignatures.map(function(k){return d(k)}),!0)],g.tracks.map(function(k){return i(i(i([p(k.name),c(k)],o(k),!0),s(k),!0),l(k),!0)}),!0)};return b.tracks=b.tracks.map(function(k){k=k.sort(function(x,w){return x.absoluteTime-w.absoluteTime});var v=0;return k.forEach(function(x){x.deltaTime=x.absoluteTime-v,v=x.absoluteTime,delete x.absoluteTime}),k.push({deltaTime:0,meta:!0,type:"endOfTrack"}),k}),new Uint8Array((0,e.writeMidi)(b))}return at.encode=h,at}var di;function Yc(){return di||(di=1,function(i){var e=it&&it.__awaiter||function(p,f,d,y){function m(h){return h instanceof d?h:new d(function(g){g(h)})}return new(d||(d=Promise))(function(h,g){function b(x){try{v(y.next(x))}catch(w){g(w)}}function k(x){try{v(y.throw(x))}catch(w){g(w)}}function v(x){x.done?h(x.value):m(x.value).then(b,k)}v((y=y.apply(p,f||[])).next())})},r=it&&it.__generator||function(p,f){var d={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},y,m,h,g;return g={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function b(v){return function(x){return k([v,x])}}function k(v){if(y)throw new TypeError("Generator is already executing.");for(;d;)try{if(y=1,m&&(h=v[0]&2?m.return:v[0]?m.throw||((h=m.return)&&h.call(m),0):m.next)&&!(h=h.call(m,v[1])).done)return h;switch(m=0,h&&(v=[v[0]&2,h.value]),v[0]){case 0:case 1:h=v;break;case 4:return d.label++,{value:v[1],done:!1};case 5:d.label++,m=v[1],v=[0];continue;case 7:v=d.ops.pop(),d.trys.pop();continue;default:if(h=d.trys,!(h=h.length>0&&h[h.length-1])&&(v[0]===6||v[0]===2)){d=0;continue}if(v[0]===3&&(!h||v[1]>h[0]&&v[1]<h[3])){d.label=v[1];break}if(v[0]===6&&d.label<h[1]){d.label=h[1],h=v;break}if(h&&d.label<h[2]){d.label=h[2],d.ops.push(v);break}h[2]&&d.ops.pop(),d.trys.pop();continue}v=f.call(p,d)}catch(x){v=[6,x],m=0}finally{y=h=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.Header=i.Track=i.Midi=void 0;var t=Mo(),n=Fr(),o=ci(),a=Kc(),s=function(){function p(f){var d=this,y=null;if(f){var m=f instanceof ArrayBuffer?new Uint8Array(f):f;y=(0,t.parseMidi)(m),y.tracks.forEach(function(h){var g=0;h.forEach(function(b){g+=b.deltaTime,b.absoluteTime=g})}),y.tracks=c(y.tracks)}this.header=new n.Header(y),this.tracks=[],f&&(this.tracks=y.tracks.map(function(h){return new o.Track(h,d.header)}),y.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return p.fromUrl=function(f){return e(this,void 0,void 0,function(){var d,y;return r(this,function(m){switch(m.label){case 0:return[4,fetch(f)];case 1:return d=m.sent(),d.ok?[4,d.arrayBuffer()]:[3,3];case 2:return y=m.sent(),[2,new p(y)];case 3:throw new Error("Could not load '".concat(f,"'"))}})})},Object.defineProperty(p.prototype,"name",{get:function(){return this.header.name},set:function(f){this.header.name=f},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"duration",{get:function(){var f=this.tracks.map(function(d){return d.duration});return Math.max.apply(Math,f)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"durationTicks",{get:function(){var f=this.tracks.map(function(d){return d.durationTicks});return Math.max.apply(Math,f)},enumerable:!1,configurable:!0}),p.prototype.addTrack=function(){var f=new o.Track(void 0,this.header);return this.tracks.push(f),f},p.prototype.toArray=function(){return(0,a.encode)(this)},p.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(f){return f.toJSON()})}},p.prototype.fromJSON=function(f){var d=this;this.header=new n.Header,this.header.fromJSON(f.header),this.tracks=f.tracks.map(function(y){var m=new o.Track(void 0,d.header);return m.fromJSON(y),m})},p.prototype.clone=function(){var f=new p;return f.fromJSON(this.toJSON()),f},p}();i.Midi=s;var u=ci();Object.defineProperty(i,"Track",{enumerable:!0,get:function(){return u.Track}});var l=Fr();Object.defineProperty(i,"Header",{enumerable:!0,get:function(){return l.Header}});function c(p){for(var f=[],d=0;d<p.length;d++)for(var y=f.length,m=new Map,h=Array(16).fill(0),g=0,b=p[d];g<b.length;g++){var k=b[g],v=y,x=k.channel;if(x!==void 0){k.type==="programChange"&&(h[x]=k.programNumber);var w=h[x],P="".concat(w," ").concat(x);m.has(P)?v=m.get(P):(v=y+m.size,m.set(P,v))}f[v]||f.push([]),f[v].push(k)}return f}}(it)),it}var Oo=Yc();const Jc=G({prev:z(I),delay:z(I),next:Q(I)}),Qr=new Z({typeName:"Delay",typeSchema:Jc}),Zc=G({next:Q(I)}),en=new Z({typeName:"Start",typeSchema:Zc}),Xc=G({value:De(),out:Q(I)}),Rt=new Z({typeName:"Number",typeSchema:Xc}),Qc=G({id:et(),prev:z(I),value:z(I),next:Q(I)}),tn=new Z({typeName:"SetVariable",typeSchema:Qc}),eu=G({id:et(),value:Q(I)}),rn=new Z({typeName:"Variable",typeSchema:eu}),tu=G({frequency:z(I),out:Q(I)}),nn=new Z({typeName:"Meow",typeSchema:tu}),ru=G({in:z(I)}),on=new Z({typeName:"Speaker",typeSchema:ru});async function nu(i,e){let r=[],t=new Oo.Midi(await e.arrayBuffer());for(let m of t.tracks)for(let h of m.notes)r.push({time:h.time,type:"NoteOn",note:h.midi}),r.push({time:h.time+h.duration,type:"NoteOff",note:h.midi});r.sort((m,h)=>m.time-h.time);let n=1e3,o=new Set,a=new Map,s=0;for(let m of r){let h=a.get(m.time);if(h==null?(h=[m],a.set(m.time,h)):h.push(m),o.add(m.note),++s,s>=n)break}let u=0,l=0,c,p;{let m=en.create({next:[]});p=g=>{m.setState("next",b=>[...b,g])},c={target:i.createEntity([m,ve.create({transform:fe.create(L.create(l,0),pe.rot0)})]),pin:"next"}}l+=200;let f=[],d,y=-200;for(let m=21;m<=108;++m){if(!o.has(m))continue;let h=261.63*Math.pow(2,(m-60)/12),g=Rt.create({value:h,out:[]}),b=i.createEntity([g,ve.create({transform:fe.create(L.create(l,y),pe.rot0)})]);f[m]={id:b,c:g},y-=100}{let m=Rt.create({value:0,out:[]});d={id:i.createEntity([m,ve.create({transform:fe.create(L.create(l,y),pe.rot0)})]),c:m}}for(let m=21;m<=108;++m){if(!o.has(m))continue;let h=rn.create({id:`n${m}`,value:[]}),g=i.createEntity([h,ve.create({transform:fe.create(L.create(l,y),pe.rot0)})]),b=nn.create({frequency:{target:g,pin:"value"},out:[]}),k=i.createEntity([b,ve.create({transform:fe.create(L.create(l+150,y),pe.rot0)})]);h.setState("value",[{target:k,pin:"frequency"}]);let v=on.create({in:{target:k,pin:"out"}}),x=i.createEntity([v,ve.create({transform:fe.create(L.create(l+300,y),pe.rot0)})]);b.setState("out",[{target:x,pin:"in"}]),y-=100}for(let[m,h]of a.entries()){let g=m-u;u=m;{let b=Qr.create({prev:c,delay:void 0,next:[]});p=w=>{b.setState("next",P=>[...P,w])};let k=i.createEntity([b,ve.create({transform:fe.create(L.create(l,0),pe.rot0)})]),v=i.createEntity([Rt.create({value:g*1e3,out:[{target:k,pin:"delay"}]}),ve.create({transform:fe.create(L.create(l,-100),pe.rot0)})]);b.setState("delay",{target:v,pin:"out"}),c={target:k,pin:"next"};let x=-250;for(let w of h){w.type=="NoteOn"&&261.63*Math.pow(2,(w.note-128)/12);let P=tn.create({id:`n${w.note}`,prev:{...c},value:void 0,next:[]}),C=i.createEntity([P,ve.create({transform:fe.create(L.create(l,x),pe.rot0)})]);if(w.type=="NoteOn"){let _=f[w.note];_.c.setState("out",R=>[...R,{target:C,pin:"value"}]),P.setState("value",{target:_.id,pin:"out"})}else d.c.setState("out",_=>[..._,{target:C,pin:"value"}]),P.setState("value",{target:d.id,pin:"out"});p({target:C,pin:"prev"}),x-=200}}if(l+=200,n-=h.length,await new Promise(b=>requestAnimationFrame(()=>b())),n<=0)break}}const iu=G({a:z(I),b:z(I),out:Q(I)}),Do=new Z({typeName:"Add",typeSchema:iu});class ou{componentType=Do;ext={};create(e){return new au(e)}}const jo=new ou;class au{type=jo;nodeParams;inputPins;outputPins;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"a",source:()=>r.a,setSource:n=>t("a",n)},{name:"b",source:()=>r.b,setSource:n=>t("b",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext={generateCode:({ctx:n,inputAtoms:o})=>{let a=o.get("a");if(a==null)return[];let s=o.get("b");if(s==null)return[];let u=n.allocField("0.0");n.insertCode([`${u} = ${a} + ${s}`]);let l=new Map;return l.set("out",u),[{outputAtoms:l}]}}}}const su=G({timeToOne:z(I),out:Q(I)}),Lo=new Z({typeName:"Attack",typeSchema:su});class lu{componentType=Lo;ext={};create(e){return new cu(e)}}const zo=new lu;class cu{type=zo;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"timeToOne",source:()=>r.timeToOne,setSource:n=>t("timeToOne",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}])}}class uu{componentType=Qr;ext={};create(e){return new du(e)}}const Uo=new uu;class du{type=Uo;nodeParams;inputPins;outputPins;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"prev",source:()=>r.prev,setSource:n=>t("prev",n),isEffectPin:!0},{name:"delay",source:()=>r.delay,setSource:n=>t("delay",n)}]),this.outputPins=S(()=>[{name:"next",sinks:()=>r.next,setSinks:n=>t("next",n),isEffectPin:!0}]),this.ext={generateCode:({ctx:n,inputAtoms:o,codeGenNodeId:a})=>{let s=o.get("prev");if(s==null)return[];let u=o.get("delay");if(u==null)return[];let l=`this.n_${a}_next`;n.addDeclToExistingForField(l,`{\r
    prev: null,\r
    next: null,\r
    update: null, /* () => boolean */\r
    onDone: [], /* (() => void)[] */\r
  }`);let c=n.allocField("0.0");n.insertConstructorCode([`${s}.onDone.push(() => {`,`  ${c} = currentTime * 1000.0;`,`  this.insertRunningEffect(${l});`,"});",`${l}.update = () => {`,`  let time = currentTime * 1000.0 - ${c};`,"  // return true when done.",`  return time >= ${u};`,"};"]);let p=`${l}`,f=new Map;return f.set("next",p),[{outputAtoms:f}]}}}}const pu=G({prev:z(I),entry:z(I),next:Q(I)}),Bo=new Z({typeName:"Goto",typeSchema:pu});class fu{componentType=Bo;ext={};create(e){return new hu(e)}}const qo=new fu;class hu{type=qo;nodeParams;inputPins;outputPins;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"prev",source:()=>r.prev,setSource:n=>t("prev",n),isEffectPin:!0},{name:"entry",source:()=>r.entry,setSource:n=>t("entry",n),isEffectPin:!0}]),this.outputPins=S(()=>[{name:"next",sinks:()=>r.next,setSinks:n=>t("next",n),isEffectPin:!0}]),this.ext={generateCode:({ctx:n,inputAtoms:o,codeGenNodeId:a})=>{let s=o.get("prev");if(s==null)return[];let u=o.get("entry");if(u==null)return[];let l=`this.n_${a}_next`;n.addDeclToExistingForField(l,`{\r
    prev: null,\r
    next: null,\r
    update: null, /* () => boolean */\r
    onDone: [], /* (() => void)[] */\r
  }`),n.insertConstructorCode([`${s}.onDone.push(() => {`,`  this.insertRunningEffect(${l});`,"});",`${u}.onDone.push(() => {`,`  this.insertRunningEffect(${l});`,"});",`${l}.update = () => true;`]);let c=`${l}`,p=new Map;return p.set("next",c),[{outputAtoms:p}]}}}}const mu=G({out:Q(I)}),an=new Z({typeName:"Knob",typeSchema:mu});var gu=V(`<svg version=1.1 viewBox="-16 -16 32 32"><defs><linearGradient id=shape-fill x1=0 x2=0 y1=0 y2=1><stop offset=0% stop-color="rgb(80, 80, 81)"></stop><stop offset=100% stop-color="rgb(30, 30, 31)"></stop></linearGradient><path id=shape d="
        M14.876 -5.890A-16 -16 0 0 0 14.876 5.890A16 16 0 0 112.539 9.938A-16 -16 0 0 0 2.337 15.828
        A16 16 0 0 1-2.337 15.828A-16 -16 0 0 0 -12.539 9.938A16 16 0 0 1-14.876 5.890A-16 -16 0 0 0 -14.876 -5.890
        A16 16 0 0 1-12.539 -9.938A-16 -16 0 0 0 -2.337 -15.828A16 16 0 0 12.337 -15.828A-16 -16 0 0 0 12.539 -9.938
        A16 16 0 0 114.876 -5.890"></path><clipPath id=shape-mask style="transform:rotate(var(--rot)) scale(0.87)"><use href=#shape></use></clipPath><filter id=lights></filter><filter id=shadow></filter></defs><circle cx=0 cy=0 r=15.0 fill="rgb(36, 36, 37)"stroke="rgb(28, 28, 29)"stroke-width=0.5></circle><g filter=url(#shadow)><g filter=url(#lights)><g clip-path=url(#shape-mask)><rect x=-16 y=-16 width=32 height=32 fill=url(#shape-fill)></rect><circle cx=-28 cy=-28 r=32 fill="rgba(250, 250, 255, .16)"></circle></g></g></g><g style=transform:rotate(var(--rot))><circle cx=0 cy=-11 r=1.1 fill=black></circle><circle cx=0 cy=-11 r=0.8 fill=white></circle></g><circle cx=0 cy=0 r=9 stroke="rgb(50, 50, 51)"stroke-width=0.7 fill=none></circle><foreignObject x=-9 y=-9 width=18 height=18><div style=width:18px;height:18px;border-radius:50%;background-image:conic-gradient(#aaa,#666,#aaa,#666,#aaa,#666,#aaa);>`);const yu=i=>{let[e,r]=Se({dragging:void 0}),[t,n]=J();ke(()=>{e.dragging&&i.setDisablePan(!1)});let o=-165,a=-o,s=S(()=>o+(i.value-i.minValue)*(a-o)/(i.maxValue-i.minValue)),u=document.createElementNS("http://www.w3.org/2000/svg","feDropShadow");u.setAttribute("dx","-0.3"),u.setAttribute("dy","-0.3"),u.setAttribute("stdDeviation","0.1"),u.setAttribute("flood-opacity","0.7"),u.setAttribute("flood-color","white");let l=document.createElementNS("http://www.w3.org/2000/svg","feDropShadow");l.setAttribute("dx","1.5"),l.setAttribute("dy","1.5"),l.setAttribute("stdDeviation","0.5"),l.setAttribute("flood-opacity","0.9"),l.setAttribute("flood-color","black");let c=d=>{let y=t(),m=y.getBoundingClientRect(),h=d.clientX-m.left,g=d.clientY-m.top,b=h-.5*m.width,k=g-.5*m.width;console.log("x",h.toFixed()),console.log("y",g.toFixed()),console.log("dx",b.toFixed()),console.log("dy",k.toFixed());let v=b*b+k*k;if(v>m.width*m.width)return;let x=Math.sqrt(v),P=360/(2*Math.PI*x),C=k>0?-P:P,_=b>0?P:-P;r("dragging",new er({pointerId:d.pointerId,startX:h,startY:g,startValue:i.value,dadx:C,dady:_})),y.setPointerCapture(d.pointerId),i.setDisablePan(!0)},p=d=>{if(e.dragging==null||d.pointerId!=e.dragging.value.pointerId)return;let y=t(),m=e.dragging.value,h=y.getBoundingClientRect(),g=d.clientX-h.left,b=d.clientY-h.top,k=o+(m.startValue-i.minValue)*(a-o)/(i.maxValue-i.minValue)+(g-m.startX)*m.dadx+(b-m.startY)*m.dady,v=i.minValue+(k-o)*(i.maxValue-i.minValue)/(a-o);v=Math.max(i.minValue,Math.min(i.maxValue,v)),i.setValue(v)},f=d=>{e.dragging!=null&&e.dragging.value.pointerId==d.pointerId&&(t().releasePointerCapture(e.dragging.value.pointerId),i.setDisablePan(!1))};return(()=>{var d=gu(),y=d.firstChild,m=y.firstChild,h=m.nextSibling,g=h.nextSibling,b=g.nextSibling,k=b.nextSibling;d.$$pointerup=f,d.$$pointermove=p,d.$$pointerdown=c;var v=n;return typeof v=="function"?ge(v,d):n=d,d.style.setProperty("user-select","none"),d.style.setProperty("outline","none"),K(b,u),K(k,l),X(x=>{var w=`${i.size}px`,P=`${i.size}px`,C=`${s()}deg`;return w!==x.e&&((x.e=w)!=null?d.style.setProperty("width",w):d.style.removeProperty("width")),P!==x.t&&((x.t=P)!=null?d.style.setProperty("height",P):d.style.removeProperty("height")),C!==x.a&&((x.a=C)!=null?d.style.setProperty("--rot",C):d.style.removeProperty("--rot")),x},{e:void 0,t:void 0,a:void 0}),d})()};xe(["pointerdown","pointermove","pointerup"]);var bu=V("<div><div><label class=input>min<input type=text value=0.00></label><label class=input>max<input type=text value=1.00></label><label class=input>value<input type=text>");class vu{componentType=an;ext;constructor(){this.ext={generateInitOnceCode:({ctx:e})=>{e.insertGlobalCode(["let knobValues = {};"]),e.insertMessageHandlerCode("KnobChange",["knobValues[params.id] = params.value;"])}}}create(e){return new ku(e)}}const Vo=new vu;class ku{type=Vo;nodeParams;outputPins;ui;disablePan;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:u=>t("out",u)}]);let[n,o]=J(!1),[a,s]=J();this.ui=S(()=>()=>{let[u,l]=J(0);oe(ae(u,p=>{let f=a();f?.port.postMessage({type:"KnobChange",params:{id:`${e.entity}`,value:p}})})),ke(()=>o(!1));let c=100;return(()=>{var p=bu(),f=p.firstChild,d=f.firstChild,y=d.nextSibling,m=y.nextSibling,h=m.firstChild,g=h.nextSibling;return f.style.setProperty("max-width","100px"),K(p,T(yu,{size:c,indentSize:10,minValue:0,maxValue:1,get value(){return u()},setValue:l,setDisablePan:o}),null),X(()=>g.value=u().toFixed(2)),p})()}),this.disablePan=n,this.ext={init:async u=>{s(u)},generateCode:({ctx:u})=>{u.insertGlobalCode([`knobValues["${e.entity}"] = 0.0;`]);let l=`knobValues["${e.entity}"]`,c=new Map;return c.set("out",l),[{outputAtoms:c}]}}}}var Sr={exports:{}},pi;function wu(){return pi||(pi=1,function(i,e){(function(r,t){i.exports=t()})(window,function(){return function(r){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return r[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=r,n.c=t,n.d=function(o,a,s){n.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:s})},n.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},n.t=function(o,a){if(1&a&&(o=n(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var u in o)n.d(s,u,function(l){return o[l]}.bind(null,u));return s},n.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return n.d(a,"a",a),a},n.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},n.p="",n(n.s="./src/index.ts")}({"./src/chunk.ts":function(r,t,n){n.r(t),n.d(t,"SF2Chunk",function(){return d});var o=n("./src/riff/index.ts"),a=n("./src/constants.ts"),s=n("./src/chunks/index.ts");function u(y){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(y)}function l(y,m){for(var h=0;h<m.length;h++){var g=m[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}function c(y){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)})(y)}function p(y,m){return(p=Object.setPrototypeOf||function(h,g){return h.__proto__=g,h})(y,m)}function f(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}var d=function(y){function m(b){var k,v,x,w,P,C;return function(_,R){if(!(_ instanceof R))throw new TypeError("Cannot call a class as a function")}(this,m),v=this,k=!(x=c(m).call(this,b.id,b.length,b.buffer,b.subChunks))||u(x)!=="object"&&typeof x!="function"?f(v):x,w=f(f(k)),C=void 0,(P="subChunks")in w?Object.defineProperty(w,P,{value:C,enumerable:!0,configurable:!0,writable:!0}):w[P]=C,k.subChunks=b.subChunks.map(function(_){return new m(_)}),k}var h,g;return function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(k&&k.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),k&&p(b,k)}(m,y),h=m,(g=[{key:"getMetaData",value:function(){if(this.id!=="LIST")throw new o.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var b=this.subChunks.reduce(function(k,v){if(v.id==="ifil"||v.id==="iver"){if(v.length!==a.SF_VERSION_LENGTH)throw new o.ParseError("Invalid size for the '".concat(v.id,"' sub-chunk"));k[v.id]="".concat(v.getInt16(),".").concat(v.getInt16(2))}else k[v.id]=v.getString();return k},{});if(!b.ifil)throw new o.ParseError("Missing required 'ifil' sub-chunk");if(!b.INAM)throw new o.ParseError("Missing required 'INAM' sub-chunk");return{version:b.ifil,soundEngine:b.isng||"EMU8000",name:b.INAM,rom:b.irom,romVersion:b.iver,creationDate:b.ICRD,author:b.IENG,product:b.IPRD,copyright:b.ICOP,comments:b.ICMT,createdBy:b.ISFT}}},{key:"getSampleData",value:function(){if(this.id!=="LIST")throw new o.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var b=this.subChunks[0];if(b.id!=="smpl")throw new o.ParseError("Invalid chunk signature","'smpl'","'".concat(b.id,"'"));return b.buffer}},{key:"getPresetData",value:function(){if(this.id!=="LIST")throw new o.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));return{presetHeaders:Object(s.getPresetHeaders)(this.subChunks[0]),presetZones:Object(s.getZones)(this.subChunks[1],"pbag"),presetModulators:Object(s.getModulators)(this.subChunks[2],"pmod"),presetGenerators:Object(s.getGenerators)(this.subChunks[3],"pgen"),instrumentHeaders:Object(s.getInstrumentHeaders)(this.subChunks[4]),instrumentZones:Object(s.getZones)(this.subChunks[5],"ibag"),instrumentModulators:Object(s.getModulators)(this.subChunks[6],"imod"),instrumentGenerators:Object(s.getGenerators)(this.subChunks[7],"igen"),sampleHeaders:Object(s.getSampleHeaders)(this.subChunks[8])}}}])&&l(h.prototype,g),m}(o.RIFFChunk)},"./src/chunks/generators.ts":function(r,t,n){n.r(t),n.d(t,"getGenerators",function(){return p});var o=n("./src/riff/index.ts"),a=n("./src/types/index.ts"),s=n("./src/constants.ts"),u=[a.GeneratorType.StartAddrsOffset,a.GeneratorType.EndAddrsOffset,a.GeneratorType.StartLoopAddrsOffset,a.GeneratorType.EndLoopAddrsOffset,a.GeneratorType.StartAddrsCoarseOffset,a.GeneratorType.EndAddrsCoarseOffset,a.GeneratorType.StartLoopAddrsCoarseOffset,a.GeneratorType.KeyNum,a.GeneratorType.Velocity,a.GeneratorType.EndLoopAddrsCoarseOffset,a.GeneratorType.SampleModes,a.GeneratorType.ExclusiveClass,a.GeneratorType.OverridingRootKey],l=[a.GeneratorType.Unused1,a.GeneratorType.Unused2,a.GeneratorType.Unused3,a.GeneratorType.Unused4,a.GeneratorType.Reserved1,a.GeneratorType.Reserved2,a.GeneratorType.Reserved3],c=[a.GeneratorType.KeyRange,a.GeneratorType.VelRange],p=function(f,d){if(f.id!==d)throw new o.ParseError("Unexpected chunk ID","'".concat(d,"'"),"'".concat(f.id,"'"));if(f.length%s.SF_GENERATOR_SIZE)throw new o.ParseError("Invalid size for the '".concat(d,"' sub-chunk"));return f.iterate(function(y){var m=y.getInt16();return a.GeneratorType[m]?d==="pgen"&&u.includes(m)||d==="igen"&&l.includes(m)?null:c.includes(m)?{id:m,range:{lo:y.getByte(),hi:y.getByte()}}:{id:m,value:y.getInt16BE()}:null})}},"./src/chunks/index.ts":function(r,t,n){n.r(t);var o=n("./src/chunks/instruments/index.ts");n.d(t,"getInstrumentHeaders",function(){return o.getInstrumentHeaders});var a=n("./src/chunks/presets/index.ts");n.d(t,"getPresetHeaders",function(){return a.getPresetHeaders});var s=n("./src/chunks/samples/index.ts");n.d(t,"getSampleHeaders",function(){return s.getSampleHeaders});var u=n("./src/chunks/generators.ts");n.d(t,"getGenerators",function(){return u.getGenerators});var l=n("./src/chunks/modulators.ts");n.d(t,"getModulators",function(){return l.getModulators});var c=n("./src/chunks/zones.ts");n.d(t,"getZones",function(){return c.getZones}),n.d(t,"getItemsInZone",function(){return c.getItemsInZone})},"./src/chunks/instruments/headers.ts":function(r,t,n){n.r(t),n.d(t,"getInstrumentHeaders",function(){return s});var o=n("./src/riff/index.ts"),a=n("./src/constants.ts"),s=function(u){if(u.id!=="inst")throw new o.ParseError("Unexpected chunk ID","'inst'","'".concat(u.id,"'"));if(u.length%a.SF_INSTRUMENT_HEADER_SIZE)throw new o.ParseError("Invalid size for the 'inst' sub-chunk");return u.iterate(function(l){return{name:l.getString(),bagIndex:l.getInt16()}})}},"./src/chunks/instruments/index.ts":function(r,t,n){n.r(t);var o=n("./src/chunks/instruments/headers.ts");n.d(t,"getInstrumentHeaders",function(){return o.getInstrumentHeaders})},"./src/chunks/modulators.ts":function(r,t,n){n.r(t),n.d(t,"getModulators",function(){return u});var o=n("./src/riff/index.ts"),a=n("./src/constants.ts"),s=function(l){return{type:l>>10&63,polarity:l>>9&1,direction:l>>8&1,palette:l>>7&1,index:127&l}},u=function(l,c){if(l.id!==c)throw new o.ParseError("Unexpected chunk ID","'".concat(c,"'"),"'".concat(l.id,"'"));if(l.length%a.SF_MODULATOR_SIZE)throw new o.ParseError("Invalid size for the '".concat(c,"' sub-chunk"));return l.iterate(function(p){return{source:s(p.getInt16BE()),id:p.getInt16BE(),value:p.getInt16BE(),valueSource:s(p.getInt16BE()),transform:p.getInt16BE()}})}},"./src/chunks/presets/headers.ts":function(r,t,n){n.r(t),n.d(t,"getPresetHeaders",function(){return s});var o=n("./src/riff/index.ts"),a=n("./src/constants.ts"),s=function(u){if(u.id!=="phdr")throw new o.ParseError("Invalid chunk ID","'phdr'","'".concat(u.id,"'"));if(u.length%a.SF_PRESET_HEADER_SIZE)throw new o.ParseError("Invalid size for the 'phdr' sub-chunk");return u.iterate(function(l){return{name:l.getString(),preset:l.getInt16(),bank:l.getInt16(),bagIndex:l.getInt16(),library:l.getUInt32(),genre:l.getUInt32(),morphology:l.getUInt32()}})}},"./src/chunks/presets/index.ts":function(r,t,n){n.r(t);var o=n("./src/chunks/presets/headers.ts");n.d(t,"getPresetHeaders",function(){return o.getPresetHeaders})},"./src/chunks/samples/headers.ts":function(r,t,n){n.r(t),n.d(t,"getSampleHeaders",function(){return s});var o=n("./src/riff/index.ts"),a=n("./src/constants.ts"),s=function(u){if(u.id!=="shdr")throw new o.ParseError("Unexpected chunk ID","'shdr'","'".concat(u.id,"'"));if(u.length%a.SF_SAMPLE_HEADER_SIZE)throw new o.ParseError("Invalid size for the 'shdr' sub-chunk");return u.iterate(function(l){return{name:l.getString(),start:l.getUInt32(),end:l.getUInt32(),startLoop:l.getUInt32(),endLoop:l.getUInt32(),sampleRate:l.getUInt32(),originalPitch:l.getByte(),pitchCorrection:l.getChar(),link:l.getInt16(),type:l.getInt16()}})}},"./src/chunks/samples/index.ts":function(r,t,n){n.r(t);var o=n("./src/chunks/samples/headers.ts");n.d(t,"getSampleHeaders",function(){return o.getSampleHeaders})},"./src/chunks/zones.ts":function(r,t,n){n.r(t),n.d(t,"getZones",function(){return u}),n.d(t,"getItemsInZone",function(){return l});var o=n("./src/riff/index.ts"),a=n("./src/constants.ts"),s=n("./src/types/index.ts"),u=function(d,y){if(d.id!==y)throw new o.ParseError("Unexpected chunk ID","'".concat(y,"'"),"'".concat(d.id,"'"));if(d.length%a.SF_BAG_SIZE)throw new o.ParseError("Invalid size for the '".concat(y,"' sub-chunk"));return d.iterate(function(m){return{generatorIndex:m.getInt16(),modulatorIndex:m.getInt16()}})},l=function(d,y,m,h,g,b){for(var k=[],v=0;v<d.length;v++){for(var x=d[v],w=d[v+1],P=x.bagIndex,C=w?w.bagIndex:y.length,_=[],R=void 0,$=P;$<C;$++){var O=c($,y,m),D=p($,y,h),M=D[s.GeneratorType.KeyRange]&&D[s.GeneratorType.KeyRange].range,E=D[b];if(E){var F=g[E.value];F&&_.push({keyRange:M,modulators:O,generators:D,reference:F})}else $-P==0&&(R={keyRange:M,modulators:O,generators:D})}k.push({header:x,globalZone:R,zones:_})}return k},c=function(d,y,m){var h=y[d],g=y[d+1],b=h.modulatorIndex,k=g?g.modulatorIndex:y.length;return f(b,k,m)},p=function(d,y,m){var h=y[d],g=y[d+1],b=h.generatorIndex,k=g?g.generatorIndex:y.length;return f(b,k,m)},f=function(d,y,m){for(var h={},g=d;g<y;g++){var b=m[g];b&&(h[b.id]=b)}return h}},"./src/constants.ts":function(r,t,n){n.r(t),n.d(t,"SF_VERSION_LENGTH",function(){return o}),n.d(t,"SF_PRESET_HEADER_SIZE",function(){return a}),n.d(t,"SF_BAG_SIZE",function(){return s}),n.d(t,"SF_MODULATOR_SIZE",function(){return u}),n.d(t,"SF_GENERATOR_SIZE",function(){return l}),n.d(t,"SF_INSTRUMENT_HEADER_SIZE",function(){return c}),n.d(t,"SF_SAMPLE_HEADER_SIZE",function(){return p}),n.d(t,"DEFAULT_SAMPLE_RATE",function(){return f});var o=4,a=38,s=4,u=10,l=4,c=22,p=46,f=22050},"./src/index.ts":function(r,t,n){n.r(t);var o=n("./src/types/index.ts");for(var a in o)["default"].indexOf(a)<0&&function(c){n.d(t,c,function(){return o[c]})}(a);var s=n("./src/chunk.ts");n.d(t,"SF2Chunk",function(){return s.SF2Chunk});var u=n("./src/constants.ts");n.d(t,"SF_VERSION_LENGTH",function(){return u.SF_VERSION_LENGTH}),n.d(t,"SF_PRESET_HEADER_SIZE",function(){return u.SF_PRESET_HEADER_SIZE}),n.d(t,"SF_BAG_SIZE",function(){return u.SF_BAG_SIZE}),n.d(t,"SF_MODULATOR_SIZE",function(){return u.SF_MODULATOR_SIZE}),n.d(t,"SF_GENERATOR_SIZE",function(){return u.SF_GENERATOR_SIZE}),n.d(t,"SF_INSTRUMENT_HEADER_SIZE",function(){return u.SF_INSTRUMENT_HEADER_SIZE}),n.d(t,"SF_SAMPLE_HEADER_SIZE",function(){return u.SF_SAMPLE_HEADER_SIZE}),n.d(t,"DEFAULT_SAMPLE_RATE",function(){return u.DEFAULT_SAMPLE_RATE});var l=n("./src/soundFont2.ts");n.d(t,"SoundFont2",function(){return l.SoundFont2})},"./src/riff/chunkIterator.ts":function(r,t,n){n.r(t),n.d(t,"ChunkIterator",function(){return l});var o=n("./src/utils/index.ts");function a(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}function s(c,p){for(var f=0;f<p.length;f++){var d=p[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}function u(c,p,f){return p in c?Object.defineProperty(c,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):c[p]=f,c}var l=function(){function c(d){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;a(this,c),u(this,"target",[]),u(this,"chunk",void 0),u(this,"position",0),this.chunk=d,this.position=y}var p,f;return p=c,(f=[{key:"iterate",value:function(d){for(;this.position<this.chunk.length;){var y=d(this);y&&this.target.push(y)}}},{key:"getString",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,y=Object(o.getStringFromBuffer)(this.getBuffer(this.position,d));return this.position+=d,y}},{key:"getInt16",value:function(){return this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8}},{key:"getInt16BE",value:function(){return this.getInt16()<<16>>16}},{key:"getUInt32",value:function(){return(this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8|this.chunk.buffer[this.position++]<<16|this.chunk.buffer[this.position++]<<24)>>>0}},{key:"getByte",value:function(){return this.chunk.buffer[this.position++]}},{key:"getChar",value:function(){return this.chunk.buffer[this.position++]<<24>>24}},{key:"skip",value:function(d){this.position+=d}},{key:"getBuffer",value:function(d,y){return this.chunk.buffer.subarray(d,d+y)}},{key:"currentPosition",get:function(){return this.position}}])&&s(p.prototype,f),c}()},"./src/riff/index.ts":function(r,t,n){n.r(t);var o=n("./src/riff/chunkIterator.ts");n.d(t,"ChunkIterator",function(){return o.ChunkIterator});var a=n("./src/riff/parseError.ts");n.d(t,"ParseError",function(){return a.ParseError});var s=n("./src/riff/parser.ts");n.d(t,"parseBuffer",function(){return s.parseBuffer}),n.d(t,"getChunk",function(){return s.getChunk}),n.d(t,"getChunkLength",function(){return s.getChunkLength}),n.d(t,"getSubChunks",function(){return s.getSubChunks}),n.d(t,"getChunkId",function(){return s.getChunkId});var u=n("./src/riff/riffChunk.ts");n.d(t,"RIFFChunk",function(){return u.RIFFChunk})},"./src/riff/parseError.ts":function(r,t,n){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(d)}function a(d,y){return!y||o(y)!=="object"&&typeof y!="function"?function(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}(d):y}function s(d){var y=typeof Map=="function"?new Map:void 0;return(s=function(m){if(m===null||(h=m,Function.toString.call(h).indexOf("[native code]")===-1))return m;var h;if(typeof m!="function")throw new TypeError("Super expression must either be null or a function");if(y!==void 0){if(y.has(m))return y.get(m);y.set(m,g)}function g(){return l(m,arguments,p(this).constructor)}return g.prototype=Object.create(m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),c(g,m)})(d)}function u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function l(d,y,m){return(l=u()?Reflect.construct:function(h,g,b){var k=[null];k.push.apply(k,g);var v=new(Function.bind.apply(h,k));return b&&c(v,b.prototype),v}).apply(null,arguments)}function c(d,y){return(c=Object.setPrototypeOf||function(m,h){return m.__proto__=h,m})(d,y)}function p(d){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)})(d)}n.r(t),n.d(t,"ParseError",function(){return f});var f=function(d){function y(m,h,g){return function(b,k){if(!(b instanceof k))throw new TypeError("Cannot call a class as a function")}(this,y),a(this,p(y).call(this,"".concat(m).concat(h&&g?", expected ".concat(h,", received ").concat(g):"")))}return function(m,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(h&&h.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),h&&c(m,h)}(y,d),y}(s(Error))},"./src/riff/parser.ts":function(r,t,n){n.r(t),n.d(t,"parseBuffer",function(){return u}),n.d(t,"getChunk",function(){return l}),n.d(t,"getChunkLength",function(){return c}),n.d(t,"getSubChunks",function(){return p}),n.d(t,"getChunkId",function(){return f});var o=n("./src/riff/parseError.ts"),a=n("./src/utils/buffer.ts"),s=n("./src/riff/riffChunk.ts"),u=function(d){var y=f(d);if(y!=="RIFF")throw new o.ParseError("Invalid file format","RIFF",y);var m=f(d,8);if(m!=="sfbk")throw new o.ParseError("Invalid signature","sfbk",m);var h=d.subarray(8),g=p(h.subarray(4));return new s.RIFFChunk(y,h.length,h,g)},l=function(d,y){var m=f(d,y),h=c(d,y+4),g=[];return m!=="RIFF"&&m!=="LIST"||(g=p(d.subarray(y+12))),new s.RIFFChunk(m,h,d.subarray(y+8),g)},c=function(d,y){return((d=d.subarray(y,y+4))[0]|d[1]<<8|d[2]<<16|d[3]<<24)>>>0},p=function(d){for(var y=[],m=0;m<=d.length-8;){var h=l(d,m);y.push(h),m=(m+=8+h.length)%2?m+1:m}return y},f=function(d){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Object(a.getStringFromBuffer)(d.subarray(y,y+4))}},"./src/riff/riffChunk.ts":function(r,t,n){n.r(t),n.d(t,"RIFFChunk",function(){return l});var o=n("./src/riff/chunkIterator.ts"),a=n("./src/utils/index.ts");function s(c,p){for(var f=0;f<p.length;f++){var d=p[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}function u(c,p,f){return p in c?Object.defineProperty(c,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):c[p]=f,c}var l=function(){function c(d,y,m,h){(function(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")})(this,c),u(this,"id",void 0),u(this,"length",void 0),u(this,"buffer",void 0),u(this,"subChunks",void 0),this.id=d,this.length=y,this.buffer=m,this.subChunks=h}var p,f;return p=c,(f=[{key:"getString",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,y=arguments.length>1?arguments[1]:void 0;return Object(a.getStringFromBuffer)(this.getBuffer(d,y||this.length-d))}},{key:"getInt16",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[d++]|this.buffer[d]<<8}},{key:"getUInt32",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(this.buffer[d++]|this.buffer[d++]<<8|this.buffer[d++]<<16|this.buffer[d]<<24)>>>0}},{key:"getByte",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[d]}},{key:"getChar",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[d]<<24>>24}},{key:"iterator",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new o.ChunkIterator(this,d)}},{key:"iterate",value:function(d){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=new o.ChunkIterator(this,y);return m.iterate(d),m.target}},{key:"getBuffer",value:function(d,y){return this.buffer.subarray(d,d+y)}}])&&s(p.prototype,f),c}()},"./src/soundFont2.ts":function(r,t,n){n.r(t),n.d(t,"SoundFont2",function(){return y});var o=n("./src/types/index.ts"),a=n("./src/chunk.ts"),s=n("./src/riff/index.ts"),u=n("./src/chunks/index.ts"),l=n("./src/utils/index.ts");function c(m){for(var h=1;h<arguments.length;h++){var g=arguments[h]!=null?arguments[h]:{},b=Object.keys(g);typeof Object.getOwnPropertySymbols=="function"&&(b=b.concat(Object.getOwnPropertySymbols(g).filter(function(k){return Object.getOwnPropertyDescriptor(g,k).enumerable}))),b.forEach(function(k){d(m,k,g[k])})}return m}function p(m,h){for(var g=0;g<h.length;g++){var b=h[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}function f(m,h,g){return h&&p(m.prototype,h),g&&p(m,g),m}function d(m,h,g){return h in m?Object.defineProperty(m,h,{value:g,enumerable:!0,configurable:!0,writable:!0}):m[h]=g,m}var y=function(){function m(h){if(function(b,k){if(!(b instanceof k))throw new TypeError("Cannot call a class as a function")}(this,m),d(this,"chunk",void 0),d(this,"metaData",void 0),d(this,"sampleData",void 0),d(this,"samples",void 0),d(this,"presetData",void 0),d(this,"instruments",void 0),d(this,"presets",void 0),d(this,"banks",void 0),!(h instanceof a.SF2Chunk)){var g=Object(s.parseBuffer)(h);h=new a.SF2Chunk(g)}if(h.subChunks.length!==3)throw new s.ParseError("Invalid sfbk structure","3 chunks","".concat(h.subChunks.length," chunks"));this.chunk=h,this.metaData=h.subChunks[0].getMetaData(),this.sampleData=h.subChunks[1].getSampleData(),this.presetData=h.subChunks[2].getPresetData(),this.samples=this.getSamples(),this.instruments=this.getInstruments(),this.presets=this.getPresets(),this.banks=this.getBanks()}return f(m,null,[{key:"from",value:function(h){return new m(h)}}]),f(m,[{key:"getKeyData",value:function(h){var g=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Object(l.memoize)(function(v,x,w){var P=g.banks[x];if(P){var C=P.presets[w];if(C){var _=C.zones.filter(function(ce){return g.isKeyInRange(ce,v)});if(_.length>0){var R=!0,$=!1,O=void 0;try{for(var D,M=_[Symbol.iterator]();!(R=(D=M.next()).done);R=!0){var E=D.value,F=E.instrument,B=F.zones.filter(function(ce){return g.isKeyInRange(ce,v)});if(B.length>0){var U=!0,q=!1,W=void 0;try{for(var ee,A=B[Symbol.iterator]();!(U=(ee=A.next()).done);U=!0){var Y=ee.value,te=Y.sample,ye=c({},E.generators,Y.generators),se=c({},E.modulators,Y.modulators);return{keyNumber:v,preset:C,instrument:F,sample:te,generators:ye,modulators:se}}}catch(ce){q=!0,W=ce}finally{try{U||A.return==null||A.return()}finally{if(q)throw W}}}}}catch(ce){$=!0,O=ce}finally{try{R||M.return==null||M.return()}finally{if($)throw O}}}}}return null})(h,b,k)}},{key:"isKeyInRange",value:function(h,g){return h.keyRange===void 0||h.keyRange.lo<=g&&h.keyRange.hi>=g}},{key:"getBanks",value:function(){return this.presets.reduce(function(h,g){var b=g.header.bank;return h[b]||(h[b]={presets:[]}),h[b].presets[g.header.preset]=g,h},[])}},{key:"getPresets",value:function(){var h=this.presetData,g=h.presetHeaders,b=h.presetZones,k=h.presetGenerators,v=h.presetModulators;return Object(u.getItemsInZone)(g,b,v,k,this.instruments,o.GeneratorType.Instrument).filter(function(x){return x.header.name!=="EOP"}).map(function(x){return{header:x.header,globalZone:x.globalZone,zones:x.zones.map(function(w){return{keyRange:w.keyRange,generators:w.generators,modulators:w.modulators,instrument:w.reference}})}})}},{key:"getInstruments",value:function(){var h=this.presetData,g=h.instrumentHeaders,b=h.instrumentZones,k=h.instrumentModulators,v=h.instrumentGenerators;return Object(u.getItemsInZone)(g,b,k,v,this.samples,o.GeneratorType.SampleId).filter(function(x){return x.header.name!=="EOI"}).map(function(x){return{header:x.header,globalZone:x.globalZone,zones:x.zones.map(function(w){return{keyRange:w.keyRange,generators:w.generators,modulators:w.modulators,sample:w.reference}})}})}},{key:"getSamples",value:function(){var h=this;return this.presetData.sampleHeaders.filter(function(g){return g.name!=="EOS"}).map(function(g){if(g.name!=="EOS"&&g.sampleRate<=0)throw new Error("Illegal sample rate of ".concat(g.sampleRate," hz in sample '").concat(g.name,"'"));return g.originalPitch>=128&&g.originalPitch<=254&&(g.originalPitch=60),g.startLoop-=g.start,g.endLoop-=g.start,{header:g,data:new Int16Array(new Uint8Array(h.sampleData.subarray(2*g.start,2*g.end)).buffer)}})}}]),m}()},"./src/types/bank.ts":function(r,t){},"./src/types/generator.ts":function(r,t,n){var o,a;function s(l,c,p){return c in l?Object.defineProperty(l,c,{value:p,enumerable:!0,configurable:!0,writable:!0}):l[c]=p,l}n.r(t),n.d(t,"GeneratorType",function(){return a}),n.d(t,"DEFAULT_GENERATOR_VALUES",function(){return u}),function(l){l[l.StartAddrsOffset=0]="StartAddrsOffset",l[l.EndAddrsOffset=1]="EndAddrsOffset",l[l.StartLoopAddrsOffset=2]="StartLoopAddrsOffset",l[l.EndLoopAddrsOffset=3]="EndLoopAddrsOffset",l[l.StartAddrsCoarseOffset=4]="StartAddrsCoarseOffset",l[l.ModLFOToPitch=5]="ModLFOToPitch",l[l.VibLFOToPitch=6]="VibLFOToPitch",l[l.ModEnvToPitch=7]="ModEnvToPitch",l[l.InitialFilterFc=8]="InitialFilterFc",l[l.InitialFilterQ=9]="InitialFilterQ",l[l.ModLFOToFilterFc=10]="ModLFOToFilterFc",l[l.ModEnvToFilterFc=11]="ModEnvToFilterFc",l[l.EndAddrsCoarseOffset=12]="EndAddrsCoarseOffset",l[l.ModLFOToVolume=13]="ModLFOToVolume",l[l.Unused1=14]="Unused1",l[l.ChorusEffectsSend=15]="ChorusEffectsSend",l[l.ReverbEffectsSend=16]="ReverbEffectsSend",l[l.Pan=17]="Pan",l[l.Unused2=18]="Unused2",l[l.Unused3=19]="Unused3",l[l.Unused4=20]="Unused4",l[l.DelayModLFO=21]="DelayModLFO",l[l.FreqModLFO=22]="FreqModLFO",l[l.DelayVibLFO=23]="DelayVibLFO",l[l.FreqVibLFO=24]="FreqVibLFO",l[l.DelayModEnv=25]="DelayModEnv",l[l.AttackModEnv=26]="AttackModEnv",l[l.HoldModEnv=27]="HoldModEnv",l[l.DecayModEnv=28]="DecayModEnv",l[l.SustainModEnv=29]="SustainModEnv",l[l.ReleaseModEnv=30]="ReleaseModEnv",l[l.KeyNumToModEnvHold=31]="KeyNumToModEnvHold",l[l.KeyNumToModEnvDecay=32]="KeyNumToModEnvDecay",l[l.DelayVolEnv=33]="DelayVolEnv",l[l.AttackVolEnv=34]="AttackVolEnv",l[l.HoldVolEnv=35]="HoldVolEnv",l[l.DecayVolEnv=36]="DecayVolEnv",l[l.SustainVolEnv=37]="SustainVolEnv",l[l.ReleaseVolEnv=38]="ReleaseVolEnv",l[l.KeyNumToVolEnvHold=39]="KeyNumToVolEnvHold",l[l.KeyNumToVolEnvDecay=40]="KeyNumToVolEnvDecay",l[l.Instrument=41]="Instrument",l[l.Reserved1=42]="Reserved1",l[l.KeyRange=43]="KeyRange",l[l.VelRange=44]="VelRange",l[l.StartLoopAddrsCoarseOffset=45]="StartLoopAddrsCoarseOffset",l[l.KeyNum=46]="KeyNum",l[l.Velocity=47]="Velocity",l[l.InitialAttenuation=48]="InitialAttenuation",l[l.Reserved2=49]="Reserved2",l[l.EndLoopAddrsCoarseOffset=50]="EndLoopAddrsCoarseOffset",l[l.CoarseTune=51]="CoarseTune",l[l.FineTune=52]="FineTune",l[l.SampleId=53]="SampleId",l[l.SampleModes=54]="SampleModes",l[l.Reserved3=55]="Reserved3",l[l.ScaleTuning=56]="ScaleTuning",l[l.ExclusiveClass=57]="ExclusiveClass",l[l.OverridingRootKey=58]="OverridingRootKey",l[l.Unused5=59]="Unused5",l[l.EndOper=60]="EndOper"}(a||(a={}));var u=(s(o={},a.StartAddrsOffset,0),s(o,a.EndAddrsOffset,0),s(o,a.StartLoopAddrsOffset,0),s(o,a.EndLoopAddrsOffset,0),s(o,a.StartAddrsCoarseOffset,0),s(o,a.ModLFOToPitch,0),s(o,a.VibLFOToPitch,0),s(o,a.ModEnvToPitch,0),s(o,a.InitialFilterFc,13500),s(o,a.InitialFilterQ,0),s(o,a.ModLFOToFilterFc,0),s(o,a.ModEnvToFilterFc,0),s(o,a.EndAddrsCoarseOffset,0),s(o,a.ModLFOToVolume,0),s(o,a.ChorusEffectsSend,0),s(o,a.ReverbEffectsSend,0),s(o,a.Pan,0),s(o,a.DelayModLFO,-12e3),s(o,a.FreqModLFO,0),s(o,a.DelayVibLFO,-12e3),s(o,a.FreqVibLFO,0),s(o,a.DelayModEnv,-12e3),s(o,a.AttackModEnv,-12e3),s(o,a.HoldModEnv,-12e3),s(o,a.DecayModEnv,-12e3),s(o,a.SustainModEnv,0),s(o,a.ReleaseModEnv,-12e3),s(o,a.KeyNumToModEnvHold,0),s(o,a.KeyNumToModEnvDecay,0),s(o,a.DelayVolEnv,-12e3),s(o,a.AttackVolEnv,-12e3),s(o,a.HoldVolEnv,-12e3),s(o,a.DecayVolEnv,-12e3),s(o,a.SustainVolEnv,0),s(o,a.ReleaseVolEnv,-12e3),s(o,a.KeyNumToVolEnvHold,0),s(o,a.KeyNumToVolEnvDecay,0),s(o,a.StartLoopAddrsCoarseOffset,0),s(o,a.KeyNum,-1),s(o,a.Velocity,-1),s(o,a.InitialAttenuation,0),s(o,a.EndLoopAddrsCoarseOffset,0),s(o,a.CoarseTune,0),s(o,a.FineTune,0),s(o,a.SampleModes,0),s(o,a.ScaleTuning,100),s(o,a.ExclusiveClass,0),s(o,a.OverridingRootKey,-1),o)},"./src/types/index.ts":function(r,t,n){n.r(t);var o=n("./src/types/bank.ts");for(var a in o)["default"].indexOf(a)<0&&function(h){n.d(t,h,function(){return o[h]})}(a);var s=n("./src/types/generator.ts");n.d(t,"GeneratorType",function(){return s.GeneratorType}),n.d(t,"DEFAULT_GENERATOR_VALUES",function(){return s.DEFAULT_GENERATOR_VALUES});var u=n("./src/types/instrument.ts");for(var a in u)["default","GeneratorType","DEFAULT_GENERATOR_VALUES"].indexOf(a)<0&&function(g){n.d(t,g,function(){return u[g]})}(a);var l=n("./src/types/key.ts");for(var a in l)["default","GeneratorType","DEFAULT_GENERATOR_VALUES"].indexOf(a)<0&&function(g){n.d(t,g,function(){return l[g]})}(a);var c=n("./src/types/metaData.ts");for(var a in c)["default","GeneratorType","DEFAULT_GENERATOR_VALUES"].indexOf(a)<0&&function(g){n.d(t,g,function(){return c[g]})}(a);var p=n("./src/types/modulator.ts");n.d(t,"ControllerType",function(){return p.ControllerType}),n.d(t,"ControllerPolarity",function(){return p.ControllerPolarity}),n.d(t,"ControllerDirection",function(){return p.ControllerDirection}),n.d(t,"ControllerPalette",function(){return p.ControllerPalette}),n.d(t,"Controller",function(){return p.Controller}),n.d(t,"TransformType",function(){return p.TransformType}),n.d(t,"DEFAULT_INSTRUMENT_MODULATORS",function(){return p.DEFAULT_INSTRUMENT_MODULATORS});var f=n("./src/types/preset.ts");for(var a in f)["default","GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS"].indexOf(a)<0&&function(g){n.d(t,g,function(){return f[g]})}(a);var d=n("./src/types/presetData.ts");for(var a in d)["default","GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS"].indexOf(a)<0&&function(g){n.d(t,g,function(){return d[g]})}(a);var y=n("./src/types/sample.ts");n.d(t,"SampleType",function(){return y.SampleType});var m=n("./src/types/zone.ts");for(var a in m)["default","GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","SampleType"].indexOf(a)<0&&function(g){n.d(t,g,function(){return m[g]})}(a)},"./src/types/instrument.ts":function(r,t){},"./src/types/key.ts":function(r,t){},"./src/types/metaData.ts":function(r,t){},"./src/types/modulator.ts":function(r,t,n){n.r(t),n.d(t,"ControllerType",function(){return o}),n.d(t,"ControllerPolarity",function(){return a}),n.d(t,"ControllerDirection",function(){return s}),n.d(t,"ControllerPalette",function(){return u}),n.d(t,"Controller",function(){return l}),n.d(t,"TransformType",function(){return c}),n.d(t,"DEFAULT_INSTRUMENT_MODULATORS",function(){return f});var o,a,s,u,l,c,p=n("./src/types/generator.ts");(function(d){d[d.Linear=0]="Linear",d[d.Concave=1]="Concave",d[d.Convex=2]="Convex",d[d.Switch=3]="Switch"})(o||(o={})),function(d){d[d.Unipolar=0]="Unipolar",d[d.Bipolar=1]="Bipolar"}(a||(a={})),function(d){d[d.Increasing=0]="Increasing",d[d.Decreasing=1]="Decreasing"}(s||(s={})),function(d){d[d.GeneralController=0]="GeneralController",d[d.MidiController=1]="MidiController"}(u||(u={})),function(d){d[d.NoController=0]="NoController",d[d.NoteOnVelocity=2]="NoteOnVelocity",d[d.NoteOnKeyNumber=3]="NoteOnKeyNumber",d[d.PolyPressure=10]="PolyPressure",d[d.ChannelPressure=13]="ChannelPressure",d[d.PitchWheel=14]="PitchWheel",d[d.PitchWheelSensitivity=16]="PitchWheelSensitivity",d[d.Link=127]="Link"}(l||(l={})),function(d){d[d.Linear=0]="Linear",d[d.Absolute=2]="Absolute"}(c||(c={}));var f=[{id:p.GeneratorType.InitialAttenuation,source:{type:o.Concave,polarity:a.Unipolar,direction:s.Decreasing,palette:u.GeneralController,index:l.NoteOnVelocity},value:960,valueSource:{type:o.Linear,polarity:a.Unipolar,direction:s.Increasing,palette:u.GeneralController,index:l.NoController},transform:c.Linear},{id:p.GeneratorType.InitialFilterFc,source:{type:o.Linear,polarity:a.Unipolar,direction:s.Decreasing,palette:u.GeneralController,index:l.NoteOnVelocity},value:-2400,valueSource:{type:o.Linear,polarity:a.Unipolar,direction:s.Increasing,palette:u.GeneralController,index:l.NoController},transform:c.Linear},{id:p.GeneratorType.VibLFOToPitch,source:{type:o.Linear,polarity:a.Unipolar,direction:s.Increasing,palette:u.GeneralController,index:l.ChannelPressure},value:50,valueSource:{type:o.Linear,polarity:a.Unipolar,direction:s.Increasing,palette:u.GeneralController,index:l.NoController},transform:c.Linear},{id:p.GeneratorType.VibLFOToPitch,source:{type:o.Linear,polarity:a.Unipolar,direction:s.Increasing,palette:u.MidiController,index:1},value:50,valueSource:{type:o.Linear,polarity:a.Unipolar,direction:s.Increasing,palette:u.GeneralController,index:l.NoController},transform:c.Linear},{id:p.GeneratorType.InitialAttenuation,source:{type:o.Concave,polarity:a.Unipolar,direction:s.Decreasing,palette:u.MidiController,index:7},value:960,valueSource:{type:o.Linear,polarity:a.Unipolar,direction:s.Increasing,palette:u.GeneralController,index:l.NoController},transform:c.Linear},{id:p.GeneratorType.InitialAttenuation,source:{type:o.Linear,polarity:a.Bipolar,direction:s.Increasing,palette:u.MidiController,index:10},value:1e3,valueSource:{type:o.Linear,polarity:a.Unipolar,direction:s.Increasing,palette:u.GeneralController,index:l.NoController},transform:c.Linear},{id:p.GeneratorType.InitialAttenuation,source:{type:o.Concave,polarity:a.Unipolar,direction:s.Decreasing,palette:u.MidiController,index:11},value:960,valueSource:{type:o.Linear,polarity:a.Unipolar,direction:s.Increasing,palette:u.GeneralController,index:l.NoController},transform:c.Linear},{id:p.GeneratorType.ReverbEffectsSend,source:{type:o.Linear,polarity:a.Unipolar,direction:s.Increasing,palette:u.MidiController,index:91},value:200,valueSource:{type:o.Linear,polarity:a.Unipolar,direction:s.Increasing,palette:u.GeneralController,index:l.NoController},transform:c.Linear},{id:p.GeneratorType.ChorusEffectsSend,source:{type:o.Linear,polarity:a.Unipolar,direction:s.Increasing,palette:u.MidiController,index:93},value:200,valueSource:{type:o.Linear,polarity:a.Unipolar,direction:s.Increasing,palette:u.GeneralController,index:l.NoController},transform:c.Linear},{id:p.GeneratorType.CoarseTune,source:{type:o.Linear,polarity:a.Bipolar,direction:s.Increasing,palette:u.GeneralController,index:l.PitchWheel},value:12700,valueSource:{type:o.Linear,polarity:a.Unipolar,direction:s.Increasing,palette:u.GeneralController,index:l.PitchWheelSensitivity},transform:c.Linear}]},"./src/types/preset.ts":function(r,t){},"./src/types/presetData.ts":function(r,t){},"./src/types/sample.ts":function(r,t,n){var o;n.r(t),n.d(t,"SampleType",function(){return o}),function(a){a[a.EOS=0]="EOS",a[a.Mono=1]="Mono",a[a.Right=2]="Right",a[a.Left=4]="Left",a[a.Linked=8]="Linked",a[a.RomMono=32769]="RomMono",a[a.RomRight=32770]="RomRight",a[a.RomLeft=32772]="RomLeft",a[a.RomLinked=32776]="RomLinked"}(o||(o={}))},"./src/types/zone.ts":function(r,t){},"./src/utils/buffer.ts":function(r,t,n){n.r(t),n.d(t,"getStringFromBuffer",function(){return o});var o=function(a){var s=new TextDecoder("utf8").decode(a),u=s.indexOf("\0");return(u===-1?s:s.slice(0,u)).trim()}},"./src/utils/index.ts":function(r,t,n){n.r(t);var o=n("./src/utils/buffer.ts");n.d(t,"getStringFromBuffer",function(){return o.getStringFromBuffer});var a=n("./src/utils/memoize.ts");n.d(t,"memoize",function(){return a.memoize})},"./src/utils/memoize.ts":function(r,t,n){n.r(t),n.d(t,"memoize",function(){return o});var o=function(a){var s={};return function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var p=JSON.stringify(l);if(p in s)return s[p];var f=a.apply(void 0,l);return s[p]=f,f}}}})})}(Sr)),Sr.exports}var Go=wu(),xu=V("<img width=120px height=120px src=./cat-node.jpg>");class Su{componentType=nn;ext;constructor(){this.ext={initAudioCtx:async(e,r)=>{const n=await fetch("./Thurston Waffles.sf2").then(m=>m.arrayBuffer()),o=new Go.SoundFont2(new Uint8Array(n)),a=o.presets[0];if(!a)throw new Error("Preset at index 0 not found.");const s=o.instruments[a.header.bagIndex];if(!s)throw new Error("No instrument found for preset at index 0");const u=(m,h)=>{for(const g of m.zones)if(g.keyRange!=null&&h>=g.keyRange.lo&&h<=g.keyRange.hi)return g.sample;return null};let l=60;const c=u(s,l);if(!c)throw new Error(`No sample found for note ${l} in preset 0.`);const p=c.header.sampleRate,f=c.data.length,d=new Float32Array(f);for(let m=0;m<f;m++)d[m]=c.data[m]/32768;const y=c.header.originalPitch;r.port.postMessage({type:"meowData",params:{meowOriginalPitch:y,meowSampleRate:p,meowData:d}})},generateInitOnceCode:({ctx:e})=>{e.insertGlobalCode(["let meowOriginalPitch = undefined;","let meowSampleRate = undefined;","let meowData = undefined;","let meowStepPerHz = undefined;"]),e.insertMessageHandlerCode("meowData",["meowOriginalPitch = params.meowOriginalPitch;","meowSampleRate = params.meowSampleRate;","meowData = params.meowData;",`meowStepPerHz = meowSampleRate / (sampleRate * ${261.625565});`])}}}create(e){return new Cu(e)}}const Wo=new Su;class Cu{type=Wo;nodeParams;inputPins;outputPins;ui;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"frequency",source:()=>r.frequency,setSource:n=>t("frequency",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ui=S(()=>()=>xu()),this.ext={generateCode:({ctx:n,inputAtoms:o})=>{let a=o.get("frequency");if(a==null)return[];let s=n.allocField("0.0"),u=n.allocField("0.0"),l=new Map,c=n.allocField("0.0"),p=n.allocField("0");return n.insertCode([`if (meowData == undefined || ${a} != ${s}) {`,`  ${u} = 0.0;`,`  ${c} = 0.0;`,`  ${s} = ${a};`,"} else {",`  if (${c} >= meowData.length) {`,`    ${u} = 0.0;`,"  } else {",`    ${p} = Math.floor(${c});`,`    let value = meowData[${p}];`,`    ${u} = value;`,`    let step = ${a} * meowStepPerHz;`,`    ${c} += step;`,"  }","}"]),l.set("out",u),[{outputAtoms:l}]}}}}const Pu=G({a:z(I),b:z(I),out:Q(I)}),Ho=new Z({typeName:"Mult",typeSchema:Pu});class _u{componentType=Ho;ext={};create(e){return new Tu(e)}}const Ko=new _u;class Tu{type=Ko;nodeParams;inputPins;outputPins;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"a",source:()=>r.a,setSource:n=>t("a",n)},{name:"b",source:()=>r.b,setSource:n=>t("b",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext={generateCode:({ctx:n,inputAtoms:o})=>{let a=o.get("a");if(a==null)return[];let s=o.get("b");if(s==null)return[];let u=n.allocField("0.0");n.insertCode([`${u} = ${a} * ${s}`]);let l=new Map;return l.set("out",u),[{outputAtoms:l}]}}}}const $u=G({out:Q(I)}),Yo=new Z({typeName:"NoiseWave",typeSchema:$u});class Iu{componentType=Yo;ext={};create(e){return new Eu(e)}}const Jo=new Iu;class Eu{type=Jo;nodeParams;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}])}}const Ru=G({entity:et(),note:et(),out:Q(I)}),Zo=new Z({typeName:"Note",typeSchema:Ru});class Mu{componentType=Zo;ext={};create(e){return new Au(e)}}const sn=new Mu;class Au{type=sn;nodeParams;outputPins;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:a=>t("out",a)}]);const n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],o=261.63;this.ext={generateCode:({ctx:a,inputAtoms:s})=>{let u=n.indexOf(r.note);if(u==-1)return[];let l=o*Math.pow(2,u/12),c=a.allocField("0.0"),p=new Map;return p.set("out",c),a.insertCode([`if (noteDown["${r.entity}/${r.note}"]) {`,`  ${c} = ${l};`,"} else {",`  ${c} = 0.0;`,"}"]),[{outputAtoms:p}]}}}}var Nu=V("<input class=input type=text size=8>");let Fu=class{componentType=Rt;ext={};create(e){return new Ou(e)}};const Xo=new Fu;let Ou=class{type=Xo;nodeParams;outputPins;ui;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ui=S(()=>()=>{let[n,o]=Se({valueText:ie(()=>r.value.toFixed(3))});return oe(ae(()=>n.valueText,()=>{let a=Number.parseFloat(n.valueText);Number.isNaN(a)||t("value",a)},{defer:!0})),(()=>{var a=Nu();return a.$$input=s=>{o("valueText",s.currentTarget.value)},X(()=>a.value=n.valueText),a})()}),this.ext={generateCode:({ctx:n})=>{let o=new Map;return o.set("out",`${r.value}`),[{outputAtoms:o}]}}}};xe(["input"]);const Du=G({out:Q(I)}),Qo=new Z({typeName:"PianoKeys",typeSchema:Du});var ju=V("<div class=piano>"),Lu=V("<div class=white-key>"),zu=V("<div class=black-key>");const Uu=i=>{const e=[{name:"C",type:"white"},{name:"C#",type:"black"},{name:"D",type:"white"},{name:"D#",type:"black"},{name:"E",type:"white"},{name:"F",type:"white"},{name:"F#",type:"black"},{name:"G",type:"white"},{name:"G#",type:"black"},{name:"A",type:"white"},{name:"A#",type:"black"},{name:"B",type:"white"}],r=150,t=80;let n,o=new ct,a=new qe;return(()=>{var s=ju();s.$$pointermove=l=>{if(!o.get(l.pointerId))return;let c=n.getBoundingClientRect();o.set(l.pointerId,L.create(l.clientX-c.left,l.clientY-c.top))},s.addEventListener("pointercancel",l=>{o.delete(l.pointerId),n.releasePointerCapture(l.pointerId)}),s.$$pointerup=l=>{o.delete(l.pointerId),n.releasePointerCapture(l.pointerId)},s.$$pointerdown=l=>{let c=n.getBoundingClientRect();o.set(l.pointerId,L.create(l.clientX-c.left,l.clientY-c.top)),n.setPointerCapture(l.pointerId)};var u=n;return typeof u=="function"?ge(u,s):n=s,s.style.setProperty("display","flex"),s.style.setProperty("flex-direction","row"),s.style.setProperty("overflow-x","auto"),s.style.setProperty("user-select","none"),s.style.setProperty("touch-action","none"),K(s,T(Ge,{each:e,children:l=>{let[c,p]=J();l.type=="black"&&oe(()=>{let d=c();d!=null&&(a.add(d),ke(()=>a.delete(d)))});let f=S(()=>{let d=c();if(d==null)return!1;let y=n.getBoundingClientRect(),m=d.getBoundingClientRect();for(let h of o.values()){let g=y.left+h.x-m.left,b=y.top+h.y-m.top;if(0<g&&g<m.width&&0<b&&b<m.height){if(l.type=="white")for(let k of a){let v=k.getBoundingClientRect(),x=y.left+h.x-v.left,w=y.top+h.y-v.top;if(0<x&&x<v.width&&0<w&&w<v.height)return!1}return!0}}return!1});return oe(ae(f,d=>{d?i.onNoteOn(l.name):i.onNoteOff(l.name)},{defer:!0})),T(zr,{get children(){return[T(ut,{get when(){return l.type=="white"},get children(){var d=Lu(),y=p;return typeof y=="function"?ge(y,d):p=d,d.style.setProperty("width","50px"),d.style.setProperty("pointer-events","none"),X(m=>{var h=!!f(),g=`${r+(f()?2:0)}px`;return h!==m.e&&d.classList.toggle("pressed",m.e=h),g!==m.t&&((m.t=g)!=null?d.style.setProperty("height",g):d.style.removeProperty("height")),m},{e:void 0,t:void 0}),d}}),T(ut,{get when(){return l.type=="black"},get children(){var d=zu(),y=p;return typeof y=="function"?ge(y,d):p=d,d.style.setProperty("margin-left","-16px"),d.style.setProperty("margin-right","-14px"),d.style.setProperty("width","30px"),d.style.setProperty("pointer-events","none"),X(m=>{var h=!!f(),g=`${t+(f()?2:0)}px`;return h!==m.e&&d.classList.toggle("pressed",m.e=h),g!==m.t&&((m.t=g)!=null?d.style.setProperty("height",g):d.style.removeProperty("height")),m},{e:void 0,t:void 0}),d}})]}})}})),s})()};xe(["pointerdown","pointerup","pointermove"]);class Bu{componentType=Qo;ext;constructor(){this.ext={generateInitOnceCode:({ctx:e})=>{e.insertGlobalCode(["let noteDown = {};"]),e.insertMessageHandlerCode("NoteOn",["noteDown[params.id] = true;"]),e.insertMessageHandlerCode("NoteOff",["noteDown[params.id] = false;"])}}}create(e){return new qu(e)}}const ea=new Bu;class qu{type=ea;nodeParams;outputPins;ui;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:s=>t("out",s)}]);let[n,o]=J();this.ui=S(()=>()=>T(Uu,{onNoteOn:s=>{let u=n();u?.port.postMessage({type:"NoteOn",params:{id:`${e.entity}/${s}`}})},onNoteOff:s=>{let u=n();u?.port.postMessage({type:"NoteOff",params:{id:`${e.entity}/${s}`}})}}));const a=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];this.ext={macro:(s,u)=>{let l=[],c=[...s.outputs.out];for(let f of c){l.push(f);for(let d=0;d<a.length-1;++d){let y=Oc(f.node,u);l.push({node:y,pin:f.pin})}}let p=0;for(let{node:f,pin:d}of l){let[y,m]=Se({entity:e.entity,note:a[p],out:[]}),g={node:sn.create({entity:st(),state:y,setState:m}),space:()=>fe.identity,setSpace:()=>{},setRenderSizeAccessor:()=>{},setInputPinPositionMapAccessor:()=>{},setOutputPinPositionMapAccessor:()=>{},renderSize:()=>{},inputPinPositionMap:()=>{},outputPinPositionMap:()=>{}},b={id:0,inputs:{},outputs:{out:[{node:f,pin:d}]},height:0,node:g};u(b),f.inputs[d]={node:b,pin:"out"},++p,p>=a.length&&(p=0)}s.outputs.out=[]},generateCode:({ctx:s})=>{{let u=[];for(let l of a)u.push(`noteDown["${e.entity}/${l}"] = false;`);s.insertGlobalCode(u)}return[{outputAtoms:new Map}]},init:async s=>{o(s)}}}}const Vu=G({timeToZero:z(I),out:Q(I)}),ta=new Z({typeName:"Release",typeSchema:Vu});class Gu{componentType=ta;ext={};create(e){return new Wu(e)}}const ra=new Gu;class Wu{type=ra;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"timeToZero",source:()=>r.timeToZero,setSource:n=>t("timeToZero",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}])}}const Hu=G({frequency:z(I),amplitude:z(I),centre:z(I),out:Q(I)}),na=new Z({typeName:"SawWave",typeSchema:Hu});class Ku{componentType=na;ext={};create(e){return new Yu(e)}}const ia=new Ku;class Yu{type=ia;nodeParams;inputPins;outputPins;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"frequency",source:()=>r.frequency,setSource:n=>t("frequency",n)},{name:"amplitude",source:()=>r.amplitude,setSource:n=>t("amplitude",n)},{name:"centre",source:()=>r.centre,setSource:n=>t("centre",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext={generateCode:({ctx:n,inputAtoms:o})=>{let a=o.get("frequency");if(a==null)return[];let s=o.get("amplitude")??"1.0",u=o.get("centre")??"0.0",l=new Map,c=n.allocField("0.0"),p=n.allocField("0.0");return n.insertCode([`${c} += (2 * Math.PI * ${a}) / sampleRate;`,`${p} = ${s} * ((${c} / Math.PI) - 1.0) + ${u};`,`${c} %= 2 * Math.PI;`]),l.set("out",p),[{outputAtoms:l}]}}}}var Ju=V("<label><span style=color:black;padding-right:5px;>Id:</span><input class=input type=text size=8>");class Zu{componentType=tn;ext={};create(e){return new Xu(e)}}const oa=new Zu;class Xu{type=oa;nodeParams;inputPins;outputPins;ui;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"prev",source:()=>r.prev,setSource:n=>t("prev",n),isEffectPin:!0},{name:"value",source:()=>r.value,setSource:n=>t("value",n)}]),this.outputPins=S(()=>[{name:"next",sinks:()=>r.next,setSinks:n=>t("next",n),isEffectPin:!0}]),this.ui=S(()=>()=>(()=>{var n=Ju(),o=n.firstChild,a=o.nextSibling;return a.$$input=s=>{t("id",s.currentTarget.value)},X(()=>a.value=r.id),n})()),this.ext={generateCode:({ctx:n,inputAtoms:o,codeGenNodeId:a})=>{let s=o.get("prev");if(s==null)return[];let u=o.get("value");if(u==null)return[];let l=`this.n_${a}_next`;n.addDeclToExistingForField(l,`{\r
    prev: null,\r
    next: null,\r
    update: null, /* () => boolean */\r
    onDone: [], /* (() => void)[] */\r
  }`),n.insertConstructorCode([`${s}.onDone.push(() => {`,`  this.insertRunningEffect(${l});`,"});",`${l}.update = () => {`,`  this.variables["${r.id}"] = ${u};`,"  return true;","};"]);let c=`${l}`,p=new Map;return p.set("next",c),[{outputAtoms:p}]}}}}xe(["input"]);class Qu{componentType=Xr;ext={};create(e){return new ed(e)}}const aa=new Qu;class ed{type=aa;nodeParams;inputPins;outputPins;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"frequency",source:()=>r.frequency,setSource:n=>t("frequency",n)},{name:"amplitude",source:()=>r.amplitude,setSource:n=>t("amplitude",n)},{name:"centre",source:()=>r.centre,setSource:n=>t("centre",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext={generateCode:({ctx:n,inputAtoms:o})=>{let a=o.get("frequency");if(a==null)return[];let s=o.get("amplitude")??"1.0",u=o.get("centre")??"0.0",l=new Map,c=n.allocField("0.0"),p=n.allocField("0.0");return n.insertCode([`${c} += (2 * Math.PI * ${a}) / sampleRate;`,`${p} = ${s} * Math.sin(${c}) + ${u};`,`${c} %= 2 * Math.PI;`]),l.set("out",p),[{outputAtoms:l}]}}}}var td=V('<i class="fa-solid fa-volume-high">');class rd{componentType=on;ext={};create(e){return new nd(e)}}const sa=new rd;class nd{type=sa;nodeParams;inputPins;ui;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"in",source:()=>r.in,setSource:n=>t("in",n)}]),this.ui=S(()=>()=>(()=>{var n=td();return n.style.setProperty("font-size","24px"),n.style.setProperty("color","green"),n})()),this.ext={generateCode:({ctx:n,inputAtoms:o})=>{let a=o.get("in");return a==null?[]:(n.insertCode([`result += ${a}`]),[{outputAtoms:new Map}])}}}}const id=G({frequency:z(I),amplitude:z(I),centre:z(I),out:Q(I)}),la=new Z({typeName:"SquareWave",typeSchema:id});class od{componentType=la;ext={};create(e){return new ad(e)}}const ca=new od;class ad{type=ca;nodeParams;inputPins;outputPins;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"frequency",source:()=>r.frequency,setSource:n=>t("frequency",n)},{name:"amplitude",source:()=>r.amplitude,setSource:n=>t("amplitude",n)},{name:"centre",source:()=>r.centre,setSource:n=>t("centre",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext={generateCode:({ctx:n,inputAtoms:o})=>{let a=o.get("frequency");if(a==null)return[];let s=o.get("amplitude")??"1.0",u=o.get("centre")??"0.0",l=new Map,c=n.allocField("0.0"),p=n.allocField("0.0");return n.insertCode([`${c} += (2 * Math.PI * ${a}) / sampleRate;`,`${p} = ${s} * (${c} < Math.PI ? -1 : 1) + ${u};`,`${c} %= 2 * Math.PI;`]),l.set("out",p),[{outputAtoms:l}]}}}}class sd{componentType=en;ext={};create(e){return new ld(e)}}const ua=new sd;class ld{type=ua;nodeParams;outputPins;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.outputPins=S(()=>[{name:"next",sinks:()=>r.next,setSinks:n=>t("next",n),isEffectPin:!0}]),this.ext={generateCode:({ctx:n,inputAtoms:o,codeGenNodeId:a})=>{let s=`this.n_${a}_next`;n.addDeclToExistingForField(s,`{\r
    prev: null,\r
    next: null,\r
    update: null, /* () => boolean */\r
    onDone: [], /* (() => void)[] */\r
  }`),n.insertConstructorCode([`${s}.update = () => true;`,`this.insertRunningEffect(${s});`]);let u=`${s}`,l=new Map;return l.set("next",u),[{outputAtoms:l}]}}}}var cd=V("<label><span style=color:black;padding-right:5px;>Id:</span><input class=input type=text size=8>");class ud{componentType=rn;ext={};create(e){return new dd(e)}}const da=new ud;class dd{type=da;nodeParams;outputPins;ui;ext;constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.outputPins=S(()=>[{name:"value",sinks:()=>r.value,setSinks:n=>t("value",n)}]),this.ui=S(()=>()=>(()=>{var n=cd(),o=n.firstChild,a=o.nextSibling;return a.$$input=s=>{t("id",s.currentTarget.value)},X(()=>a.value=r.id),n})()),this.ext={generateCode:({ctx:n,inputAtoms:o})=>{n.insertConstructorCode([`this.variables["${r.id}"] = 0.0;`]);let a=`this.variables["${r.id}"]`,s=new Map;return s.set("value",a),[{outputAtoms:s}]}}}}xe(["input"]);const pa=new $o;pa.registerNodeTypes([jo,zo,Uo,qo,Vo,Wo,Ko,Jo,sn,Xo,ea,ra,ia,oa,aa,sa,ca,ua,da]);const pd=new Zr([..._o.componentTypes,Do,Lo,Qr,Bo,an,nn,Ho,Yo,Zo,Rt,Qo,ta,na,tn,Xr,on,la,en,ve,rn]);var fd=V("<div><div>"),hd=V('<button class="btn btn-primary">Import Midi<input type=file hidden>'),md=V("<label class=label style=margin-left:5px;><input type=checkbox class=checkbox>Show Code"),gd=V("<label class=label style=margin-left:5px;><input type=checkbox class=checkbox>Make Sound"),yd=V("<div><pre>");const bd=i=>{let[e,r]=Br(i,["world"]),[t,n]=Se({showCode:!1,makeSound:!1}),[o,a]=J();setTimeout(()=>{let c=e.world;c.entities().length==0&&c.createEntity([Xr.create({frequency:void 0,amplitude:void 0,centre:void 0,out:[]}),ve.create({transform:fe.create(L.create(50,50),pe.rot0)})])});let s=S(()=>{let c=o();if(c!=null&&(t.showCode||t.makeSound))return Dc({nodesSystem:c})});oe(ae([()=>t.makeSound,s],([c,p])=>{let f=o();if(f==null||!c||p==null)return;let d=URL.createObjectURL(new Blob([p],{type:"text/javascript"})),y=new AudioContext;(async()=>{await y.audioWorklet.addModule(d);let m=new AudioWorkletNode(y,"compiled-graph-audio-worklet-processor"),h=new Set;for(let g of f.nodes()){let b=g.node.type;h.has(b.componentType.typeName)||(h.add(b.componentType.typeName),await b.ext.initAudioCtx?.(y,m))}for(let g of f.nodes())await g.node.ext.init?.(m);m.connect(y.destination)})(),ke(()=>{(async()=>(await y.close(),URL.revokeObjectURL(d)))()})}));let[u,l]=J();return(()=>{var c=fd(),p=c.firstChild;return jr(c,r,!1,!0),p.style.setProperty("width","100%"),p.style.setProperty("height","100%"),p.style.setProperty("display","flex"),p.style.setProperty("flex-direction","column"),p.style.setProperty("position","relative"),K(p,T(Ro,{style:{"flex-grow":"1"},onInit:f=>{a(f.nodesSystem)},componentRegistry:pd,nodeRegistry:pa,get world(){return e.world},get toolbar(){return[(()=>{var f=hd(),d=f.firstChild,y=d.nextSibling;f.$$click=()=>{let h=u();h?.click()},y.$$input=h=>{let g=h.currentTarget.files;if(g==null||g.length!=1)return;let b=g[0];nu(e.world,b),h.currentTarget.value=""};var m=l;return typeof m=="function"?ge(m,y):l=y,f})(),(()=>{var f=md(),d=f.firstChild;return d.addEventListener("change",y=>n("showCode",y.currentTarget.checked)),X(()=>d.checked=t.showCode),f})(),(()=>{var f=gd(),d=f.firstChild;return d.addEventListener("change",y=>n("makeSound",y.currentTarget.checked)),X(()=>d.checked=t.makeSound),f})()]}}),null),K(p,T(ne,{get when(){return S(()=>!!t.showCode)()?s():void 0},children:f=>(()=>{var d=yd(),y=d.firstChild;return d.style.setProperty("position","absolute"),d.style.setProperty("right","0"),d.style.setProperty("top","0"),d.style.setProperty("bottom","0"),d.style.setProperty("overflow","auto"),d.style.setProperty("width","50%"),X(()=>y.innerText=f()),d})()}),null),c})()};xe(["click","input"]);const vd=""+new URL("music-audio-worklet-processor-D_ZxFmGc.js",import.meta.url).href,kd=`attribute vec4 aVertexPosition;

uniform mat4 uModelViewMatrix;

void main(void) {
  gl_Position = uModelViewMatrix * aVertexPosition;
}
`,wd=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif

uniform float time;
uniform float uOffsetY;
uniform vec2 resolution;
uniform float uFocalLength;

float sdRoundBox(vec3 p, vec3 b, float r){
  vec3 q = abs(p) - b + r;
  return length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0) - r;
}

float map(vec3 p) {
  p.x += 700.0;
  float b = 100.0*7.0/12.0;
  vec3 p3 = p;
  vec3 p2 = p;
  p.x = mod(p.x + 100.0, 200.0) - 100.0;
  float i = mod(floor((p2.x) / (2.0*b)) - 6.0,12.0);
  p2.x = mod(p2.x, b*2.0);
  bool skipB = false;
  float w = 52.0 * 200.0;
  if ( i == 0.0 || i == 2.0 ||
       i == 4.0 || i == 6.0 ||
       i == 7.0 || i == 9.0 || i == 11.0 ||
       p3.x < -0.5*w+900.0 ||
       p3.x > 0.5*w+600.0
  ) {
    skipB = true;
  }
  float d3;
  float d1 = sdRoundBox(p, vec3(100,600,100), 30.0);
  if (skipB) {
    d3 = d1;
  } else {
    d3 = min(
      d1,
      sdRoundBox(p2 + vec3(-b,-180,-150), vec3(100*7/12,420,50), 20.0)
    );
  }
  return max(d3,
    max(
      p3.x - 0.5 * w - 700.0,
      -p3.x - 0.5 * w + 700.0
    )
  );
}

bool march(vec3 ro, vec3 rd, out float t) {
  vec3 p = ro;
  t = 0.0;
  for (int i = 0; i < 20; ++i) {
    vec3 p = ro + rd*t;
    float d = map(p);
    if (abs(d) < 1.0) {
      return true;
    }
    t += d;
  }
  return false;
}

vec3 normal(vec3 p) {
  float d = 0.001;
  float mp = map(p);
  float dx = map(p + vec3(d,0,0)) - mp;
  float dy = map(p + vec3(0,d,0)) - mp;
  float dz = map(p + vec3(0,0,d)) - mp;
  return normalize(vec3(dx,dy,dz));
}

void main(void) {
  float fl = uFocalLength;
  float d = 52.0 * 200.0 * fl / resolution.x;
  float mx = max(resolution.x, resolution.y);
  vec2 uv = gl_FragCoord.xy / mx;
  vec3 w = normalize(vec3(0, -1, 3));
  vec3 ro = w * d + vec3(0.0, -600.0, 50.0);
  vec3 u = normalize(cross(vec3(0,1,0),w));
  vec3 v = cross(w,u);
  vec3 rd = normalize(
    (gl_FragCoord.x - 0.5 * resolution.x) * u +
    (gl_FragCoord.y - 0.5 * resolution.y) * v +
    -fl * w
  );
  ro -= uOffsetY * v;
  float t = 0.0;
  bool hit = march(ro, rd, t);
  if (!hit) {
    gl_FragColor = vec4(0.2, 0.2, 0.2, 1.0);
    return;
  }
  vec3 p = ro + rd*t;
  vec3 n = normal(p);
  float s = dot(n,normalize(vec3(1,1,1))) + 0.2;
  if (p.z > 101.0) {
    s *= 0.5;
  }
  gl_FragColor = vec4(s,s,s,1.0);
}
`;var xd=V('<div><div><button class="btn btn-primary">Import Midi</button><input type=file hidden><button class="btn btn-primary">Run</button></div><div><canvas>');const Sd=50,Yt=1e4,Cd=i=>{let[e,r]=J(),[t,n]=J(),[o,a]=J();Te(ae([e,t],([m,h])=>{if(m==null||h==null)return;let g=m.getBoundingClientRect();h.width=g.width*window.devicePixelRatio,h.height=g.height*window.devicePixelRatio,h.style.setProperty("width",`${g.width}px`),h.style.setProperty("height",`${g.height}px`),a(h.getContext("webgl")??void 0)}));let s=S(ae([o,t],([m,h])=>{if(m!=null&&h!=null)return $d(m,h)})),[u,l]=J(),c=!1,p=!0,f=0,d=m=>{let h=o();if(h==null)return;let g=s();if(g==null||(p&&(f=m,p=!1),!c))return;let b=m-f;g.time=b,Td(g),Id(h,g),requestAnimationFrame(d)},y=async()=>{let m=s();if(m==null)return;let[h,g]=await Md(),b=[],k=m.notesHead,v=0;for(;k!=null;){let x=v++;b.push({id:x,time:k.startTime*.001,note:k.note,type:"On"}),b.push({id:x,time:(k.startTime+k.holdTime)*.001,note:k.note,type:"Off"}),k=k.next}b.sort((x,w)=>{let P=x.time-w.time;return P!=0||(P=x.note-w.note,P!=0)?P:x.type==w.type?0:x.type=="Off"?-1:1}),g.port.postMessage({type:"musicData",params:{noteEvents:b}}),c=!0,p=!0,requestAnimationFrame(d)};return(()=>{var m=xd(),h=m.firstChild,g=h.firstChild,b=g.nextSibling,k=b.nextSibling,v=h.nextSibling,x=v.firstChild;m.style.setProperty("flex-grow","1"),m.style.setProperty("display","flex"),m.style.setProperty("flex-direction","column"),m.style.setProperty("overflow","hidden"),g.$$click=()=>{u()?.click()},b.addEventListener("change",_=>{let R=s();if(R==null)return;let $=_.currentTarget.files;if($==null||$.length==0)return;let O=$[0];Pd(R,O),_.currentTarget.value=""});var w=l;typeof w=="function"?ge(w,b):l=b,k.$$click=()=>y();var P=r;typeof P=="function"?ge(P,v):r=v,v.style.setProperty("flex-grow","1");var C=n;return typeof C=="function"?ge(C,x):n=x,m})()};async function Pd(i,e){let r=new Oo.Midi(await e.arrayBuffer()),t=[];for(let n of r.tracks){let o=Rd();for(let a of n.notes){let s={startTime:a.time*1e3,holdTime:a.duration*1e3,note:a.midi,colourR:o.r,colourG:o.g,colourB:o.b,colourA:1,isAlive:!1,prev:void 0,next:void 0};s.prev=s,t.push(s)}}t.sort((n,o)=>n.startTime-o.startTime);for(let n of t)_d(i,n)}function _d(i,e){if(i.notesHead==null)i.notesHead=i.notesTail=e;else{let r=i.notesTail;r.next=e,e.prev=r,i.notesTail=e}}function Td(i){let e=i.time-i.height/i.fallSpeed,r=i.time,t=i.visibleNotesEnd?.next??i.notesHead;for(;t!=null&&!(t.startTime>=r);)i.visibleNotesEnd==null?i.visibleNotesStart=i.visibleNotesEnd=t:i.visibleNotesEnd=t,i.numVisibleNotes++,t=t.next;for(t=i.visibleNotesStart;;){if(t==null){i.numVisibleNotes=0,i.visibleNotesStart=i.visibleNotesEnd=void 0;break}if(t.startTime+t.holdTime<=e){i.numVisibleNotes--,t=t.next,i.visibleNotesStart=t;continue}break}}function $d(i,e){const r=.5*e.height/Math.tan(.5*Sd*Math.PI/180);let t={width:e.width,height:e.height,time:0,fallSpeed:.5,maxNotes:Yt,numNotes:0,notesVertices:new Float32Array(Yt*8*6),notesGLVertexBuffer:i.createBuffer(),notesHead:void 0,notesTail:void 0,freeNotesHead:void 0,freeNotesTail:void 0,visibleNotesStart:void 0,visibleNotesEnd:void 0,numVisibleNotes:0,program:void 0,positionLocation:-1,colourLocation:-1,textureCoordLocation:-1,pianoVertices:new Float32Array(12),pianoGLVertexBuffer:i.createBuffer(),pianoProgram:void 0,pianoPositionLocation:-1};for(let h=0,g=0;h<Yt;++h)t.notesVertices[g+6]=0,t.notesVertices[g+7]=0,g+=8,t.notesVertices[g+6]=1,t.notesVertices[g+7]=0,g+=8,t.notesVertices[g+6]=1,t.notesVertices[g+7]=1,g+=8,t.notesVertices[g+6]=0,t.notesVertices[g+7]=0,g+=8,t.notesVertices[g+6]=1,t.notesVertices[g+7]=1,g+=8,t.notesVertices[g+6]=0,t.notesVertices[g+7]=1,g+=8;const a=hi(i,`
    attribute vec4 aVertexPosition;
    attribute vec4 aColour;
    attribute vec2 aTextureCoord;

    uniform mat4 uModelViewMatrix;

    varying highp vec4 vColour;
    varying highp vec2 vTextureCoord;

    void main(void) {
        gl_Position = uModelViewMatrix * aVertexPosition;
        vTextureCoord = aTextureCoord;
        vColour = aColour;
    }
  `,`
    varying highp vec4 vColour;
    varying highp vec2 vTextureCoord;

    void main(void) {
        gl_FragColor = vColour;
    }
  `);if(a==null)return;const s=hi(i,kd,wd);if(s==null)return;t.program=a,t.pianoProgram=s,i.useProgram(a);const u=i.getUniformLocation(a,"uModelViewMatrix");function l(h,g,b,k){var v=-1,x=1,w=g-h,P=k-b,C=x-v;return[2/w,0,0,0,0,2/P,0,0,0,0,-2/C,0,-(g+h)/w,-(k+b)/P,-(x+v)/C,1]}const c=new Float32Array(l(0,t.width,0,t.height));i.uniformMatrix4fv(u,!1,c),t.positionLocation=i.getAttribLocation(a,"aVertexPosition"),t.colourLocation=i.getAttribLocation(a,"aColour"),t.textureCoordLocation=i.getAttribLocation(a,"aTextureCoord"),i.bindBuffer(i.ARRAY_BUFFER,t.notesGLVertexBuffer),i.bufferData(i.ARRAY_BUFFER,t.notesVertices,i.DYNAMIC_DRAW),i.vertexAttribPointer(t.positionLocation,2,i.FLOAT,!1,8*4,0*4),i.vertexAttribPointer(t.colourLocation,4,i.FLOAT,!1,8*4,4*4),i.vertexAttribPointer(t.textureCoordLocation,2,i.FLOAT,!1,8*4,6*4),i.useProgram(s);const p=i.getUniformLocation(s,"uModelViewMatrix");i.uniformMatrix4fv(p,!1,c);const f=i.getUniformLocation(s,"uFocalLength");i.uniform1f(f,r);const d=i.getUniformLocation(s,"resolution"),y=i.getUniformLocation(s,"uOffsetY");let m;{let h=10400*r/t.width,g=-1,b=3,k=Math.sqrt(g*g+b*b);g/=k,b/=k;let v=b,x=-g,w=g*h-600,P=b*h+50,C=(-600-w)*-g+(-50-P)*-b,_=C*-.5*t.height/r,R=C,$=_+1200*v+400*-g,O=R+1200*x+400*-b,D=_+200*-g,M=_*r/R,E=$*r/O;m=Math.abs(E-M),i.uniform1f(y,D)}return i.uniform2f(d,t.width,t.height),t.pianoPositionLocation=i.getAttribLocation(s,"aVertexPosition"),t.pianoVertices[0]=0,t.pianoVertices[1]=0,t.pianoVertices[2]=t.width,t.pianoVertices[3]=0,t.pianoVertices[4]=t.width,t.pianoVertices[5]=m,t.pianoVertices[6]=0,t.pianoVertices[7]=0,t.pianoVertices[8]=t.width,t.pianoVertices[9]=m,t.pianoVertices[10]=0,t.pianoVertices[11]=m,i.bindBuffer(i.ARRAY_BUFFER,t.pianoGLVertexBuffer),i.bufferData(i.ARRAY_BUFFER,t.pianoVertices,i.DYNAMIC_DRAW),i.vertexAttribPointer(t.pianoPositionLocation,2,i.FLOAT,!1,0,0),i.viewport(0,0,e.width,e.height),t}function Id(i,e){if(e.program==null||e.pianoProgram==null)return;let r=0,t=e.visibleNotesStart,n=0,o=e.width/88;for(i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);t!=e.visibleNotesEnd?.next&&t!=null;){let a=0;for(;t!=e.visibleNotesEnd?.next&&t!=null;){let s=n+(t.note-21)*o,u=e.height-(e.time-t.startTime)*e.fallSpeed,l=s+o,c=u,p=l,f=c+t.holdTime*e.fallSpeed,d=s,y=f;if(e.notesVertices[r+0]=s,e.notesVertices[r+1]=u,e.notesVertices[r+2]=t.colourR,e.notesVertices[r+3]=t.colourG,e.notesVertices[r+4]=t.colourB,e.notesVertices[r+5]=t.colourA,r+=8,e.notesVertices[r+0]=l,e.notesVertices[r+1]=c,e.notesVertices[r+2]=t.colourR,e.notesVertices[r+3]=t.colourG,e.notesVertices[r+4]=t.colourB,e.notesVertices[r+5]=t.colourA,r+=8,e.notesVertices[r+0]=p,e.notesVertices[r+1]=f,e.notesVertices[r+2]=t.colourR,e.notesVertices[r+3]=t.colourG,e.notesVertices[r+4]=t.colourB,e.notesVertices[r+5]=t.colourA,r+=8,e.notesVertices[r+0]=s,e.notesVertices[r+1]=u,e.notesVertices[r+2]=t.colourR,e.notesVertices[r+3]=t.colourG,e.notesVertices[r+4]=t.colourB,e.notesVertices[r+5]=t.colourA,r+=8,e.notesVertices[r+0]=p,e.notesVertices[r+1]=f,e.notesVertices[r+2]=t.colourR,e.notesVertices[r+3]=t.colourG,e.notesVertices[r+4]=t.colourB,e.notesVertices[r+5]=t.colourA,r+=8,e.notesVertices[r+0]=d,e.notesVertices[r+1]=y,e.notesVertices[r+2]=t.colourR,e.notesVertices[r+3]=t.colourG,e.notesVertices[r+4]=t.colourB,e.notesVertices[r+5]=t.colourA,r+=8,t=t.next,++a,a>=Yt)break}a!=null&&(i.useProgram(e.program),i.bindBuffer(i.ARRAY_BUFFER,e.notesGLVertexBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,e.notesVertices.subarray(0,a*8*6)),i.vertexAttribPointer(e.positionLocation,2,i.FLOAT,!1,8*4,0*4),i.vertexAttribPointer(e.colourLocation,4,i.FLOAT,!1,8*4,4*4),i.vertexAttribPointer(e.textureCoordLocation,2,i.FLOAT,!1,8*4,6*4),i.enableVertexAttribArray(e.positionLocation),i.enableVertexAttribArray(e.colourLocation),i.enableVertexAttribArray(e.textureCoordLocation),i.drawArrays(i.TRIANGLES,0,a*6),i.disableVertexAttribArray(e.positionLocation),i.disableVertexAttribArray(e.colourLocation),i.disableVertexAttribArray(e.textureCoordLocation))}i.useProgram(e.pianoProgram),i.bindBuffer(i.ARRAY_BUFFER,e.pianoGLVertexBuffer),i.vertexAttribPointer(e.pianoPositionLocation,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(e.pianoPositionLocation),i.drawArrays(i.TRIANGLES,0,6),i.disableVertexAttribArray(e.pianoPositionLocation)}function fi(i,e,r){const t=i.createShader(e);if(t!=null){if(i.shaderSource(t,r),i.compileShader(t),!i.getShaderParameter(t,i.COMPILE_STATUS)){console.error("An error occurred compiling the shaders: "+i.getShaderInfoLog(t)),i.deleteShader(t);return}return t}}function hi(i,e,r){const t=fi(i,i.VERTEX_SHADER,e),n=fi(i,i.FRAGMENT_SHADER,r);if(t==null||n==null)return;const o=i.createProgram();if(i.attachShader(o,t),i.attachShader(o,n),i.linkProgram(o),!i.getProgramParameter(o,i.LINK_STATUS)){console.error("Unable to initialize the shader program: "+i.getProgramInfoLog(o));return}return o}function Ed(i,e,r){let t,n,o;const a=Math.floor(i*6),s=i*6-a,u=r*(1-e),l=r*(1-s*e),c=r*(1-(1-s)*e);switch(a%6){case 0:t=r,n=c,o=u;break;case 1:t=l,n=r,o=u;break;case 2:t=u,n=r,o=c;break;case 3:t=u,n=l,o=r;break;case 4:t=c,n=u,o=r;break;case 5:t=r,n=u,o=l;break;default:t=0,n=0,o=0;break}return{r:t,g:n,b:o}}function Rd(){const i=Math.random(),e=Math.random()*(1-.7)+.7;return Ed(i,e,1)}async function Md(){let i=new AudioContext;await i.audioWorklet.addModule(vd);let e=new AudioWorkletNode(i,"music-audio-worklet-processor");return Ad(i,e),e.connect(i.destination),[i,e]}let Ad=async(i,e)=>{const t=await fetch("./Thurston Waffles.sf2").then(y=>y.arrayBuffer()),n=new Go.SoundFont2(new Uint8Array(t)),o=n.presets[0];if(!o)throw new Error("Preset at index 0 not found.");const a=n.instruments[o.header.bagIndex];if(!a)throw new Error("No instrument found for preset at index 0");const s=(y,m)=>{for(const h of y.zones)if(h.keyRange!=null&&m>=h.keyRange.lo&&m<=h.keyRange.hi)return h.sample;return null};let u=60;const l=s(a,u);if(!l)throw new Error(`No sample found for note ${u} in preset 0.`);const c=l.header.sampleRate,p=l.data.length,f=new Float32Array(p);for(let y=0;y<p;y++)f[y]=l.data[y]/32768;const d=l.header.originalPitch;e.port.postMessage({type:"meowData",params:{meowOriginalPitch:d,meowSampleRate:c,meowData:f}})};xe(["click"]);var Nd=V('<div><div role=tablist class="tabs tabs-box">'),Fd=V("<a role=tab class=tab>");const Od=i=>{const e=["Piano Keys","Waterfall","Instrument Editor"];let[r,t]=Se({selectedTab:"Piano Keys"}),n=new Wl;n.init();let o=new dt;return(()=>{var a=Nd(),s=a.firstChild;return a.style.setProperty("flex-grow","1"),a.style.setProperty("display","flex"),a.style.setProperty("flex-direction","column"),a.style.setProperty("overflow","hidden"),K(s,()=>e.map(u=>ie(()=>(()=>{var l=Fd();return l.$$click=()=>{t("selectedTab",u)},K(l,u),X(()=>l.classList.toggle("tab-active",r.selectedTab==u)),l})()))),K(a,T(zr,{get children(){return[T(ut,{get when(){return r.selectedTab=="Piano Keys"},get children(){return T(ic,{onNoteOn:u=>n.noteOn(u),onNoteOff:u=>n.noteOff(u)})}}),T(ut,{get when(){return r.selectedTab=="Waterfall"},get children(){return T(Cd,{})}}),T(ut,{get when(){return r.selectedTab=="Instrument Editor"},get children(){return T(bd,{style:{"flex-grow":"1"},world:o})}})]}}),null),a})()};xe(["click"]);const Dd=G({radius:z(I),out:Q(I)}),fa=new Z({typeName:"Sphere",typeSchema:Dd});var jd=Object.defineProperty,Ld=(i,e)=>{for(var r in e)jd(i,r,{get:e[r],enumerable:!0})},mi=new WeakMap;function zd(i){if(i instanceof WebGL2RenderingContext)return i;const e=mi.get(i);if(e)return e;const r=i.getExtension("ANGLE_instanced_arrays");if(!r)return;const t={drawArraysInstanced:r.drawArraysInstancedANGLE.bind(r),drawElementsInstanced:r.drawElementsInstancedANGLE.bind(r),vertexAttribDivisor:r.vertexAttribDivisorANGLE.bind(r)};return mi.set(i,t),t}var gi=new WeakMap;function Ud(i){if(i instanceof WebGL2RenderingContext)return i;const e=gi.get(i);if(e)return e;const r=i.getExtension("OES_vertex_array_object");if(!r)return null;const t={bindVertexArray:r.bindVertexArrayOES.bind(r),createVertexArray:r.createVertexArrayOES.bind(r),deleteVertexArray:r.deleteVertexArrayOES.bind(r)};return gi.set(i,t),t}var tt={};Ld(tt,{forEach:()=>ha,map:()=>Bd});function ha(i,e){let r=0;for(const t in i)e(i[t],t,r),r++;for(const t of Object.getOwnPropertySymbols(i))e(i[t],t,r),r++}function Bd(i,e){const r={};return ha(i,(t,n,o)=>{r[n]=e(t,n,o)}),r}function tr(i,e){if(i==null)throw new Error(e);return i}function yi(i,e,r){const t=i.createShader(e);if(!t)throw new Error("Failed to create shader");if(i.shaderSource(t,r),i.compileShader(t),!i.getShaderParameter(t,i.COMPILE_STATUS)){const n=i.getShaderInfoLog(t);throw i.deleteShader(t),new Error(`Failed to compile ${e===i.VERTEX_SHADER?"vertex":"fragment"} shader: ${n}`)}return t}function qd(i,e,r){const t=i.createProgram();if(!t)throw new Error("Failed to create WebGL program");const n=yi(i,i.VERTEX_SHADER,e),o=yi(i,i.FRAGMENT_SHADER,r);if(i.attachShader(t,n),i.attachShader(t,o),i.linkProgram(t),!i.getProgramParameter(t,i.LINK_STATUS)){const a=i.getProgramInfoLog(t);throw i.deleteProgram(t),i.deleteShader(n),i.deleteShader(o),new Error(`Failed to link program: ${a}`)}return i.deleteShader(n),i.deleteShader(o),t}var Vd=i=>{switch(i[0]){case"m":return"Matrix"+i.slice(3)+"fv";case"s":case"b":case"i":return(i.match(/\d/)?.[0]??"1")+"i";case"u":return(i[4]||"1")+"ui";case"v":return i[3]+"f";default:switch(i){case"float":return"1f";case"uint":return"1ui";default:return"1i"}}},ma=i=>{switch(i[0]){case"m":const[e,r]=i.match(/\d+/g).map(Number);return e*(r??e);case"v":case"i":case"b":case"u":const t=i.match(/\d/);return t?+t[0]:1;default:return 1}},Gd=i=>i.includes("mat"),Wd=i=>i.includes("sampler");function Hd(i){const e=new(i??Map);return Object.assign(e,{getOrInsert(r,t){let n=e.get(r);return n||(n=t(),e.set(r,n),n)}})}var Kd=0,Yd="VIEW_GL_ALIAS",Jd=navigator.userAgent.toLowerCase().indexOf("firefox")>=0,Zd=Hd(Jd?Map:WeakMap);function Ze(i){return typeof i=="string"?i:typeof i=="symbol"?Zd.getOrInsert(i,()=>`${Yd}_${Kd++}`):i.toString()}function Xd(i,e,r,t){return{uniforms:r.uniforms?Qd(i,e,r.uniforms):void 0,attributes:r.attributes?ep(i,e,r.attributes,t):void 0,interleavedAttributes:r.interleavedAttributes?tp(i,e,r.interleavedAttributes,t):void 0,buffers:r.buffers?rp(i,r.buffers):void 0}}function Qd(i,e,r){return tt.map(r,({kind:t,size:n},o)=>{const a=Ze(o),s=i.getUniformLocation(e,a);if(Wd(t))return{set(c){i.uniform1i(s,c)}};const u=`uniform${Vd(t)}${n?"v":""}`,l=i[u].bind(i);return Gd(t)?{set(...c){l(s,!1,c[0])}}:{set(...c){l(s,...c)}}})}function ga(i,e,r,t,n,o,a){i.enableVertexAttribArray(e),i.vertexAttribPointer(e,r,i[o],!1,t,n),a&&tr(zd(i)).vertexAttribDivisor(e,1)}function ep(i,e,r,{signal:t}={}){const n=tt.map(r,({kind:o,instanced:a,buffer:s=tr(i.createBuffer())},u)=>{const l=Ze(u),c=i.getAttribLocation(e,l);if(c<0)throw new Error(`Attribute '${l}' not found`);const p=ma(o),f=o.startsWith("i")?"INT":"FLOAT";return{buffer:s,bind(){i.bindBuffer(i.ARRAY_BUFFER,s),ga(i,c,p,0,0,f,a)},dispose(){i.deleteBuffer(s)},set(d,y="STATIC_DRAW"){return i.bindBuffer(i.ARRAY_BUFFER,s),i.bufferData(i.ARRAY_BUFFER,d,i[y]),this}}});return t?.addEventListener("abort",function(){tt.forEach(n,a=>a.dispose())}),n}function tp(i,e,r,{signal:t}={}){const n=tt.map(r,({layout:o,instanced:a})=>{let s=0;const u=o.map(d=>{const y=Ze(d.key),m=i.getAttribLocation(e,y);if(m<0)throw new Error(`Attribute '${y}' not found`);const h=ma(d.kind),g=s,b=d.kind.startsWith("i")?"INT":"FLOAT";return s+=h*4,()=>ga(i,m,h,l,g,b,a)}),l=s,c=tr(i.createBuffer());let p;const f=Ud(i);if(f){const d=f.createVertexArray();f.bindVertexArray(d),i.bindBuffer(i.ARRAY_BUFFER,c);for(const y of u)y();f.bindVertexArray(null),p={unbind(){f.bindVertexArray(null)},bind(){f.bindVertexArray(d)},dispose(){f.deleteVertexArray(d)}}}return{bind(){if(i.bindBuffer(i.ARRAY_BUFFER,c),p)p.bind();else for(const d of u)d()},unbind(){p&&p.unbind()},dispose(){i.deleteBuffer(c),p&&p.dispose()},set(d,y="STATIC_DRAW"){p?p.bind():i.bindBuffer(i.ARRAY_BUFFER,c),i.bufferData(i.ARRAY_BUFFER,d,i[y]),p&&p.unbind()}}});return t?.addEventListener("abort",function(){tt.forEach(n,a=>a.dispose())}),n}function rp(i,e,{signal:r}={}){const t=tt.map(e,({target:n="ARRAY_BUFFER",usage:o="STATIC_DRAW"})=>{const a=tr(i.createBuffer());return{bind(){i.bindBuffer(i[n],a)},dispose(){i.deleteBuffer(a)},set(s){i.bindBuffer(i[n],a),i.bufferData(i[n],s,i[o])}}});return r?.addEventListener("abort",function(){tt.forEach(t,o=>o.dispose())}),t}function re(i,...e){return{template:i,slots:e,type:"glsl"}}var np=new Proxy({},{get(i,e){return typeof e=="symbol"?i[e]:(r,t)=>({type:"uniform",key:r,kind:e,...t})}});new Proxy({},{get(i,e){return typeof e=="symbol"?i[e]:(r,t)=>({type:"attribute",key:r,kind:e,...t})}});function He(i,e,r,t){const n=bi(e),o=bi(r),a={uniforms:{...n.schema.uniforms,...o.schema.uniforms},attributes:{...n.schema.attributes,...o.schema.attributes},interleavedAttributes:{...n.schema.interleavedAttributes,...o.schema.interleavedAttributes}};for(const u in t){const l=a[u],c=t[u];for(const p in c)l[p]={...l[p],...c[p]}}const s=qd(i,n.template,o.template);return{program:s,schema:a,view:Xd(i,s,a),vertex:n.template,fragment:o.template}}function bi(i){return{template:He.toString(i),schema:He.toSchema(i)}}He.toSchema=function(i){const e={uniforms:{},attributes:{},interleavedAttributes:{}};function r(t){if(Array.isArray(t)){t.forEach(r);return}if(typeof t!="object")return;if(t.type==="glsl"){const{uniforms:s,attributes:u,interleavedAttributes:l}=He.toSchema(t);e.uniforms={...e.uniforms,...s},e.attributes={...e.attributes,...u},e.interleavedAttributes={...e.interleavedAttributes,...l};return}const{key:n,type:o,...a}=t;e[`${o}s`][n]=a}return i.slots.forEach(r),e};He.toString=function({template:[i,...e],slots:r}){const t=!!i?.startsWith("#version 300 es");let n=i??"";for(let o=0;o<e.length;o++)n+=`${ya(r[o],t)}${e[o]}`;return n};function ya(i,e){return typeof i!="object"?Ze(i):Array.isArray(i)?i.map(r=>ya(r,e)).join(""):i.type==="glsl"?He.toString(i):i.type==="interleavedAttribute"?i.layout.reduce((r,t)=>e?`${r}in ${t.kind} ${Ze(t.key)};
`:`${r}attribute ${t.kind} ${Ze(t.key)};
`,""):i.type==="uniform"&&"size"in i?`${i.type} ${i.kind} ${Ze(i.key)}[${i.size}];`:`${i.type==="attribute"&&e?"in":i.type} ${i.kind} ${Ze(i.key)};`}class ip{componentType=fa;ext={};create(e){return new op(e)}}const ba=new ip;class op{type=ba;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"radius",source:()=>r.radius,setSource:n=>t("radius",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("radius");if(a?.type!="Atom")return;let s=a.value,u=n.allocVar();return n.insertGlobalCode(re`
        float ${u}(vec3 p) {
          return length(p) - ${s};
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:u,colourFuncName:"defaultColour"}}]])}}}const ap=G({value:De(),out:Q(I)}),va=new Z({typeName:"Number",typeSchema:ap});var sp=V("<input class=input type=text size=8>");class lp{componentType=va;ext={};create(e){return new cp(e)}}const ka=new lp;class cp{type=ka;nodeParams;outputPins;ui;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ui=S(()=>()=>{let[n,o]=Se({valueText:ie(()=>r.value.toFixed(3))});return oe(ae(()=>n.valueText,()=>{let a=Number.parseFloat(n.valueText);Number.isNaN(a)||t("value",a)},{defer:!0})),(()=>{var a=sp();return a.$$input=s=>{o("valueText",s.currentTarget.value)},X(()=>a.value=n.valueText),a})()}),this.ext.generateCode=({ctx:n,inputs:o})=>new Map([["out",{type:"Atom",value:up(r.value)}]])}}function up(i){let e=i.toString();return!e.includes(".")&&!e.includes("e")&&!e.includes("E")&&(e+=".0"),e}xe(["input"]);const dp=G({in:z(I)}),wa=new Z({typeName:"Display",typeSchema:dp});var pp=V('<i class="fa-solid fa-desktop">');class fp{componentType=wa;ext={};create(e){return new hp(e)}}const xa=new fp;class hp{type=xa;nodeParams;inputPins;ui;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"in",source:()=>r.in,setSource:n=>t("in",n)}]),this.ui=S(()=>()=>(()=>{var n=pp();return n.style.setProperty("font-size","24px"),n.style.setProperty("color","green"),n})()),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("in");if(a?.type!="Model")return;let s=a.value,{sdfFuncName:u,colourFuncName:l}=s;n.insertCode(re`
        d = min(d, ${u}(p));
      `);let c=n.allocVar();return n.insertColourCode(re`
        float ${c} = ${u}(p);
        if (${c} < d) {
          d = ${c};
          ${l}(p, c);
        }
      `),new Map}}}const mp=G({x:z(I),y:z(I),z:z(I),out:Q(I)}),Sa=new Z({typeName:"Vec3",typeSchema:mp});class gp{componentType=Sa;ext={};create(e){return new yp(e)}}const Ca=new gp;class yp{type=Ca;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"x",source:()=>r.x,setSource:n=>t("x",n)},{name:"y",source:()=>r.y,setSource:n=>t("y",n)},{name:"z",source:()=>r.z,setSource:n=>t("z",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("x"),s=o.get("y"),u=o.get("z"),l,c,p;return a?.type=="Atom"?l=a.value:l="0.0",s?.type=="Atom"?c=s.value:c="0.0",u?.type=="Atom"?p=u.value:p="0.0",new Map([["out",{type:"Atom",value:`vec3(${l}, ${c}, ${p})`}]])}}}const bp=G({model:z(I),offset:z(I),out:Q(I)}),Pa=new Z({typeName:"Translate",typeSchema:bp});class vp{componentType=Pa;ext={};create(e){return new kp(e)}}const _a=new vp;class kp{type=_a;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"model",source:()=>r.model,setSource:n=>t("model",n)},{name:"offset",source:()=>r.offset,setSource:n=>t("offset",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("model");if(a?.type!="Model")return;let s=a.value,u=o.get("offset");if(u?.type!="Atom")return;let l=u.value,c=n.allocVar();n.insertGlobalCode(re`
        float ${c}(vec3 p) {
          return ${s.sdfFuncName}(p - ${l});
        }
      `);let p=n.allocVar();return n.insertGlobalCode(re`
        void ${p}(vec3 p, out vec4 c) {
          ${s.colourFuncName}(p - ${l}, c);
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:c,colourFuncName:p}}]])}}}const wp=G({size:z(I),out:Q(I)}),Ta=new Z({typeName:"Box",typeSchema:wp});class xp{componentType=Ta;ext={};create(e){return new Sp(e)}}const $a=new xp;class Sp{type=$a;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"size",source:()=>r.size,setSource:n=>t("size",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("size");if(a?.type!="Atom")return;let s=a.value,u=n.allocVar();return n.insertGlobalCode(re`
        float ${u}(vec3 p) {
          vec3 q = abs(p) - 0.5 * ${s};
          return length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0);
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:u,colourFuncName:"defaultColour"}}]])}}}const Cp=G({model1:z(I),model2:z(I),k:z(I),out:Q(I)}),Ia=new Z({typeName:"Union",typeSchema:Cp});class Pp{componentType=Ia;ext={};create(e){return new _p(e)}}const Ea=new Pp;class _p{type=Ea;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"model1",source:()=>r.model1,setSource:n=>t("model1",n)},{name:"model2",source:()=>r.model2,setSource:n=>t("model2",n)},{name:"k",source:()=>r.k,setSource:n=>t("k",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("model1");if(a?.type!="Model")return;let s=a.value,u=o.get("model2");if(u?.type!="Model")return;let l=u.value,c=o.get("k");if(c!=null&&c.type!="Atom")return;let p=n.allocVar();if(c?.type=="Atom"){let d=c.value;n.insertGlobalCode(re`
          float ${p}(vec3 p) {
            float k = ${d} * 4.0;
            float d1 = ${s.sdfFuncName}(p);
            float d2 = ${l.sdfFuncName}(p);
            float h = max(k-abs(d1-d2),0.0);
            return min(d1, d2) - h*h*0.25/k;
          }
        `)}else n.insertGlobalCode(re`
          float ${p}(vec3 p) {
            return min(${s.sdfFuncName}(p), ${l.sdfFuncName}(p));
          }
        `);let f=n.allocVar();return n.insertGlobalCode(re`
        void ${f}(vec3 p, out vec4 c) {
          float d1 = ${s.sdfFuncName}(p);
          float d2 = ${l.sdfFuncName}(p);
          float t = d1 + d2;
          vec4 c1;
          vec4 c2;
          ${s.colourFuncName}(p, c1);
          ${l.colourFuncName}(p, c2);
          c = (c1 * d2 + c2 * d1) / t;
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:p,colourFuncName:f}}]])}}}const Tp=G({model1:z(I),model2:z(I),k:z(I),out:Q(I)}),Ra=new Z({typeName:"Difference",typeSchema:Tp});class $p{componentType=Ra;ext={};create(e){return new Ip(e)}}const Ma=new $p;class Ip{type=Ma;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"model1",source:()=>r.model1,setSource:n=>t("model1",n)},{name:"model2",source:()=>r.model2,setSource:n=>t("model2",n)},{name:"k",source:()=>r.k,setSource:n=>t("k",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("model1");if(a?.type!="Model")return;let s=a.value,u=o.get("model2");if(u?.type!="Model")return;let l=u.value,c=o.get("k");if(c!=null&&c.type!="Atom")return;let p=n.allocVar();if(c?.type=="Atom"){let d=c.value;n.insertGlobalCode(re`
          float ${p}(vec3 p) {
            float k = ${d} * 4.0;
            float d1 = -${s.sdfFuncName}(p);
            float d2 = ${l.sdfFuncName}(p);
            float h = max(k-abs(d1-d2),0.0);
            return -(min(d1, d2) - h*h*0.25/k);
          }
        `)}else n.insertGlobalCode(re`
          float ${p}(vec3 p) {
            return -min(-${s.sdfFuncName}(p), ${l.sdfFuncName}(p));
          }
        `);let f=n.allocVar();return n.insertGlobalCode(re`
        void ${f}(vec3 p, out vec4 c) {
          float d1 = ${s.sdfFuncName}(p);
          float d2 = ${l.sdfFuncName}(p);
          float t = d1 + d2;
          vec4 c1;
          vec4 c2;
          ${s.colourFuncName}(p, c1);
          ${l.colourFuncName}(p, c2);
          c = (c1 * d2 + c2 * d1) / t;
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:p,colourFuncName:f}}]])}}}const Ep=G({model:z(I),step:z(I),out:Q(I)}),Aa=new Z({typeName:"Repeat",typeSchema:Ep});class Rp{componentType=Aa;ext={};create(e){return new Mp(e)}}const Na=new Rp;class Mp{type=Na;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"model",source:()=>r.model,setSource:n=>t("model",n)},{name:"step",source:()=>r.step,setSource:n=>t("step",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("model");if(a?.type!="Model")return;let s=a.value,u=o.get("step");if(u?.type!="Atom")return;let l=u.value,c=n.allocVar();n.insertGlobalCode(re`
        float ${c}(vec3 p) {
          vec3 s = ${l};
          vec3 id = vec3(floor(p.x/s.x + 0.5),floor(p.y/s.y + 0.5),floor(p.z/s.z + 0.5));
          vec3  o = sign(p-s*id);
          float d = 1e20;
          for( int k=0; k<2; k++ )
          for( int j=0; j<2; j++ )
          for( int i=0; i<2; i++ )
          {
            vec3 rid = id + vec3(i,j,k)*o;
            vec3 r = p - s*rid;
            d = min( d, ${s.sdfFuncName}(r));
          }
          return d;
        }
      `);let p=n.allocVar();return n.insertGlobalCode(re`
        void ${p}(vec3 p, out vec4 c) {
          vec3 s = ${l};
          vec3 id = vec3(floor(p.x/s.x + 0.5),floor(p.y/s.y + 0.5),floor(p.z/s.z + 0.5));
          p = p-s*id;
          ${s.colourFuncName}(p, c);
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:c,colourFuncName:p}}]])}}}const Ap=G({model:z(I),scale:z(I),out:Q(I)}),Fa=new Z({typeName:"Scale",typeSchema:Ap});class Np{componentType=Fa;ext={};create(e){return new Fp(e)}}const Oa=new Np;class Fp{type=Oa;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"model",source:()=>r.model,setSource:n=>t("model",n)},{name:"scale",source:()=>r.scale,setSource:n=>t("scale",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("model");if(a?.type!="Model")return;let s=a.value,u=o.get("scale");if(u?.type!="Atom")return;let l=u.value,c=n.allocVar();n.insertGlobalCode(re`
        float ${c}(vec3 p) {
          return ${s.sdfFuncName}(p / ${l}) * ${l};
        }
      `);let p=n.allocVar();return n.insertGlobalCode(re`
        void ${p}(vec3 p, out vec4 c) {
          ${s.colourFuncName}(p / ${l}, c);
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:c,colourFuncName:p}}]])}}}const Op=G({model:z(I),axis:z(I),angle:z(I),out:Q(I)}),Da=new Z({typeName:"Rotate",typeSchema:Op});class Dp{componentType=Da;ext={};create(e){return new jp(e)}}const ja=new Dp;class jp{type=ja;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"model",source:()=>r.model,setSource:n=>t("model",n)},{name:"axis",source:()=>r.axis,setSource:n=>t("axis",n)},{name:"angle",source:()=>r.angle,setSource:n=>t("angle",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("model");if(a?.type!="Model")return;let s=a.value,u=o.get("axis");if(u?.type!="Atom")return;let l=u.value,c=o.get("angle");if(c?.type!="Atom")return;let p=c.value,f=n.allocVar();n.insertGlobalCode(re`
        float ${f}(vec3 p) {
          float a = 0.5 * ${p} * ${Math.PI/180};
          vec3 tmp = sin(a) * normalize(${l});
          vec4 q = vec4(tmp.x, tmp.y, tmp.z, cos(a));
          p = p + 2.0 * cross(-q.xyz, cross(-q.xyz, p) + q.w * p);
          return ${s.sdfFuncName}(p);
        }
      `);let d=n.allocVar();return n.insertGlobalCode(re`
        void ${d}(vec3 p, out vec4 c) {
          float a = 0.5 * ${p} * ${Math.PI/180};
          vec3 tmp = sin(a) * normalize(${l});
          vec4 q = vec4(tmp.x, tmp.y, tmp.z, cos(a));
          p = p + 2.0 * cross(-q.xyz, cross(-q.xyz, p) + q.w * p);
          ${s.colourFuncName}(p, c);
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:f,colourFuncName:d}}]])}}}const Lp=G({radius:z(I),out:Q(I)}),La=new Z({typeName:"InfiniteCylinder",typeSchema:Lp});class zp{componentType=La;ext={};create(e){return new Up(e)}}const za=new zp;class Up{type=za;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"radius",source:()=>r.radius,setSource:n=>t("radius",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("radius");if(a?.type!="Atom")return;let s=a.value,u=n.allocVar();n.insertGlobalCode(re`
        float ${u}(vec3 p) {
          return length(p.xy) - ${s};
        }
      `);let l=n.allocVar();return n.insertGlobalCode(re`
        void ${l}(vec3 p, out vec4 c) {
          c = vec4(0.7, 0.7, 0.7, 1.0);
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:u,colourFuncName:l}}]])}}}const Bp=G({colour:G({red:De(),green:De(),blue:De(),alpha:De()}),out:Q(I)}),Ua=new Z({typeName:"Colour",typeSchema:Bp});class Jt{r;g;b;a;constructor(e,r,t,n){this.r=e,this.g=r,this.b=t,this.a=n}}var qp=V("<div><div><div><div></div><svg><circle r=5 stroke=black stroke-width=2 fill=none pointer-events=none></circle></svg></div><div><svg width=25><rect x=0 width=24 height=10 fill=none stroke=black stroke-width=2 pointer-events=none></rect></svg></div><div><svg width=25><rect x=0 width=24 height=10 fill=none stroke=black stroke-width=2 pointer-events=none></rect></svg></div></div><div><div></div><div><table><thead></thead><tbody><tr><td>Red:</td><td><input type=text size=4></td></tr><tr><td>Green:</td><td><input type=text size=4></td></tr><tr><td>Blue:</td><td><input type=text size=4></td></tr><tr><td>Alpha:</td><td><input type=text size=4></td></tr></tbody></table></div><div><div>");const Vp=i=>{let[e,r]=Se({cursorPos:L.zero,chartMousePos:void 0,chartMouseDown:!1,brightness:255,brightnessMousePos:void 0,brightnessMouseDown:!1,alpha:255,alphaMousePos:void 0,alphaMouseDown:!1,userColour:ie(()=>i.colour),userRedText:void 0,userGreenText:void 0,userBlueText:void 0,userAlphaText:void 0}),[t,n]=J(),[o,a]=J();oe(()=>{let b=t();if(b==null)return;let k=new ResizeObserver(()=>{let v=b.getBoundingClientRect();o(),a(L.create(v.width,v.height))});k.observe(b),ke(()=>{k.unobserve(b),k.disconnect()})});let s=S(()=>{let b=o();if(b==null)return;let k=document.createElement("canvas");k.setAttribute("width",`${b.x}`),k.setAttribute("height",`${b.y}`),k.style.setProperty("flex-grow","1");let v=k.getContext("2d");if(v==null)return;let x=new ImageData(b.x,b.y),w=256*6;for(let M=0;M<b.x;++M){let E,F,B,U=Math.floor(M*w/b.x);if(U<256){let W=U;E=255,F=W,B=0}else if(U<256*2)E=255-(U-256),F=255,B=0;else if(U<256*3){let W=U-512;E=0,F=255,B=W}else if(U<256*4){let W=U-768;E=0,F=255-W,B=255}else if(U<256*5)E=U-1024,F=0,B=255;else{let W=U-1280;E=255,F=0,B=255-W}let q=M<<2;for(let W=0;W<b.y;++W){let ee=E+Math.floor((256-E)*W/b.y),A=F+Math.floor((256-F)*W/b.y),Y=B+Math.floor((256-B)*W/b.y);x.data[q]=ee,x.data[q+1]=A,x.data[q+2]=Y,x.data[q+3]=255,q+=b.x<<2}}let P=new ImageData(b.x,b.y);oe(ae(()=>e.brightness,()=>{let M=e.brightness,E=b.x*b.y<<2;for(let F=0;F<E;F+=4){let B=x.data[F],U=x.data[F+1],q=x.data[F+2],W=x.data[F+3],ee=Math.floor(B*M/255),A=Math.floor(U*M/255),Y=Math.floor(q*M/255);P.data[F]=ee,P.data[F+1]=A,P.data[F+2]=Y,P.data[F+3]=W}v.putImageData(P,0,0)}));let C=document.createElement("canvas");C.setAttribute("width","1"),C.setAttribute("height",`${b.y}`),C.style.setProperty("flex-grow","1");let _=C.getContext("2d");if(_==null)return;let R=new ImageData(1,b.y);oe(()=>{let M=e.cursorPos;if(M==null)return;let E=x.width*M.y+M.x<<2,F=x.data[E],B=x.data[E+1],U=x.data[E+2];for(let q=0;q<b.y;++q){let W=q<<2,ee=Math.floor(F*(b.y-1-q)/(b.y-1)),A=Math.floor(B*(b.y-1-q)/(b.y-1)),Y=Math.floor(U*(b.y-1-q)/(b.y-1));R.data[W]=ee,R.data[W+1]=A,R.data[W+2]=Y,R.data[W+3]=255}_.putImageData(R,0,0)});let $=document.createElement("canvas");$.style.setProperty("background-image","linear-gradient(45deg, #808080 25%, transparent 25%), linear-gradient(-45deg, #808080 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #808080 75%), linear-gradient(-45deg, transparent 75%, #808080 75%)"),$.style.setProperty("background-size","20px 20px"),$.style.setProperty("background-position","0 0, 0 10px, 10px -10px, -10px 0px"),$.setAttribute("width","1"),$.setAttribute("height",`${b.y}`),$.style.setProperty("flex-grow","1");let O=$.getContext("2d");if(O==null)return;let D=new ImageData(1,b.y);return oe(()=>{let M=e.cursorPos;if(M==null)return;let E=x.width*M.y+M.x<<2,F=x.data[E],B=x.data[E+1],U=x.data[E+2],q=x.data[E+3];for(let W=0;W<b.y;++W){let ee=W<<2,A=Math.floor(q*(b.y-1-W)/(b.y-1));D.data[ee]=F,D.data[ee+1]=B,D.data[ee+2]=U,D.data[ee+3]=A}O.putImageData(D,0,0)}),{canvas:k,sliderCanvas:C,alphaSliderCanvas:$,size:b,sliderImageData:R,alphaSliderImageData:D}});Te(()=>{let b=s();if(b==null||!e.chartMouseDown)return;let k=e.chartMousePos;k!=null&&(r("userColour",void 0),r("userRedText",void 0),r("userGreenText",void 0),r("userBlueText",void 0),r("cursorPos",L.create(Math.max(0,Math.min(b.size.x-1,Math.floor(k.x))),Math.max(0,Math.min(b.size.y-1,Math.floor(k.y))))))}),Te(()=>{if(!e.brightnessMouseDown)return;let b=e.brightnessMousePos;if(b==null)return;let k=s()?.size.y;k!=null&&(r("userColour",void 0),r("userRedText",void 0),r("userGreenText",void 0),r("userBlueText",void 0),r("brightness",Math.max(0,Math.min(255,Math.floor(256*(k-b.y)/k)))))}),Te(()=>{if(!e.alphaMouseDown)return;let b=e.alphaMousePos;if(b==null)return;let k=s()?.size.y;k!=null&&(r("userColour",void 0),r("userRedText",void 0),r("userGreenText",void 0),r("userBlueText",void 0),r("userAlphaText",void 0),r("alpha",Math.max(0,Math.min(255,Math.floor(256*(k-b.y)/k)))))});let u=S(ae([s,()=>e.cursorPos,()=>e.brightness,()=>e.alpha],()=>{let b=s();if(b==null)return;let v=Math.max(0,Math.min(b.size.y,Math.floor((255-e.brightness)*b.size.y/256)))<<2,x=b.sliderImageData.data[v],w=b.sliderImageData.data[v+1],P=b.sliderImageData.data[v+2],C=e.alpha;return new Jt(x,w,P,C)})),l=S(()=>{if(e.userRedText==null)return;let b=Number.parseFloat(e.userRedText);if(Number.isFinite(b))return Math.max(0,Math.min(255,b))}),c=S(()=>{if(e.userGreenText==null)return;let b=Number.parseFloat(e.userGreenText);if(Number.isFinite(b))return Math.max(0,Math.min(255,b))}),p=S(()=>{if(e.userBlueText==null)return;let b=Number.parseFloat(e.userBlueText);if(Number.isFinite(b))return Math.max(0,Math.min(255,b))}),f=S(()=>{if(e.userAlphaText==null)return;let b=Number.parseFloat(e.userAlphaText);if(Number.isFinite(b))return Math.max(0,Math.min(255,b))}),d=S(()=>{let b;return e.userColour!=null?b=e.userColour:b=u(),new Jt(l()??b?.r??0,c()??b?.g??0,p()??b?.b??0,f()??b?.a??255)});Te(ae([()=>i.colour],()=>{let b=d();if(b==null||i.colour==null)return;let k=i.colour;k.r==b.r&&k.g==b.g&&k.b==b.b&&k.a==b.a||r("userColour",k)},{defer:!0})),Te(ae([()=>e.userColour,d],()=>{if(e.userColour!=null)return;let b=d();b!=null&&i.onColour?.(b)})),Te(()=>{let b=s();if(!b||e.userColour==null&&l()==null&&c()==null&&p()==null&&f()==null)return;let k=e.userColour,v=new Jt(l()??k?.r??0,c()??k?.g??0,p()??k?.b??0,f()??k?.a??255),x=Math.max(v.r,v.g,v.b),w=Math.min(v.r,v.g,v.b),P=x,C=255/(x-w);if(!Number.isFinite(C))return;let _=Math.floor((v.r-w)*C),R=Math.floor((v.g-w)*C),$=Math.floor((v.b-w)*C),O=v.r==x,D=v.g==x,M=v.b==x,E;O&&!D&&$==0?E=R:!O&&D&&$==0?E=256+(255-_):_==0&&D&&!M?E=256*2+$:_==0&&!D&&M?E=256*3+(255-R):!O&&R==0&&M?E=256*4+_:E=256*5+(255-$);let F=Math.floor(b.size.x*E/(256*6)),B=w;Oe(()=>{r("cursorPos",L.create(F,B)),r("brightness",P),r("alpha",v.a)})});let[y,m]=J(),[h,g]=J(50);return Te(ae(y,()=>{let b=y();if(b==null)return;let k=new ResizeObserver(()=>{let v=b.getBoundingClientRect();console.log(v),v.width!=v.height&&g(v.height)});k.observe(b),ke(()=>{k.unobserve(b),k.disconnect()})})),(()=>{var b=qp(),k=b.firstChild,v=k.firstChild,x=v.firstChild,w=x.nextSibling,P=w.firstChild,C=v.nextSibling,_=C.firstChild,R=_.firstChild,$=C.nextSibling,O=$.firstChild,D=O.firstChild,M=k.nextSibling,E=M.firstChild,F=E.nextSibling,B=F.firstChild,U=B.firstChild,q=U.nextSibling,W=q.firstChild,ee=W.firstChild,A=ee.nextSibling,Y=A.firstChild,te=W.nextSibling,ye=te.firstChild,se=ye.nextSibling,ce=se.firstChild,je=te.nextSibling,Ue=je.firstChild,rt=Ue.nextSibling,Ye=rt.firstChild,Be=je.nextSibling,he=Be.firstChild,yt=he.nextSibling,bt=yt.firstChild,Ce=F.nextSibling,ue=Ce.firstChild;b.style.setProperty("flex-grow","1"),b.style.setProperty("display","flex"),b.style.setProperty("flex-direction","column"),k.style.setProperty("flex-grow","1"),k.style.setProperty("display","flex"),k.style.setProperty("flex-direction","row"),v.$$pointerup=N=>{r("chartMouseDown",!1),N.currentTarget.releasePointerCapture(N.pointerId),N.preventDefault()},v.$$pointerdown=N=>{r("chartMouseDown",!0),N.currentTarget.setPointerCapture(N.pointerId),N.preventDefault()},v.$$pointerout=N=>{r("chartMousePos",void 0),N.preventDefault()},v.$$pointermove=N=>{let Re=N.currentTarget.getBoundingClientRect(),ze=N.clientX-Re.left,Je=N.clientY-Re.top;r("chartMousePos",L.create(ze,Je)),N.preventDefault()},v.style.setProperty("position","relative"),v.style.setProperty("flex-grow","1"),v.style.setProperty("display","flex"),v.style.setProperty("flex-direction","column"),v.style.setProperty("touch-action","none");var le=n;typeof le=="function"?ge(le,x):n=x,x.style.setProperty("flex-grow","1"),x.style.setProperty("display","flex"),x.style.setProperty("flex-direction","column"),K(x,()=>s()?.canvas),w.style.setProperty("position","absolute"),w.style.setProperty("left","0"),w.style.setProperty("top","0"),w.style.setProperty("right","0"),w.style.setProperty("bottom","0"),C.$$pointerup=N=>{r("brightnessMouseDown",!1),N.currentTarget.releasePointerCapture(N.pointerId),N.preventDefault()},C.$$pointerdown=N=>{r("brightnessMouseDown",!0),N.currentTarget.setPointerCapture(N.pointerId),N.preventDefault()},C.$$pointerout=N=>{r("brightnessMousePos",void 0),N.preventDefault()},C.$$pointermove=N=>{let Re=N.currentTarget.getBoundingClientRect(),ze=N.clientX-Re.left,Je=N.clientY-Re.top;r("brightnessMousePos",L.create(ze,Je)),N.preventDefault()},C.style.setProperty("position","relative"),C.style.setProperty("display","flex"),C.style.setProperty("flex-direction","row"),C.style.setProperty("width","25px"),C.style.setProperty("margin-left","15px"),C.style.setProperty("overflow","hidden"),C.style.setProperty("touch-action","none"),K(C,()=>s()?.sliderCanvas,_),_.style.setProperty("position","absolute"),_.style.setProperty("left","0"),_.style.setProperty("top","0"),_.style.setProperty("right","0"),_.style.setProperty("bottom","0"),$.$$pointerup=N=>{r("alphaMouseDown",!1),N.currentTarget.releasePointerCapture(N.pointerId),N.preventDefault()},$.$$pointerdown=N=>{r("alphaMouseDown",!0),N.currentTarget.setPointerCapture(N.pointerId),N.preventDefault()},$.$$pointerout=N=>{r("alphaMousePos",void 0),N.preventDefault()},$.$$pointermove=N=>{let Re=N.currentTarget.getBoundingClientRect(),ze=N.clientX-Re.left,Je=N.clientY-Re.top;r("alphaMousePos",L.create(ze,Je)),N.preventDefault()},$.style.setProperty("position","relative"),$.style.setProperty("display","flex"),$.style.setProperty("flex-direction","row"),$.style.setProperty("width","25px"),$.style.setProperty("margin-left","15px"),$.style.setProperty("overflow","hidden"),$.style.setProperty("touch-action","none"),K($,()=>s()?.alphaSliderCanvas,O),O.style.setProperty("position","absolute"),O.style.setProperty("left","0"),O.style.setProperty("top","0"),O.style.setProperty("right","0"),O.style.setProperty("bottom","0"),M.style.setProperty("display","flex"),M.style.setProperty("flex-direction","row"),E.style.setProperty("flex-grow","1"),Y.$$input=N=>{Oe(()=>{r("userRedText",N.currentTarget.value),r("userGreenText",d().g.toFixed(0)),r("userBlueText",d().b.toFixed(0)),r("userAlphaText",d().a.toFixed(0))})},ce.$$input=N=>{Oe(()=>{r("userRedText",d().r.toFixed(0)),r("userGreenText",N.currentTarget.value),r("userBlueText",d().b.toFixed(0)),r("userAlphaText",d().a.toFixed(0))})},Ye.$$input=N=>{Oe(()=>{r("userRedText",d().r.toFixed(0)),r("userGreenText",d().g.toFixed(0)),r("userBlueText",N.currentTarget.value),r("userAlphaText",d().a.toFixed(0))})},bt.$$input=N=>{Oe(()=>{r("userRedText",d().r.toFixed(0)),r("userGreenText",d().g.toFixed(0)),r("userBlueText",d().b.toFixed(0)),r("userAlphaText",N.currentTarget.value)})};var Le=m;return typeof Le=="function"?ge(Le,Ce):m=Ce,Ce.style.setProperty("background-image","linear-gradient(45deg, #808080 25%, transparent 25%), linear-gradient(-45deg, #808080 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #808080 75%), linear-gradient(-45deg, transparent 75%, #808080 75%)"),Ce.style.setProperty("background-size","20px 20px"),Ce.style.setProperty("background-position","0 0, 0 10px, 10px -10px, -10px 0px"),Ce.style.setProperty("margin-top","10px"),Ce.style.setProperty("margin-bottom","10px"),Ce.style.setProperty("margin-left","10px"),Ce.style.setProperty("display","flex"),Ce.style.setProperty("flex-direction","column"),ue.style.setProperty("flex-grow","1"),X(N=>{var Re=s()?.size.x??300,ze=s()?.size.y??300,Je=e.cursorPos.x,ln=e.cursorPos.y,rr=`${s()?.size.y??0}px`,cn=s()?.size.y??0,un=(s()?.size.y??0)-e.brightness*(s()?.size.y??0)/255-5,nr=`${s()?.size.y??0}px`,dn=s()?.size.y??0,pn=(s()?.size.y??0)-e.alpha*(s()?.size.y??0)/255-5,ir=`${h()}px`,or=(()=>{let vt=d();if(vt!=null)return`rgb(${vt.r}, ${vt.g}, ${vt.b})`})(),ar=d().a/255;return Re!==N.e&&H(w,"width",N.e=Re),ze!==N.t&&H(w,"height",N.t=ze),Je!==N.a&&H(P,"cx",N.a=Je),ln!==N.o&&H(P,"cy",N.o=ln),rr!==N.i&&((N.i=rr)!=null?C.style.setProperty("height",rr):C.style.removeProperty("height")),cn!==N.n&&H(_,"height",N.n=cn),un!==N.s&&H(R,"y",N.s=un),nr!==N.h&&((N.h=nr)!=null?$.style.setProperty("height",nr):$.style.removeProperty("height")),dn!==N.r&&H(O,"height",N.r=dn),pn!==N.d&&H(D,"y",N.d=pn),ir!==N.l&&((N.l=ir)!=null?Ce.style.setProperty("width",ir):Ce.style.removeProperty("width")),or!==N.u&&((N.u=or)!=null?ue.style.setProperty("background-color",or):ue.style.removeProperty("background-color")),ar!==N.c&&((N.c=ar)!=null?ue.style.setProperty("opacity",ar):ue.style.removeProperty("opacity")),N},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0}),X(()=>Y.value=e.userRedText??e.userColour?.r??u()?.r),X(()=>ce.value=e.userGreenText??e.userColour?.g??u()?.g),X(()=>Ye.value=e.userBlueText??e.userColour?.b??u()?.b),X(()=>bt.value=e.userAlphaText??e.userColour?.a??u()?.a),b})()};xe(["pointermove","pointerout","pointerdown","pointerup","input"]);var Gp=V(`<svg version=1.1 viewBox="-16 -16 32 32"><defs><linearGradient x1=0 x2=0 y1=0 y2=1><stop offset=0% stop-color="rgb(80, 80, 81)"></stop><stop offset=100% stop-color="rgb(30, 30, 31)"></stop></linearGradient><path d="
        M14.876 -5.890A-16 -16 0 0 0 14.876 5.890A16 16 0 0 112.539 9.938A-16 -16 0 0 0 2.337 15.828
        A16 16 0 0 1-2.337 15.828A-16 -16 0 0 0 -12.539 9.938A16 16 0 0 1-14.876 5.890A-16 -16 0 0 0 -14.876 -5.890
        A16 16 0 0 1-12.539 -9.938A-16 -16 0 0 0 -2.337 -15.828A16 16 0 0 12.337 -15.828A-16 -16 0 0 0 12.539 -9.938
        A16 16 0 0 114.876 -5.890"></path><clipPath><use></use></clipPath><filter></filter><filter></filter></defs><circle cx=0 cy=0 r=15.0 fill="rgb(36, 36, 37)"stroke="rgb(28, 28, 29)"stroke-width=0.5></circle><g><g><g><rect x=-16 y=-16 width=32 height=32></rect><circle cx=-28 cy=-28 r=32 fill="rgba(250, 250, 255, .16)"></circle></g></g></g><g><circle cx=0 cy=-11 r=1.1 fill=black></circle><circle cx=0 cy=-11 r=0.8 fill=white></circle></g><circle cx=0 cy=0 r=9 stroke="rgb(50, 50, 51)"stroke-width=0.7 fill=none></circle><foreignObject x=-9 y=-9 width=18 height=18><div style=width:18px;height:18px;border-radius:50%;background-image:conic-gradient(#aaa,#666,#aaa,#666,#aaa,#666,#aaa);>`);const Wp=i=>{let[e,r]=Se({dragging:void 0}),[t,n]=J();ke(()=>{e.dragging&&i.setDisablePan(!1)});let o=-165,a=-o,s=S(()=>o+(i.value-i.minValue)*(a-o)/(i.maxValue-i.minValue)),u=document.createElementNS("http://www.w3.org/2000/svg","feDropShadow");u.setAttribute("dx","-0.3"),u.setAttribute("dy","-0.3"),u.setAttribute("stdDeviation","0.1"),u.setAttribute("flood-opacity","0.7"),u.setAttribute("flood-color","white");let l=document.createElementNS("http://www.w3.org/2000/svg","feDropShadow");l.setAttribute("dx","1.5"),l.setAttribute("dy","1.5"),l.setAttribute("stdDeviation","0.5"),l.setAttribute("flood-opacity","0.9"),l.setAttribute("flood-color","black");let c=b=>{let k=t(),v=k.getBoundingClientRect(),x=b.clientX-v.left,w=b.clientY-v.top,P=x-.5*v.width,C=w-.5*v.width;console.log("x",x.toFixed()),console.log("y",w.toFixed()),console.log("dx",P.toFixed()),console.log("dy",C.toFixed());let _=P*P+C*C;if(_>v.width*v.width)return;let R=Math.sqrt(_),O=360/(2*Math.PI*R),D=C>0?-O:O,M=P>0?O:-O;r("dragging",new er({pointerId:b.pointerId,startX:x,startY:w,startValue:i.value,dadx:D,dady:M})),k.setPointerCapture(b.pointerId),i.setDisablePan(!0)},p=b=>{if(e.dragging==null||b.pointerId!=e.dragging.value.pointerId)return;let k=t(),v=e.dragging.value,x=k.getBoundingClientRect(),w=b.clientX-x.left,P=b.clientY-x.top,C=o+(v.startValue-i.minValue)*(a-o)/(i.maxValue-i.minValue)+(w-v.startX)*v.dadx+(P-v.startY)*v.dady,_=i.minValue+(C-o)*(i.maxValue-i.minValue)/(a-o);(i.unbounded??!1)||(_=Math.max(i.minValue,Math.min(i.maxValue,_))),i.setValue(_)},f=b=>{e.dragging!=null&&e.dragging.value.pointerId==b.pointerId&&(t().releasePointerCapture(e.dragging.value.pointerId),i.setDisablePan(!1),r("dragging",void 0))},d=st(),y=st(),m=st(),h=st(),g=st();return(()=>{var b=Gp(),k=b.firstChild,v=k.firstChild,x=v.nextSibling,w=x.nextSibling,P=w.firstChild,C=w.nextSibling,_=C.nextSibling,R=k.nextSibling,$=R.nextSibling,O=$.firstChild,D=O.firstChild,M=D.firstChild,E=$.nextSibling;b.$$pointerup=f,b.$$pointermove=p,b.$$pointerdown=c;var F=n;return typeof F=="function"?ge(F,b):n=b,b.style.setProperty("user-select","none"),b.style.setProperty("outline","none"),H(v,"id",d),H(x,"id",y),H(w,"id",m),H(P,"href",`#${y}`),H(C,"id",h),K(C,u),H(_,"id",g),K(_,l),H($,"filter",`url(#${g})`),H(O,"filter",`url(#${h})`),H(D,"clip-path",`url(#${m})`),H(M,"fill",`url(#${d})`),X(B=>{var U=`${i.size}px`,q=`${i.size}px`,W=`transform: rotate(${s()}deg) scale(0.87)`,ee=`transform: rotate(${s()}deg)`;return U!==B.e&&((B.e=U)!=null?b.style.setProperty("width",U):b.style.removeProperty("width")),q!==B.t&&((B.t=q)!=null?b.style.setProperty("height",q):b.style.removeProperty("height")),B.a=hn(w,W,B.a),B.o=hn(E,ee,B.o),B},{e:void 0,t:void 0,a:void 0,o:void 0}),b})()};xe(["pointerdown","pointermove","pointerup"]);var Hp=V("<div style=width:300px;height:300px;display:flex;flex-direction:column;>");class Kp{componentType=Ua;ext={};create(e){return new Yp(e)}}const Ba=new Kp;class Yp{type=Ba;nodeParams;inputPins;outputPins;ui;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ui=S(()=>()=>(()=>{var n=Hp();return K(n,T(Vp,{get colour(){return new Jt(r.colour.red,r.colour.green,r.colour.blue,r.colour.alpha)},onColour:o=>{t("colour",{red:o.r,green:o.g,blue:o.b,alpha:o.a})}})),n})()),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=`vec4(${r.colour.red/255}, ${r.colour.green/255}, ${r.colour.blue/255}, ${r.colour.alpha/255})`;return new Map([["out",{type:"Atom",value:a}]])}}}const Jp=G({colour:z(I),model:z(I),out:Q(I)}),qa=new Z({typeName:"ApplyColour",typeSchema:Jp});class Zp{componentType=qa;ext={};create(e){return new Xp(e)}}const Va=new Zp;class Xp{type=Va;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"model",source:()=>r.model,setSource:n=>t("model",n)},{name:"colour",source:()=>r.colour,setSource:n=>t("colour",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("model");if(a?.type!="Model")return;let s=a.value,u=o.get("colour");if(u?.type!="Atom")return;let l=u.value,c=n.allocVar();return n.insertGlobalCode(re`
        void ${c}(vec3 p, out vec4 c) {
          c = vec4(${l});
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:s.sdfFuncName,colourFuncName:c}}]])}}}const Qp=G({colour1:z(I),colour2:z(I),size:z(I),model:z(I),out:Q(I)}),Ga=new Z({typeName:"ApplyCheckers",typeSchema:Qp});class ef{componentType=Ga;ext={};create(e){return new tf(e)}}const Wa=new ef;class tf{type=Wa;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"model",source:()=>r.model,setSource:n=>t("model",n)},{name:"colour1",source:()=>r.colour1,setSource:n=>t("colour1",n)},{name:"colour2",source:()=>r.colour2,setSource:n=>t("colour2",n)},{name:"size",source:()=>r.size,setSource:n=>t("size",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("model");if(a?.type!="Model")return;let s=a.value,u=o.get("colour1");if(u?.type!="Atom")return;let l=u.value,c=o.get("colour2");if(c?.type!="Atom")return;let p=c.value,f=o.get("size");if(f?.type!="Atom")return;let d=f.value,y=n.allocVar();return n.insertGlobalCode(re`
        void ${y}(vec3 p, out vec4 c) {
          p = floor(p / ${d});
          float a = mod(p.x + p.y + p.z, 2.0);
          if (a < 0.5) {
            c = vec4(${l});
          } else {
            c = vec4(${p});
          }
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:s.sdfFuncName,colourFuncName:y}}]])}}}const rf=G({value:De(),sensitivity:oc(1,De()),out:Q(I)}),Ha=new Z({typeName:"UnboundKnob",typeSchema:rf});var nf=Object.defineProperty,of=(i,e)=>{for(var r in e)nf(i,r,{get:e[r],enumerable:!0})},Ka={};of(Ka,{forEach:()=>Ya,map:()=>af});function Ya(i,e){let r=0;for(const t in i)e(i[t],t,r),r++;for(const t of Object.getOwnPropertySymbols(i))e(i[t],t,r),r++}function af(i,e){const r={};return Ya(i,(t,n,o)=>{r[n]=e(t,n,o)}),r}var sf=i=>{switch(i[0]){case"m":return"Matrix"+i.slice(3)+"fv";case"s":case"b":case"i":return(i.match(/\d/)?.[0]??"1")+"i";case"u":return(i[4]||"1")+"ui";case"v":return i[3]+"f";default:switch(i){case"float":return"1f";case"uint":return"1ui";default:return"1i"}}},lf=i=>i.includes("mat"),cf=i=>i.includes("sampler");function uf(i){const e=new(i??Map);return Object.assign(e,{getOrInsert(r,t){let n=e.get(r);return n||(n=t(),e.set(r,n),n)}})}var df=0,pf="VIEW_GL_ALIAS",ff=navigator.userAgent.toLowerCase().indexOf("firefox")>=0,hf=uf(ff?Map:WeakMap);function mf(i){return typeof i=="string"?i:typeof i=="symbol"?hf.getOrInsert(i,()=>`${pf}_${df++}`):i.toString()}function gf(i,e,r){return Ka.map(r,({kind:t,size:n},o)=>{const a=mf(o),s=i.getUniformLocation(e,a);if(cf(t))return{set(c){i.uniform1i(s,c)}};const u=`uniform${sf(t)}${n?"v":""}`,l=i[u].bind(i);return lf(t)?{set(...c){l(s,!1,c[0])}}:{set(...c){l(s,...c)}}})}var yf=V("<div><label class=label style=color:black;>Value</label><input class=input type=text size=5><label class=label style=color:black;>Sensitivity</label><input class=input type=text size=5>");class bf{componentType=Ha;ext={};create(e){return new vf(e)}}const Ja=new bf;class vf{type=Ja;nodeParams;outputPins;ui;disablePan;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e;let[n,o]=J(!1);this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:a=>t("out",a)}]),this.ui=S(()=>()=>{let[a,s]=J(r.value.toFixed(3)),[u,l]=J(r.sensitivity.toFixed(3)),c=!1,p=!1;return Te(ae(()=>r.value,f=>{c||s(f.toFixed(3))},{defer:!0})),Te(ae(()=>r.sensitivity,f=>{p||l(f.toFixed(3))})),(()=>{var f=yf(),d=f.firstChild,y=d.nextSibling,m=y.nextSibling,h=m.nextSibling;return f.style.setProperty("display","flex"),f.style.setProperty("flex-direction","column"),y.$$input=g=>{let b=g.currentTarget.value;s(b);let k=Number.parseFloat(b.trim());if(!Number.isNaN(k))try{c=!0,t("value",k)}finally{c=!1}},h.$$input=g=>{let b=g.currentTarget.value;l(b);let k=Number.parseFloat(b.trim());if(!Number.isNaN(k))try{p=!0,t("sensitivity",k)}finally{p=!1}},K(f,T(Wp,{size:100,indentSize:10,minValue:0,get maxValue(){return 100*r.sensitivity},unbounded:!0,get value(){return r.value},setValue:g=>t("value",g),setDisablePan:o}),null),X(()=>y.value=a()),X(()=>h.value=u()),f})()}),this.disablePan=n,this.ext.generateCode=({ctx:a,inputs:s,onInit:u})=>{let l=a.allocVar(),c=re`
        ${np.float(l)}
      `,p=He.toSchema(c);return a.insertGlobalCode(c),u(({gl:f,program:d,rerender:y})=>{let m=gf(f,d,p.uniforms);Te(ae(()=>r.value,h=>{m[l].set(h),y()}))}),new Map([["out",{type:"Atom",value:l}]])}}}xe(["input"]);const kf=G({radius:z(I),height:z(I),out:Q(I)}),Za=new Z({typeName:"Cylinder",typeSchema:kf});class wf{componentType=Za;ext={};create(e){return new xf(e)}}const Xa=new wf;class xf{type=Xa;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"radius",source:()=>r.radius,setSource:n=>t("radius",n)},{name:"height",source:()=>r.height,setSource:n=>t("height",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("radius");if(a?.type!="Atom")return;let s=a.value,u=o.get("height");if(u?.type!="Atom")return;let l=u.value,c=n.allocVar();return n.insertGlobalCode(re`
        float ${c}(vec3 p) {
          vec2 d = abs(vec2(length(p.xz),p.y)) - vec2(${s},${l});
          return min(max(d.x,d.y),0.0) + length(max(d,0.0));
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:c,colourFuncName:"defaultColour"}}]])}}}const Sf=G({frequency:z(I),magnitude:z(I),out:Q(I)}),Qa=new Z({typeName:"SinXYZField",typeSchema:Sf});class Cf{componentType=Qa;ext={};create(e){return new Pf(e)}}const es=new Cf;class Pf{type=es;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"frequency",source:()=>r.frequency,setSource:n=>t("frequency",n)},{name:"magnitude",source:()=>r.magnitude,setSource:n=>t("magnitude",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("frequency");if(a?.type!="Atom")return;let s=a.value,u=o.get("magnitude");if(u?.type!="Atom")return;let l=u.value,c=n.allocVar();return n.insertGlobalCode(re`
        float ${c}(vec3 p) {
          return ${l} * sin(p.x*${s}) * sin(p.y*${s}) * sin(p.z*${s});
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:c,colourFuncName:"defaultColour"}}]])}}}const _f=G({model1:z(I),model2:z(I),out:Q(I)}),ts=new Z({typeName:"Displace",typeSchema:_f});class Tf{componentType=ts;ext={};create(e){return new $f(e)}}const rs=new Tf;class $f{type=rs;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"model1",source:()=>r.model1,setSource:n=>t("model1",n)},{name:"model2",source:()=>r.model2,setSource:n=>t("model2",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("model1");if(a?.type!="Model")return;let s=a.value,u=o.get("model2");if(u?.type!="Model")return;let l=u.value,c=n.allocVar();n.insertGlobalCode(re`
        float ${c}(vec3 p) {
          float d1 = ${s.sdfFuncName}(p);
          float d2 = ${l.sdfFuncName}(p);
          return d1 + d2;
        }
      `);let p=n.allocVar();return n.insertGlobalCode(re`
        void ${p}(vec3 p, out vec4 c) {
          float d1 = ${s.sdfFuncName}(p);
          float d2 = ${l.sdfFuncName}(p);
          float t = d1 + d2;
          vec4 c1;
          vec4 c2;
          ${s.colourFuncName}(p, c1);
          ${l.colourFuncName}(p, c2);
          c = (c1 * d2 + c2 * d1) / t;
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:c,colourFuncName:p}}]])}}}const If=G({model:z(I),count:z(I),out:Q(I)}),ns=new Z({typeName:"RepeatRotational",typeSchema:If});class Ef{componentType=ns;ext={};create(e){return new Rf(e)}}const is=new Ef;class Rf{type=is;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"model",source:()=>r.model,setSource:n=>t("model",n)},{name:"count",source:()=>r.count,setSource:n=>t("count",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("model");if(a?.type!="Model")return;let s=a.value,u=o.get("count");if(u?.type!="Atom")return;let l=u.value,c=n.allocVar();n.insertGlobalCode(re`
        float ${c}(vec3 p) {
          float sp = 6.283185/float(${l});
          float an = atan(p.y,p.x);
          float id = floor(an/sp);

          float a1 = sp*(id+0.0);
          float a2 = sp*(id+1.0);
          vec2 r1 = mat2(cos(a1),-sin(a1),sin(a1),cos(a1))*p.xy;
          vec2 r2 = mat2(cos(a2),-sin(a2),sin(a2),cos(a2))*p.xy;

          return min(${s.sdfFuncName}(vec3(r1.x, r1.y, p.z)), ${s.sdfFuncName}(vec3(r2.x,r2.y,p.z)));
        }
      `);let p=n.allocVar();return n.insertGlobalCode(re`
        void ${p}(vec3 p, out vec4 c) {
          float sp = 6.283185/float(${l});
          float an = atan(p.y,p.x);
          float id = floor(an/sp);
          float a1 = sp*(id+0.0);
          float a2 = sp*(id+1.0);
          vec2 r1 = mat2(cos(a1),-sin(a1),sin(a1),cos(a1))*p.xy;
          vec2 r2 = mat2(cos(a2),-sin(a2),sin(a2),cos(a2))*p.xy;
          vec3 p1 = vec3(r1.x, r1.y, p.z);
          vec3 p2 = vec3(r2.x, r2.y, p.z);
          float d1 = ${s.sdfFuncName}(p1);
          float d2 = ${s.sdfFuncName}(p2);
          if (d1 < d2) {
            p = p1;
          } else {
            p = p2;
          }
          ${s.colourFuncName}(p, c);
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:c,colourFuncName:p}}]])}}}const Mf=G({model:z(I),k:z(I),out:Q(I)}),os=new Z({typeName:"Bend",typeSchema:Mf});class Af{componentType=os;ext={};create(e){return new Nf(e)}}const as=new Af;class Nf{type=as;nodeParams;inputPins;outputPins;ext={};constructor(e){let r=e.state,t=e.setState;this.nodeParams=e,this.inputPins=S(()=>[{name:"model",source:()=>r.model,setSource:n=>t("model",n)},{name:"k",source:()=>r.k,setSource:n=>t("k",n)}]),this.outputPins=S(()=>[{name:"out",sinks:()=>r.out,setSinks:n=>t("out",n)}]),this.ext.generateCode=({ctx:n,inputs:o})=>{let a=o.get("model");if(a?.type!="Model")return;let s=a.value,u=o.get("k");if(u?.type!="Atom")return;let l=u.value,c=n.allocVar();return n.insertGlobalCode(re`
        float ${c}(vec3 p) {
          float k = ${l};
          float c = cos(k*p.x);
          float s = sin(k*p.x);
          mat2  m = mat2(c,-s,s,c);
          vec3  q = vec3(m*p.xy,p.z);
          return ${s.sdfFuncName}(q);
        }
      `),new Map([["out",{type:"Model",value:{sdfFuncName:c,colourFuncName:"defaultColour"}}]])}}}const ss=new $o;ss.registerNodeTypes([Wa,Va,as,$a,Ba,Xa,Ma,rs,xa,za,Ja,ka,Na,is,ja,Oa,es,ba,_a,Ea,Ca]);class Ff{nextId=0;globalCode=[];mainBody=[];colourBody=[];allocVar(){return`x${this.nextId++}`}insertGlobalCode(e){this.globalCode.push(e)}insertCode(e){this.mainBody.push(e)}insertColourCode(e){this.colourBody.push(e)}genCode(){return re`precision highp float;
uniform vec2 resolution;
uniform float uFocalLength;

void defaultColour(vec3 p, out vec4 c) {
  c = vec4(1.0, 1.0, 1.0, 1.0);
}

${this.globalCode}

float map(vec3 p) {
  float d = 10000.0;
  ${this.mainBody}
  return d;
}

void colourMap(vec3 p, out vec4 c) {
  float d = 10000.0;
  ${this.colourBody}
}

bool march(vec3 ro, vec3 rd, out float t) {
  vec3 p = ro;
  t = 0.0;
  for (int i = 0; i < 100; ++i) {
    vec3 p = ro + rd*t;
    float d = map(p);
    if (abs(d) <= 0.01) {
      return true;
    }
    t += d;
  }
  return false;
}

vec3 normal(vec3 p) {
  float d = 0.01;
  float mp = map(p);
  float dx = map(p + vec3(d,0,0)) - mp;
  float dy = map(p + vec3(0,d,0)) - mp;
  float dz = map(p + vec3(0,0,d)) - mp;
  return normalize(vec3(dx,dy,dz));
}

void main(void) {
  float fl = uFocalLength;
  float d = 10000.0;
  float mx = max(resolution.x, resolution.y);
  vec2 uv = gl_FragCoord.xy / mx;
  vec3 w = normalize(vec3(0.0, 0.0, 1.0));
  vec3 ro = w * d;
  vec3 u = normalize(cross(vec3(0,1,0),w));
  vec3 v = cross(w,u);
  vec3 rd = normalize(
    (gl_FragCoord.x - 0.5 * resolution.x) * u +
    (gl_FragCoord.y - 0.5 * resolution.y) * v +
    -fl * w
  );
  float t = 0.0;
  bool hit = march(ro, rd, t);
  if (!hit) {
    gl_FragColor = vec4(0.2, 0.2, 0.2, 1.0);
    return;
  }
  vec3 p = ro + rd*t;
  vec3 n = normal(p);
  float s = dot(n,normalize(vec3(1,1,1))) + 0.2;
  vec4 c = vec4(1.0, 1.0, 1.0, 1.0);
  colourMap(p, c);
  gl_FragColor = vec4(c.r * s, c.g * s, c.b * s, c.a);
}`}}function Of(i){let e=i.nodesSystem,r=[];{let u=new Map;for(let l of e.nodes()){let c={id:0,inputs:{},outputs:{},height:0,node:l};u.set(l.node.nodeParams.entity,c),r.push(c)}for(let l of u.values())for(let c of l.node.node.inputPins?.()??[]){let p=c.source();if(p==null)continue;let f=u.get(p.target);f!=null&&(l.inputs[c.name]={node:f,pin:p.pin})}}for(let u of r)for(let[l,{node:c,pin:p}]of Object.entries(u.inputs)){let f=c.outputs[p],d={node:u,pin:l};f==null?(f=[d],c.outputs[p]=f):f.push(d)}let t=[];Df(r);{let u=0;for(let l of r)l.id=u++}let n=new Ff;t.splice(0,t.length);for(let u of r){let l=t[u.height];l==null?(l=[u],t[u.height]=l):l.push(u)}let o=new Map,a=[];for(let u=0;u<t.length;++u){let l=t[u]??[];for(let c of l){let p=c.node.node,f=new Map;for(let d of Object.entries(c.inputs)){let y=o.get(d[1].node)?.get(d[1].pin);y!=null&&f.set(d[0],y)}if(p.ext.generateCode!=null){let d=p.ext.generateCode({ctx:n,inputs:f,onInit:y=>a.push(y)});d!=null&&o.set(c,d)}}}let s=u=>{for(let l of a)l(u)};return{code:n.genCode(),onInit:s}}function Df(i){let e=new Set,r=[...i],t=[];for(;;){let n=r.pop();if(n==null){let s=r;if(r=t,t=s,n=r.pop(),n==null)break}if(e.has(n))continue;let o=!0;for(let[s,{node:u}]of Object.entries(n.inputs))if(!(n.node.node.inputPins?.().find(l=>l.name==s)?.isEffectPin??!1)&&!e.has(u)){o=!1;break}if(!o){t.push(n);continue}let a=0;for(let[,{node:s,pin:u}]of Object.entries(n.inputs))(s.node.node.outputPins?.().find(({name:l})=>l==u)?.isEffectPin??!1)||s.height>=a&&(a=s.height+1);n.height=a,e.add(n)}}const jf=new Zr([..._o.componentTypes,Ga,qa,os,Ta,Ua,Za,Ra,ts,wa,La,an,va,Aa,ns,Da,Fa,Qa,fa,ve,Pa,Ha,Ia,Sa]);var Lf=V("<div><div><div></div><div><canvas>"),zf=V("<label class=label style=margin-left:5px;><input type=checkbox class=checkbox>Show Code"),Uf=V("<div><pre>");const ls=50,Bf=i=>{let[e,r]=Br(i,["world"]),[t,n]=Se({windowWidth:window.innerWidth,windowHeight:window.innerHeight,showCode:!1});window.addEventListener("resize",()=>{Oe(()=>{n("windowWidth",window.innerWidth),n("windowHeight",window.innerHeight)})});let o=S(()=>t.windowWidth>t.windowHeight),[a,s]=J(),u=S(()=>{let h=a();if(h!=null)return Of({nodesSystem:h})}),[l,c]=J(),[p,f]=J(),[d,y]=J();Te(ae([l,p],([h,g])=>{if(h==null||g==null)return;let b=h.getBoundingClientRect();g.width=b.width*window.devicePixelRatio,g.height=b.height*window.devicePixelRatio,g.style.setProperty("background-color","darkblue");let k=g.getContext("webgl");k!=null&&y(k)}));let m;return Te(ae([d,p],([h,g])=>{if(h==null||g==null)return;let b=u();b!=null&&(m=Vf(h,g,b))})),Te(ae([d,u],([h,g])=>{if(a()==null)return;let k=p();if(k==null)return;let v=k.width,x=k.height;const w=.5*x/Math.tan(.5*ls*Math.PI/180);if(m==null||h==null||g==null)return;let P=Or(h,h.FRAGMENT_SHADER,He.toString(g.code));if(P==null)return;if(h.detachShader(m.shaderProgram,m.fragmentShader),h.deleteShader(m.fragmentShader),m.fragmentShader=P,h.attachShader(m.shaderProgram,m.fragmentShader),h.linkProgram(m.shaderProgram),!h.getProgramParameter(m.shaderProgram,h.LINK_STATUS)){console.error("ERROR linking program:",h.getProgramInfoLog(m.shaderProgram));return}let C=m.shaderProgram;h.useProgram(C);const _=h.getAttribLocation(C,"aVertexPosition"),R=h.getUniformLocation(C,"uFocalLength"),$=h.getUniformLocation(C,"uModelViewMatrix"),O=h.getUniformLocation(C,"resolution");h.uniform1f(R,w),h.uniform2f(O,v,x);let D;{let U=!1;D=()=>{U||(U=!0,requestAnimationFrame(()=>{U=!1,h.bindBuffer(h.ARRAY_BUFFER,E),h.enableVertexAttribArray(_),h.drawArrays(h.TRIANGLES,0,6),h.disableVertexAttribArray(_)}))}}g.onInit({gl:h,program:C,rerender:D});const M=m.vertices;M[0]=0,M[1]=0,M[2]=v,M[3]=0,M[4]=v,M[5]=x,M[6]=0,M[7]=0,M[8]=v,M[9]=x,M[10]=0,M[11]=x;let E=m.verticesGLBuffer;h.bindBuffer(h.ARRAY_BUFFER,E),h.bufferData(h.ARRAY_BUFFER,M,h.DYNAMIC_DRAW),h.vertexAttribPointer(_,2,h.FLOAT,!1,0,0);function F(U,q,W,ee){var A=-1,Y=1,te=q-U,ye=ee-W,se=Y-A;return[2/te,0,0,0,0,2/ye,0,0,0,0,-2/se,0,-(q+U)/te,-(ee+W)/ye,-(Y+A)/se,1]}const B=new Float32Array(F(0,v,0,x));h.uniformMatrix4fv($,!1,B),h.viewport(0,0,v,x),h.enableVertexAttribArray(_),h.drawArrays(h.TRIANGLES,0,6),h.disableVertexAttribArray(_)},{defer:!0})),(()=>{var h=Lf(),g=h.firstChild,b=g.firstChild,k=b.nextSibling,v=k.firstChild;jr(h,r,!1,!0),g.style.setProperty("width","100%"),g.style.setProperty("height","100%"),g.style.setProperty("position","relative"),g.style.setProperty("display","flex"),b.style.setProperty("flex","1"),b.style.setProperty("display","flex"),b.style.setProperty("overflow","hidden"),K(b,T(Ro,{style:{"flex-grow":"1"},onInit:P=>{s(P.nodesSystem)},componentRegistry:jf,nodeRegistry:ss,get world(){return e.world},get toolbar(){return(()=>{var P=zf(),C=P.firstChild;return C.addEventListener("change",_=>n("showCode",_.currentTarget.checked)),X(()=>C.checked=t.showCode),P})()}}),null),K(b,T(ne,{get when(){return S(()=>!!t.showCode)()?u():void 0},children:P=>(()=>{var C=Uf(),_=C.firstChild;return C.style.setProperty("position","absolute"),C.style.setProperty("right","0"),C.style.setProperty("top","0"),C.style.setProperty("bottom","0"),C.style.setProperty("overflow","auto"),C.style.setProperty("width","50%"),X(()=>_.innerText=He.toString(P().code)),C})()}),null);var x=c;typeof x=="function"?ge(x,k):c=k,k.style.setProperty("flex","1"),k.style.setProperty("display","flex"),k.style.setProperty("overflow","hidden");var w=f;return typeof w=="function"?ge(w,v):f=v,v.style.setProperty("flex-grow","1"),X(P=>(P=o()?"row":"column-reverse")!=null?g.style.setProperty("flex-direction",P):g.style.removeProperty("flex-direction")),h})()};function Or(i,e,r){const t=i.createShader(e);if(t!=null){if(i.shaderSource(t,r),i.compileShader(t),!i.getShaderParameter(t,i.COMPILE_STATUS)){console.error("An error occurred compiling the shaders: "+i.getShaderInfoLog(t)),i.deleteShader(t);return}return t}}function qf(i,e,r){const t=Or(i,i.VERTEX_SHADER,e);if(t==null)return;const n=Or(i,i.FRAGMENT_SHADER,r);if(n==null){i.deleteShader(t);return}const o=i.createProgram();if(i.attachShader(o,t),i.attachShader(o,n),i.linkProgram(o),!i.getProgramParameter(o,i.LINK_STATUS)){console.error("Unable to initialize the shader program: "+i.getProgramInfoLog(o)),i.detachShader(o,t),i.detachShader(o,n),i.deleteShader(t),i.deleteShader(n),i.deleteProgram(o);return}return{vertexShader:t,fragmentShader:n,shaderProgram:o}}function Vf(i,e,r){let t=e.width,n=e.height;const o=.5*n/Math.tan(.5*ls*Math.PI/180);let a,s,u;{const b=qf(i,`attribute vec4 aVertexPosition;

  uniform mat4 uModelViewMatrix;

  void main(void) {
    gl_Position = uModelViewMatrix * aVertexPosition;
  }
  `,He.toString(r.code));if(b==null)return;a=b.vertexShader,s=b.fragmentShader,u=b.shaderProgram}i.useProgram(u);const l=i.getAttribLocation(u,"aVertexPosition"),c=i.getUniformLocation(u,"uFocalLength"),p=i.getUniformLocation(u,"uModelViewMatrix"),f=i.getUniformLocation(u,"resolution");i.uniform1f(c,o),i.uniform2f(f,t,n);const d=new Float32Array(12);d[0]=0,d[1]=0,d[2]=t,d[3]=0,d[4]=t,d[5]=n,d[6]=0,d[7]=0,d[8]=t,d[9]=n,d[10]=0,d[11]=n;let y=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,y),i.bufferData(i.ARRAY_BUFFER,d,i.DYNAMIC_DRAW),i.vertexAttribPointer(l,2,i.FLOAT,!1,0,0);function m(b,k,v,x){var w=-1,P=1,C=k-b,_=x-v,R=P-w;return[2/C,0,0,0,0,2/_,0,0,0,0,-2/R,0,-(k+b)/C,-(x+v)/_,-(P+w)/R,1]}const h=new Float32Array(m(0,t,0,n));return i.uniformMatrix4fv(p,!1,h),i.viewport(0,0,t,n),i.enableVertexAttribArray(l),i.drawArrays(i.TRIANGLES,0,6),i.disableVertexAttribArray(l),{width:e.width,height:e.height,positionLocation:l,verticesGLBuffer:y,vertices:d,vertexShader:a,fragmentShader:s,shaderProgram:u}}var Gf=V("<div>");const Wf=Ee(()=>Ie(()=>import("./CodeMirror-CL-wF66e.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),Hf=Ee(()=>Ie(()=>import("./AppV2-DB6vR3Fd.js"),__vite__mapDeps([5,1,2,3,4,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,0,21]),import.meta.url)),Kf=Ee(()=>Ie(()=>import("./KittyDemo-xaDEBH_J.js"),__vite__mapDeps([22,1,2,3,4,12,13,17]),import.meta.url)),Yf=Ee(()=>Ie(()=>import("./PixelEditor-BEk1u82L.js"),__vite__mapDeps([6,1,2,3,4,7]),import.meta.url)),Jf=Ee(()=>Ie(()=>import("./lib-Dbgxobrh.js").then(i=>i._),__vite__mapDeps([1,2,3,4]),import.meta.url)),Zf=Ee(()=>Ie(()=>import("./ScriptEditor-rC8KKWhD.js"),__vite__mapDeps([8,1,2,3,4]),import.meta.url)),Xf=Ee(()=>Ie(()=>import("./ColourPicker-BYsZfYke.js").then(i=>i.b),__vite__mapDeps([7,1,2,3,4]),import.meta.url)),Qf=Ee(()=>Ie(()=>import("./ReactiveSimulator-CrYrdXJp.js"),__vite__mapDeps([23,1,2,3,4]),import.meta.url)),eh=Ee(()=>Ie(()=>import("./VectorEditor-qIaeYoVr.js"),__vite__mapDeps([24,1,2,3,4]),import.meta.url)),th=Ee(()=>Ie(()=>import("./GravityTest-KmSBkBfx.js"),__vite__mapDeps([25,1,2,3,4]),import.meta.url)),rh=Ee(()=>Ie(()=>import("./ThreeBody-CMLcVY2a.js"),__vite__mapDeps([26,1,2,3,4]),import.meta.url)),nh=Ee(()=>Ie(()=>import("./VirtualFileSystemTest-Bvitkndk.js"),__vite__mapDeps([27,1,2,3,4]),import.meta.url)),ih=Ee(()=>Ie(()=>import("./AutomergeWebRtcTest-CtLjPCmm.js"),__vite__mapDeps([28,1,2,3,4]),import.meta.url)),oh=Ee(()=>Ie(()=>import("./DebugProjection-DE7hDG-A.js"),__vite__mapDeps([29,1,2,3,4]),import.meta.url)),ah=Ee(()=>Ie(()=>import("./AutoFormsTest-B_dKKVpU.js"),__vite__mapDeps([30,1,2,3,4]),import.meta.url)),sh=document.getElementById("root");ki(()=>{let i=new URLSearchParams(window.location.search),e=window.localStorage.getItem("lastDocUrl"),r=i.get("docUrl")??e,[t,n]=J(!1),o=new ps({storage:new fs,network:[]}),a;if(r==null||!mn(r)){let h=o.create(gn.makeEmptyState(o));window.localStorage.setItem("lastDocUrl",h.url),a=()=>h}else{let[h]=bs(()=>o.find(r));a=h}let s=S(()=>{let[h,g]=J(a());return{doc:h,setDoc:g}}),u=S(()=>s().doc()),l=h=>{ie(()=>s().setDoc(h))},c=S(()=>a()?.url),p=ql({documentUrl:c,setDocumentUrl:async h=>{if(!mn(h))return;let g=await o.find(h);l(g)}}),f=p.connections.bind(p),d=S(Qe(f,h=>new Vl({connection:h.conn})));oe(Qe(d,h=>{o.networkSubsystem.addNetworkAdapter(h),ke(()=>{})}));let y=S(()=>{let h=u();return new gn({repo:o,docHandle:()=>h})}),m=()=>T(el,{onShareVfs:()=>{let h=a();if(h==null)return;const g=new URL(window.location.href);g.searchParams.set("docUrl",h.url);let b=g.toString();window.history.pushState(null,"",b),navigator.clipboard.writeText(b)},onDeleteVfs:()=>{window.localStorage.removeItem("lastDocUrl"),indexedDB.deleteDatabase("automerge"),window.location.reload()},get vfs(){return y()}});return T(Hs,{get children(){return[T(be,{path:"/",component:m}),T(be,{path:"/kitty-demo",component:Kf}),T(be,{path:"/pixel-editor",component:()=>T(Yf,{})}),T(be,{path:"/level-builder",component:()=>T(Jf,{get vfs(){return y()}})}),T(be,{path:"/script-editor",component:()=>T(Zf,{})}),T(be,{path:"/music-editor",component:Od}),T(be,{path:"/model-editor",component:()=>T(Bf,{style:"flex-grow: 1; overflow: hidden;",world:new dt})}),T(be,{path:"/code-mirror",component:()=>T(Wf,{})}),T(be,{path:"/colour-picker",component:()=>(()=>{var h=Gf();return h.style.setProperty("width","300px"),h.style.setProperty("height","300px"),h.style.setProperty("display","flex"),h.style.setProperty("flex-direction","column"),h.style.setProperty("margin-left","20px"),h.style.setProperty("margin-top","20px"),K(h,T(Xf,{})),h})()}),T(be,{path:"/reactive-sim",component:Qf}),T(be,{path:"/vector-editor",component:eh}),T(be,{path:"/gravity-test",component:th}),T(be,{path:"/three-body",component:rh}),T(be,{path:"/vfs-test",component:nh}),T(be,{path:"/automerge-webrtc-test",component:ih}),T(be,{path:"/connection-management",get component(){return p.Render}}),T(be,{path:"/debug-projection",component:oh}),T(be,{path:"/app",component:()=>T(ne,{get when(){return u()},children:h=>T(Hf,{get vfsDocUrl(){return h().url},get vfs(){return y()},get ConnectionManagementUi(){return p.Render},get broadcastNetworkAdapterIsEnabled(){return t()},enableBroadcastNetworkAdapter:()=>{o.networkSubsystem.addNetworkAdapter(new hs),n(!0)},flushRepo:()=>o.flush()})})}),T(be,{path:"/auto-forms-test",component:ah})]}})},sh);const yh=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{Nn as $,Ni as F,Js as a,yh as b,fh as e,Zs as i};
