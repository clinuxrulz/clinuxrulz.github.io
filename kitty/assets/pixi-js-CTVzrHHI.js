import{G as ke,c as Xe,t as $e,T as ce,E as H,at as Ht,au as Vt,s as qt,D as xn,av as ht,aw as je,ax as mt,ay as _n,L as vn,O as wr,az as we,P as Pr,N as dt,R as Ur,a6 as $,a7 as pe,a3 as Ut,S as zt,M as Fr,aA as Bt,Y as Or,a as ar,U as ir,C as Yt,a9 as Sn,aB as Re,an as En,w as ft,af as pt,ap as yn,aC as Gr,am as An,ak as Cn,aD as Dn,aE as Bn,m as Tn,B as lr,aF as ae,aG as Rn,aH as wn,aI as Pn,aJ as Un,aK as Fn,aL as On,aM as Tt,aN as Gn,aO as Ee,aP as cr,aQ as Mn}from"./index-XNH-lkY3.js";import{dj as ta,H as ra,bW as na,h as ua,dy as oa,A as sa,aU as aa,ck as ia,aV as la,bC as ca,bE as da,bF as fa,ah as pa,bD as ha,K as ma,n as ba,dq as ga,br as xa,cm as _a,p as va,u as Sa,cl as Ea,q as ya,bx as Aa,bX as Ca,dw as Da,bs as Ba,J as Ta,bG as Ra,dr as wa,by as Pa,d as Ua,cY as Fa,cZ as Oa,Q as Ga,c_ as Ma,c$ as Ia,d0 as La,cn as Na,cf as ka,b3 as Xa,bY as Ha,bZ as Va,dA as qa,bt as za,bz as Ya,dD as Wa,dE as Ka,bu as $a,cK as ja,a8 as Qa,bA as Za,l as Ja,da as ei,b as ti,cg as ri,d3 as ni,g as ui,b_ as oi,Z as si,I as ai,cp as ii,f as li,du as ci,ch as di,ci as fi,a1 as pi,a0 as hi,cJ as mi,a2 as bi,a5 as gi,co as xi,aj as _i,bf as vi,ct as Si,bJ as Ei,c3 as yi,bp as Ai,c0 as Ci,cq as Di,dn as Bi,dk as Ti,dl as Ri,dm as wi,cw as Pi,aR as Ui,cN as Fi,cO as Oi,cP as Gi,cQ as Mi,cR as Ii,dc as Li,cS as Ni,cU as ki,cV as Xi,cT as Hi,cy as Vi,aW as qi,cL as zi,bj as Yi,bB as Wi,cz as Ki,cW as $i,cA as ji,x as Qi,ab as Zi,bH as Ji,bI as el,aa as tl,v as rl,bK as nl,bM as ul,bN as ol,bk as sl,bl as al,o as il,bm as ll,bb as cl,bo as dl,cX as fl,aX as pl,aY as hl,aZ as ml,a_ as bl,dv as gl,a$ as xl,b0 as _l,bc as vl,dF as Sl,cB as El,cd as yl,c4 as Al,e as Cl,c8 as Dl,c9 as Bl,db as Tl,k as Rl,bL as wl,cC as Pl,ar as Ul,bP as Fl,bQ as Ol,ca as Gl,cb as Ml,ag as Il,y as Ll,ac as Nl,dg as kl,ai as Xl,V as Hl,ae as Vl,al as ql,as as zl,cj as Yl,cD as Wl,b6 as Kl,ce as $l,cE as jl,a4 as Ql,b$ as Zl,c1 as Jl,z as ec,dh as tc,cv as rc,dB as nc,c2 as uc,j as oc,bi as sc,bT as ac,bU as ic,bV as lc,bO as cc,c5 as dc,bv as fc,bn as pc,dp as hc,bq as mc,b9 as bc,b4 as gc,b8 as xc,ba as _c,b5 as vc,bd as Sc,b7 as Ec,bw as yc,cx as Ac,cF as Cc,$ as Dc,cM as Bc,aq as Tc,aT as Rc,cG as wc,d7 as Pc,d4 as Uc,d5 as Fc,d6 as Oc,d8 as Gc,dC as Mc,be as Ic,r as Lc,cc as Nc,dx as kc,ds as Xc,bg as Hc,bh as Vc,cr as qc,F as zc,ad as Yc,d1 as Wc,d2 as Kc,c6 as $c,dd as jc,cH as Qc,dt as Zc,c7 as Jc,d9 as e2,b1 as t2,b2 as r2,cs as n2,de as u2,cI as o2,df as s2,di as a2,X as i2,W as l2,ao as c2,cu as d2,dz as f2,bR as p2,bS as h2,aS as m2}from"./index-XNH-lkY3.js";import{A as g2,D as x2,b as _2,E as v2,c as S2,F as E2,d as y2,e as A2,f as C2,g as D2,a as B2,i as T2}from"./FederatedEventTarget-DFQx8mKK.js";import{F as Pe}from"./Filter-BDK7ILDO.js";import{M as bt,H as Ft,m as In,P as Mr,N as Ie}from"./CanvasTextSystem-BKHjFPHo.js";import{B as w2,y as P2,X as U2,Y as F2,F as O2,a as G2,J as M2,c as I2,e as L2,d as N2,h as k2,G as X2,z as H2,A as V2,E as q2,b as z2,o as Y2,i as W2,j as K2,k as $2,Q as j2,R as Q2,Z as Z2,T as J2,r as ed,q as td,s as rd,l as nd,I as ud,n as od,a5 as sd,K as ad,g as id,a2 as ld,L as cd,O as dd,a4 as fd,S as pd,U as hd,V as md,_ as bd,$ as gd,a0 as xd,a1 as _d,C as vd,D as Sd,f as Ed,v as yd,w as Ad,u as Cd,x as Dd,W as Bd,t as Td,p as Rd,a3 as wd}from"./CanvasTextSystem-BKHjFPHo.js";import{A as Ud,k as Fd,h as Od,l as Gd,B as Md,C as Id,z as Ld,E as Nd,m as kd,n as Xd,G as Hd,H as Vd,M as qd,D as zd,F as Yd,p as Wd,R as Kd,w as $d,r as jd,q as Qd,a as Zd,S as Jd,P as ef,i as tf,T as rf,U as nf,V as uf,j as of,Q as sf,W as af,I as lf,c as cf,e as df,J as ff,x as pf,y as hf,o as mf,g as bf,v as gf,s as xf,X as _f,t as vf,f as Sf,b as Ef,u as yf,d as Af,K as Cf,L as Df,N as Bf,O as Tf}from"./SharedSystems-BwGi1NkL.js";import{S as Ln}from"./State-3sV0XrC-.js";import{A as Nn}from"./AnimatedSprite-CrPahPC5.js";import{B as wf,K as Pf,L as Uf,M as Ff,N as Of,e as Gf,G as Mf,a as If,b as Lf,f as Nf,c as kf,h as Xf,d as Hf,a3 as Vf,a4 as qf,o as zf,i as Yf,l as Wf,m as Kf,p as $f,H as jf,j as Qf,O as Zf,P as Jf,k as e0,q as t0,I as r0,U as n0,F as u0,W as o0,a2 as s0,V as a0,_ as i0,r as l0,A as c0,C as d0,s as f0,t as p0,D as h0,u as m0,n as b0,E as g0,g as x0,v as _0,w as v0,Q as S0,R as E0,S as y0,T as A0,x as C0,X as D0,Y as B0,Z as T0,y as R0,z as w0,J as P0,$ as U0,a0 as F0,a1 as O0}from"./WebGLRenderer-DzfsPnmv.js";import{B as M0,G as I0,o as L0,a as N0,b as k0,c as X0,d as H0,y as V0,z as q0,w as z0,h as Y0,i as W0,j as K0,k as $0,p as j0,e as Q0,q as Z0,f as J0,g as ep,P as tp,U as rp,W as np,x as up,s as op,l as sp,m as ap,n as ip,r as lp,t as cp,u as dp,v as fp}from"./WebGPURenderer-DziseXTR.js";import{B as hp,c as mp,d as bp,a as gp,b as xp,l as _p}from"./colorToUniform-W8Zlj3HA.js";var kn=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uBlend;

uniform sampler2D uTexture;
uniform sampler2D uBackTexture;

{FUNCTIONS}

void main()
{ 
    vec4 back = texture(uBackTexture, vTextureCoord);
    vec4 front = texture(uTexture, vTextureCoord);
    float blendedAlpha = front.a + back.a * (1.0 - front.a);
    
    {MAIN}
}
`,Xn=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 backgroundUv;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Hn=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlendUniforms {
  uBlend:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(0) @binding(3) var uBackTexture: texture_2d<f32>;

@group(1) @binding(0) var<uniform> blendUniforms : BlendUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

{FUNCTIONS}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>
) -> @location(0) vec4<f32> {


   var back =  textureSample(uBackTexture, uSampler, uv);
   var front = textureSample(uTexture, uSampler, uv);
   var blendedAlpha = front.a + back.a * (1.0 - front.a);
   
   var out = vec4<f32>(0.0,0.0,0.0,0.0);

   {MAIN}

   return out;
}`;class W extends Pe{constructor(e){const r=e.gpu,n=dr({source:Hn,...r}),o=ke.from({vertex:{source:n,entryPoint:"mainVertex"},fragment:{source:n,entryPoint:"mainFragment"}}),a=e.gl,i=dr({source:kn,...a}),c=Xe.from({vertex:Xn,fragment:i}),p=new $e({uBlend:{value:1,type:"f32"}});super({gpuProgram:o,glProgram:c,blendRequired:!0,resources:{blendUniforms:p,uBackTexture:ce.EMPTY}})}}function dr(t){const{source:e,functions:r,main:n}=t;return e.replace("{FUNCTIONS}",r).replace("{MAIN}",n)}const Wt=`
	float getLuminosity(vec3 c) {
		return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
	}

	vec3 setLuminosity(vec3 c, float lum) {
		float modLum = lum - getLuminosity(c);
		vec3 color = c.rgb + vec3(modLum);

		// clip back into legal range
		modLum = getLuminosity(color);
		vec3 modLumVec = vec3(modLum);

		float cMin = min(color.r, min(color.g, color.b));
		float cMax = max(color.r, max(color.g, color.b));

		if(cMin < 0.0) {
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0) {
			color = mix(modLumVec, color, (1.0 - modLum) / (cMax - modLum));
		}

		return color;
	}

	float getSaturation(vec3 c) {
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	vec3 setSaturationMinMidMax(vec3 cSorted, float s) {
		vec3 colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x) {
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else {
			colorSorted.y = 0.0;
			colorSorted.z = 0.0;
		}

		colorSorted.x = 0.0;

		return colorSorted;
	}

	vec3 setSaturation(vec3 c, float s) {
		vec3 color = c;

		if(color.r <= color.g && color.r <= color.b) {
			if(color.g <= color.b) {
				color = setSaturationMinMidMax(color.rgb, s).rgb;
			}
			else {
				color = setSaturationMinMidMax(color.rbg, s).rbg;
			}
		}
		else if(color.g <= color.r && color.g <= color.b) {
			if(color.r <= color.b) {
				color = setSaturationMinMidMax(color.grb, s).grb;
			}
			else {
				color = setSaturationMinMidMax(color.gbr, s).gbr;
			}
		}
		else {
			// Using bgr for both fixes part of hue
			if(color.r <= color.g) {
				color = setSaturationMinMidMax(color.brg, s).brg;
			}
			else {
				color = setSaturationMinMidMax(color.bgr, s).bgr;
			}
		}

		return color;
	}
    `,Kt=`
	fn getLuminosity(c: vec3<f32>) -> f32
	{
		return 0.3*c.r + 0.59*c.g + 0.11*c.b;
	}

	fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32>
	{
		var modLum: f32 = lum - getLuminosity(c);
		var color: vec3<f32> = c.rgb + modLum;

		// clip back into legal range
		modLum = getLuminosity(color);
		let modLumVec = vec3<f32>(modLum);

		let cMin: f32 = min(color.r, min(color.g, color.b));
		let cMax: f32 = max(color.r, max(color.g, color.b));

		if(cMin < 0.0)
		{
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0)
		{
			color = mix(modLumVec, color, (1 - modLum) / (cMax - modLum));
		}

		return color;
	}

	fn getSaturation(c: vec3<f32>) -> f32
	{
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32>
	{
		var colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x)
		{
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else
		{
			colorSorted.y = 0;
			colorSorted.z = 0;
		}

		colorSorted.x = 0;

		return colorSorted;
	}

	fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32>
	{
		var color = c;

		if (color.r <= color.g && color.r <= color.b)
		{
			if (color.g <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rgb, s)).rgb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rbg, s)).rbg;
			}
		}
		else if (color.g <= color.r && color.g <= color.b)
		{
			if (color.r <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.grb, s)).grb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.gbr, s)).gbr;
			}
		}
		else
		{
			// Using bgr for both fixes part of hue
			if (color.r <= color.g)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.brg, s)).brg;
			}
			else
			{
				color  = vec3<f32>(setSaturationMinMidMax(color.bgr, s)).bgr;
			}
		}

		return color;
	}
	`;class Vn extends W{constructor(){super({gl:{functions:`
                ${Wt}

                vec3 blendColor(vec3 base, vec3 blend,  float opacity)
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColor(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${Kt}

                fn blendColorOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendColorOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}Vn.extension={name:"color",type:H.BlendMode};class qn extends W{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0 - ((1.0 - base) / blend)), 0.0);
                }

                vec3 blendColorBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendColorBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn blendColorBurn(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendColorBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}qn.extension={name:"color-burn",type:H.BlendMode};class zn extends W{constructor(){super({gl:{functions:`
                float colorDodge(float base, float blend)
                {
                    return base / (1.0 - blend);
                }

                vec3 blendColorDodge(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColorDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return base / (1.0 - blend);
                }

                fn blendColorDodge(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                    out = vec4<f32>(blendColorDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}zn.extension={name:"color-dodge",type:H.BlendMode};class Yn extends W{constructor(){super({gl:{functions:`
                vec3 blendDarken(vec3 base, vec3 blend, float opacity)
                {
                    return (min(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDarken(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendDarken(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (min(blend,base) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendDarken(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}Yn.extension={name:"darken",type:H.BlendMode};class Wn extends W{constructor(){super({gl:{functions:`
                vec3 blendDifference(vec3 base, vec3 blend,  float opacity)
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendDifference(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn blendDifference(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDifference(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}Wn.extension={name:"difference",type:H.BlendMode};class Kn extends W{constructor(){super({gl:{functions:`
                float divide(float base, float blend)
                {
                    return (blend > 0.0) ? clamp(base / blend, 0.0, 1.0) : 1.0;
                }

                vec3 blendDivide(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDivide(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn divide(base: f32, blend: f32) -> f32
                {
                    return select(1.0, clamp(base / blend, 0.0, 1.0), blend > 0.0);
                }

                fn blendDivide(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDivide(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}Kn.extension={name:"divide",type:H.BlendMode};class $n extends W{constructor(){super({gl:{functions:`
                vec3 exclusion(vec3 base, vec3 blend)
                {
                    return base + blend - 2.0 * base * blend;
                }

                vec3 blendExclusion(vec3 base, vec3 blend, float opacity)
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendExclusion(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn exclusion(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return base+blend-2.0*base*blend;
                }

                fn blendExclusion(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendExclusion(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}$n.extension={name:"exclusion",type:H.BlendMode};class jn extends W{constructor(){super({gl:{functions:`
                float hardLight(float base, float blend)
                {
                    return (blend < 0.5) ? 2.0 * base * blend : 1.0 - 2.0 * (1.0 - base) * (1.0 - blend);
                }

                vec3 blendHardLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardLight(base: f32, blend: f32) -> f32
                {
                    return select(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, blend < 0.5);
                }

                fn blendHardLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendHardLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}jn.extension={name:"hard-light",type:H.BlendMode};class Qn extends W{constructor(){super({gl:{functions:`
                float hardMix(float base, float blend)
                {
                    return (base + blend >= 1.0) ? 1.0 : 0.0;
                }

                vec3 blendHardMix(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blended = vec3(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardMix(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardMix(base: f32, blend: f32) -> f32
                {
                    return select(0.0, 1.0, base + blend >= 1.0);
                }

                fn blendHardMix(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendHardMix(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}Qn.extension={name:"hard-mix",type:H.BlendMode};class Zn extends W{constructor(){super({gl:{functions:`
                vec3 blendLighten(vec3 base, vec3 blend, float opacity)
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLighten(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendLighten(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLighten(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}Zn.extension={name:"lighten",type:H.BlendMode};class Jn extends W{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend)
                {
                    return max(0.0, base + blend - 1.0);
                }

                vec3 blendLinearBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn blendLinearBurn(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendLinearBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}Jn.extension={name:"linear-burn",type:H.BlendMode};class eu extends W{constructor(){super({gl:{functions:`
                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                vec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1, base + blend);
                }

                fn blendLinearDodge(base:vec3<f32>, blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}eu.extension={name:"linear-dodge",type:H.BlendMode};class tu extends W{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend) {
                    return max(0.0, base + blend - 1.0);
                }

                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                float linearLight(float base, float blend) {
                    return (blend <= 0.5) ? linearBurn(base,2.0*blend) : linearBurn(base,2.0*(blend-0.5));
                }

                vec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendLinearLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base + blend);
                }

                fn linearLight(base: f32, blend: f32) -> f32
                {
                    return select(linearBurn(base,2.0*(blend-0.5)), linearBurn(base,2.0*blend), blend <= 0.5);
                }

                fn blendLinearLightOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearLightOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}tu.extension={name:"linear-light",type:H.BlendMode};class ru extends W{constructor(){super({gl:{functions:`
                ${Wt}

                vec3 blendLuminosity(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendLuminosity = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLuminosity(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${Kt}

                fn blendLuminosity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendLuminosity: vec3<f32> = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLuminosity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}ru.extension={name:"luminosity",type:H.BlendMode};class nu extends W{constructor(){super({gl:{functions:`
                vec3 negation(vec3 base, vec3 blend)
                {
                    return 1.0-abs(1.0-base-blend);
                }

                vec3 blendNegation(vec3 base, vec3 blend, float opacity)
                {
                    return (negation(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendNegation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendNegation(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return 1.0-abs(1.0-base-blend);
                }

                fn blendNegationOpacity(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (blendNegation(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendNegationOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}nu.extension={name:"negation",type:H.BlendMode};class uu extends W{constructor(){super({gl:{functions:`
                float overlay(float base, float blend)
                {
                    return (base < 0.5) ? (2.0*base*blend) : (1.0-2.0*(1.0-base)*(1.0-blend));
                }

                vec3 blendOverlay(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );
   
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendOverlay(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn overlay(base: f32, blend: f32) -> f32
                {
                    return select((1.0-2.0*(1.0-base)*(1.0-blend)), (2.0*base*blend), base < 0.5);
                }

                fn blendOverlay(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendOverlay(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}uu.extension={name:"overlay",type:H.BlendMode};class ou extends W{constructor(){super({gl:{functions:`
                float pinLight(float base, float blend)
                {
                    return (blend <= 0.5) ? min(base, 2.0 * blend) : max(base, 2.0 * (blend - 0.5));
                }

                vec3 blendPinLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn pinLight(base: f32, blend: f32) -> f32
                {
                    return select(max(base,2.0*(blend-0.5)), min(base,2.0*blend), blend <= 0.5);
                }

                fn blendPinLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}ou.extension={name:"pin-light",type:H.BlendMode};class su extends W{constructor(){super({gl:{functions:`
                ${Wt}

                vec3 blendSaturation(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                ${Kt}

                fn blendSaturation(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}su.extension={name:"saturation",type:H.BlendMode};class au extends W{constructor(){super({gl:{functions:`
                float softLight(float base, float blend)
                {
                    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));
                }

                vec3 blendSoftLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn softLight(base: f32, blend: f32) -> f32
                {
                    return select(2.0 * base * blend + base * base * (1.0 - 2.0 * blend), sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend), blend < 0.5);
                }

                fn blendSoftLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}au.extension={name:"soft-light",type:H.BlendMode};class iu extends W{constructor(){super({gl:{functions:`
                float subtract(float base, float blend)
                {
                    return max(0.0, base - blend);
                }

                vec3 blendSubtract(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn subtract(base: f32, blend: f32) -> f32
                {
                    return max(0, base - blend);
                }

                fn blendSubtract(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}iu.extension={name:"subtract",type:H.BlendMode};class lu extends W{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                float colorDodge(float base, float blend)
                {
                    return min(1.0, base / (1.0-blend));
                }

                float vividLight(float base, float blend)
                {
                    return (blend < 0.5) ? colorBurn(base,(2.0*blend)) : colorDodge(base,(2.0*(blend-0.5)));
                }

                vec3 blendVividLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendVividLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base / (1.0-blend));
                }

                fn vividLight(base: f32, blend: f32) -> f32
                {
                    return select(colorDodge(base,(2.0*(blend-0.5))), colorBurn(base,(2.0*blend)), blend<0.5);
                }

                fn blendVividLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendVividLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}lu.extension={name:"vivid-light",type:H.BlendMode};const $o={extension:{type:H.DetectionParser,priority:3},test:async()=>!!(await Ht()||Vt()),add:async t=>[...t,"basis"],remove:async t=>t.filter(e=>e!=="basis")};class gt extends qt{constructor(e){super(e),this.uploadMethodId="compressed",this.resource=e.resource,this.mipLevelCount=this.resource.length}}let nt;function fr(){if(nt)return nt;const e=document.createElement("canvas").getContext("webgl");return e?(nt=[...e.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...e.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...e.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...e.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...e.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...e.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],nt):[]}let ut;async function pr(){if(ut)return ut;const t=await xn.get().getNavigator().gpu.requestAdapter();return ut=[...t.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...t.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...t.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],ut}let ot;async function Ir(){return ot!==void 0||(ot=await(async()=>{const t=await Ht(),e=Vt();if(t&&e){const r=await pr(),n=fr();return r.filter(o=>n.includes(o))}else{if(t)return await pr();if(e)return fr()}return[]})()),ot}const cu=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"];let st;async function xt(){if(st!==void 0)return st;const t=await Ir();return st=[...cu,...t],st}const du=`(function () {
    'use strict';

    function createLevelBuffers(basisTexture, basisTranscoderFormat) {
      const images = basisTexture.getNumImages();
      const levels = basisTexture.getNumLevels(0);
      const success = basisTexture.startTranscoding();
      if (!success) {
        throw new Error("startTranscoding failed");
      }
      const levelBuffers = [];
      for (let levelIndex = 0; levelIndex < levels; ++levelIndex) {
        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex) {
          const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);
          const levelBuffer = new Uint8Array(transcodeSize);
          const success2 = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);
          if (!success2) {
            throw new Error("transcodeImage failed");
          }
          levelBuffers.push(levelBuffer);
        }
      }
      return levelBuffers;
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": 3,
      // cTFBC3_RGBA
      "bc7-rgba-unorm": 6,
      // cTFBC7_RGBA,
      "etc2-rgba8unorm": 1,
      // cTFETC2_RGBA,
      "astc-4x4-unorm": 10,
      // cTFASTC_4x4_RGBA,
      // Uncompressed
      rgba8unorm: 13,
      // cTFRGBA32,
      rgba4unorm: 16
      // cTFRGBA4444,
    };
    function gpuFormatToBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "basis/basis_transcoder.js",
      wasmUrl: "basis/basis_transcoder.wasm"
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let basisPromise;
    async function getBasis() {
      if (!basisPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        basisPromise = new Promise((resolve) => {
          BASIS({
            locateFile: (_file) => absoluteWasmUrl
          }).then((module) => {
            module.initializeBasis();
            resolve(module.BasisFile);
          });
        });
      }
      return basisPromise;
    }
    async function fetchBasisTexture(url, BasisTexture) {
      const basisResponse = await fetch(url);
      if (basisResponse.ok) {
        const basisArrayBuffer = await basisResponse.arrayBuffer();
        return new BasisTexture(new Uint8Array(basisArrayBuffer));
      }
      throw new Error(\`Failed to load Basis texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const BasisTexture = await getBasis();
      const basisTexture = await fetchBasisTexture(url, BasisTexture);
      const levelBuffers = createLevelBuffers(basisTexture, basisTranscoderFormat);
      return {
        width: basisTexture.getImageWidth(0, 0),
        height: basisTexture.getImageHeight(0, 0),
        format: basisTranscodedTextureFormat,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getBasis();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type](message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`;let Le=null,Lr=class{constructor(){Le||(Le=URL.createObjectURL(new Blob([du],{type:"application/javascript"}))),this.worker=new Worker(Le)}};Lr.revokeObjectURL=function(){Le&&(URL.revokeObjectURL(Le),Le=null)};const Ot={jsUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.js",wasmUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.wasm"};function Qo(t){Object.assign(Ot,t)}let ze;const Nr={};function fu(t){return ze||(ze=new Lr().worker,ze.onmessage=e=>{const{success:r,url:n,textureOptions:o}=e.data;r||console.warn("Failed to load Basis texture",n),Nr[n](o)},ze.postMessage({type:"init",jsUrl:Ot.jsUrl,wasmUrl:Ot.wasmUrl,supportedTextures:t})),ze}function pu(t,e){const r=fu(e);return new Promise(n=>{Nr[t]=n,r.postMessage({type:"load",url:t})})}const Zo={extension:{type:H.LoadParser,priority:ht.High,name:"loadBasis"},name:"loadBasis",test(t){return je(t,[".basis"])},async load(t,e,r){const n=await xt(),o=await pu(t,n),a=new gt(o);return mt(a,r,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};function Jo(t,e){const r=t.getNumImages(),n=t.getNumLevels(0);if(!t.startTranscoding())throw new Error("startTranscoding failed");const a=[];for(let i=0;i<n;++i)for(let c=0;c<r;++c){const p=t.getImageTranscodedSizeInBytes(c,i,e),f=new Uint8Array(p);if(!t.transcodeImage(f,c,i,e,1,0))throw new Error("transcodeImage failed");a.push(f)}return a}const hu={"bc3-rgba-unorm":3,"bc7-rgba-unorm":6,"etc2-rgba8unorm":1,"astc-4x4-unorm":10,rgba8unorm:13,rgba4unorm:16};function es(t){const e=hu[t];if(e)return e;throw new Error(`Unsupported transcoderFormat: ${t}`)}const mu={MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},bu={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4};var kr=(t=>(t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",t))(kr||{}),Xr=(t=>(t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",t))(Xr||{});function J(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}var ie=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.R8G8B8=20]="R8G8B8",t[t.A8R8G8B8=21]="A8R8G8B8",t[t.X8R8G8B8=22]="X8R8G8B8",t[t.R5G6B5=23]="R5G6B5",t[t.X1R5G5B5=24]="X1R5G5B5",t[t.A1R5G5B5=25]="A1R5G5B5",t[t.A4R4G4B4=26]="A4R4G4B4",t[t.R3G3B2=27]="R3G3B2",t[t.A8=28]="A8",t[t.A8R3G3B2=29]="A8R3G3B2",t[t.X4R4G4B4=30]="X4R4G4B4",t[t.A2B10G10R10=31]="A2B10G10R10",t[t.A8B8G8R8=32]="A8B8G8R8",t[t.X8B8G8R8=33]="X8B8G8R8",t[t.G16R16=34]="G16R16",t[t.A2R10G10B10=35]="A2R10G10B10",t[t.A16B16G16R16=36]="A16B16G16R16",t[t.A8P8=40]="A8P8",t[t.P8=41]="P8",t[t.L8=50]="L8",t[t.A8L8=51]="A8L8",t[t.A4L4=52]="A4L4",t[t.V8U8=60]="V8U8",t[t.L6V5U5=61]="L6V5U5",t[t.X8L8V8U8=62]="X8L8V8U8",t[t.Q8W8V8U8=63]="Q8W8V8U8",t[t.V16U16=64]="V16U16",t[t.A2W10V10U10=67]="A2W10V10U10",t[t.Q16W16V16U16=110]="Q16W16V16U16",t[t.R16F=111]="R16F",t[t.G16R16F=112]="G16R16F",t[t.A16B16G16R16F=113]="A16B16G16R16F",t[t.R32F=114]="R32F",t[t.G32R32F=115]="G32R32F",t[t.A32B32G32R32F=116]="A32B32G32R32F",t[t.UYVY=J("UYVY")]="UYVY",t[t.R8G8_B8G8=J("RGBG")]="R8G8_B8G8",t[t.YUY2=J("YUY2")]="YUY2",t[t.D3DFMT_G8R8_G8B8=J("GRGB")]="D3DFMT_G8R8_G8B8",t[t.DXT1=J("DXT1")]="DXT1",t[t.DXT2=J("DXT2")]="DXT2",t[t.DXT3=J("DXT3")]="DXT3",t[t.DXT4=J("DXT4")]="DXT4",t[t.DXT5=J("DXT5")]="DXT5",t[t.ATI1=J("ATI1")]="ATI1",t[t.AT1N=J("AT1N")]="AT1N",t[t.ATI2=J("ATI2")]="ATI2",t[t.AT2N=J("AT2N")]="AT2N",t[t.BC4U=J("BC4U")]="BC4U",t[t.BC4S=J("BC4S")]="BC4S",t[t.BC5U=J("BC5U")]="BC5U",t[t.BC5S=J("BC5S")]="BC5S",t[t.DX10=J("DX10")]="DX10",t))(ie||{});const hr={[ie.DXT1]:"bc1-rgba-unorm",[ie.DXT2]:"bc2-rgba-unorm",[ie.DXT3]:"bc2-rgba-unorm",[ie.DXT4]:"bc3-rgba-unorm",[ie.DXT5]:"bc3-rgba-unorm",[ie.ATI1]:"bc4-r-unorm",[ie.BC4U]:"bc4-r-unorm",[ie.BC4S]:"bc4-r-snorm",[ie.ATI2]:"bc5-rg-unorm",[ie.BC5U]:"bc5-rg-unorm",[ie.BC5S]:"bc5-rg-snorm",36:"rgba16uint",110:"rgba16sint",111:"r16float",112:"rg16float",113:"rgba16float",114:"r32float",115:"rg32float",116:"rgba32float"},le={70:"bc1-rgba-unorm",71:"bc1-rgba-unorm",72:"bc1-rgba-unorm-srgb",73:"bc2-rgba-unorm",74:"bc2-rgba-unorm",75:"bc2-rgba-unorm-srgb",76:"bc3-rgba-unorm",77:"bc3-rgba-unorm",78:"bc3-rgba-unorm-srgb",79:"bc4-r-unorm",80:"bc4-r-unorm",81:"bc4-r-snorm",82:"bc5-rg-unorm",83:"bc5-rg-unorm",84:"bc5-rg-snorm",94:"bc6h-rgb-ufloat",95:"bc6h-rgb-ufloat",96:"bc6h-rgb-float",97:"bc7-rgba-unorm",98:"bc7-rgba-unorm",99:"bc7-rgba-unorm-srgb",28:"rgba8unorm",29:"rgba8unorm-srgb",87:"bgra8unorm",91:"bgra8unorm-srgb",41:"r32float",49:"rg8unorm",56:"r16uint",61:"r8unorm",24:"rgb10a2unorm",11:"rgba16uint",13:"rgba16sint",10:"rgba16float",54:"r16float",34:"rg16float",16:"rg32float",2:"rgba32float"},R={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:mu,HEADER_DX10_FIELDS:bu,DXGI_FORMAT:kr,D3D10_RESOURCE_DIMENSION:Xr,D3DFMT:ie},gu={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16};function xu(t,e){const{format:r,fourCC:n,width:o,height:a,dataOffset:i,mipmapCount:c}=vu(t);if(!e.includes(r))throw new Error(`Unsupported texture format: ${n} ${r}, supported: ${e}`);if(c<=1)return{format:r,width:o,height:a,resource:[new Uint8Array(t,i)],alphaMode:"no-premultiply-alpha"};const p=_u(r,o,a,i,c,t);return{format:r,width:o,height:a,resource:p,alphaMode:"no-premultiply-alpha"}}function _u(t,e,r,n,o,a){const i=[],c=gu[t];let p=e,f=r,b=n;for(let m=0;m<o;++m){const x=Math.ceil(Math.max(4,p)/4)*4,A=Math.ceil(Math.max(4,f)/4)*4,N=c?x/4*A/4*c:p*f*4,L=new Uint8Array(a,b,N);i.push(L),b+=N,p=Math.max(p>>1,1),f=Math.max(f>>1,1)}return i}function vu(t){const e=new Uint32Array(t,0,R.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(e[R.HEADER_FIELDS.MAGIC]!==R.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");const r=e[R.HEADER_FIELDS.HEIGHT],n=e[R.HEADER_FIELDS.WIDTH],o=Math.max(1,e[R.HEADER_FIELDS.MIPMAP_COUNT]),a=e[R.HEADER_FIELDS.PF_FLAGS],i=e[R.HEADER_FIELDS.FOURCC],c=Su(e,a,i,t),p=R.MAGIC_SIZE+R.HEADER_SIZE+(i===R.D3DFMT.DX10?R.HEADER_DX10_SIZE:0);return{format:c,fourCC:i,width:n,height:r,dataOffset:p,mipmapCount:o}}function Su(t,e,r,n){if(e&R.PIXEL_FORMAT_FLAGS.FOURCC){if(r===R.D3DFMT.DX10){const o=new Uint32Array(n,R.MAGIC_SIZE+R.HEADER_SIZE,R.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(o[R.HEADER_DX10_FIELDS.MISC_FLAG]===R.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(o[R.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===R.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");const c=o[R.HEADER_DX10_FIELDS.DXGI_FORMAT];if(c in le)return le[c];throw new Error(`DDSParser cannot parse texture data with DXGI format ${c}`)}if(r in hr)return hr[r];throw new Error(`DDSParser cannot parse texture data with fourCC format ${r}`)}if(e&R.PIXEL_FORMAT_FLAGS.RGB||e&R.PIXEL_FORMAT_FLAGS.RGBA)return Eu(t);throw e&R.PIXEL_FORMAT_FLAGS.YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):e&R.PIXEL_FORMAT_FLAGS.LUMINANCE||e&R.PIXEL_FORMAT_FLAGS.LUMINANCEA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):e&R.PIXEL_FORMAT_FLAGS.ALPHA||e&R.PIXEL_FORMAT_FLAGS.ALPHAPIXELS?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}function Eu(t){const e=t[R.HEADER_FIELDS.RGB_BITCOUNT],r=t[R.HEADER_FIELDS.R_BIT_MASK],n=t[R.HEADER_FIELDS.G_BIT_MASK],o=t[R.HEADER_FIELDS.B_BIT_MASK],a=t[R.HEADER_FIELDS.A_BIT_MASK];switch(e){case 32:if(r===255&&n===65280&&o===16711680&&a===4278190080)return le[R.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(r===16711680&&n===65280&&o===255&&a===4278190080)return le[R.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(r===1072693248&&n===1047552&&o===1023&&a===3221225472)return le[R.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(r===65535&&n===4294901760&&o===0&&a===0)return le[R.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(r===4294967295&&n===0&&o===0&&a===0)return le[R.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(r===31744&&n===992&&o===31&&a===32768)return le[R.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(r===63488&&n===2016&&o===31&&a===0)return le[R.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(r===3840&&n===240&&o===15&&a===61440)return le[R.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(r===255&&n===0&&o===0&&a===65280)return le[R.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(r===65535&&n===0&&o===0&&a===0)return le[R.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(r===255&&n===0&&o===0&&a===0)return le[R.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];break}throw new Error(`DDSParser does not support uncompressed texture with configuration:
                bitCount = ${e}, rBitMask = ${r}, gBitMask = ${n}, aBitMask = ${a}`)}const ts={extension:{type:H.LoadParser,priority:ht.High,name:"loadDDS"},name:"loadDDS",test(t){return je(t,[".dds"])},async load(t,e,r){const n=await xt(),a=await(await fetch(t)).arrayBuffer(),i=xu(a,n),c=new gt(i);return mt(c,r,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};var yu=(t=>(t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGBA=6408]="RGBA",t[t.RGBA8UI=36220]="RGBA8UI",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGBA8I=36238]="RGBA8I",t[t.RGBA8=32856]="RGBA8",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(yu||{});const Au={33776:"bc1-rgba-unorm",33777:"bc1-rgba-unorm",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",35916:"bc1-rgba-unorm-srgb",35917:"bc1-rgba-unorm-srgb",35918:"bc2-rgba-unorm-srgb",35919:"bc3-rgba-unorm-srgb",36283:"bc4-r-unorm",36284:"bc4-r-snorm",36285:"bc5-rg-unorm",36286:"bc5-rg-snorm",37488:"eac-r11unorm",37490:"eac-rg11snorm",37492:"etc2-rgb8unorm",37496:"etc2-rgba8unorm",37493:"etc2-rgb8unorm-srgb",37497:"etc2-rgba8unorm-srgb",37494:"etc2-rgb8a1unorm",37495:"etc2-rgb8a1unorm-srgb",37808:"astc-4x4-unorm",37840:"astc-4x4-unorm-srgb",37809:"astc-5x4-unorm",37841:"astc-5x4-unorm-srgb",37810:"astc-5x5-unorm",37842:"astc-5x5-unorm-srgb",37811:"astc-6x5-unorm",37843:"astc-6x5-unorm-srgb",37812:"astc-6x6-unorm",37844:"astc-6x6-unorm-srgb",37813:"astc-8x5-unorm",37845:"astc-8x5-unorm-srgb",37814:"astc-8x6-unorm",37846:"astc-8x6-unorm-srgb",37815:"astc-8x8-unorm",37847:"astc-8x8-unorm-srgb",37816:"astc-10x5-unorm",37848:"astc-10x5-unorm-srgb",37817:"astc-10x6-unorm",37849:"astc-10x6-unorm-srgb",37818:"astc-10x8-unorm",37850:"astc-10x8-unorm-srgb",37819:"astc-10x10-unorm",37851:"astc-10x10-unorm-srgb",37820:"astc-12x10-unorm",37852:"astc-12x10-unorm-srgb",37821:"astc-12x12-unorm",37853:"astc-12x12-unorm-srgb",36492:"bc7-rgba-unorm",36493:"bc7-rgba-unorm-srgb",36494:"bc6h-rgb-float",36495:"bc6h-rgb-ufloat",35907:"rgba8unorm-srgb",36759:"rgba8snorm",36220:"rgba8uint",36238:"rgba8sint",6408:"rgba8unorm"},Cu=[171,75,84,88,32,49,49,187,13,10,26,10],Du={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Bu=64,Tu=67305985,Ru={5121:1,5123:2,5124:4,5125:4,5126:4,36193:8},wu={6408:4,6407:3,33319:2,6403:1,6409:1,6410:2,6406:1},Pu={32819:2,32820:2,33635:2},Uu={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,36283:.5,36284:.5,36285:1,36286:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,37808:1,37840:1,37809:.8,37841:.8,37810:.64,37842:.64,37811:.53375,37843:.53375,37812:.445,37844:.445,37813:.4,37845:.4,37814:.33375,37846:.33375,37815:.25,37847:.25,37816:.32,37848:.32,37817:.26625,37849:.26625,37818:.2,37850:.2,37819:.16,37851:.16,37820:.13375,37852:.13375,37821:.11125,37853:.11125,36492:1,36493:1,36494:1,36495:1},Y={FILE_HEADER_SIZE:Bu,FILE_IDENTIFIER:Cu,FORMATS_TO_COMPONENTS:wu,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:Uu,INTERNAL_FORMAT_TO_TEXTURE_FORMATS:Au,FIELDS:Du,TYPES_TO_BYTES_PER_COMPONENT:Ru,TYPES_TO_BYTES_PER_PIXEL:Pu,ENDIANNESS:Tu};function Fu(t,e){const r=new DataView(t);if(!Iu(r))throw new Error("Invalid KTX identifier in header");const{littleEndian:n,glType:o,glFormat:a,glInternalFormat:i,pixelWidth:c,pixelHeight:p,numberOfMipmapLevels:f,offset:b}=Mu(r),m=Y.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[i];if(!m)throw new Error(`Unknown texture format ${i}`);if(!e.includes(m))throw new Error(`Unsupported texture format: ${m}, supportedFormats: ${e}`);const x=Gu(o,a,i),A=Ou(r,o,x,c,p,b,f,n);return{format:m,width:c,height:p,resource:A,alphaMode:"no-premultiply-alpha"}}function Ou(t,e,r,n,o,a,i,c){const p=n+3&-4,f=o+3&-4;let b=n*o;e===0&&(b=p*f);let m=b*r,x=n,A=o,N=p,L=f,g=a;const C=new Array(i);for(let B=0;B<i;B++){const w=t.getUint32(g,c);let I=g+4;C[B]=new Uint8Array(t.buffer,I,m),I+=m,g+=w+4,g=g%4!==0?g+4-g%4:g,x=x>>1||1,A=A>>1||1,N=x+4-1&-4,L=A+4-1&-4,m=N*L*r}return C}function Gu(t,e,r){let n=Y.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[r];if(t!==0&&(Y.TYPES_TO_BYTES_PER_COMPONENT[t]?n=Y.TYPES_TO_BYTES_PER_COMPONENT[t]*Y.FORMATS_TO_COMPONENTS[e]:n=Y.TYPES_TO_BYTES_PER_PIXEL[t]),n===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return n}function Mu(t){const e=t.getUint32(Y.FIELDS.ENDIANNESS,!0)===Y.ENDIANNESS,r=t.getUint32(Y.FIELDS.GL_TYPE,e),n=t.getUint32(Y.FIELDS.GL_FORMAT,e),o=t.getUint32(Y.FIELDS.GL_INTERNAL_FORMAT,e),a=t.getUint32(Y.FIELDS.PIXEL_WIDTH,e),i=t.getUint32(Y.FIELDS.PIXEL_HEIGHT,e)||1,c=t.getUint32(Y.FIELDS.PIXEL_DEPTH,e)||1,p=t.getUint32(Y.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,e)||1,f=t.getUint32(Y.FIELDS.NUMBER_OF_FACES,e),b=t.getUint32(Y.FIELDS.NUMBER_OF_MIPMAP_LEVELS,e),m=t.getUint32(Y.FIELDS.BYTES_OF_KEY_VALUE_DATA,e);if(i===0||c!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(p!==1)throw new Error("WebGL does not support array textures");return{littleEndian:e,glType:r,glFormat:n,glInternalFormat:o,pixelWidth:a,pixelHeight:i,numberOfMipmapLevels:b,offset:Y.FILE_HEADER_SIZE+m}}function Iu(t){for(let e=0;e<Y.FILE_IDENTIFIER.length;e++)if(t.getUint8(e)!==Y.FILE_IDENTIFIER[e])return!1;return!0}const rs={extension:{type:H.LoadParser,priority:ht.High,name:"loadKTX"},name:"loadKTX",test(t){return je(t,".ktx")},async load(t,e,r){const n=await xt(),a=await(await fetch(t)).arrayBuffer(),i=Fu(a,n),c=new gt(i);return mt(c,r,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}},Lu=`(function () {
    'use strict';

    const converters = {
      rgb8unorm: {
        convertedFormat: "rgba8unorm",
        convertFunction: convertRGBtoRGBA
      },
      "rgb8unorm-srgb": {
        convertedFormat: "rgba8unorm-srgb",
        convertFunction: convertRGBtoRGBA
      }
    };
    function convertFormatIfRequired(textureOptions) {
      const format = textureOptions.format;
      if (converters[format]) {
        const convertFunction = converters[format].convertFunction;
        const levelBuffers = textureOptions.resource;
        for (let i = 0; i < levelBuffers.length; i++) {
          levelBuffers[i] = convertFunction(levelBuffers[i]);
        }
        textureOptions.format = converters[format].convertedFormat;
      }
    }
    function convertRGBtoRGBA(levelBuffer) {
      const pixelCount = levelBuffer.byteLength / 3;
      const levelBufferWithAlpha = new Uint32Array(pixelCount);
      for (let i = 0; i < pixelCount; ++i) {
        levelBufferWithAlpha[i] = levelBuffer[i * 3] + (levelBuffer[i * 3 + 1] << 8) + (levelBuffer[i * 3 + 2] << 16) + 4278190080;
      }
      return new Uint8Array(levelBufferWithAlpha.buffer);
    }

    function createLevelBuffersFromKTX(ktxTexture) {
      const levelBuffers = [];
      for (let i = 0; i < ktxTexture.numLevels; i++) {
        const imageData = ktxTexture.getImageData(i, 0, 0);
        const levelBuffer = new Uint8Array(imageData.byteLength);
        levelBuffer.set(imageData);
        levelBuffers.push(levelBuffer);
      }
      return levelBuffers;
    }

    const glFormatToGPUFormatMap = {
      6408: "rgba8unorm",
      32856: "bgra8unorm",
      //
      32857: "rgb10a2unorm",
      33189: "depth16unorm",
      33190: "depth24plus",
      33321: "r8unorm",
      33323: "rg8unorm",
      33325: "r16float",
      33326: "r32float",
      33327: "rg16float",
      33328: "rg32float",
      33329: "r8sint",
      33330: "r8uint",
      33331: "r16sint",
      33332: "r16uint",
      33333: "r32sint",
      33334: "r32uint",
      33335: "rg8sint",
      33336: "rg8uint",
      33337: "rg16sint",
      33338: "rg16uint",
      33339: "rg32sint",
      33340: "rg32uint",
      33778: "bc2-rgba-unorm",
      33779: "bc3-rgba-unorm",
      34836: "rgba32float",
      34842: "rgba16float",
      35056: "depth24plus-stencil8",
      35898: "rg11b10ufloat",
      35901: "rgb9e5ufloat",
      35907: "rgba8unorm-srgb",
      // bgra8unorm-srgb
      36012: "depth32float",
      36013: "depth32float-stencil8",
      36168: "stencil8",
      36208: "rgba32uint",
      36214: "rgba16uint",
      36220: "rgba8uint",
      36226: "rgba32sint",
      36232: "rgba16sint",
      36238: "rgba8sint",
      36492: "bc7-rgba-unorm",
      36756: "r8snorm",
      36757: "rg8snorm",
      36759: "rgba8snorm",
      37496: "etc2-rgba8unorm",
      37808: "astc-4x4-unorm"
    };
    function glFormatToGPUFormat(glInternalFormat) {
      const format = glFormatToGPUFormatMap[glInternalFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported glInternalFormat: \${glInternalFormat}\`);
    }

    const vkFormatToGPUFormatMap = {
      23: "rgb8unorm",
      // VK_FORMAT_R8G8B8_UNORM
      37: "rgba8unorm",
      // VK_FORMAT_R8G8B8A8_UNORM
      43: "rgba8unorm-srgb"
      // VK_FORMAT_R8G8B8A8_SRGB
      // TODO add more!
    };
    function vkFormatToGPUFormat(vkFormat) {
      const format = vkFormatToGPUFormatMap[vkFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported VkFormat: \${vkFormat}\`);
    }

    function getTextureFormatFromKTXTexture(ktxTexture) {
      if (ktxTexture.classId === 2) {
        return vkFormatToGPUFormat(ktxTexture.vkFormat);
      }
      return glFormatToGPUFormat(ktxTexture.glInternalformat);
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": "BC3_RGBA",
      "bc7-rgba-unorm": "BC7_M5_RGBA",
      "etc2-rgba8unorm": "ETC2_RGBA",
      "astc-4x4-unorm": "ASTC_4x4_RGBA",
      // Uncompressed
      rgba8unorm: "RGBA32",
      rg11b10ufloat: "R11F_G11F_B10F"
    };
    function gpuFormatToKTXBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "",
      wasmUrl: ""
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let ktxPromise;
    async function getKTX() {
      if (!ktxPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        ktxPromise = new Promise((resolve) => {
          LIBKTX({
            locateFile: (_file) => absoluteWasmUrl
          }).then((libktx) => {
            resolve(libktx);
          });
        });
      }
      return ktxPromise;
    }
    async function fetchKTXTexture(url, ktx) {
      const ktx2Response = await fetch(url);
      if (ktx2Response.ok) {
        const ktx2ArrayBuffer = await ktx2Response.arrayBuffer();
        return new ktx.ktxTexture(new Uint8Array(ktx2ArrayBuffer));
      }
      throw new Error(\`Failed to load KTX(2) texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const ktx = await getKTX();
      const ktxTexture = await fetchKTXTexture(url, ktx);
      let format;
      if (ktxTexture.needsTranscoding) {
        format = basisTranscodedTextureFormat;
        const transcodeFormat = ktx.TranscodeTarget[basisTranscoderFormat];
        const result = ktxTexture.transcodeBasis(transcodeFormat, 0);
        if (result !== ktx.ErrorCode.SUCCESS) {
          throw new Error("Unable to transcode basis texture.");
        }
      } else {
        format = getTextureFormatFromKTXTexture(ktxTexture);
      }
      const levelBuffers = createLevelBuffersFromKTX(ktxTexture);
      const textureOptions = {
        width: ktxTexture.baseWidth,
        height: ktxTexture.baseHeight,
        format,
        mipLevelCount: ktxTexture.numLevels,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
      convertFormatIfRequired(textureOptions);
      return textureOptions;
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToKTXBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getKTX();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type]?.(message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`;let Ne=null;class Hr{constructor(){Ne||(Ne=URL.createObjectURL(new Blob([Lu],{type:"application/javascript"}))),this.worker=new Worker(Ne)}}Hr.revokeObjectURL=function(){Ne&&(URL.revokeObjectURL(Ne),Ne=null)};const Gt={jsUrl:"https://files.pixijs.download/transcoders/ktx/libktx.js",wasmUrl:"https://files.pixijs.download/transcoders/ktx/libktx.wasm"};function ns(t){Object.assign(Gt,t)}let Ye;const Vr={};function Nu(t){return Ye||(Ye=new Hr().worker,Ye.onmessage=e=>{const{success:r,url:n,textureOptions:o}=e.data;r||console.warn("Failed to load KTX texture",n),Vr[n](o)},Ye.postMessage({type:"init",jsUrl:Gt.jsUrl,wasmUrl:Gt.wasmUrl,supportedTextures:t})),Ye}function ku(t,e){const r=Nu(e);return new Promise(n=>{Vr[t]=n,r.postMessage({type:"load",url:t})})}const us={extension:{type:H.LoadParser,priority:ht.High,name:"loadKTX2"},name:"loadKTX2",test(t){return je(t,".ktx2")},async load(t,e,r){const n=await xt(),o=await ku(t,n),a=new gt(o);return mt(a,r,t)},async unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}},Rt={rgb8unorm:{convertedFormat:"rgba8unorm",convertFunction:mr},"rgb8unorm-srgb":{convertedFormat:"rgba8unorm-srgb",convertFunction:mr}};function os(t){const e=t.format;if(Rt[e]){const r=Rt[e].convertFunction,n=t.resource;for(let o=0;o<n.length;o++)n[o]=r(n[o]);t.format=Rt[e].convertedFormat}}function mr(t){const e=t.byteLength/3,r=new Uint32Array(e);for(let n=0;n<e;++n)r[n]=t[n*3]+(t[n*3+1]<<8)+(t[n*3+2]<<16)+4278190080;return new Uint8Array(r.buffer)}function ss(t){const e=[];for(let r=0;r<t.numLevels;r++){const n=t.getImageData(r,0,0),o=new Uint8Array(n.byteLength);o.set(n),e.push(o)}return e}const Xu={6408:"rgba8unorm",32856:"bgra8unorm",32857:"rgb10a2unorm",33189:"depth16unorm",33190:"depth24plus",33321:"r8unorm",33323:"rg8unorm",33325:"r16float",33326:"r32float",33327:"rg16float",33328:"rg32float",33329:"r8sint",33330:"r8uint",33331:"r16sint",33332:"r16uint",33333:"r32sint",33334:"r32uint",33335:"rg8sint",33336:"rg8uint",33337:"rg16sint",33338:"rg16uint",33339:"rg32sint",33340:"rg32uint",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",34836:"rgba32float",34842:"rgba16float",35056:"depth24plus-stencil8",35898:"rg11b10ufloat",35901:"rgb9e5ufloat",35907:"rgba8unorm-srgb",36012:"depth32float",36013:"depth32float-stencil8",36168:"stencil8",36208:"rgba32uint",36214:"rgba16uint",36220:"rgba8uint",36226:"rgba32sint",36232:"rgba16sint",36238:"rgba8sint",36492:"bc7-rgba-unorm",36756:"r8snorm",36757:"rg8snorm",36759:"rgba8snorm",37496:"etc2-rgba8unorm",37808:"astc-4x4-unorm"};function Hu(t){const e=Xu[t];if(e)return e;throw new Error(`Unsupported glInternalFormat: ${t}`)}const Vu={23:"rgb8unorm",37:"rgba8unorm",43:"rgba8unorm-srgb"};function qu(t){const e=Vu[t];if(e)return e;throw new Error(`Unsupported VkFormat: ${t}`)}function as(t){return t.classId===2?qu(t.vkFormat):Hu(t.glInternalformat)}const zu={"bc3-rgba-unorm":"BC3_RGBA","bc7-rgba-unorm":"BC7_M5_RGBA","etc2-rgba8unorm":"ETC2_RGBA","astc-4x4-unorm":"ASTC_4x4_RGBA",rgba8unorm:"RGBA32",rg11b10ufloat:"R11F_G11F_B10F"};function is(t){const e=zu[t];if(e)return e;throw new Error(`Unsupported transcoderFormat: ${t}`)}const Mt=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],ls={extension:H.ResolveParser,test:t=>je(t,[".ktx",".ktx2",".dds"]),parse:t=>{let e;const r=t.split(".");if(r.length>2){const n=r[r.length-2];Mt.includes(n)&&(e=n)}else e=r[r.length-1];return{resolution:parseFloat(_n.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e,src:t}}};let at;const cs={extension:{type:H.DetectionParser,priority:2},test:async()=>!!(await Ht()||Vt()),add:async t=>{const e=await Ir();return at=Yu(e),[...at,...t]},remove:async t=>at?t.filter(e=>!(e in at)):t};function Yu(t){const e=["basis"],r={};return t.forEach(n=>{const o=n.split("-")[0];o&&!r[o]&&(r[o]=!0,e.push(o))}),e.sort((n,o)=>{const a=Mt.indexOf(n),i=Mt.indexOf(o);return a===-1?1:i===-1?-1:a-i}),e}const Wu=new wr,It=class{cull(e,r,n=!0){this._cullRecursive(e,r,n)}_cullRecursive(e,r,n=!0){if(e.cullable&&e.measurable&&e.includeInBuild){const o=e.cullArea??vn(e,n,Wu);e.culled=o.x>=r.x+r.width||o.y>=r.y+r.height||o.x+o.width<=r.x||o.y+o.height<=r.y}else e.culled=!1;if(!(!e.cullableChildren||e.culled||!e.renderable||!e.measurable||!e.includeInBuild))for(let o=0;o<e.children.length;o++)this._cullRecursive(e.children[o],r,n)}};It.shared=new It;let Ku=It;class $u{static init(){this._renderRef=this.render.bind(this),this.render=()=>{Ku.shared.cull(this.stage,this.renderer.screen),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}}$u.extension={priority:10,type:H.Application,name:"culler"};class fs extends we{constructor(e={}){const{element:r,anchor:n,...o}=e;super({label:"DOMContainer",...o}),this.renderPipeId="dom",this.batched=!1,this._anchor=new Pr(0,0),n&&(this.anchor=n),this.element=e.element||document.createElement("div")}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set element(e){this._element!==e&&(this._element=e,this.onViewUpdate())}get element(){return this._element}updateBounds(){const e=this._bounds,r=this._element;if(!r){e.minX=0,e.minY=0,e.maxX=0,e.maxY=0;return}const{offsetWidth:n,offsetHeight:o}=r;e.minX=0,e.maxX=n,e.minY=0,e.maxY=o}destroy(e=!1){super.destroy(e),this._element?.parentNode?.removeChild(this._element),this._element=null,this._anchor=null}}var We={},_e={},Te={},br;function _t(){if(br)return Te;br=1;function t(a,i,c){if(c===void 0&&(c=Array.prototype),a&&typeof c.find=="function")return c.find.call(a,i);for(var p=0;p<a.length;p++)if(Object.prototype.hasOwnProperty.call(a,p)){var f=a[p];if(i.call(void 0,f,p,a))return f}}function e(a,i){return i===void 0&&(i=Object),i&&typeof i.freeze=="function"?i.freeze(a):a}function r(a,i){if(a===null||typeof a!="object")throw new TypeError("target is not an object");for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(a[c]=i[c]);return a}var n=e({HTML:"text/html",isHTML:function(a){return a===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),o=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===o.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Te.assign=r,Te.find=t,Te.freeze=e,Te.MIME_TYPE=n,Te.NAMESPACE=o,Te}var gr;function qr(){if(gr)return _e;gr=1;var t=_t(),e=t.find,r=t.NAMESPACE;function n(u){return u!==""}function o(u){return u?u.split(/[\t\n\f\r ]+/).filter(n):[]}function a(u,s){return u.hasOwnProperty(s)||(u[s]=!0),u}function i(u){if(!u)return[];var s=o(u);return Object.keys(s.reduce(a,{}))}function c(u){return function(s){return u&&u.indexOf(s)!==-1}}function p(u,s){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(s[l]=u[l])}function f(u,s){var l=u.prototype;if(!(l instanceof s)){let d=function(){};d.prototype=s.prototype,d=new d,p(l,d),u.prototype=l=d}l.constructor!=u&&(typeof u!="function"&&console.error("unknown Class:"+u),l.constructor=u)}var b={},m=b.ELEMENT_NODE=1,x=b.ATTRIBUTE_NODE=2,A=b.TEXT_NODE=3,N=b.CDATA_SECTION_NODE=4,L=b.ENTITY_REFERENCE_NODE=5,g=b.ENTITY_NODE=6,C=b.PROCESSING_INSTRUCTION_NODE=7,B=b.COMMENT_NODE=8,w=b.DOCUMENT_NODE=9,I=b.DOCUMENT_TYPE_NODE=10,V=b.DOCUMENT_FRAGMENT_NODE=11,j=b.NOTATION_NODE=12,G={},k={};G.INDEX_SIZE_ERR=(k[1]="Index size error",1),G.DOMSTRING_SIZE_ERR=(k[2]="DOMString size error",2);var h=G.HIERARCHY_REQUEST_ERR=(k[3]="Hierarchy request error",3);G.WRONG_DOCUMENT_ERR=(k[4]="Wrong document",4),G.INVALID_CHARACTER_ERR=(k[5]="Invalid character",5),G.NO_DATA_ALLOWED_ERR=(k[6]="No data allowed",6),G.NO_MODIFICATION_ALLOWED_ERR=(k[7]="No modification allowed",7);var v=G.NOT_FOUND_ERR=(k[8]="Not found",8);G.NOT_SUPPORTED_ERR=(k[9]="Not supported",9);var E=G.INUSE_ATTRIBUTE_ERR=(k[10]="Attribute in use",10);G.INVALID_STATE_ERR=(k[11]="Invalid state",11),G.SYNTAX_ERR=(k[12]="Syntax error",12),G.INVALID_MODIFICATION_ERR=(k[13]="Invalid modification",13),G.NAMESPACE_ERR=(k[14]="Invalid namespace",14),G.INVALID_ACCESS_ERR=(k[15]="Invalid access",15);function S(u,s){if(s instanceof Error)var l=s;else l=this,Error.call(this,k[u]),this.message=k[u],Error.captureStackTrace&&Error.captureStackTrace(this,S);return l.code=u,s&&(this.message=this.message+": "+s),l}S.prototype=Error.prototype,p(G,S);function D(){}D.prototype={length:0,item:function(u){return u>=0&&u<this.length?this[u]:null},toString:function(u,s){for(var l=[],d=0;d<this.length;d++)Ge(this[d],l,u,s);return l.join("")},filter:function(u){return Array.prototype.filter.call(this,u)},indexOf:function(u){return Array.prototype.indexOf.call(this,u)}};function O(u,s){this._node=u,this._refresh=s,M(this)}function M(u){var s=u._node._inc||u._node.ownerDocument._inc;if(u._inc!==s){var l=u._refresh(u._node);if(ur(u,"length",l.length),!u.$$length||l.length<u.$$length)for(var d=l.length;d in u;d++)Object.prototype.hasOwnProperty.call(u,d)&&delete u[d];p(l,u),u._inc=s}}O.prototype.item=function(u){return M(this),this[u]||null},f(O,D);function X(){}function P(u,s){for(var l=u.length;l--;)if(u[l]===s)return l}function U(u,s,l,d){if(d?s[P(s,d)]=l:s[s.length++]=l,u){l.ownerElement=u;var _=u.ownerDocument;_&&(d&&He(_,u,d),Z(_,u,l))}}function F(u,s,l){var d=P(s,l);if(d>=0){for(var _=s.length-1;d<_;)s[d]=s[++d];if(s.length=_,u){var T=u.ownerDocument;T&&(He(T,u,l),l.ownerElement=null)}}else throw new S(v,new Error(u.tagName+"@"+l))}X.prototype={length:0,item:D.prototype.item,getNamedItem:function(u){for(var s=this.length;s--;){var l=this[s];if(l.nodeName==u)return l}},setNamedItem:function(u){var s=u.ownerElement;if(s&&s!=this._ownerElement)throw new S(E);var l=this.getNamedItem(u.nodeName);return U(this._ownerElement,this,u,l),l},setNamedItemNS:function(u){var s=u.ownerElement,l;if(s&&s!=this._ownerElement)throw new S(E);return l=this.getNamedItemNS(u.namespaceURI,u.localName),U(this._ownerElement,this,u,l),l},removeNamedItem:function(u){var s=this.getNamedItem(u);return F(this._ownerElement,this,s),s},removeNamedItemNS:function(u,s){var l=this.getNamedItemNS(u,s);return F(this._ownerElement,this,l),l},getNamedItemNS:function(u,s){for(var l=this.length;l--;){var d=this[l];if(d.localName==s&&d.namespaceURI==u)return d}return null}};function K(){}K.prototype={hasFeature:function(u,s){return!0},createDocument:function(u,s,l){var d=new Q;if(d.implementation=this,d.childNodes=new D,d.doctype=l||null,l&&d.appendChild(l),s){var _=d.createElementNS(u,s);d.appendChild(_)}return d},createDocumentType:function(u,s,l){var d=new tt;return d.name=u,d.nodeName=u,d.publicId=s||"",d.systemId=l||"",d}};function y(){}y.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(u,s){return ve(this,u,s)},replaceChild:function(u,s){ve(this,u,s,Je),s&&this.removeChild(s)},removeChild:function(u){return ue(this,u)},appendChild:function(u){return this.insertBefore(u,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(u){return Dt(this.ownerDocument||this,this,u)},normalize:function(){for(var u=this.firstChild;u;){var s=u.nextSibling;s&&s.nodeType==A&&u.nodeType==A?(this.removeChild(s),u.appendData(s.data)):(u.normalize(),u=s)}},isSupported:function(u,s){return this.ownerDocument.implementation.hasFeature(u,s)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(u){for(var s=this;s;){var l=s._nsMap;if(l){for(var d in l)if(Object.prototype.hasOwnProperty.call(l,d)&&l[d]===u)return d}s=s.nodeType==x?s.ownerDocument:s.parentNode}return null},lookupNamespaceURI:function(u){for(var s=this;s;){var l=s._nsMap;if(l&&Object.prototype.hasOwnProperty.call(l,u))return l[u];s=s.nodeType==x?s.ownerDocument:s.parentNode}return null},isDefaultNamespace:function(u){var s=this.lookupPrefix(u);return s==null}};function oe(u){return u=="<"&&"&lt;"||u==">"&&"&gt;"||u=="&"&&"&amp;"||u=='"'&&"&quot;"||"&#"+u.charCodeAt()+";"}p(b,y),p(b,y.prototype);function be(u,s){if(s(u))return!0;if(u=u.firstChild)do if(be(u,s))return!0;while(u=u.nextSibling)}function Q(){this.ownerDocument=this}function Z(u,s,l){u&&u._inc++;var d=l.namespaceURI;d===r.XMLNS&&(s._nsMap[l.prefix?l.localName:""]=l.value)}function He(u,s,l,d){u&&u._inc++;var _=l.namespaceURI;_===r.XMLNS&&delete s._nsMap[l.prefix?l.localName:""]}function Ue(u,s,l){if(u&&u._inc){u._inc++;var d=s.childNodes;if(l)d[d.length++]=l;else{for(var _=s.firstChild,T=0;_;)d[T++]=_,_=_.nextSibling;d.length=T,delete d[d.length]}}}function ue(u,s){var l=s.previousSibling,d=s.nextSibling;return l?l.nextSibling=d:u.firstChild=d,d?d.previousSibling=l:u.lastChild=l,s.parentNode=null,s.previousSibling=null,s.nextSibling=null,Ue(u.ownerDocument,u),s}function he(u){return u&&(u.nodeType===y.DOCUMENT_NODE||u.nodeType===y.DOCUMENT_FRAGMENT_NODE||u.nodeType===y.ELEMENT_NODE)}function Ve(u){return u&&(fe(u)||Fe(u)||de(u)||u.nodeType===y.DOCUMENT_FRAGMENT_NODE||u.nodeType===y.COMMENT_NODE||u.nodeType===y.PROCESSING_INSTRUCTION_NODE)}function de(u){return u&&u.nodeType===y.DOCUMENT_TYPE_NODE}function fe(u){return u&&u.nodeType===y.ELEMENT_NODE}function Fe(u){return u&&u.nodeType===y.TEXT_NODE}function re(u,s){var l=u.childNodes||[];if(e(l,fe)||de(s))return!1;var d=e(l,de);return!(s&&d&&l.indexOf(d)>l.indexOf(s))}function Oe(u,s){var l=u.childNodes||[];function d(T){return fe(T)&&T!==s}if(e(l,d))return!1;var _=e(l,de);return!(s&&_&&l.indexOf(_)>l.indexOf(s))}function ee(u,s,l){if(!he(u))throw new S(h,"Unexpected parent node type "+u.nodeType);if(l&&l.parentNode!==u)throw new S(v,"child not in parent");if(!Ve(s)||de(s)&&u.nodeType!==y.DOCUMENT_NODE)throw new S(h,"Unexpected node type "+s.nodeType+" for parent node type "+u.nodeType)}function Ze(u,s,l){var d=u.childNodes||[],_=s.childNodes||[];if(s.nodeType===y.DOCUMENT_FRAGMENT_NODE){var T=_.filter(fe);if(T.length>1||e(_,Fe))throw new S(h,"More than one element or text in fragment");if(T.length===1&&!re(u,l))throw new S(h,"Element in fragment can not be inserted before doctype")}if(fe(s)&&!re(u,l))throw new S(h,"Only one element can be added and only after doctype");if(de(s)){if(e(d,de))throw new S(h,"Only one doctype is allowed");var z=e(d,fe);if(l&&d.indexOf(z)<d.indexOf(l))throw new S(h,"Doctype can only be inserted before an element");if(!l&&z)throw new S(h,"Doctype can not be appended since element is present")}}function Je(u,s,l){var d=u.childNodes||[],_=s.childNodes||[];if(s.nodeType===y.DOCUMENT_FRAGMENT_NODE){var T=_.filter(fe);if(T.length>1||e(_,Fe))throw new S(h,"More than one element or text in fragment");if(T.length===1&&!Oe(u,l))throw new S(h,"Element in fragment can not be inserted before doctype")}if(fe(s)&&!Oe(u,l))throw new S(h,"Only one element can be added and only after doctype");if(de(s)){if(e(d,function(ge){return de(ge)&&ge!==l}))throw new S(h,"Only one doctype is allowed");var z=e(d,fe);if(l&&d.indexOf(z)<d.indexOf(l))throw new S(h,"Doctype can only be inserted before an element")}}function ve(u,s,l,d){ee(u,s,l),u.nodeType===y.DOCUMENT_NODE&&(d||Ze)(u,s,l);var _=s.parentNode;if(_&&_.removeChild(s),s.nodeType===V){var T=s.firstChild;if(T==null)return s;var z=s.lastChild}else T=z=s;var se=l?l.previousSibling:u.lastChild;T.previousSibling=se,z.nextSibling=l,se?se.nextSibling=T:u.firstChild=T,l==null?u.lastChild=z:l.previousSibling=z;do T.parentNode=u;while(T!==z&&(T=T.nextSibling));return Ue(u.ownerDocument||u,u),s.nodeType==V&&(s.firstChild=s.lastChild=null),s}function et(u,s){return s.parentNode&&s.parentNode.removeChild(s),s.parentNode=u,s.previousSibling=u.lastChild,s.nextSibling=null,s.previousSibling?s.previousSibling.nextSibling=s:u.firstChild=s,u.lastChild=s,Ue(u.ownerDocument,u,s),s}Q.prototype={nodeName:"#document",nodeType:w,doctype:null,documentElement:null,_inc:1,insertBefore:function(u,s){if(u.nodeType==V){for(var l=u.firstChild;l;){var d=l.nextSibling;this.insertBefore(l,s),l=d}return u}return ve(this,u,s),u.ownerDocument=this,this.documentElement===null&&u.nodeType===m&&(this.documentElement=u),u},removeChild:function(u){return this.documentElement==u&&(this.documentElement=null),ue(this,u)},replaceChild:function(u,s){ve(this,u,s,Je),u.ownerDocument=this,s&&this.removeChild(s),fe(u)&&(this.documentElement=u)},importNode:function(u,s){return nr(this,u,s)},getElementById:function(u){var s=null;return be(this.documentElement,function(l){if(l.nodeType==m&&l.getAttribute("id")==u)return s=l,!0}),s},getElementsByClassName:function(u){var s=i(u);return new O(this,function(l){var d=[];return s.length>0&&be(l.documentElement,function(_){if(_!==l&&_.nodeType===m){var T=_.getAttribute("class");if(T){var z=u===T;if(!z){var se=i(T);z=s.every(c(se))}z&&d.push(_)}}}),d})},createElement:function(u){var s=new q;s.ownerDocument=this,s.nodeName=u,s.tagName=u,s.localName=u,s.childNodes=new D;var l=s.attributes=new X;return l._ownerElement=s,s},createDocumentFragment:function(){var u=new rt;return u.ownerDocument=this,u.childNodes=new D,u},createTextNode:function(u){var s=new vt;return s.ownerDocument=this,s.appendData(u),s},createComment:function(u){var s=new St;return s.ownerDocument=this,s.appendData(u),s},createCDATASection:function(u){var s=new Et;return s.ownerDocument=this,s.appendData(u),s},createProcessingInstruction:function(u,s){var l=new At;return l.ownerDocument=this,l.tagName=l.nodeName=l.target=u,l.nodeValue=l.data=s,l},createAttribute:function(u){var s=new te;return s.ownerDocument=this,s.name=u,s.nodeName=u,s.localName=u,s.specified=!0,s},createEntityReference:function(u){var s=new yt;return s.ownerDocument=this,s.nodeName=u,s},createElementNS:function(u,s){var l=new q,d=s.split(":"),_=l.attributes=new X;return l.childNodes=new D,l.ownerDocument=this,l.nodeName=s,l.tagName=s,l.namespaceURI=u,d.length==2?(l.prefix=d[0],l.localName=d[1]):l.localName=s,_._ownerElement=l,l},createAttributeNS:function(u,s){var l=new te,d=s.split(":");return l.ownerDocument=this,l.nodeName=s,l.name=s,l.namespaceURI=u,l.specified=!0,d.length==2?(l.prefix=d[0],l.localName=d[1]):l.localName=s,l}},f(Q,y);function q(){this._nsMap={}}q.prototype={nodeType:m,hasAttribute:function(u){return this.getAttributeNode(u)!=null},getAttribute:function(u){var s=this.getAttributeNode(u);return s&&s.value||""},getAttributeNode:function(u){return this.attributes.getNamedItem(u)},setAttribute:function(u,s){var l=this.ownerDocument.createAttribute(u);l.value=l.nodeValue=""+s,this.setAttributeNode(l)},removeAttribute:function(u){var s=this.getAttributeNode(u);s&&this.removeAttributeNode(s)},appendChild:function(u){return u.nodeType===V?this.insertBefore(u,null):et(this,u)},setAttributeNode:function(u){return this.attributes.setNamedItem(u)},setAttributeNodeNS:function(u){return this.attributes.setNamedItemNS(u)},removeAttributeNode:function(u){return this.attributes.removeNamedItem(u.nodeName)},removeAttributeNS:function(u,s){var l=this.getAttributeNodeNS(u,s);l&&this.removeAttributeNode(l)},hasAttributeNS:function(u,s){return this.getAttributeNodeNS(u,s)!=null},getAttributeNS:function(u,s){var l=this.getAttributeNodeNS(u,s);return l&&l.value||""},setAttributeNS:function(u,s,l){var d=this.ownerDocument.createAttributeNS(u,s);d.value=d.nodeValue=""+l,this.setAttributeNode(d)},getAttributeNodeNS:function(u,s){return this.attributes.getNamedItemNS(u,s)},getElementsByTagName:function(u){return new O(this,function(s){var l=[];return be(s,function(d){d!==s&&d.nodeType==m&&(u==="*"||d.tagName==u)&&l.push(d)}),l})},getElementsByTagNameNS:function(u,s){return new O(this,function(l){var d=[];return be(l,function(_){_!==l&&_.nodeType===m&&(u==="*"||_.namespaceURI===u)&&(s==="*"||_.localName==s)&&d.push(_)}),d})}},Q.prototype.getElementsByTagName=q.prototype.getElementsByTagName,Q.prototype.getElementsByTagNameNS=q.prototype.getElementsByTagNameNS,f(q,y);function te(){}te.prototype.nodeType=x,f(te,y);function ye(){}ye.prototype={data:"",substringData:function(u,s){return this.data.substring(u,u+s)},appendData:function(u){u=this.data+u,this.nodeValue=this.data=u,this.length=u.length},insertData:function(u,s){this.replaceData(u,0,s)},appendChild:function(u){throw new Error(k[h])},deleteData:function(u,s){this.replaceData(u,s,"")},replaceData:function(u,s,l){var d=this.data.substring(0,u),_=this.data.substring(u+s);l=d+l+_,this.nodeValue=this.data=l,this.length=l.length}},f(ye,y);function vt(){}vt.prototype={nodeName:"#text",nodeType:A,splitText:function(u){var s=this.data,l=s.substring(u);s=s.substring(0,u),this.data=this.nodeValue=s,this.length=s.length;var d=this.ownerDocument.createTextNode(l);return this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling),d}},f(vt,ye);function St(){}St.prototype={nodeName:"#comment",nodeType:B},f(St,ye);function Et(){}Et.prototype={nodeName:"#cdata-section",nodeType:N},f(Et,ye);function tt(){}tt.prototype.nodeType=I,f(tt,y);function Zt(){}Zt.prototype.nodeType=j,f(Zt,y);function Jt(){}Jt.prototype.nodeType=g,f(Jt,y);function yt(){}yt.prototype.nodeType=L,f(yt,y);function rt(){}rt.prototype.nodeName="#document-fragment",rt.prototype.nodeType=V,f(rt,y);function At(){}At.prototype.nodeType=C,f(At,y);function er(){}er.prototype.serializeToString=function(u,s,l){return tr.call(u,s,l)},y.prototype.toString=tr;function tr(u,s){var l=[],d=this.nodeType==9&&this.documentElement||this,_=d.prefix,T=d.namespaceURI;if(T&&_==null){var _=d.lookupPrefix(T);if(_==null)var z=[{namespace:T,prefix:null}]}return Ge(this,l,u,s,z),l.join("")}function rr(u,s,l){var d=u.prefix||"",_=u.namespaceURI;if(!_||d==="xml"&&_===r.XML||_===r.XMLNS)return!1;for(var T=l.length;T--;){var z=l[T];if(z.prefix===d)return z.namespace!==_}return!0}function Ct(u,s,l){u.push(" ",s,'="',l.replace(/[<>&"\t\n\r]/g,oe),'"')}function Ge(u,s,l,d,_){if(_||(_=[]),d)if(u=d(u),u){if(typeof u=="string"){s.push(u);return}}else return;switch(u.nodeType){case m:var T=u.attributes,z=T.length,ne=u.firstChild,se=u.tagName;l=r.isHTML(u.namespaceURI)||l;var ge=se;if(!l&&!u.prefix&&u.namespaceURI){for(var Se,xe=0;xe<T.length;xe++)if(T.item(xe).name==="xmlns"){Se=T.item(xe).value;break}if(!Se)for(var Ae=_.length-1;Ae>=0;Ae--){var Ce=_[Ae];if(Ce.prefix===""&&Ce.namespace===u.namespaceURI){Se=Ce.namespace;break}}if(Se!==u.namespaceURI)for(var Ae=_.length-1;Ae>=0;Ae--){var Ce=_[Ae];if(Ce.namespace===u.namespaceURI){Ce.prefix&&(ge=Ce.prefix+":"+se);break}}}s.push("<",ge);for(var De=0;De<z;De++){var me=T.item(De);me.prefix=="xmlns"?_.push({prefix:me.localName,namespace:me.value}):me.nodeName=="xmlns"&&_.push({prefix:"",namespace:me.value})}for(var De=0;De<z;De++){var me=T.item(De);if(rr(me,l,_)){var Be=me.prefix||"",qe=me.namespaceURI;Ct(s,Be?"xmlns:"+Be:"xmlns",qe),_.push({prefix:Be,namespace:qe})}Ge(me,s,l,d,_)}if(se===ge&&rr(u,l,_)){var Be=u.prefix||"",qe=u.namespaceURI;Ct(s,Be?"xmlns:"+Be:"xmlns",qe),_.push({prefix:Be,namespace:qe})}if(ne||l&&!/^(?:meta|link|img|br|hr|input)$/i.test(se)){if(s.push(">"),l&&/^script$/i.test(se))for(;ne;)ne.data?s.push(ne.data):Ge(ne,s,l,d,_.slice()),ne=ne.nextSibling;else for(;ne;)Ge(ne,s,l,d,_.slice()),ne=ne.nextSibling;s.push("</",ge,">")}else s.push("/>");return;case w:case V:for(var ne=u.firstChild;ne;)Ge(ne,s,l,d,_.slice()),ne=ne.nextSibling;return;case x:return Ct(s,u.name,u.value);case A:return s.push(u.data.replace(/[<&>]/g,oe));case N:return s.push("<![CDATA[",u.data,"]]>");case B:return s.push("<!--",u.data,"-->");case I:var or=u.publicId,Me=u.systemId;if(s.push("<!DOCTYPE ",u.name),or)s.push(" PUBLIC ",or),Me&&Me!="."&&s.push(" ",Me),s.push(">");else if(Me&&Me!=".")s.push(" SYSTEM ",Me,">");else{var sr=u.internalSubset;sr&&s.push(" [",sr,"]"),s.push(">")}return;case C:return s.push("<?",u.target," ",u.data,"?>");case L:return s.push("&",u.nodeName,";");default:s.push("??",u.nodeName)}}function nr(u,s,l){var d;switch(s.nodeType){case m:d=s.cloneNode(!1),d.ownerDocument=u;case V:break;case x:l=!0;break}if(d||(d=s.cloneNode(!1)),d.ownerDocument=u,d.parentNode=null,l)for(var _=s.firstChild;_;)d.appendChild(nr(u,_,l)),_=_.nextSibling;return d}function Dt(u,s,l){var d=new s.constructor;for(var _ in s)if(Object.prototype.hasOwnProperty.call(s,_)){var T=s[_];typeof T!="object"&&T!=d[_]&&(d[_]=T)}switch(s.childNodes&&(d.childNodes=new D),d.ownerDocument=u,d.nodeType){case m:var z=s.attributes,se=d.attributes=new X,ge=z.length;se._ownerElement=d;for(var Se=0;Se<ge;Se++)d.setAttributeNode(Dt(u,z.item(Se),!0));break;case x:l=!0}if(l)for(var xe=s.firstChild;xe;)d.appendChild(Dt(u,xe,l)),xe=xe.nextSibling;return d}function ur(u,s,l){u[s]=l}try{if(Object.defineProperty){let u=function(s){switch(s.nodeType){case m:case V:var l=[];for(s=s.firstChild;s;)s.nodeType!==7&&s.nodeType!==8&&l.push(u(s)),s=s.nextSibling;return l.join("");default:return s.nodeValue}};Object.defineProperty(O.prototype,"length",{get:function(){return M(this),this.$$length}}),Object.defineProperty(y.prototype,"textContent",{get:function(){return u(this)},set:function(s){switch(this.nodeType){case m:case V:for(;this.firstChild;)this.removeChild(this.firstChild);(s||String(s))&&this.appendChild(this.ownerDocument.createTextNode(s));break;default:this.data=s,this.value=s,this.nodeValue=s}}}),ur=function(s,l,d){s["$$"+l]=d}}}catch{}return _e.DocumentType=tt,_e.DOMException=S,_e.DOMImplementation=K,_e.Element=q,_e.Node=y,_e.NodeList=D,_e.XMLSerializer=er,_e}var Ke={},wt={},xr;function ju(){return xr||(xr=1,function(t){var e=_t().freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES}(wt)),wt}var it={},_r;function Qu(){if(_r)return it;_r=1;var t=_t().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),n=new RegExp("^"+e.source+r.source+"*(?::"+e.source+r.source+"*)?$"),o=0,a=1,i=2,c=3,p=4,f=5,b=6,m=7;function x(h,v){this.message=h,this.locator=v,Error.captureStackTrace&&Error.captureStackTrace(this,x)}x.prototype=new Error,x.prototype.name=x.name;function A(){}A.prototype={parse:function(h,v,E){var S=this.domBuilder;S.startDocument(),I(v,v={}),N(h,v,E,S,this.errorHandler),S.endDocument()}};function N(h,v,E,S,D){function O(q){if(q>65535){q-=65536;var te=55296+(q>>10),ye=56320+(q&1023);return String.fromCharCode(te,ye)}else return String.fromCharCode(q)}function M(q){var te=q.slice(1,-1);return Object.hasOwnProperty.call(E,te)?E[te]:te.charAt(0)==="#"?O(parseInt(te.substr(1).replace("x","0x"))):(D.error("entity not found:"+q),q)}function X(q){if(q>Q){var te=h.substring(Q,q).replace(/&#?\w+;/g,M);y&&P(Q),S.characters(te,0,q-Q),Q=q}}function P(q,te){for(;q>=F&&(te=K.exec(h));)U=te.index,F=U+te[0].length,y.lineNumber++;y.columnNumber=q-U+1}for(var U=0,F=0,K=/.*(?:\r\n?|\n)|.*$/g,y=S.locator,oe=[{currentNSMap:v}],be={},Q=0;;){try{var Z=h.indexOf("<",Q);if(Z<0){if(!h.substr(Q).match(/^\s*$/)){var He=S.doc,Ue=He.createTextNode(h.substr(Q));He.appendChild(Ue),S.currentElement=Ue}return}switch(Z>Q&&X(Z),h.charAt(Z+1)){case"/":var ee=h.indexOf(">",Z+3),ue=h.substring(Z+2,ee).replace(/[ \t\n\r]+$/g,""),he=oe.pop();ee<0?(ue=h.substring(Z+2).replace(/[\s<].*/,""),D.error("end tag name: "+ue+" is not complete:"+he.tagName),ee=Z+1+ue.length):ue.match(/\s</)&&(ue=ue.replace(/[\s<].*/,""),D.error("end tag name: "+ue+" maybe not complete"),ee=Z+1+ue.length);var Ve=he.localNSMap,de=he.tagName==ue,fe=de||he.tagName&&he.tagName.toLowerCase()==ue.toLowerCase();if(fe){if(S.endElement(he.uri,he.localName,ue),Ve)for(var Fe in Ve)Object.prototype.hasOwnProperty.call(Ve,Fe)&&S.endPrefixMapping(Fe);de||D.fatalError("end tag name: "+ue+" is not match the current start tagName:"+he.tagName)}else oe.push(he);ee++;break;case"?":y&&P(Z),ee=j(h,Z,S);break;case"!":y&&P(Z),ee=V(h,Z,S,D);break;default:y&&P(Z);var re=new G,Oe=oe[oe.length-1].currentNSMap,ee=g(h,Z,re,Oe,M,D),Ze=re.length;if(!re.closed&&w(h,ee,re.tagName,be)&&(re.closed=!0,E.nbsp||D.warning("unclosed xml attribute")),y&&Ze){for(var Je=L(y,{}),ve=0;ve<Ze;ve++){var et=re[ve];P(et.offset),et.locator=L(y,{})}S.locator=Je,C(re,S,Oe)&&oe.push(re),S.locator=y}else C(re,S,Oe)&&oe.push(re);t.isHTML(re.uri)&&!re.closed?ee=B(h,ee,re.tagName,M,S):ee++}}catch(q){if(q instanceof x)throw q;D.error("element parse error: "+q),ee=-1}ee>Q?Q=ee:X(Math.max(Z,Q)+1)}}function L(h,v){return v.lineNumber=h.lineNumber,v.columnNumber=h.columnNumber,v}function g(h,v,E,S,D,O){function M(y,oe,be){E.attributeNames.hasOwnProperty(y)&&O.fatalError("Attribute "+y+" redefined"),E.addValue(y,oe.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,D),be)}for(var X,P,U=++v,F=o;;){var K=h.charAt(U);switch(K){case"=":if(F===a)X=h.slice(v,U),F=c;else if(F===i)F=c;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(F===c||F===a)if(F===a&&(O.warning('attribute value must after "="'),X=h.slice(v,U)),v=U+1,U=h.indexOf(K,v),U>0)P=h.slice(v,U),M(X,P,v-1),F=f;else throw new Error("attribute value no end '"+K+"' match");else if(F==p)P=h.slice(v,U),M(X,P,v),O.warning('attribute "'+X+'" missed start quot('+K+")!!"),v=U+1,F=f;else throw new Error('attribute value must after "="');break;case"/":switch(F){case o:E.setTagName(h.slice(v,U));case f:case b:case m:F=m,E.closed=!0;case p:case a:break;case i:E.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return O.error("unexpected end of input"),F==o&&E.setTagName(h.slice(v,U)),U;case">":switch(F){case o:E.setTagName(h.slice(v,U));case f:case b:case m:break;case p:case a:P=h.slice(v,U),P.slice(-1)==="/"&&(E.closed=!0,P=P.slice(0,-1));case i:F===i&&(P=X),F==p?(O.warning('attribute "'+P+'" missed quot(")!'),M(X,P,v)):((!t.isHTML(S[""])||!P.match(/^(?:disabled|checked|selected)$/i))&&O.warning('attribute "'+P+'" missed value!! "'+P+'" instead!!'),M(P,P,v));break;case c:throw new Error("attribute value missed!!")}return U;case"":K=" ";default:if(K<=" ")switch(F){case o:E.setTagName(h.slice(v,U)),F=b;break;case a:X=h.slice(v,U),F=i;break;case p:var P=h.slice(v,U);O.warning('attribute "'+P+'" missed quot(")!!'),M(X,P,v);case f:F=b;break}else switch(F){case i:E.tagName,(!t.isHTML(S[""])||!X.match(/^(?:disabled|checked|selected)$/i))&&O.warning('attribute "'+X+'" missed value!! "'+X+'" instead2!!'),M(X,X,v),v=U,F=a;break;case f:O.warning('attribute space is required"'+X+'"!!');case b:F=a,v=U;break;case c:F=p,v=U;break;case m:throw new Error("elements closed character '/' and '>' must be connected to")}}U++}}function C(h,v,E){for(var S=h.tagName,D=null,K=h.length;K--;){var O=h[K],M=O.qName,X=O.value,y=M.indexOf(":");if(y>0)var P=O.prefix=M.slice(0,y),U=M.slice(y+1),F=P==="xmlns"&&U;else U=M,P=null,F=M==="xmlns"&&"";O.localName=U,F!==!1&&(D==null&&(D={},I(E,E={})),E[F]=D[F]=X,O.uri=t.XMLNS,v.startPrefixMapping(F,X))}for(var K=h.length;K--;){O=h[K];var P=O.prefix;P&&(P==="xml"&&(O.uri=t.XML),P!=="xmlns"&&(O.uri=E[P||""]))}var y=S.indexOf(":");y>0?(P=h.prefix=S.slice(0,y),U=h.localName=S.slice(y+1)):(P=null,U=h.localName=S);var oe=h.uri=E[P||""];if(v.startElement(oe,U,S,h),h.closed){if(v.endElement(oe,U,S),D)for(P in D)Object.prototype.hasOwnProperty.call(D,P)&&v.endPrefixMapping(P)}else return h.currentNSMap=E,h.localNSMap=D,!0}function B(h,v,E,S,D){if(/^(?:script|textarea)$/i.test(E)){var O=h.indexOf("</"+E+">",v),M=h.substring(v+1,O);if(/[&<]/.test(M))return/^script$/i.test(E)?(D.characters(M,0,M.length),O):(M=M.replace(/&#?\w+;/g,S),D.characters(M,0,M.length),O)}return v+1}function w(h,v,E,S){var D=S[E];return D==null&&(D=h.lastIndexOf("</"+E+">"),D<v&&(D=h.lastIndexOf("</"+E)),S[E]=D),D<v}function I(h,v){for(var E in h)Object.prototype.hasOwnProperty.call(h,E)&&(v[E]=h[E])}function V(h,v,E,S){var D=h.charAt(v+2);switch(D){case"-":if(h.charAt(v+3)==="-"){var O=h.indexOf("-->",v+4);return O>v?(E.comment(h,v+4,O-v-4),O+3):(S.error("Unclosed comment"),-1)}else return-1;default:if(h.substr(v+3,6)=="CDATA["){var O=h.indexOf("]]>",v+9);return E.startCDATA(),E.characters(h,v+9,O-v-9),E.endCDATA(),O+3}var M=k(h,v),X=M.length;if(X>1&&/!doctype/i.test(M[0][0])){var P=M[1][0],U=!1,F=!1;X>3&&(/^public$/i.test(M[2][0])?(U=M[3][0],F=X>4&&M[4][0]):/^system$/i.test(M[2][0])&&(F=M[3][0]));var K=M[X-1];return E.startDTD(P,U,F),E.endDTD(),K.index+K[0].length}}return-1}function j(h,v,E){var S=h.indexOf("?>",v);if(S){var D=h.substring(v,S).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return D?(D[0].length,E.processingInstruction(D[1],D[2]),S+2):-1}return-1}function G(){this.attributeNames={}}G.prototype={setTagName:function(h){if(!n.test(h))throw new Error("invalid tagName:"+h);this.tagName=h},addValue:function(h,v,E){if(!n.test(h))throw new Error("invalid attribute:"+h);this.attributeNames[h]=this.length,this[this.length++]={qName:h,value:v,offset:E}},length:0,getLocalName:function(h){return this[h].localName},getLocator:function(h){return this[h].locator},getQName:function(h){return this[h].qName},getURI:function(h){return this[h].uri},getValue:function(h){return this[h].value}};function k(h,v){var E,S=[],D=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(D.lastIndex=v,D.exec(h);E=D.exec(h);)if(S.push(E),E[1])return S}return it.XMLReader=A,it.ParseError=x,it}var vr;function Zu(){if(vr)return Ke;vr=1;var t=_t(),e=qr(),r=ju(),n=Qu(),o=e.DOMImplementation,a=t.NAMESPACE,i=n.ParseError,c=n.XMLReader;function p(g){return g.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function f(g){this.options=g||{locator:{}}}f.prototype.parseFromString=function(g,C){var B=this.options,w=new c,I=B.domBuilder||new m,V=B.errorHandler,j=B.locator,G=B.xmlns||{},k=/\/x?html?$/.test(C),h=k?r.HTML_ENTITIES:r.XML_ENTITIES;j&&I.setDocumentLocator(j),w.errorHandler=b(V,I,j),w.domBuilder=B.domBuilder||I,k&&(G[""]=a.HTML),G.xml=G.xml||a.XML;var v=B.normalizeLineEndings||p;return g&&typeof g=="string"?w.parse(v(g),G,h):w.errorHandler.error("invalid doc source"),I.doc};function b(g,C,B){if(!g){if(C instanceof m)return C;g=C}var w={},I=g instanceof Function;B=B||{};function V(j){var G=g[j];!G&&I&&(G=g.length==2?function(k){g(j,k)}:g),w[j]=G&&function(k){G("[xmldom "+j+"]	"+k+A(B))}||function(){}}return V("warning"),V("error"),V("fatalError"),w}function m(){this.cdata=!1}function x(g,C){C.lineNumber=g.lineNumber,C.columnNumber=g.columnNumber}m.prototype={startDocument:function(){this.doc=new o().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(g,C,B,w){var I=this.doc,V=I.createElementNS(g,B||C),j=w.length;L(this,V),this.currentElement=V,this.locator&&x(this.locator,V);for(var G=0;G<j;G++){var g=w.getURI(G),k=w.getValue(G),B=w.getQName(G),h=I.createAttributeNS(g,B);this.locator&&x(w.getLocator(G),h),h.value=h.nodeValue=k,V.setAttributeNode(h)}},endElement:function(g,C,B){var w=this.currentElement;w.tagName,this.currentElement=w.parentNode},startPrefixMapping:function(g,C){},endPrefixMapping:function(g){},processingInstruction:function(g,C){var B=this.doc.createProcessingInstruction(g,C);this.locator&&x(this.locator,B),L(this,B)},ignorableWhitespace:function(g,C,B){},characters:function(g,C,B){if(g=N.apply(this,arguments),g){if(this.cdata)var w=this.doc.createCDATASection(g);else var w=this.doc.createTextNode(g);this.currentElement?this.currentElement.appendChild(w):/^\s*$/.test(g)&&this.doc.appendChild(w),this.locator&&x(this.locator,w)}},skippedEntity:function(g){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(g){(this.locator=g)&&(g.lineNumber=0)},comment:function(g,C,B){g=N.apply(this,arguments);var w=this.doc.createComment(g);this.locator&&x(this.locator,w),L(this,w)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(g,C,B){var w=this.doc.implementation;if(w&&w.createDocumentType){var I=w.createDocumentType(g,C,B);this.locator&&x(this.locator,I),L(this,I),this.doc.doctype=I}},warning:function(g){console.warn("[xmldom warning]	"+g,A(this.locator))},error:function(g){console.error("[xmldom error]	"+g,A(this.locator))},fatalError:function(g){throw new i(g,this.locator)}};function A(g){if(g)return`
@`+(g.systemId||"")+"#[line:"+g.lineNumber+",col:"+g.columnNumber+"]"}function N(g,C,B){return typeof g=="string"?g.substr(C,B):g.length>=C+B||C?new java.lang.String(g,C,B)+"":g}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(g){m.prototype[g]=function(){return null}});function L(g,C){g.currentElement?g.currentElement.appendChild(C):g.doc.appendChild(C)}return Ke.__DOMHandler=m,Ke.normalizeLineEndings=p,Ke.DOMParser=f,Ke}var Sr;function Ju(){if(Sr)return We;Sr=1;var t=qr();return We.DOMImplementation=t.DOMImplementation,We.XMLSerializer=t.XMLSerializer,We.DOMParser=Zu().DOMParser,We}var eo=Ju();const ps={createCanvas:(t,e)=>new OffscreenCanvas(t??0,e??0),getCanvasRenderingContext2D:()=>OffscreenCanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>globalThis.location.href,getFontFaceSet:()=>globalThis.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new eo.DOMParser().parseFromString(t,"text/xml")};var $t=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,to=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`,Er=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
  uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
 
    var sample = textureSample(uTexture, uSampler, uv);
    
    return sample * alphaUniforms.uAlpha;
}`;const zr=class Yr extends Pe{constructor(e){e={...Yr.defaultOptions,...e};const r=ke.from({vertex:{source:Er,entryPoint:"mainVertex"},fragment:{source:Er,entryPoint:"mainFragment"}}),n=Xe.from({vertex:$t,fragment:to,name:"alpha-filter"}),{alpha:o,...a}=e,i=new $e({uAlpha:{value:o,type:"f32"}});super({...a,gpuProgram:r,glProgram:n,resources:{alphaUniforms:i}})}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(e){this.resources.alphaUniforms.uniforms.uAlpha=e}};zr.defaultOptions={alpha:1};let hs=zr;const Wr={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},ro=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function no(t){const e=Wr[t],r=e.length;let n=ro,o="";const a="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;";let i;for(let c=0;c<t;c++){let p=a.replace("%index%",c.toString());i=c,c>=r&&(i=t-c-1),p=p.replace("%value%",e[i].toString()),o+=p,o+=`
`}return n=n.replace("%blur%",o),n=n.replace("%size%",t.toString()),n}const uo=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function oo(t,e){const r=Math.ceil(t/2);let n=uo,o="",a;e?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let i=0;i<t;i++){let c=a.replace("%index%",i.toString());c=c.replace("%sampleIndex%",`${i-(r-1)}.0`),o+=c,o+=`
`}return n=n.replace("%blur%",o),n=n.replace("%size%",t.toString()),n=n.replace("%dimension%",e?"z":"w"),n}function so(t,e){const r=oo(e,t),n=no(e);return Xe.from({vertex:r,fragment:n,name:`blur-${t?"horizontal":"vertical"}-pass-filter`})}var ao=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;function io(t,e){const r=Wr[e],n=r.length,o=[],a=[],i=[];for(let m=0;m<e;m++){o[m]=`@location(${m}) offset${m}: vec2<f32>,`,t?a[m]=`filteredCord + vec2(${m-n+1} * pixelStrength, 0.0),`:a[m]=`filteredCord + vec2(0.0, ${m-n+1} * pixelStrength),`;const x=m<n?m:e-m-1,A=r[x].toString();i[m]=`finalColor += textureSample(uTexture, uSampler, offset${m}) * ${A};`}const c=o.join(`
`),p=a.join(`
`),f=i.join(`
`),b=ao.replace("%blur-struct%",c).replace("%blur-vertex-out%",p).replace("%blur-fragment-in%",c).replace("%blur-sampling%",f).replace("%dimension%",t?"z":"w");return ke.from({vertex:{source:b,entryPoint:"mainVertex"},fragment:{source:b,entryPoint:"mainFragment"}})}const Kr=class $r extends Pe{constructor(e){e={...$r.defaultOptions,...e};const r=so(e.horizontal,e.kernelSize),n=io(e.horizontal,e.kernelSize);super({glProgram:r,gpuProgram:n,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...e}),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(e,r,n,o){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)e.applyFilter(this,r,n,o);else{const a=dt.getSameSizeTexture(r);let i=r,c=a;this._state.blend=!1;const p=e.renderer.type===Ur.WEBGPU;for(let f=0;f<this.passes-1;f++){e.applyFilter(this,i,c,f===0?!0:p);const b=c;c=i,i=b}this._state.blend=!0,e.applyFilter(this,i,n,o),dt.returnTexture(a)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};Kr.defaultOptions={strength:8,quality:4,kernelSize:5};let Pt=Kr;class lo extends Pe{constructor(...e){let r=e[0]??{};typeof r=="number"&&($(pe,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),r={strength:r},e[1]!==void 0&&(r.quality=e[1]),e[2]!==void 0&&(r.resolution=e[2]||"inherit"),e[3]!==void 0&&(r.kernelSize=e[3])),r={...Pt.defaultOptions,...r};const{strength:n,strengthX:o,strengthY:a,quality:i,...c}=r;super({...c,compatibleRenderers:Ur.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new Pt({horizontal:!0,...r}),this.blurYFilter=new Pt({horizontal:!1,...r}),this.quality=i,this.strengthX=o??n,this.strengthY=a??n,this.repeatEdgePixels=!1}apply(e,r,n,o){const a=Math.abs(this.blurXFilter.strength),i=Math.abs(this.blurYFilter.strength);if(a&&i){const c=dt.getSameSizeTexture(r);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(e,r,c,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,c,n,o),dt.returnTexture(c)}else i?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,r,n,o)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(e,r,n,o))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get strengthX(){return this.blurXFilter.blur}set strengthX(e){this.blurXFilter.blur=e,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(e){this.blurYFilter.blur=e,this.updatePadding()}get blur(){return $("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(e){$("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=e}get blurX(){return $("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(e){$("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=e}get blurY(){return $("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(e){$("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}lo.defaultOptions={strength:8,quality:4,kernelSize:5};var co=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uColorMatrix[20];
uniform float uAlpha;

uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * 0.2);
    float diff = (randomValue - 0.5) *  0.5;

    if (uAlpha == 0.0) {
        finalColor = color;
        return;
    }

    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    vec4 result;

    result.r = (uColorMatrix[0] * color.r);
        result.r += (uColorMatrix[1] * color.g);
        result.r += (uColorMatrix[2] * color.b);
        result.r += (uColorMatrix[3] * color.a);
        result.r += uColorMatrix[4];

    result.g = (uColorMatrix[5] * color.r);
        result.g += (uColorMatrix[6] * color.g);
        result.g += (uColorMatrix[7] * color.b);
        result.g += (uColorMatrix[8] * color.a);
        result.g += uColorMatrix[9];

    result.b = (uColorMatrix[10] * color.r);
       result.b += (uColorMatrix[11] * color.g);
       result.b += (uColorMatrix[12] * color.b);
       result.b += (uColorMatrix[13] * color.a);
       result.b += uColorMatrix[14];

    result.a = (uColorMatrix[15] * color.r);
       result.a += (uColorMatrix[16] * color.g);
       result.a += (uColorMatrix[17] * color.b);
       result.a += (uColorMatrix[18] * color.a);
       result.a += uColorMatrix[19];

    vec3 rgb = mix(color.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    finalColor = vec4(rgb, result.a);
}
`,yr=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct ColorMatrixUniforms {
  uColorMatrix:array<vec4<f32>, 5>,
  uAlpha:f32,
};


@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(1) @binding(0) var<uniform> colorMatrixUniforms : ColorMatrixUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
  };
  
fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
  );
}


@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {


  var c = textureSample(uTexture, uSampler, uv);
  
  if (colorMatrixUniforms.uAlpha == 0.0) {
    return c;
  }

 
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.r /= c.a;
      c.g /= c.a;
      c.b /= c.a;
    }

    var cm = colorMatrixUniforms.uColorMatrix;


    var result = vec4<f32>(0.);

    result.r = (cm[0][0] * c.r);
    result.r += (cm[0][1] * c.g);
    result.r += (cm[0][2] * c.b);
    result.r += (cm[0][3] * c.a);
    result.r += cm[1][0];

    result.g = (cm[1][1] * c.r);
    result.g += (cm[1][2] * c.g);
    result.g += (cm[1][3] * c.b);
    result.g += (cm[2][0] * c.a);
    result.g += cm[2][1];

    result.b = (cm[2][2] * c.r);
    result.b += (cm[2][3] * c.g);
    result.b += (cm[3][0] * c.b);
    result.b += (cm[3][1] * c.a);
    result.b += cm[3][2];

    result.a = (cm[3][3] * c.r);
    result.a += (cm[4][0] * c.g);
    result.a += (cm[4][1] * c.b);
    result.a += (cm[4][2] * c.a);
    result.a += cm[4][3];

    var rgb = mix(c.rgb, result.rgb, colorMatrixUniforms.uAlpha);

    rgb.r *= result.a;
    rgb.g *= result.a;
    rgb.b *= result.a;

    return vec4(rgb, result.a);
}`;class ms extends Pe{constructor(e={}){const r=new $e({uColorMatrix:{value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],type:"f32",size:20},uAlpha:{value:1,type:"f32"}}),n=ke.from({vertex:{source:yr,entryPoint:"mainVertex"},fragment:{source:yr,entryPoint:"mainFragment"}}),o=Xe.from({vertex:$t,fragment:co,name:"color-matrix-filter"});super({...e,gpuProgram:n,glProgram:o,resources:{colorMatrixUniforms:r}}),this.alpha=1}_loadMatrix(e,r=!1){let n=e;r&&(this._multiply(n,this.matrix,e),n=this._colorMatrix(n)),this.resources.colorMatrixUniforms.uniforms.uColorMatrix=n,this.resources.colorMatrixUniforms.update()}_multiply(e,r,n){return e[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],e[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],e[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],e[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],e[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],e[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],e[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],e[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],e[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],e[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],e[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],e[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],e[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],e[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],e[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],e[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],e[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],e[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],e[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],e[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],e}_colorMatrix(e){const r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(e,r){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}tint(e,r){const[n,o,a]=Ut.shared.setValue(e).toArray(),i=[n,0,0,0,0,0,o,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(i,r)}greyscale(e,r){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}grayscale(e,r){this.greyscale(e,r)}blackAndWhite(e){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,e)}hue(e,r){e=(e||0)/180*Math.PI;const n=Math.cos(e),o=Math.sin(e),a=Math.sqrt,i=1/3,c=a(i),p=n+(1-n)*i,f=i*(1-n)-c*o,b=i*(1-n)+c*o,m=i*(1-n)+c*o,x=n+i*(1-n),A=i*(1-n)-c*o,N=i*(1-n)-c*o,L=i*(1-n)+c*o,g=n+i*(1-n),C=[p,f,b,0,0,m,x,A,0,0,N,L,g,0,0,0,0,0,1,0];this._loadMatrix(C,r)}contrast(e,r){const n=(e||0)+1,o=-.5*(n-1),a=[n,0,0,0,o,0,n,0,0,o,0,0,n,0,o,0,0,0,1,0];this._loadMatrix(a,r)}saturate(e=0,r){const n=e*2/3+1,o=(n-1)*-.5,a=[n,o,o,0,0,o,n,o,0,0,o,o,n,0,0,0,0,0,1,0];this._loadMatrix(a,r)}desaturate(){this.saturate(-1)}negative(e){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,e)}sepia(e){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,e)}technicolor(e){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,e)}polaroid(e){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,e)}toBGR(e){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,e)}kodachrome(e){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,e)}browni(e){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,e)}vintage(e){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,e)}colorTone(e,r,n,o,a){e||(e=.2),r||(r=.15),n||(n=16770432),o||(o=3375104);const i=Ut.shared,[c,p,f]=i.setValue(n).toArray(),[b,m,x]=i.setValue(o).toArray(),A=[.3,.59,.11,0,0,c,p,f,e,0,b,m,x,r,0,c-b,p-m,f-x,0,0];this._loadMatrix(A,a)}night(e,r){e||(e=.1);const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)}predator(e,r){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,r)}lsd(e){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.resources.colorMatrixUniforms.uniforms.uColorMatrix}set matrix(e){this.resources.colorMatrixUniforms.uniforms.uColorMatrix=e}get alpha(){return this.resources.colorMatrixUniforms.uniforms.uAlpha}set alpha(e){this.resources.colorMatrixUniforms.uniforms.uAlpha=e}}var fo=`
in vec2 vTextureCoord;
in vec2 vFilterUv;

out vec4 finalColor;

uniform sampler2D uTexture;
uniform sampler2D uMapTexture;

uniform vec4 uInputClamp;
uniform highp vec4 uInputSize;
uniform mat2 uRotation;
uniform vec2 uScale;

void main()
{
    vec4 map = texture(uMapTexture, vFilterUv);
    
    vec2 offset = uInputSize.zw * (uRotation * (map.xy - 0.5)) * uScale; 

    finalColor = texture(uTexture, clamp(vTextureCoord + offset, uInputClamp.xy, uInputClamp.zw));
}
`,po=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 vFilterUv;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

uniform mat3 uFilterMatrix;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( void )
{
  return ( uFilterMatrix * vec3( filterTextureCoord(), 1.0)  ).xy;
}


void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
    vFilterUv = getFilterCoord();
}
`,Ar=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct DisplacementUniforms {
  uFilterMatrix:mat3x3<f32>,
  uScale:vec2<f32>,
  uRotation:mat2x2<f32>
};



@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : DisplacementUniforms;
@group(1) @binding(1) var uMapTexture: texture_2d<f32>;
@group(1) @binding(2) var uMapSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{

  
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var map = textureSample(uMapTexture, uMapSampler, filterUv);

    var offset =  gfu.uInputSize.zw * (filterUniforms.uRotation * (map.xy - 0.5)) * filterUniforms.uScale; 
   
    return textureSample(uTexture, uSampler, clamp(uv + offset, gfu.uInputClamp.xy, gfu.uInputClamp.zw));
}`;class bs extends Pe{constructor(...e){let r=e[0];r instanceof zt&&(e[1]&&$(pe,"DisplacementFilter now uses options object instead of params. {sprite, scale}"),r={sprite:r,scale:e[1]});const{sprite:n,scale:o,...a}=r;let i=o??20;typeof i=="number"&&(i=new Pr(i,i));const c=new $e({uFilterMatrix:{value:new Fr,type:"mat3x3<f32>"},uScale:{value:i,type:"vec2<f32>"},uRotation:{value:new Float32Array([0,0,0,0]),type:"mat2x2<f32>"}}),p=Xe.from({vertex:po,fragment:fo,name:"displacement-filter"}),f=ke.from({vertex:{source:Ar,entryPoint:"mainVertex"},fragment:{source:Ar,entryPoint:"mainFragment"}}),b=n.texture.source;super({...a,gpuProgram:f,glProgram:p,resources:{filterUniforms:c,uMapTexture:b,uMapSampler:b.style}}),this._sprite=r.sprite,this._sprite.renderable=!1}apply(e,r,n,o){const a=this.resources.filterUniforms.uniforms;e.calculateSpriteMatrix(a.uFilterMatrix,this._sprite);const i=this._sprite.worldTransform,c=Math.sqrt(i.a*i.a+i.b*i.b),p=Math.sqrt(i.c*i.c+i.d*i.d);c!==0&&p!==0&&(a.uRotation[0]=i.a/c,a.uRotation[1]=i.b/c,a.uRotation[2]=i.c/p,a.uRotation[3]=i.d/p),this.resources.uMapTexture=this._sprite.texture.source,e.applyFilter(this,r,n,o)}get scale(){return this.resources.filterUniforms.uniforms.uScale}}var ho=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) *  uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    finalColor = color;
}
`,Cr=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
  uNoise:f32,
  uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

fn rand(co:vec2<f32>) -> f32
{
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);
  
    
    var sample = textureSample(uTexture, uSampler, uv);
    var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
    var diff = (randomValue - 0.5) * noiseUniforms.uNoise;
  
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (sample.a > 0.0) {
      sample.r /= sample.a;
      sample.g /= sample.a;
      sample.b /= sample.a;
    }

    sample.r += diff;
    sample.g += diff;
    sample.b += diff;

    // Premultiply alpha again.
    sample.r *= sample.a;
    sample.g *= sample.a;
    sample.b *= sample.a;
    
    return sample;
}`;const jr=class Qr extends Pe{constructor(e={}){e={...Qr.defaultOptions,...e};const r=ke.from({vertex:{source:Cr,entryPoint:"mainVertex"},fragment:{source:Cr,entryPoint:"mainFragment"}}),n=Xe.from({vertex:$t,fragment:ho,name:"noise-filter"}),{noise:o,seed:a,...i}=e;super({...i,gpuProgram:r,glProgram:n,resources:{noiseUniforms:new $e({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}}),this.noise=o,this.seed=a??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(e){this.resources.noiseUniforms.uniforms.uNoise=e}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(e){this.resources.noiseUniforms.uniforms.uSeed=e}};jr.defaultOptions={noise:.5};let gs=jr;var xs=`fn getLuminosity(c: vec3<f32>) -> f32 {
  return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
}

fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32> {
  let d: f32 = lum - getLuminosity(c);
  let newColor: vec3<f32> = c.rgb + vec3<f32>(d, d, d);

  // clip back into legal range
  let newLum: f32 = getLuminosity(newColor);
  let cMin: f32 = min(newColor.r, min(newColor.g, newColor.b));
  let cMax: f32 = max(newColor.r, max(newColor.g, newColor.b));

  let t1: f32 = newLum / (newLum - cMin);
  let t2: f32 = (1.0 - newLum) / (cMax - newLum);

  let finalColor = mix(vec3<f32>(newLum, newLum, newLum), newColor, select(select(1.0, t2, cMax > 1.0), t1, cMin < 0.0));

  return finalColor;
}

fn getSaturation(c: vec3<f32>) -> f32 {
  return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
}

// Set saturation if color components are sorted in ascending order.
fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32> {
  var result: vec3<f32>;
  if (cSorted.z > cSorted.x) {
    let newY = (((cSorted.y - cSorted.x) * s) / (cSorted.z - cSorted.x));
    result = vec3<f32>(0.0, newY, s);
  } else {
    result = vec3<f32>(0.0, 0.0, 0.0);
  }
  return vec3<f32>(result.x, result.y, result.z);
}

fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32> {
    var result: vec3<f32> = c;

    if (c.r <= c.g && c.r <= c.b) {
        if (c.g <= c.b) {
            result = setSaturationMinMidMax(result, s);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.r, result.b, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.r, temp.b, temp.g);
        }
    } else if (c.g <= c.r && c.g <= c.b) {
        if (c.r <= c.b) {
            var temp: vec3<f32> = vec3<f32>(result.g, result.r, result.b);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.r, temp.b);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.g, result.b, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.b, temp.r);
        }
    } else {
        if (c.r <= c.g) {
            var temp: vec3<f32> = vec3<f32>(result.b, result.r, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.r, temp.g);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.b, result.g, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.g, temp.r);
        }
    }

    return result;
}`;function Dr(t,e,r,n,o,a,i,c){const p=i-r,f=c-n,b=o-r,m=a-n,x=t-r,A=e-n,N=p*p+f*f,L=p*b+f*m,g=p*x+f*A,C=b*b+m*m,B=b*x+m*A,w=1/(N*C-L*L),I=(C*g-L*B)*w,V=(N*B-L*g)*w;return I>=0&&V>=0&&I+V<1}class Zr{constructor(e=0,r=0,n=0,o=0,a=0,i=0){this.type="triangle",this.x=e,this.y=r,this.x2=n,this.y2=o,this.x3=a,this.y3=i}contains(e,r){const n=(this.x-this.x3)*(r-this.y3)-(this.y-this.y3)*(e-this.x3),o=(this.x2-this.x)*(r-this.y)-(this.y2-this.y)*(e-this.x);if(n<0!=o<0&&n!==0&&o!==0)return!1;const a=(this.x3-this.x2)*(r-this.y2)-(this.y3-this.y2)*(e-this.x2);return a===0||a<0==n+o<=0}strokeContains(e,r,n,o=.5){const a=n/2,i=a*a,{x:c,x2:p,x3:f,y:b,y2:m,y3:x}=this;return Bt(e,r,c,b,p,x)<=i||Bt(e,r,p,m,f,x)<=i||Bt(e,r,f,x,c,b)<=i}clone(){return new Zr(this.x,this.y,this.x2,this.y2,this.x3,this.y3)}copyFrom(e){return this.x=e.x,this.y=e.y,this.x2=e.x2,this.y2=e.y2,this.x3=e.x3,this.y3=e.y3,this}copyTo(e){return e.copyFrom(this),e}getBounds(e){e||(e=new Or);const r=Math.min(this.x,this.x2,this.x3),n=Math.max(this.x,this.x2,this.x3),o=Math.min(this.y,this.y2,this.y3),a=Math.max(this.y,this.y2,this.y3);return e.x=r,e.y=o,e.width=n-r,e.height=a-o,e}}const Jr=class en{constructor(e){this._tick=()=>{this.timeout=setTimeout(this._processQueue,0)},this._processQueue=()=>{const{queue:r}=this;let n=0;for(;r.length&&n<en.uploadsPerFrame;){const o=r.shift();this.uploadQueueItem(o),n++}r.length?ar.system.addOnce(this._tick,this,ir.UTILITY):this._resolve()},this.renderer=e,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(e){const r=Array.isArray(e)?e:[e];for(const n of r)n instanceof Yt?this._addContainer(n):this.resolveQueueItem(n,this.queue);return this}_addContainer(e){this.resolveQueueItem(e,this.queue);for(const r of e.children)this._addContainer(r)}upload(e){return e&&this.add(e),new Promise(r=>{this.queue.length?(this.resolves.push(r),this.dedupeQueue(),ar.system.addOnce(this._tick,this,ir.UTILITY)):r()})}dedupeQueue(){const e=Object.create(null);let r=0;for(let n=0;n<this.queue.length;n++){const o=this.queue[n];e[o.uid]||(e[o.uid]=!0,this.queue[r++]=o)}this.queue.length=r}_resolve(){const{resolves:e}=this,r=e.slice(0);e.length=0;for(const n of r)n()}};Jr.uploadsPerFrame=4;let mo=Jr;class Qe extends we{constructor(...e){let r=e[0];r instanceof Sn&&($(pe,"Mesh: use new Mesh({ geometry, shader }) instead"),r={geometry:r,shader:e[1]},e[3]&&($(pe,"Mesh: drawMode argument has been removed, use geometry.topology instead"),r.geometry.topology=e[3]));const{geometry:n,shader:o,texture:a,roundPixels:i,state:c,...p}=r;super({label:"Mesh",...p}),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=o??null,this.texture=a??o?.texture??ce.WHITE,this.state=c??Ln.for2d(),this._geometry=n,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=i??!1}get material(){return $(pe,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(e){this._shader!==e&&(this._shader=e,this.onViewUpdate())}get shader(){return this._shader}set geometry(e){this._geometry!==e&&(this._geometry?.off("update",this.onViewUpdate,this),e.on("update",this.onViewUpdate,this),this._geometry=e,this.onViewUpdate())}get geometry(){return this._geometry}set texture(e){e||(e=ce.EMPTY);const r=this._texture;r!==e&&(r&&r.dynamic&&r.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=e),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||this.state.data&12?!1:this._geometry instanceof bt?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(e){const{x:r,y:n}=e;if(!this.bounds.containsPoint(r,n))return!1;const o=this.geometry.getBuffer("aPosition").data,a=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){const i=this.geometry.getIndex().data,c=i.length;for(let p=0;p+2<c;p+=a){const f=i[p]*2,b=i[p+1]*2,m=i[p+2]*2;if(Dr(r,n,o[f],o[f+1],o[b],o[b+1],o[m],o[m+1]))return!0}}else{const i=o.length/2;for(let c=0;c+2<i;c+=a){const p=c*2,f=(c+1)*2,b=(c+2)*2;if(Dr(r,n,o[p],o[p+1],o[f],o[f+1],o[b],o[b+1]))return!0}}return!1}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(n)}this._geometry?.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null}}class bo{constructor({matrix:e,observer:r}={}){this.dirty=!0,this._matrix=e??new Fr,this.observer=r,this.position=new Re(this,0,0),this.scale=new Re(this,1,1),this.pivot=new Re(this,0,0),this.skew=new Re(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){const e=this._matrix;return this.dirty&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this.dirty=!1),e}_onUpdate(e){this.dirty=!0,e===this.skew&&this.updateSkew(),this.observer?._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(e){e.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this.skew))}}const tn=class ct extends we{constructor(...e){let r=e[0]||{};r instanceof ce&&(r={texture:r}),e.length>1&&($(pe,"use new TilingSprite({ texture, width:100, height:100 }) instead"),r.width=e[1],r.height=e[2]),r={...ct.defaultOptions,...r};const{texture:n,anchor:o,tilePosition:a,tileScale:i,tileRotation:c,width:p,height:f,applyAnchorToTexture:b,roundPixels:m,...x}=r??{};super({label:"TilingSprite",...x}),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new Re({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=b,this.texture=n,this._width=p??n.width,this._height=f??n.height,this._tileTransform=new bo({observer:{_onUpdate:()=>this.onViewUpdate()}}),o&&(this.anchor=o),this.tilePosition=a,this.tileScale=i,this.tileRotation=c,this.roundPixels=m??!1}static from(e,r={}){return typeof e=="string"?new ct({texture:En.get(e),...r}):new ct({texture:e,...r})}get uvRespectAnchor(){return ft("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(e){ft("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=e}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(e){this._texture.textureMatrix.clampMargin=e}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get tilePosition(){return this._tileTransform.position}set tilePosition(e){this._tileTransform.position.copyFrom(e)}get tileScale(){return this._tileTransform.scale}set tileScale(e){typeof e=="number"?this._tileTransform.scale.set(e):this._tileTransform.scale.copyFrom(e)}set tileRotation(e){this._tileTransform.rotation=e}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(e){e||(e=ce.EMPTY);const r=this._texture;r!==e&&(r&&r.dynamic&&r.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}set width(e){this._width=e,this.onViewUpdate()}get width(){return this._width}set height(e){this._height=e,this.onViewUpdate()}get height(){return this._height}setSize(e,r){typeof e=="object"&&(r=e.height??e.width,e=e.width),this._width=e,this._height=r??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}updateBounds(){const e=this._bounds,r=this._anchor,n=this._width,o=this._height;e.minX=-r._x*n,e.maxX=e.minX+n,e.minY=-r._y*o,e.maxY=e.minY+o}containsPoint(e){const r=this._width,n=this._height,o=-r*this._anchor._x;let a=0;return e.x>=o&&e.x<=o+r&&(a=-n*this._anchor._y,e.y>=a&&e.y<=a+n)}destroy(e=!1){if(super.destroy(e),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(n)}this._texture=null}};tn.defaultOptions={texture:ce.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};let go=tn;class jt extends we{constructor(e,r){const{text:n,resolution:o,style:a,anchor:i,width:c,height:p,roundPixels:f,...b}=e;super({...b}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=r,this.text=n??"",this.style=a,this.resolution=o??null,this.allowChildren=!1,this._anchor=new Re({_onUpdate:()=>{this.onViewUpdate()}}),i&&(this.anchor=i),this.roundPixels=f??!1,c!==void 0&&(this.width=c),p!==void 0&&(this.height=p)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){e||(e={}),this._style?.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,r){typeof e=="object"?(r=e.height??e.width,e=e.width):r??(r=e),e!==void 0&&this._setWidth(e,this.bounds.width),r!==void 0&&this._setHeight(r,this.bounds.height)}containsPoint(e){const r=this.bounds.width,n=this.bounds.height,o=-r*this.anchor.x;let a=0;return e.x>=o&&e.x<=o+r&&(a=-n*this.anchor.y,e.y>=a&&e.y<=a+n)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e?.style)&&this._style.destroy(e),this._style=null,this._text=null}}function Qt(t,e){let r=t[0]??{};return(typeof r=="string"||t[1])&&($(pe,`use new ${e}({ text: "hi!", style }) instead`),r={text:r,style:t[1]}),r}class rn extends jt{constructor(...e){const r=Qt(e,"Text");super(r,pt),this.renderPipeId="text"}updateBounds(){const e=this._bounds,r=this._anchor,n=yn.measureText(this._text,this._style),{width:o,height:a}=n;e.minX=-r._x*o,e.maxX=e.minX+o,e.minY=-r._y*a,e.maxY=e.minY+a}}class xo extends mo{resolveQueueItem(e,r){return e instanceof Yt?this.resolveContainerQueueItem(e,r):e instanceof qt||e instanceof ce?r.push(e.source):e instanceof Gr&&r.push(e),null}resolveContainerQueueItem(e,r){e instanceof zt||e instanceof go||e instanceof Qe?r.push(e.texture.source):e instanceof rn?r.push(e):e instanceof An?r.push(e.context):e instanceof Nn&&e.textures.forEach(n=>{n.source?r.push(n.source):r.push(n.texture.source)})}resolveGraphicsContextQueueItem(e){this.renderer.graphicsContext.getGpuContext(e);const{instructions:r}=e;for(const n of r)if(n.action==="texture"){const{image:o}=n.data;return o.source}else if(n.action==="fill"){const{texture:o}=n.data.style;return o.source}return null}}class _o extends jt{constructor(...e){var r;const n=Qt(e,"BitmapText");n.style??(n.style=n.style||{}),(r=n.style).fill??(r.fill=16777215),super(n,pt),this.renderPipeId="bitmapText"}updateBounds(){const e=this._bounds,r=this._anchor,n=Cn.measureText(this.text,this._style),o=n.scale,a=n.offsetY*o;let i=n.width*o,c=n.height*o;const p=this._style._stroke;p&&(i+=p.width,c+=p.width),e.minX=-r._x*i,e.maxX=e.minX+i,e.minY=-r._y*(c+a),e.maxY=e.minY+c}set resolution(e){e!==null&&ft("[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.")}get resolution(){return this._resolution}}class vo extends jt{constructor(...e){const r=Qt(e,"HtmlText");super(r,Ft),this.renderPipeId="htmlText"}updateBounds(){const e=this._bounds,r=this._anchor,n=In(this.text,this._style),{width:o,height:a}=n;e.minX=-r._x*o,e.maxX=e.minX+o,e.minY=-r._y*a,e.maxY=e.minY+a}}class So extends xo{uploadQueueItem(e){e instanceof qt?this.uploadTextureSource(e):e instanceof rn?this.uploadText(e):e instanceof vo?this.uploadHTMLText(e):e instanceof _o?this.uploadBitmapText(e):e instanceof Gr&&this.uploadGraphicsContext(e)}uploadTextureSource(e){this.renderer.texture.initSource(e)}uploadText(e){this.renderer.renderPipes.text.initGpuText(e)}uploadBitmapText(e){this.renderer.renderPipes.bitmapText.initGpuText(e)}uploadHTMLText(e){this.renderer.renderPipes.htmlText.initGpuText(e)}uploadGraphicsContext(e){this.renderer.graphicsContext.getGpuContext(e);const{instructions:r}=e;for(const n of r)if(n.action==="texture"){const{image:o}=n.data;this.uploadTextureSource(o.source)}else if(n.action==="fill"){const{texture:o}=n.data.style;this.uploadTextureSource(o.source)}return null}}class Eo extends So{destroy(){clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}}Eo.extension={type:[H.WebGLSystem,H.WebGPUSystem],name:"prepare"};function _s(t){const e=[];let r=0;for(let n=0;n<t;n++)e[r]={texture:{sampleType:"float",viewDimension:"2d",multisampled:!1},binding:r,visibility:GPUShaderStage.FRAGMENT},r++,e[r]={sampler:{type:"filtering"},binding:r,visibility:GPUShaderStage.FRAGMENT},r++;return e}function vs(t){const e={};let r=0;for(let n=0;n<t;n++)e[`textureSource${n+1}`]=r++,e[`textureSampler${n+1}`]=r++;return e}function Ss(t){const e=t.split(/([\n{}])/g).map(o=>o.trim()).filter(o=>o.length);let r="";return e.map(o=>{let a=r+o;return o==="{"?r+="    ":o==="}"&&(r=r.substr(0,r.length-4),a=r+o),a}).join(`
`)}class Es{constructor(e){this.priority=0,this.pipe="scissorMask",this.mask=e,this.mask.renderable=!1,this.mask.measurable=!1}addBounds(e,r){Dn(this.mask,e,r)}addLocalBounds(e,r){Bn(this.mask,e,r)}containsPoint(e,r){const n=this.mask;return r(n,e)}reset(){this.mask.measurable=!0,this.mask=null}destroy(){this.reset()}}function ys(t){return t=t.replaceAll("texture2D","texture").replaceAll("gl_FragColor","finalColor").replaceAll("varying","in"),t=`
        out vec4 finalColor;
    ${t}
    `,t}const yo={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function As(t){return yo[t]}function Cs(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let r=0;r<e;r+=4){const n=t[r+3];if(n!==0){const o=255.001/n;t[r]=t[r]*o+.5,t[r+1]=t[r+1]*o+.5,t[r+2]=t[r+2]*o+.5}}}function Ds(t,e){const r=t.descriptor.size,n=e.gpu.device,o=new Tn({data:new Float32Array(24e5),usage:lr.MAP_READ|lr.COPY_DST}),a=e.buffer.createGPUBuffer(o),i=n.createCommandEncoder();i.copyBufferToBuffer(e.buffer.getGPUBuffer(t),0,a,0,r),n.queue.submit([i.finish()]),a.mapAsync(GPUMapMode.READ,0,r).then(()=>{a.getMappedRange(0,r),a.unmap()})}const Br={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},Bs=new Proxy(Br,{get(t,e){return $(pe,`DRAW_MODES.${e} is deprecated, use '${Br[e]}' instead`),t[e]}}),Ao=new Or(0,0,1,1);function Ts(t,e,r){r||(r=Ao);const n=e.pixelWidth,o=e.pixelHeight;return t.x=r.x*n|0,t.y=r.y*o|0,t.width=r.width*n|0,t.height=r.height*o|0,t}var Co=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(Co||{}),Lt=(t=>(t.CLAMP="clamp-to-edge",t.REPEAT="repeat",t.MIRRORED_REPEAT="mirror-repeat",t))(Lt||{});const Rs=new Proxy(Lt,{get(t,e){return $(pe,`DRAW_MODES.${e} is deprecated, use '${Lt[e]}' instead`),t[e]}});var Nt=(t=>(t.NEAREST="nearest",t.LINEAR="linear",t))(Nt||{});const ws=new Proxy(Nt,{get(t,e){return $(pe,`DRAW_MODES.${e} is deprecated, use '${Nt[e]}' instead`),t[e]}});class Ps{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,n){const o=r.width,a=r.height;if(n){const i=e.width/2/o,c=e.height/2/a,p=e.x/o+i,f=e.y/a+c;n=ae.add(n,ae.NW),this.x0=p+i*ae.uX(n),this.y0=f+c*ae.uY(n),n=ae.add(n,2),this.x1=p+i*ae.uX(n),this.y1=f+c*ae.uY(n),n=ae.add(n,2),this.x2=p+i*ae.uX(n),this.y2=f+c*ae.uY(n),n=ae.add(n,2),this.x3=p+i*ae.uX(n),this.y3=f+c*ae.uY(n)}else this.x0=e.x/o,this.y0=e.y/a,this.x1=(e.x+e.width)/o,this.y1=e.y/a,this.x2=(e.x+e.width)/o,this.y2=(e.y+e.height)/a,this.x3=e.x/o,this.y3=(e.y+e.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[pixi.js/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}let Do=0;function Us(){return Do++}function Fs(t){const e=t.toString(),r=e.indexOf("{"),n=e.lastIndexOf("}");if(r===-1||n===-1)throw new Error("getFunctionBody: No body found in function definition");return e.slice(r+1,n).trim()}function Os(t,e){return $("8.7.0","Use container.getFastGlobalBounds() instead"),t.getFastGlobalBounds(!0,e)}class Gs extends we{constructor(e){typeof e=="function"&&(e={render:e});const{render:r,...n}=e;super({label:"RenderContainer",...n}),this.renderPipeId="customRender",this.batched=!1,r&&(this.render=r),this.containsPoint=e.containsPoint??(()=>!1),this.addBounds=e.addBounds??(()=>!1)}updateBounds(){this._bounds.clear(),this.addBounds(this._bounds)}render(e){}}function Ms(t,e,r){$("8.7.0","Please use container.collectRenderables instead.");const n=r.renderPipes?r:r.batch.renderer;return t.collectRenderables(e,n,null)}function Is(t,e,r){const n=t>>16&255,o=t>>8&255,a=t&255,i=e>>16&255,c=e>>8&255,p=e&255,f=n+(i-n)*r,b=o+(c-o)*r,m=a+(p-a)*r;return(f<<16)+(b<<8)+m}function Ls(t,e){const r=e._scale,n=e._pivot,o=e._position,a=r._x,i=r._y,c=n._x,p=n._y;t.a=e._cx*a,t.b=e._sx*a,t.c=e._cy*i,t.d=e._sy*i,t.tx=o._x-(c*t.a+p*t.c),t.ty=o._y-(c*t.b+p*t.d)}function Ns(t,e,r){const n=t.a,o=t.b,a=t.c,i=t.d,c=t.tx,p=t.ty,f=e.a,b=e.b,m=e.c,x=e.d;r.a=n*f+o*m,r.b=n*b+o*x,r.c=a*f+i*m,r.d=a*b+i*x,r.tx=c*f+p*m+e.tx,r.ty=c*b+p*x+e.ty}const Bo={rectangle:Un,polygon:Fn,triangle:On,circle:Tt,ellipse:Tt,roundedRectangle:Tt};function ks(t){t instanceof Gn&&(t={path:t,textureMatrix:null,out:null});const e=[],r=[],n=[],o=t.path.shapePath,a=t.textureMatrix;o.shapePrimitives.forEach(({shape:p,transform:f})=>{const b=n.length,m=e.length/2,x=[],A=Bo[p.type];A.build(p,x),f&&Rn(x,f),A.triangulate(x,e,2,m,n,b);const N=r.length/2;a?(f&&a.append(f.clone().invert()),wn(e,2,m,r,N,2,e.length/2-m,a)):Pn(r,N,2,e.length/2-m)});const i=t.out;return i?(i.positions=new Float32Array(e),i.uvs=new Float32Array(r),i.indices=new Uint32Array(n),i):new bt({positions:new Float32Array(e),uvs:new Float32Array(r),indices:new Uint32Array(n)})}const nn=class un extends Yt{constructor(e={}){e={...un.defaultOptions,...e},super(),this.renderLayerChildren=[],this.sortableChildren=e.sortableChildren,this.sortFunction=e.sortFunction}attach(...e){for(let r=0;r<e.length;r++){const n=e[r];if(n.parentRenderLayer){if(n.parentRenderLayer===this)continue;n.parentRenderLayer.detach(n)}this.renderLayerChildren.push(n),n.parentRenderLayer=this;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0)}return e[0]}detach(...e){for(let r=0;r<e.length;r++){const n=e[r],o=this.renderLayerChildren.indexOf(n);o!==-1&&this.renderLayerChildren.splice(o,1),n.parentRenderLayer=null;const a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0)}return e[0]}detachAll(){const e=this.renderLayerChildren;for(let r=0;r<e.length;r++)e[r].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(e,r,n){const o=this.renderLayerChildren,a=o.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let i=0;i<a;i++)o[i].parent||ft("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",o[i]),o[i].collectRenderables(e,r,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(e,r,n){if(!e)return;const o=this.renderLayerChildren;for(let a=0;a<o.length;a++)o[a]._getGlobalBoundsRecursive(!0,r,this)}};nn.defaultOptions={sortableChildren:!1,sortFunction:(t,e)=>t.zIndex-e.zIndex};let To=nn;const Xs=To;function Ro(t,e,r,n){const o=r.buffers[0],a=o.data,{verticesX:i,verticesY:c}=r,p=t/(i-1),f=e/(c-1);let b=0;const m=n[0],x=n[1],A=n[2],N=n[3],L=n[4],g=n[5],C=n[6],B=n[7],w=n[8];for(let I=0;I<a.length;I+=2){const V=b%i*p,j=(b/i|0)*f,G=m*V+x*j+A,k=N*V+L*j+g,h=C*V+B*j+w;a[I]=G/h,a[I+1]=k/h,b++}o.update()}function on(t,e){const r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],c=e[5],p=e[6],f=e[7],b=e[8];return t[0]=i*b-c*f,t[1]=o*f-n*b,t[2]=n*c-o*i,t[3]=c*p-a*b,t[4]=r*b-o*p,t[5]=o*a-r*c,t[6]=a*f-i*p,t[7]=n*p-r*f,t[8]=r*i-n*a,t}function sn(t,e,r){const n=e[0],o=e[1],a=e[2],i=e[3],c=e[4],p=e[5],f=e[6],b=e[7],m=e[8],x=r[0],A=r[1],N=r[2],L=r[3],g=r[4],C=r[5],B=r[6],w=r[7],I=r[8];return t[0]=x*n+A*i+N*f,t[1]=x*o+A*c+N*b,t[2]=x*a+A*p+N*m,t[3]=L*n+g*i+C*f,t[4]=L*o+g*c+C*b,t[5]=L*a+g*p+C*m,t[6]=B*n+w*i+I*f,t[7]=B*o+w*c+I*b,t[8]=B*a+w*p+I*m,t}function wo(t,e,r){const n=r[0],o=r[1],a=r[2];return t[0]=e[0]*n+e[1]*o+e[2]*a,t[1]=e[3]*n+e[4]*o+e[5]*a,t[2]=e[6]*n+e[7]*o+e[8]*a,t}const Po=[0,0,0,0,0,0,0,0,0],Uo=[0,0,0],lt=[0,0,0];function Tr(t,e,r,n,o,a,i,c,p){const f=Po;f[0]=e,f[1]=n,f[2]=a,f[3]=r,f[4]=o,f[5]=i,f[6]=1,f[7]=1,f[8]=1;const b=on(t,f);lt[0]=c,lt[1]=p,lt[2]=1;const m=wo(Uo,b,lt),x=t;return t[0]=m[0],t[1]=0,t[2]=0,t[3]=0,t[4]=m[1],t[5]=0,t[6]=0,t[7]=0,t[8]=m[2],sn(t,x,f)}const Fo=[0,0,0,0,0,0,0,0,0],Oo=[0,0,0,0,0,0,0,0,0];function Go(t,e,r,n,o,a,i,c,p,f,b,m,x,A,N,L,g){const C=Tr(Fo,e,r,a,i,f,b,A,N),B=Tr(Oo,n,o,c,p,m,x,L,g);return sn(t,on(C,C),B)}class Mo extends Mr{constructor(e){super(e),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];const{width:r,height:n}=e;this.corners=[0,0,r,0,r,n,0,n]}setCorners(e,r,n,o,a,i,c,p){const f=this.corners;f[0]=e,f[1]=r,f[2]=n,f[3]=o,f[4]=a,f[5]=i,f[6]=c,f[7]=p,this.updateProjection()}updateProjection(){const{width:e,height:r}=this,n=this.corners,o=Go(this._projectionMatrix,0,0,n[0],n[1],e,0,n[2],n[3],e,r,n[4],n[5],0,r,n[6],n[7]);Ro(e,r,this,o)}}const an=class ln extends Qe{constructor(e){e={...ln.defaultOptions,...e};const{texture:r,verticesX:n,verticesY:o,...a}=e,i=new Mo(Ee({width:r.width,height:r.height,verticesX:n,verticesY:o}));super(Ee({...a,geometry:i})),this._texture=r,this.geometry.setCorners(e.x0,e.y0,e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}textureUpdated(){const e=this.geometry;if(!e)return;const{width:r,height:n}=this.texture;(e.width!==r||e.height!==n)&&(e.width=r,e.height=n,e.updateProjection())}set texture(e){this._texture!==e&&(super.texture=e,this.textureUpdated())}get texture(){return this._texture}setCorners(e,r,n,o,a,i,c,p){this.geometry.setCorners(e,r,n,o,a,i,c,p)}};an.defaultOptions={texture:ce.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100};let Hs=an;class Vs extends Qe{constructor(e){const{texture:r,verticesX:n,verticesY:o,...a}=e,i=new Mr(Ee({width:r.width,height:r.height,verticesX:n,verticesY:o}));super(Ee({...a,geometry:i,texture:r})),this.texture=r,this.autoResize=!0}textureUpdated(){const e=this.geometry,{width:r,height:n}=this.texture;this.autoResize&&(e.width!==r||e.height!==n)&&(e.width=r,e.height=n,e.build({}))}set texture(e){this._texture?.off("update",this.textureUpdated,this),super.texture=e,e.on("update",this.textureUpdated,this),this.textureUpdated()}get texture(){return this._texture}destroy(e){this.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const cn=class dn extends bt{constructor(e){const{width:r,points:n,textureScale:o}={...dn.defaultOptions,...e};super({positions:new Float32Array(n.length*4),uvs:new Float32Array(n.length*4),indices:new Uint32Array((n.length-1)*6)}),this.points=n,this._width=r,this.textureScale=o,this._build()}get width(){return this._width}_build(){const e=this.points;if(!e)return;const r=this.getBuffer("aPosition"),n=this.getBuffer("aUV"),o=this.getIndex();if(e.length<1)return;r.data.length/4!==e.length&&(r.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),o.data=new Uint16Array((e.length-1)*6));const a=n.data,i=o.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;let c=0,p=e[0];const f=this._width*this.textureScale,b=e.length;for(let x=0;x<b;x++){const A=x*4;if(this.textureScale>0){const N=p.x-e[x].x,L=p.y-e[x].y,g=Math.sqrt(N*N+L*L);p=e[x],c+=g/f}else c=x/(b-1);a[A]=c,a[A+1]=0,a[A+2]=c,a[A+3]=1}let m=0;for(let x=0;x<b-1;x++){const A=x*2;i[m++]=A,i[m++]=A+1,i[m++]=A+2,i[m++]=A+2,i[m++]=A+1,i[m++]=A+3}n.update(),o.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let r=e[0],n,o=0,a=0;const i=this.buffers[0].data,c=e.length,p=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let f=0;f<c;f++){const b=e[f],m=f*4;f<e.length-1?n=e[f+1]:n=b,a=-(n.x-r.x),o=n.y-r.y;const x=Math.sqrt(o*o+a*a);x<1e-6?(o=0,a=0):(o/=x,a/=x,o*=p,a*=p),i[m]=b.x+o,i[m+1]=b.y+a,i[m+2]=b.x-o,i[m+3]=b.y-a,r=b}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};cn.defaultOptions={width:200,points:[],textureScale:0};let Io=cn;const fn=class pn extends Qe{constructor(e){const{texture:r,points:n,textureScale:o,...a}={...pn.defaultOptions,...e},i=new Io(Ee({width:r.height,points:n,textureScale:o}));o>0&&(r.source.style.addressMode="repeat"),super(Ee({...a,texture:r,geometry:i})),this.autoUpdate=!0,this.onRender=this._render}_render(){const e=this.geometry;(this.autoUpdate||e._width!==this.texture.height)&&(e._width=this.texture.height,e.update())}};fn.defaultOptions={textureScale:0};let qs=fn;class zs extends Qe{constructor(e){const{texture:r,vertices:n,uvs:o,indices:a,topology:i,...c}=e,p=new bt(Ee({positions:n,uvs:o,indices:a,topology:i}));super(Ee({...c,texture:r,geometry:p})),this.autoUpdate=!0,this.onRender=this._render}get vertices(){return this.geometry.getBuffer("aPosition").data}set vertices(e){this.geometry.getBuffer("aPosition").data=e}_render(){this.autoUpdate&&this.geometry.getBuffer("aPosition").update()}}function Ys(t,e){const{width:r,height:n}=t.frame;return e.scale(1/r,1/n),e}const hn=class kt{constructor(e){if(e instanceof ce)this.texture=e,cr(this,kt.defaultOptions,{});else{const r={...kt.defaultOptions,...e};cr(this,r,{})}}get alpha(){return this._alpha}set alpha(e){this._alpha=Math.min(Math.max(e,0),1),this._updateColor()}get tint(){return Mn(this._tint)}set tint(e){typeof e=="number"?this._tint=e:this._tint=Ut.shared.setValue(e??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+((this._alpha*255|0)<<24)}};hn.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1};let Ws=hn;const Rr={vertex:{attributeName:"aVertex",format:"float32x2",code:`
            const texture = p.texture;
            const sx = p.scaleX;
            const sy = p.scaleY;
            const ax = p.anchorX;
            const ay = p.anchorY;
            const trim = texture.trim;
            const orig = texture.orig;

            if (trim)
            {
                w1 = trim.x - (ax * orig.width);
                w0 = w1 + trim.width;

                h1 = trim.y - (ay * orig.height);
                h0 = h1 + trim.height;
            }
            else
            {
                w1 = -ax * (orig.width);
                w0 = w1 + orig.width;

                h1 = -ay * (orig.height);
                h0 = h1 + orig.height;
            }

            f32v[offset] = w1 * sx;
            f32v[offset + 1] = h1 * sy;

            f32v[offset + stride] = w0 * sx;
            f32v[offset + stride + 1] = h1 * sy;

            f32v[offset + (stride * 2)] = w0 * sx;
            f32v[offset + (stride * 2) + 1] = h0 * sy;

            f32v[offset + (stride * 3)] = w1 * sx;
            f32v[offset + (stride * 3) + 1] = h0 * sy;
        `,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
            var x = p.x;
            var y = p.y;

            f32v[offset] = x;
            f32v[offset + 1] = y;

            f32v[offset + stride] = x;
            f32v[offset + stride + 1] = y;

            f32v[offset + (stride * 2)] = x;
            f32v[offset + (stride * 2) + 1] = y;

            f32v[offset + (stride * 3)] = x;
            f32v[offset + (stride * 3) + 1] = y;
        `,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
            var rotation = p.rotation;

            f32v[offset] = rotation;
            f32v[offset + stride] = rotation;
            f32v[offset + (stride * 2)] = rotation;
            f32v[offset + (stride * 3)] = rotation;
        `,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
            var uvs = p.texture.uvs;

            f32v[offset] = uvs.x0;
            f32v[offset + 1] = uvs.y0;

            f32v[offset + stride] = uvs.x1;
            f32v[offset + stride + 1] = uvs.y1;

            f32v[offset + (stride * 2)] = uvs.x2;
            f32v[offset + (stride * 2) + 1] = uvs.y2;

            f32v[offset + (stride * 3)] = uvs.x3;
            f32v[offset + (stride * 3) + 1] = uvs.y3;
        `,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
            const c = p.color;

            u32v[offset] = c;
            u32v[offset + stride] = c;
            u32v[offset + (stride * 2)] = c;
            u32v[offset + (stride * 3)] = c;
        `,dynamic:!1}},Lo=new wr(0,0,0,0),mn=class Xt extends we{constructor(e={}){e={...Xt.defaultOptions,...e,dynamicProperties:{...Xt.defaultOptions.dynamicProperties,...e?.dynamicProperties}};const{dynamicProperties:r,shader:n,roundPixels:o,texture:a,particles:i,...c}=e;super({label:"ParticleContainer",...c}),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=a||null,this.shader=n,this._properties={};for(const p in Rr){const f=Rr[p],b=r[p];this._properties[p]={...f,dynamic:b}}this.allowChildren=!0,this.roundPixels=o??!1,this.particleChildren=i??[]}addParticle(...e){for(let r=0;r<e.length;r++)this.particleChildren.push(e[r]);return this.onViewUpdate(),e[0]}removeParticle(...e){let r=!1;for(let n=0;n<e.length;n++){const o=this.particleChildren.indexOf(e[n]);o>-1&&(this.particleChildren.splice(o,1),r=!0)}return r&&this.onViewUpdate(),e[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return Lo}updateBounds(){}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource,o=this.texture??this.particleChildren[0]?.texture;o&&o.destroy(n)}this.texture=null,this.shader?.destroy()}removeParticles(e,r){const n=this.particleChildren.splice(e,r);return this.onViewUpdate(),n}removeParticleAt(e){const r=this.particleChildren.splice(e,1);return this.onViewUpdate(),r[0]}addParticleAt(e,r){return this.particleChildren.splice(r,0,e),this.onViewUpdate(),e}addChild(...e){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...e){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(e,r){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(e){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(e){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(e,r){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(e){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(e,r){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(e,r){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...e){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(e,r){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};mn.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1};let Ks=mn;const bn=class gn extends we{constructor(e){e instanceof ce&&(e={texture:e});const{width:r,height:n,anchor:o,leftWidth:a,rightWidth:i,topHeight:c,bottomHeight:p,texture:f,roundPixels:b,...m}=e;super({label:"NineSliceSprite",...m}),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=a??f?.defaultBorders?.left??Ie.defaultOptions.leftWidth,this._topHeight=c??f?.defaultBorders?.top??Ie.defaultOptions.topHeight,this._rightWidth=i??f?.defaultBorders?.right??Ie.defaultOptions.rightWidth,this._bottomHeight=p??f?.defaultBorders?.bottom??Ie.defaultOptions.bottomHeight,this._width=r??f.width??Ie.defaultOptions.width,this._height=n??f.height??Ie.defaultOptions.height,this.allowChildren=!1,this.texture=f??gn.defaultOptions.texture,this.roundPixels=b??!1,this._anchor=new Re({_onUpdate:()=>{this.onViewUpdate()}}),o?this.anchor=o:this.texture.defaultAnchor&&(this.anchor=this.texture.defaultAnchor)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return this._width}set width(e){this._width=e,this.onViewUpdate()}get height(){return this._height}set height(e){this._height=e,this.onViewUpdate()}setSize(e,r){typeof e=="object"&&(r=e.height??e.width,e=e.width),this._width=e,this._height=r??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this.onViewUpdate()}get texture(){return this._texture}set texture(e){e||(e=ce.EMPTY);const r=this._texture;r!==e&&(r&&r.dynamic&&r.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(n)}this._texture=null}updateBounds(){const e=this._bounds,r=this._anchor,n=this._width,o=this._height;e.minX=-r._x*n,e.maxX=e.minX+n,e.minY=-r._y*o,e.maxY=e.minY+o}};bn.defaultOptions={texture:ce.EMPTY};let No=bn;class $s extends No{constructor(...e){let r=e[0];r instanceof ce&&($(pe,"NineSlicePlane now uses the options object {texture, leftWidth, rightWidth, topHeight, bottomHeight}"),r={texture:r,leftWidth:e[1],topHeight:e[2],rightWidth:e[3],bottomHeight:e[4]}),$(pe,"NineSlicePlane is deprecated. Use NineSliceSprite instead."),super(r)}}function js(t,e){return e instanceof pt||e instanceof Ft?e:t==="html"?new Ft(e):new pt(e)}async function Qs(t,e,r=200){const n=await e.extract.base64(t);await e.encoder.commandFinished;const o=r;console.log(`logging texture ${t.source.width}px ${t.source.height}px`);const a=["font-size: 1px;",`padding: ${o}px 300px;`,`background: url(${n}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",a)}const ko=["#000080","#228B22","#8B0000","#4169E1","#008080","#800000","#9400D3","#FF8C00","#556B2F","#8B008B"];let Xo=0;function Ho(t,e=0,r={color:"#000000"}){t.renderGroup&&(r.color=ko[Xo++]);let n="";for(let i=0;i<e;i++)n+="    ";let o=t.label;!o&&t instanceof zt&&(o=`sprite:${t.texture.label}`);let a=`%c ${n}|- ${o} (worldX:${t.worldTransform.tx}, relativeRenderX:${t.relativeGroupTransform.tx}, renderX:${t.groupTransform.tx}, localX:${t.x})`;t.renderGroup&&(a+=" (RenderGroup)"),t.filters&&(a+="(*filters)"),console.log(a,`color:${r.color}; font-weight:bold;`),e++;for(let i=0;i<t.children.length;i++){const c=t.children[i];Ho(c,e,{...r})}}function Vo(t,e=0,r={index:0,color:"#000000"}){let n="";for(let a=0;a<e;a++)n+="    ";const o=`%c ${n}- ${r.index}: ${t.root.label} worldX:${t.worldTransform.tx}`;console.log(o,`color:${r.color}; font-weight:bold;`),e++;for(let a=0;a<t.renderGroupChildren.length;a++){const i=t.renderGroupChildren[a];Vo(i,e,{...r,index:a})}}const Zs=import.meta.url;export{ta as AbstractBitmapFont,ra as AbstractRenderer,jt as AbstractText,g2 as AccessibilitySystem,hs as AlphaFilter,na as AlphaMask,Ud as AlphaMaskPipe,Nn as AnimatedSprite,ua as Application,oa as ApplicationInitHook,sa as Assets,aa as AssetsClass,ia as BLEND_TO_NPM,wf as BUFFER_TYPE,la as BackgroundLoader,Fd as BackgroundSystem,ca as Batch,da as BatchGeometry,fa as BatchTextureArray,pa as BatchableGraphics,w2 as BatchableMesh,hp as BatchableSprite,ha as Batcher,Od as BatcherPipe,ma as BigPool,ba as BindGroup,M0 as BindGroupSystem,ga as BitmapFont,Cn as BitmapFontManager,_o as BitmapText,P2 as BitmapTextPipe,W as BlendModeFilter,Gd as BlendModePipe,lo as BlurFilter,Pt as BlurFilterPass,wr as Bounds,xa as BrowserAdapter,Tn as Buffer,_a as BufferImageSource,Md as BufferResource,lr as BufferUsage,va as CLEAR,En as Cache,Sa as CanvasPool,Ea as CanvasPoolClass,ya as CanvasSource,yn as CanvasTextMetrics,U2 as CanvasTextPipe,F2 as CanvasTextSystem,Aa as Circle,Ut as Color,Vn as ColorBlend,qn as ColorBurnBlend,zn as ColorDodgeBlend,Ca as ColorMask,Id as ColorMaskPipe,ms as ColorMatrixFilter,gt as CompressedSource,Yt as Container,Ku as Culler,$u as CullerPlugin,Ld as CustomRenderPipe,Xr as D3D10_RESOURCE_DIMENSION,ie as D3DFMT,Da as DATA_URI,R as DDS,Ba as DEG_TO_RAD,Nt as DEPRECATED_SCALE_MODES,Lt as DEPRECATED_WRAP_MODES,xn as DOMAdapter,fs as DOMContainer,x2 as DOMPipe,Bs as DRAW_MODES,kr as DXGI_FORMAT,le as DXGI_TO_TEXTURE_FORMAT,Yn as DarkenBlend,Ta as DefaultBatcher,Ra as DefaultShader,Wn as DifferenceBlend,bs as DisplacementFilter,Kn as DivideBlend,wa as DynamicBitmapFont,Pa as Ellipse,_2 as EventBoundary,Ua as EventEmitter,v2 as EventSystem,S2 as EventsTicker,$n as ExclusionBlend,H as ExtensionType,Nd as ExtractSystem,hr as FOURCC_TO_TEXTURE_FORMAT,E2 as FederatedContainer,y2 as FederatedEvent,A2 as FederatedMouseEvent,C2 as FederatedPointerEvent,D2 as FederatedWheelEvent,Fa as FillGradient,Oa as FillPattern,Pe as Filter,Ga as FilterEffect,O2 as FilterPipe,G2 as FilterSystem,M2 as FontStylePromiseCache,Wr as GAUSSIAN_VALUES,Pf as GL_FORMATS,yu as GL_INTERNAL_FORMAT,Uf as GL_TARGETS,Ff as GL_TYPES,Of as GL_WRAP_MODES,kd as GenerateTextureSystem,Sn as Geometry,Gf as GlBackBufferSystem,Mf as GlBatchAdaptor,If as GlBuffer,Lf as GlBufferSystem,Nf as GlColorMaskSystem,kf as GlContextSystem,Xf as GlEncoderSystem,Hf as GlGeometrySystem,Vf as GlGraphicsAdaptor,qf as GlMeshAdaptor,I2 as GlParticleContainerAdaptor,L2 as GlParticleContainerPipe,Xe as GlProgram,zf as GlProgramData,Yf as GlRenderTarget,Wf as GlRenderTargetAdaptor,Kf as GlRenderTargetSystem,$f as GlShaderSystem,jf as GlStateSystem,Qf as GlStencilSystem,Zf as GlTexture,Jf as GlTextureSystem,e0 as GlUboSystem,t0 as GlUniformGroupSystem,Xd as GlobalUniformSystem,I0 as GpuBatchAdaptor,L0 as GpuBlendModesToPixi,N0 as GpuBufferSystem,k0 as GpuColorMaskSystem,X0 as GpuDeviceSystem,H0 as GpuEncoderSystem,V0 as GpuGraphicsAdaptor,Ma as GpuGraphicsContext,q0 as GpuMeshAdapter,z0 as GpuMipmapGenerator,N2 as GpuParticleContainerAdaptor,k2 as GpuParticleContainerPipe,ke as GpuProgram,Ds as GpuReadBuffer,Y0 as GpuRenderTarget,W0 as GpuRenderTargetAdaptor,K0 as GpuRenderTargetSystem,$0 as GpuShaderSystem,j0 as GpuStateSystem,Hd as GpuStencilModesToPixi,Q0 as GpuStencilSystem,Z0 as GpuTextureSystem,J0 as GpuUboSystem,ep as GpuUniformBatchPipe,An as Graphics,Gr as GraphicsContext,Ia as GraphicsContextRenderData,La as GraphicsContextSystem,Gn as GraphicsPath,X2 as GraphicsPipe,vo as HTMLText,H2 as HTMLTextPipe,V2 as HTMLTextRenderData,Ft as HTMLTextStyle,q2 as HTMLTextSystem,jn as HardLightBlend,Qn as HardMixBlend,Vd as HelloSystem,r0 as IGLUniformData,Na as ImageSource,ka as InstructionSet,Y as KTX,Zn as LightenBlend,Jn as LinearBurnBlend,eu as LinearDodgeBlend,tu as LinearLightBlend,Xa as Loader,ht as LoaderParserPriority,ru as LuminosityBlend,Co as MSAA_QUALITY,Ha as MaskEffectManager,Va as MaskEffectManagerClass,qd as MaskFilter,Fr as Matrix,Qe as Mesh,bt as MeshGeometry,z2 as MeshPipe,Vs as MeshPlane,qs as MeshRope,zs as MeshSimple,qa as NOOP,nu as NegationBlend,Ie as NineSliceGeometry,$s as NineSlicePlane,No as NineSliceSprite,Y2 as NineSliceSpritePipe,gs as NoiseFilter,Re as ObservablePoint,uu as OverlayBlend,za as PI_2,Ws as Particle,W2 as ParticleBuffer,Ks as ParticleContainer,K2 as ParticleContainerPipe,$2 as ParticleShader,Hs as PerspectiveMesh,Mo as PerspectivePlaneGeometry,ou as PinLightBlend,tp as PipelineSystem,Mr as PlaneGeometry,Pr as Point,Ya as Polygon,Wa as Pool,Ka as PoolGroupClass,mo as PrepareBase,xo as PrepareQueue,Eo as PrepareSystem,So as PrepareUpload,j2 as QuadGeometry,$a as RAD_TO_DEG,Or as Rectangle,Gs as RenderContainer,ja as RenderGroup,zd as RenderGroupPipe,Yd as RenderGroupSystem,Xs as RenderLayer,To as RenderLayerClass,Wd as RenderTarget,Kd as RenderTargetSystem,$d as RenderTexture,jd as RenderableGCSystem,Qa as RendererInitHook,Ur as RendererType,Q2 as ResizePlugin,_n as Resolver,Io as RopeGeometry,Za as RoundedRectangle,ws as SCALE_MODES,Ja as STENCIL_MODES,ei as SVGParser,su as SaturationBlend,Qd as SchedulerSystem,Es as ScissorMask,Z2 as SdfShader,ti as Shader,ri as ShaderStage,ni as ShapePath,Zd as SharedRenderPipes,Jd as SharedSystems,au as SoftLightBlend,zt as Sprite,ef as SpritePipe,ui as Spritesheet,Ln as State,oi as StencilMask,tf as StencilMaskPipe,iu as SubtractBlend,si as SystemRunner,gu as TEXTURE_FORMAT_BLOCK_SIZE,rn as Text,pt as TextStyle,ce as Texture,rf as TextureGCSystem,ai as TextureMatrix,dt as TexturePool,ii as TexturePoolClass,qt as TextureSource,li as TextureStyle,Ps as TextureUvs,ar as Ticker,ci as TickerListener,J2 as TickerPlugin,go as TilingSprite,ed as TilingSpritePipe,td as TilingSpriteShader,bo as Transform,Zr as Triangle,n0 as UNIFORM_TO_ARRAY_SETTERS,u0 as UNIFORM_TO_SINGLE_SETTERS,di as UNIFORM_TYPES_MAP,fi as UNIFORM_TYPES_VALUES,pi as UPDATE_BLEND,hi as UPDATE_COLOR,ir as UPDATE_PRIORITY,mi as UPDATE_TRANSFORM,bi as UPDATE_VISIBLE,rp as UboBatch,nf as UboSystem,$e as UniformGroup,gi as VERSION,xi as VideoSource,we as ViewContainer,uf as ViewSystem,_i as ViewableBuffer,lu as VividLightBlend,np as WGSL_ALIGN_SIZE_DATA,o0 as WGSL_TO_STD40_SIZE,Rs as WRAP_MODES,s0 as WebGLRenderer,up as WebGPURenderer,ps as WebWorkerAdapter,vi as WorkerManager,Si as _getGlobalBounds,B2 as accessibilityTarget,Ei as addBits,Dn as addMaskBounds,Bn as addMaskLocalBounds,yi as addProgramDefines,to as alphaFrag,Er as alphaWgsl,rd as applyMatrix,Ro as applyProjectiveTransformationToPlane,a0 as applyStyleParams,cr as assignWithIgnore,Ai as autoDetectEnvironment,Ci as autoDetectRenderer,Di as autoDetectSource,Ot as basisTranscoderUrls,Mn as bgr2rgb,Bi as bitmapFontCachePlugin,Ti as bitmapFontTextParser,Ri as bitmapFontXMLParser,wi as bitmapFontXMLStringParser,kn as blendTemplateFrag,Xn as blendTemplateVert,Hn as blendTemplateWgsl,op as blockDataMap,ao as blurTemplateWgsl,Pi as boundsPool,Ui as browserExt,Fi as buildAdaptiveBezier,Oi as buildAdaptiveQuadratic,Gi as buildArc,Mi as buildArcTo,Ii as buildArcToSvg,Tt as buildCircle,Li as buildContextBatches,Ni as buildEllipse,ks as buildGeometryFromPath,ki as buildLine,Xi as buildPixelLine,Fn as buildPolygon,Un as buildRectangle,Hi as buildRoundedRectangle,Pn as buildSimpleUvs,On as buildTriangle,wn as buildUvs,Vi as cacheAsTextureMixin,qi as cacheTextureArray,of as calculateProjection,zi as checkChildrenDidChange,Yi as checkDataUrl,je as checkExtension,Wi as checkMaxIfStatementsInShader,Ki as childrenHelperMixin,sf as cleanArray,af as cleanHash,lf as clearList,$i as closePointEps,Ms as collectAllRenderables,ji as collectRenderablesMixin,mp as color32BitToUniform,Qi as colorBit,Zi as colorBitGl,co as colorMatrixFilterFrag,yr as colorMatrixFilterWgsl,bp as colorToUniform,i0 as compareModeToGlCompare,Ji as compileHighShader,el as compileHighShaderGl,tl as compileHighShaderGlProgram,rl as compileHighShaderGpuProgram,nl as compileHooks,ul as compileInputs,ol as compileOutputs,l0 as compileShader,Go as compute2DProjection,os as convertFormatIfRequired,sl as convertToList,al as copySearchParams,il as createIdFromString,nd as createIndicesForQuads,Jo as createLevelBuffers,ss as createLevelBuffersFromKTX,ll as createStringVariations,mt as createTexture,c0 as createUboElementsSTD40,sp as createUboElementsWGSL,cf as createUboSyncFunction,d0 as createUboSyncFunctionSTD40,ap as createUboSyncFunctionWGSL,cl as crossOrigin,dl as cullingMixin,fl as curveEps,$t as defaultFilterVert,f0 as defaultValue,Ee as definedProps,$ as deprecation,pl as detectAvif,$o as detectBasis,cs as detectCompressed,hl as detectDefaults,ml as detectMp4,bl as detectOgv,gl as detectVideoAlphaMode,xl as detectWebm,_l as detectWebp,vl as determineCrossOrigin,fo as displacementFrag,po as displacementVert,Ar as displacementWgsl,Sl as earcut,El as effectsMixin,df as ensureAttributes,yl as ensureIsBuffer,Al as ensurePrecision,Qt as ensureTextOptions,js as ensureTextStyle,ff as executeInstructions,Cl as extensions,p0 as extractAttributesFromGlProgram,Dl as extractAttributesFromGpuProgram,ud as extractFontFamilies,Bl as extractStructAndGroups,Tl as extractSvgUrlId,Rl as fastCopy,wl as findHooksRx,Pl as findMixin,Ul as fontStringFromTextStyle,Ss as formatShader,Fl as fragmentGPUTemplate,Ol as fragmentGlTemplate,h0 as generateArraySyncSTD40,ip as generateArraySyncWGSL,no as generateBlurFragSource,so as generateBlurGlProgram,io as generateBlurProgram,oo as generateBlurVertSource,_s as generateGPULayout,Gl as generateGpuLayoutGroups,vs as generateLayout,Ml as generateLayoutHash,od as generateParticleUpdateFunction,m0 as generateProgram,b0 as generateShaderSyncCode,Il as generateTextStyleKey,Ll as generateTextureBatchBit,Nl as generateTextureBatchBitGl,kl as generateTextureMatrix,Us as generateUID,g0 as generateUniformsSync,Xl as getAdjustedBlendModeBlend,Hl as getAttributeInfoFromFormat,Vl as getBatchSamplersUniformGroup,ql as getBitmapTextLayout,sd as getCanvasBoundingBox,zl as getCanvasFillStyle,pf as getCanvasTexture,Yl as getDefaultUniformValue,Os as getFastGlobalBounds,Wl as getFastGlobalBoundsMixin,ad as getFontCss,Kl as getFontFamilyName,$l as getGeometryBounds,x0 as getGlTypeFromFormat,vn as getGlobalBounds,jl as getGlobalMixin,id as getGlobalRenderableBounds,Ql as getLocalBounds,Zl as getMatrixRelativeToParent,Jl as getMaxFragmentPrecision,ec as getMaxTexturesPerBatch,tc as getOrientationOfPoints,rc as getParent,ld as getPo2TextureFromSource,nc as getResolutionOfUrl,cd as getSVGUrl,Ir as getSupportedCompressedTextureFormats,pr as getSupportedGPUCompressedTextureFormats,fr as getSupportedGlCompressedTextureFormats,xt as getSupportedTextureFormats,dd as getTemporaryCanvasFromImage,uc as getTestContext,oc as getTextureBatchBindGroup,Ys as getTextureDefaultMatrix,as as getTextureFormatFromKTXTexture,_0 as getUboData,v0 as getUniformData,sc as getUrlExtension,Hu as glFormatToGPUFormat,S0 as glUploadBufferImageResource,E0 as glUploadCompressedTextureResource,y0 as glUploadImageResource,A0 as glUploadVideoResource,ac as globalUniformsBit,ic as globalUniformsBitGl,lc as globalUniformsUBOBitGl,es as gpuFormatToBasisTranscoderFormat,is as gpuFormatToKTXBasisTranscoderFormat,lp as gpuUploadBufferImageResource,cp as gpuUploadCompressedTextureResource,dp as gpuUploadImageResource,fp as gpuUploadVideoResource,ae as groupD8,hf as hasCachedCanvasTexture,xs as hslWgsl,Wt as hslgl,Kt as hslgpu,cc as injectBits,dc as insertVersion,T2 as isMobile,fc as isPow2,mf as isRenderingToScreen,fd as isSafari,pc as isSingleItem,Vt as isWebGLSupported,Ht as isWebGPUSupported,Gt as ktxTranscoderUrls,Zo as loadBasis,pu as loadBasisOnWorker,hc as loadBitmapFont,ts as loadDDS,mc as loadEnvironmentExtensions,pd as loadFontAsBase64,hd as loadFontCSS,bc as loadImageBitmap,gc as loadJson,rs as loadKTX,us as loadKTX2,ku as loadKTX2onWorker,md as loadSVGImage,xc as loadSvg,_c as loadTextures,vc as loadTxt,Sc as loadVideoTextures,Ec as loadWebFont,gp as localUniformBit,xp as localUniformBitGl,_p as localUniformBitGroup2,bd as localUniformMSDFBit,gd as localUniformMSDFBitGl,yc as log2,Qs as logDebugTexture,C0 as logProgramError,Vo as logRenderGroupScene,Ho as logScene,xd as mSDFBit,_d as mSDFBitGl,D0 as mapFormatToGlFormat,B0 as mapFormatToGlInternalFormat,T0 as mapFormatToGlType,R0 as mapGlToVertexFormat,As as mapSize,w0 as mapType,P0 as mapWebGLBlendModesToPixi,bf as maskFrag,gf as maskVert,xf as maskWgsl,Ac as matrixPool,In as measureHtmlText,Cc as measureMixin,ys as migrateFragmentFromV7toV8,U0 as mipmapScaleModeToGlFilter,Is as mixHexColors,Dc as multiplyColors,Bc as multiplyHexColors,Tc as nextPow2,ho as noiseFrag,Cr as noiseWgsl,cu as nonCompressedFormats,Rc as normalizeExtensionPriority,vd as nssvg,Sd as nsxhtml,wc as onRenderMixin,Pc as parseAttribute,xu as parseDDS,Fs as parseFunctionBody,Fu as parseKTX,Uc as parseSVGDefinitions,Fc as parseSVGFloatAttribute,Oc as parseSVGPath,Gc as parseSVGStyle,Rr as particleData,Ed as particlesFrag,yd as particlesVert,Ad as particlesWgsl,Mc as path,Zs as pixijsUrl,Dr as pointInTriangle,Ic as preloadVideo,Lc as removeItems,Nc as removeStructAndGroupDuplicates,kc as resetUids,Xc as resolveCharacters,ls as resolveCompressedTextureUrl,Hc as resolveJsonUrl,Vc as resolveTextureUrl,qc as resourceToTexture,zc as roundPixelsBit,Yc as roundPixelsBitGl,Wc as roundedShapeArc,Kc as roundedShapeQuadraticCurve,_f as sayHello,F0 as scaleModeToGlFilter,Qo as setBasisTranscoderPath,ns as setKTXTranscoderPath,Cd as setPositions,$c as setProgramName,Dd as setUvs,jc as shapeBuilders,Qc as sortMixin,Zc as spritesheetAsset,Bt as squaredDistanceToLineSegment,Jc as stripVersion,e2 as styleAttributes,t2 as testImageFormat,r2 as testVideoFormat,Bd as textStyleToCSS,vf as textureBit,Sf as textureBitGl,n2 as textureFrom,Td as tilingBit,Rd as tilingBitGl,u2 as toFillStyle,o2 as toLocalGlobalMixin,s2 as toStrokeStyle,Rn as transformVertices,a2 as triangulateWithHoles,Ef as uboSyncFunctionsSTD40,yf as uboSyncFunctionsWGSL,i2 as uid,Af as uniformParsers,Cs as unpremultiplyAlpha,l2 as unsafeEvalSupported,Ls as updateLocalTransform,c2 as updateQuadBounds,Cf as updateRenderGroupTransform,Df as updateRenderGroupTransforms,wd as updateTextBounds,Bf as updateTransformAndChildren,d2 as updateTransformBackwards,Ns as updateWorldTransform,pe as v8_0_0,f2 as v8_3_4,Mt as validFormats,Tf as validateRenderables,p2 as vertexGPUTemplate,h2 as vertexGlTemplate,Ts as viewportFromFrame,qu as vkFormatToGPUFormat,ft as warn,m2 as webworkerExt,O0 as wrapModeToGlAddress};
