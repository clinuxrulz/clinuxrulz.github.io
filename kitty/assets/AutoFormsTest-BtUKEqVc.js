import{d as F,i as m,saveToJsonViaTypeSchema as _,t as l,r as D,registry as b,EcsRegistry as x,makeDefaultViaTypeSchema as w}from"./lib-TvbQ-nBE.js";import{l as u,S as f,F as S,m as $,N as T,M as y,s,c as k,Y as g,h as V,q as j}from"./dev-B9-ass9r.js";import{a as d}from"./dev-CC7pdsS5.js";import"./index-XNH-lkY3.js";var A=l("<table><thead></thead><tbody>"),N=l("<input type=checkbox class=input>"),v=l("<input type=text class=input>"),O=l("<tr><td></td><td>");const C=e=>u(f,{get when(){return e.formData.typeSchema.type=="Object"?e.formData.typeSchema:void 0},keyed:!0,children:i=>(()=>{var r=A(),o=r.firstChild,t=o.nextSibling;return m(t,u(h,{prefix:void 0,get formData(){return e.formData}})),r})()}),h=e=>u(f,{get when(){return e.formData.typeSchema.type=="Object"?e.formData.typeSchema:void 0},keyed:!0,children:i=>u(S,{get each(){return Object.entries(i.properties)},children:([r,o])=>{if(o.type=="Invarant"&&o.inner.type=="Object"){let[t,n]=d(o.toFn(e.formData.state[r]));return $(T(()=>_(o.inner,t),a=>{e.formData.setState(r,o.fromFn(a))},{defer:!0})),u(h,{prefix:r,get formData(){return{typeSchema:o.inner,state:t,setState:n}}})}else if(o.type=="Object"){let[t,n]=d(e.formData.state[r]);return u(h,{prefix:r,get formData(){return{typeSchema:o,state:e.formData.state[r],setState:n}}})}return u(E,{get formField(){return{fieldName:e.prefix==null?r:`${e.prefix}.${r}`,typeSchema:o,value:()=>e.formData.state[r],setValue:t=>e.formData.setState(r,t)}}})}})}),E=e=>(()=>{var i=O(),r=i.firstChild,o=r.nextSibling;return m(r,()=>e.formField.fieldName),m(o,u(V,{get children(){return[u(y,{get when(){return e.formField.typeSchema.type=="Boolean"},get children(){var t=N();return t.addEventListener("change",n=>{e.formField.setValue(n.currentTarget.checked)}),s(()=>t.checked=e.formField.value()),t}}),u(y,{get when(){return e.formField.typeSchema.type=="Number"},get children(){return(()=>{let[t,n]=k(g(()=>e.formField.value()).toString());return $(()=>{let a=Number.parseFloat(t());Number.isNaN(a)||e.formField.setValue(a)}),g(()=>(()=>{var a=v();return a.$$input=c=>{n(c.currentTarget.value)},s(()=>a.value=t()),a})())})()}}),u(y,{get when(){return e.formField.typeSchema.type=="String"},get children(){var t=v();return t.$$input=n=>{e.formField.setValue(n.currentTarget.value)},s(()=>t.value=e.formField.value()),t}})]}})),i})();F(["input"]);var M=l("<div><select></select><br>"),L=l("<option>");let R=new Set([...D.componentTypes,...b.componentTypes]);const p=new x(Array.from(R)),Y=e=>{let[i,r]=d({componentTypeName:"Animated"}),o=j(()=>{if(i.componentTypeName==null)return;let t=p.componentTypeMap.get(i.componentTypeName);if(t==null)return;let[n,a]=d(w(t.typeSchema));return{typeSchema:t.typeSchema,state:n,setState:a}});return(()=>{var t=M(),n=t.firstChild;return n.nextSibling,n.addEventListener("change",a=>{r("componentTypeName",a.currentTarget.value)}),m(n,u(S,{get each(){return p.componentTypes},children:a=>(()=>{var c=L();return m(c,()=>a.typeName),s(()=>c.value=a.typeName),c})()})),m(t,u(f,{get when(){return o()},keyed:!0,children:a=>u(C,{formData:a})}),null),s(()=>n.value=i.componentTypeName),t})()};export{Y as default};
