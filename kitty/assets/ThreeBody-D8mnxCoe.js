import{Vec2 as c,i as P,t as p,u as S,s as m}from"./lib-oUuyS5Hd.js";import{q as g,l as j,s as v,b as $,S as F,F as _}from"./dev-B9-ass9r.js";import{a as w}from"./dev-CC7pdsS5.js";import"./index-XNH-lkY3.js";var T=p("<svg style=width:100%;height:100%;background-color:white;><g>"),k=p("<svg><circle r=20 stroke=black stroke-width=2 fill=none></svg>",!1,!0),x=p("<svg><path stroke=red fill=none stroke-dasharray=1,2></svg>",!1,!0);const z=60,O=1/z;function A(l){return l.dt>1?{dtOffset:0}:$(()=>{let i=l.dtOffset+l.dt;for(;i>0;)l.updateFn(),i-=O;return{dtOffset:i}})}const I=()=>{let[l,i]=w({objects:[{pos:c.create(200,0),vel:c.create(0,-2),acc:c.zero,lastPositions:[]},{pos:c.create(-200,0),vel:c.create(0,2),acc:c.zero,lastPositions:[]},{pos:c.create(0,150),vel:c.create(2,0),acc:c.zero,lastPositions:[]}]}),y=()=>{let s=c.zero;for(let e=0;e<l.objects.length;++e){let t=l.objects[e],o=c.zero;for(let a=0;a<l.objects.length;++a){if(a==e)continue;s=l.objects[a].pos.sub(t.pos);let r=s.length();s=s.multScalar(1e3/(r*r*r)),o=o.add(s)}i("objects",e,"acc",o)}for(let e=0;e<l.objects.length;++e){let t=l.objects[e];s=t.acc.multScalar(.5);let o=t.pos;i("objects",e,"pos",t.pos.add(t.vel).add(s)),i("objects",e,"lastPositions",[o,...t.lastPositions].slice(0,200)),o=t.vel,i("objects",e,"vel",t.vel.add(t.acc))}};{let s=!0,e=0,t=0,o=a=>{if(s){t=a/1e3,s=!1,requestAnimationFrame(o);return}let n=a/1e3,r=n-t;t=n,$(()=>{let{dtOffset:d}=A({dtOffset:e,dt:r,updateFn:y});e=d}),requestAnimationFrame(o)};requestAnimationFrame(o)}let u,b=g(s=>{let e=c.zero;for(let t of l.objects)e=e.add(t.pos);if(e=e.multScalar(1/l.objects.length),u!=null){let t=u.getBoundingClientRect();e=e.sub(c.create(.5*t.width,.5*t.height))}return e}),f=1;return(()=>{var s=T(),e=s.firstChild,t=u;return typeof t=="function"?S(t,s):u=s,P(e,j(_,{get each(){return l.objects},children:o=>[j(F,{get when(){return o.lastPositions.length>1?o.lastPositions:void 0},children:a=>{let n=g(()=>{let r=a(),d=`M ${r[0].x*f} ${r[0].y*f}`;for(let h=1;h<r.length;++h)d+=` L ${r[h].x*f} ${r[h].y*f}`;return d});return(()=>{var r=x();return v(()=>m(r,"d",n())),r})()}}),(()=>{var a=k();return v(n=>{var r=o.pos.x*f,d=o.pos.y*f;return r!==n.e&&m(a,"cx",n.e=r),d!==n.t&&m(a,"cy",n.t=d),n},{e:void 0,t:void 0}),a})()]})),v(()=>m(e,"transform",`translate(${-b().x}, ${-b().y})`)),s})()};export{I as default};
