import{d as La,N as Rt,i as ii,t as Ie,s as mi,u as bi}from"./lib-DwGRVPg1.js";import{l as q,q as At,F as Ba,p as br,N as yr,m as xr,J as Er,O as kr,S as Ee,t as yi,s as xi,M as nt,h as Ei,Y as Sr,c as ki,Q as Si}from"./dev-B9-ass9r.js";import{a as dn,p as st}from"./dev-CC7pdsS5.js";import{_ as Rr}from"./index-XNH-lkY3.js";import{$ as On}from"./index-DFXe3S5v.js";var je={},Ri={},Pn;function Ma(){return Pn||(Pn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.QRMath=e.QRUtil=e.QRMaskPattern=e.QRErrorCorrectLevel=e.QRCodeModel=void 0;function i(o,s,c){var _=n(s),d=o-1,v=0;switch(c){case e.QRErrorCorrectLevel.L:v=u[d][0];break;case e.QRErrorCorrectLevel.M:v=u[d][1];break;case e.QRErrorCorrectLevel.Q:v=u[d][2];break;case e.QRErrorCorrectLevel.H:v=u[d][3];break}return _<=v}function t(o,s){for(var c=1,_=n(o),d=0,v=u.length;d<v;d++){var y=0;switch(s){case e.QRErrorCorrectLevel.L:y=u[d][0];break;case e.QRErrorCorrectLevel.M:y=u[d][1];break;case e.QRErrorCorrectLevel.Q:y=u[d][2];break;case e.QRErrorCorrectLevel.H:y=u[d][3];break}if(_<=y)break;c++}if(c>u.length)throw new Error("Too long data");return c}function n(o){var s=encodeURI(o).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return s.length+(s.length!=Number(o)?3:0)}var r=function(){function o(s){this.mode=l.MODE_8BIT_BYTE,this.parsedData=[],this.data=s;for(var c=[],_=0,d=this.data.length;_<d;_++){var v=[],y=this.data.charCodeAt(_);y>65536?(v[0]=240|(y&1835008)>>>18,v[1]=128|(y&258048)>>>12,v[2]=128|(y&4032)>>>6,v[3]=128|y&63):y>2048?(v[0]=224|(y&61440)>>>12,v[1]=128|(y&4032)>>>6,v[2]=128|y&63):y>128?(v[0]=192|(y&1984)>>>6,v[1]=128|y&63):v[0]=y,c.push(v)}this.parsedData=Array.prototype.concat.apply([],c),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}return o.prototype.getLength=function(){return this.parsedData.length},o.prototype.write=function(s){for(var c=0,_=this.parsedData.length;c<_;c++)s.put(this.parsedData[c],8)},o}(),a=function(){function o(s,c){s===void 0&&(s=-1),c===void 0&&(c=e.QRErrorCorrectLevel.L),this.moduleCount=0,this.dataList=[],this.typeNumber=s,this.errorCorrectLevel=c,this.moduleCount=0,this.dataList=[]}return o.prototype.addData=function(s){if(this.typeNumber<=0)this.typeNumber=t(s,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error("Invalid QR version: "+this.typeNumber);if(!i(this.typeNumber,s,this.errorCorrectLevel))throw new Error("Data is too long for QR version: "+this.typeNumber)}var c=new r(s);this.dataList.push(c),this.dataCache=void 0},o.prototype.isDark=function(s,c){if(s<0||this.moduleCount<=s||c<0||this.moduleCount<=c)throw new Error(s+","+c);return this.modules[s][c]},o.prototype.getModuleCount=function(){return this.moduleCount},o.prototype.make=function(){this.makeImpl(!1,this.getBestMaskPattern())},o.prototype.makeImpl=function(s,c){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var _=0;_<this.moduleCount;_++){this.modules[_]=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++)this.modules[_][d]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(s,c),this.typeNumber>=7&&this.setupTypeNumber(s),this.dataCache==null&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,c)},o.prototype.setupPositionProbePattern=function(s,c){for(var _=-1;_<=7;_++)if(!(s+_<=-1||this.moduleCount<=s+_))for(var d=-1;d<=7;d++)c+d<=-1||this.moduleCount<=c+d||(0<=_&&_<=6&&(d==0||d==6)||0<=d&&d<=6&&(_==0||_==6)||2<=_&&_<=4&&2<=d&&d<=4?this.modules[s+_][c+d]=!0:this.modules[s+_][c+d]=!1)},o.prototype.getBestMaskPattern=function(){if(Number.isInteger(this.maskPattern)&&Object.values(e.QRMaskPattern).includes(this.maskPattern))return this.maskPattern;for(var s=0,c=0,_=0;_<8;_++){this.makeImpl(!0,_);var d=h.getLostPoint(this);(_==0||s>d)&&(s=d,c=_)}return c},o.prototype.setupTimingPattern=function(){for(var s=8;s<this.moduleCount-8;s++)this.modules[s][6]==null&&(this.modules[s][6]=s%2==0);for(var c=8;c<this.moduleCount-8;c++)this.modules[6][c]==null&&(this.modules[6][c]=c%2==0)},o.prototype.setupPositionAdjustPattern=function(){for(var s=h.getPatternPosition(this.typeNumber),c=0;c<s.length;c++)for(var _=0;_<s.length;_++){var d=s[c],v=s[_];if(this.modules[d][v]==null)for(var y=-2;y<=2;y++)for(var w=-2;w<=2;w++)y==-2||y==2||w==-2||w==2||y==0&&w==0?this.modules[d+y][v+w]=!0:this.modules[d+y][v+w]=!1}},o.prototype.setupTypeNumber=function(s){for(var c=h.getBCHTypeNumber(this.typeNumber),_=0;_<18;_++){var d=!s&&(c>>_&1)==1;this.modules[Math.floor(_/3)][_%3+this.moduleCount-8-3]=d}for(var _=0;_<18;_++){var d=!s&&(c>>_&1)==1;this.modules[_%3+this.moduleCount-8-3][Math.floor(_/3)]=d}},o.prototype.setupTypeInfo=function(s,c){for(var _=this.errorCorrectLevel<<3|c,d=h.getBCHTypeInfo(_),v=0;v<15;v++){var y=!s&&(d>>v&1)==1;v<6?this.modules[v][8]=y:v<8?this.modules[v+1][8]=y:this.modules[this.moduleCount-15+v][8]=y}for(var v=0;v<15;v++){var y=!s&&(d>>v&1)==1;v<8?this.modules[8][this.moduleCount-v-1]=y:v<9?this.modules[8][15-v-1+1]=y:this.modules[8][15-v-1]=y}this.modules[this.moduleCount-8][8]=!s},o.prototype.mapData=function(s,c){for(var _=-1,d=this.moduleCount-1,v=7,y=0,w=this.moduleCount-1;w>0;w-=2)for(w==6&&w--;;){for(var x=0;x<2;x++)if(this.modules[d][w-x]==null){var C=!1;y<s.length&&(C=(s[y]>>>v&1)==1);var b=h.getMask(c,d,w-x);b&&(C=!C),this.modules[d][w-x]=C,v--,v==-1&&(y++,v=7)}if(d+=_,d<0||this.moduleCount<=d){d-=_,_=-_;break}}},o.createData=function(s,c,_){for(var d=g.getRSBlocks(s,c),v=new p,y=0;y<_.length;y++){var w=_[y];v.put(w.mode,4),v.put(w.getLength(),h.getLengthInBits(w.mode,s)),w.write(v)}for(var x=0,y=0;y<d.length;y++)x+=d[y].dataCount;if(v.getLengthInBits()>x*8)throw new Error("code length overflow. ("+v.getLengthInBits()+">"+x*8+")");for(v.getLengthInBits()+4<=x*8&&v.put(0,4);v.getLengthInBits()%8!=0;)v.putBit(!1);for(;!(v.getLengthInBits()>=x*8||(v.put(o.PAD0,8),v.getLengthInBits()>=x*8));)v.put(o.PAD1,8);return o.createBytes(v,d)},o.createBytes=function(s,c){for(var _=0,d=0,v=0,y=new Array(c.length),w=new Array(c.length),x=0;x<c.length;x++){var C=c[x].dataCount,b=c[x].totalCount-C;d=Math.max(d,C),v=Math.max(v,b),y[x]=new Array(C);for(var E=0;E<y[x].length;E++)y[x][E]=255&s.buffer[E+_];_+=C;var S=h.getErrorCorrectPolynomial(b),k=new f(y[x],S.getLength()-1),A=k.mod(S);w[x]=new Array(S.getLength()-1);for(var E=0;E<w[x].length;E++){var N=E+A.getLength()-w[x].length;w[x][E]=N>=0?A.get(N):0}}for(var B=0,E=0;E<c.length;E++)B+=c[E].totalCount;for(var M=new Array(B),D=0,E=0;E<d;E++)for(var x=0;x<c.length;x++)E<y[x].length&&(M[D++]=y[x][E]);for(var E=0;E<v;E++)for(var x=0;x<c.length;x++)E<w[x].length&&(M[D++]=w[x][E]);return M},o.PAD0=236,o.PAD1=17,o}();e.QRCodeModel=a,e.QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var l={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8};e.QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var h=function(){function o(){}return o.getBCHTypeInfo=function(s){for(var c=s<<10;o.getBCHDigit(c)-o.getBCHDigit(o.G15)>=0;)c^=o.G15<<o.getBCHDigit(c)-o.getBCHDigit(o.G15);return(s<<10|c)^o.G15_MASK},o.getBCHTypeNumber=function(s){for(var c=s<<12;o.getBCHDigit(c)-o.getBCHDigit(o.G18)>=0;)c^=o.G18<<o.getBCHDigit(c)-o.getBCHDigit(o.G18);return s<<12|c},o.getBCHDigit=function(s){for(var c=0;s!=0;)c++,s>>>=1;return c},o.getPatternPosition=function(s){return o.PATTERN_POSITION_TABLE[s-1]},o.getMask=function(s,c,_){switch(s){case e.QRMaskPattern.PATTERN000:return(c+_)%2==0;case e.QRMaskPattern.PATTERN001:return c%2==0;case e.QRMaskPattern.PATTERN010:return _%3==0;case e.QRMaskPattern.PATTERN011:return(c+_)%3==0;case e.QRMaskPattern.PATTERN100:return(Math.floor(c/2)+Math.floor(_/3))%2==0;case e.QRMaskPattern.PATTERN101:return c*_%2+c*_%3==0;case e.QRMaskPattern.PATTERN110:return(c*_%2+c*_%3)%2==0;case e.QRMaskPattern.PATTERN111:return(c*_%3+(c+_)%2)%2==0;default:throw new Error("bad maskPattern:"+s)}},o.getErrorCorrectPolynomial=function(s){for(var c=new f([1],0),_=0;_<s;_++)c=c.multiply(new f([1,m.gexp(_)],0));return c},o.getLengthInBits=function(s,c){if(1<=c&&c<10)switch(s){case l.MODE_NUMBER:return 10;case l.MODE_ALPHA_NUM:return 9;case l.MODE_8BIT_BYTE:return 8;case l.MODE_KANJI:return 8;default:throw new Error("mode:"+s)}else if(c<27)switch(s){case l.MODE_NUMBER:return 12;case l.MODE_ALPHA_NUM:return 11;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 10;default:throw new Error("mode:"+s)}else if(c<41)switch(s){case l.MODE_NUMBER:return 14;case l.MODE_ALPHA_NUM:return 13;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 12;default:throw new Error("mode:"+s)}else throw new Error("type:"+c)},o.getLostPoint=function(s){for(var c=s.getModuleCount(),_=0,d=0;d<c;d++)for(var v=0;v<c;v++){for(var y=0,w=s.isDark(d,v),x=-1;x<=1;x++)if(!(d+x<0||c<=d+x))for(var C=-1;C<=1;C++)v+C<0||c<=v+C||x==0&&C==0||w==s.isDark(d+x,v+C)&&y++;y>5&&(_+=3+y-5)}for(var d=0;d<c-1;d++)for(var v=0;v<c-1;v++){var b=0;s.isDark(d,v)&&b++,s.isDark(d+1,v)&&b++,s.isDark(d,v+1)&&b++,s.isDark(d+1,v+1)&&b++,(b==0||b==4)&&(_+=3)}for(var d=0;d<c;d++)for(var v=0;v<c-6;v++)s.isDark(d,v)&&!s.isDark(d,v+1)&&s.isDark(d,v+2)&&s.isDark(d,v+3)&&s.isDark(d,v+4)&&!s.isDark(d,v+5)&&s.isDark(d,v+6)&&(_+=40);for(var v=0;v<c;v++)for(var d=0;d<c-6;d++)s.isDark(d,v)&&!s.isDark(d+1,v)&&s.isDark(d+2,v)&&s.isDark(d+3,v)&&s.isDark(d+4,v)&&!s.isDark(d+5,v)&&s.isDark(d+6,v)&&(_+=40);for(var E=0,v=0;v<c;v++)for(var d=0;d<c;d++)s.isDark(d,v)&&E++;var S=Math.abs(100*E/c/c-50)/5;return _+=S*10,_},o.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],o.G15=1335,o.G18=7973,o.G15_MASK=21522,o}();e.QRUtil=h;var m=function(){function o(){}return o.glog=function(s){if(s<1)throw new Error("glog("+s+")");return o.LOG_TABLE[s]},o.gexp=function(s){for(;s<0;)s+=255;for(;s>=256;)s-=255;return o.EXP_TABLE[s]},o.EXP_TABLE=new Array(256),o.LOG_TABLE=new Array(256),o._constructor=function(){for(var s=0;s<8;s++)o.EXP_TABLE[s]=1<<s;for(var s=8;s<256;s++)o.EXP_TABLE[s]=o.EXP_TABLE[s-4]^o.EXP_TABLE[s-5]^o.EXP_TABLE[s-6]^o.EXP_TABLE[s-8];for(var s=0;s<255;s++)o.LOG_TABLE[o.EXP_TABLE[s]]=s}(),o}();e.QRMath=m;var f=function(){function o(s,c){if(s.length==null)throw new Error(s.length+"/"+c);for(var _=0;_<s.length&&s[_]==0;)_++;this.num=new Array(s.length-_+c);for(var d=0;d<s.length-_;d++)this.num[d]=s[d+_]}return o.prototype.get=function(s){return this.num[s]},o.prototype.getLength=function(){return this.num.length},o.prototype.multiply=function(s){for(var c=new Array(this.getLength()+s.getLength()-1),_=0;_<this.getLength();_++)for(var d=0;d<s.getLength();d++)c[_+d]^=m.gexp(m.glog(this.get(_))+m.glog(s.get(d)));return new o(c,0)},o.prototype.mod=function(s){if(this.getLength()-s.getLength()<0)return this;for(var c=m.glog(this.get(0))-m.glog(s.get(0)),_=new Array(this.getLength()),d=0;d<this.getLength();d++)_[d]=this.get(d);for(var d=0;d<s.getLength();d++)_[d]^=m.gexp(m.glog(s.get(d))+c);return new o(_,0).mod(s)},o}(),g=function(){function o(s,c){this.totalCount=s,this.dataCount=c}return o.getRSBlocks=function(s,c){var _=o.getRsBlockTable(s,c);if(_==null)throw new Error("bad rs block @ typeNumber:"+s+"/errorCorrectLevel:"+c);for(var d=_.length/3,v=[],y=0;y<d;y++)for(var w=_[y*3+0],x=_[y*3+1],C=_[y*3+2],b=0;b<w;b++)v.push(new o(x,C));return v},o.getRsBlockTable=function(s,c){switch(c){case e.QRErrorCorrectLevel.L:return o.RS_BLOCK_TABLE[(s-1)*4+0];case e.QRErrorCorrectLevel.M:return o.RS_BLOCK_TABLE[(s-1)*4+1];case e.QRErrorCorrectLevel.Q:return o.RS_BLOCK_TABLE[(s-1)*4+2];case e.QRErrorCorrectLevel.H:return o.RS_BLOCK_TABLE[(s-1)*4+3];default:return}},o.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],o}(),p=function(){function o(){this.buffer=[],this.length=0}return o.prototype.get=function(s){var c=Math.floor(s/8);return(this.buffer[c]>>>7-s%8&1)==1},o.prototype.put=function(s,c){for(var _=0;_<c;_++)this.putBit((s>>>c-_-1&1)==1)},o.prototype.getLengthInBits=function(){return this.length},o.prototype.putBit=function(s){var c=Math.floor(this.length/8);this.buffer.length<=c&&this.buffer.push(0),s&&(this.buffer[c]|=128>>>this.length%8),this.length++},o}(),u=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]]}(Ri)),Ri}var ge={},at={},Ai,Ln;function Ar(){if(Ln)return Ai;Ln=1;const e="bold|bolder|lighter|[1-9]00",i="italic|oblique",t="small-caps",n="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",r="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",a=`'([^']+)'|"([^"]+)"|[\\w\\s-]+`,l=new RegExp(`(${e}) +`,"i"),h=new RegExp(`(${i}) +`,"i"),m=new RegExp(`(${t}) +`,"i"),f=new RegExp(`(${n}) +`,"i"),g=new RegExp(`([\\d\\.]+)(${r}) *((?:${a})( *, *(?:${a}))*)`),p={},u=16;return Ai=o=>{if(p[o])return p[o];const s=g.exec(o);if(!s)return;const c={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(s[1]),unit:s[2],family:s[3].replace(/["']/g,"").replace(/ *, */g,",")};let _,d,v,y;const w=o.substring(0,s.index);switch((_=l.exec(w))&&(c.weight=_[1]),(d=h.exec(w))&&(c.style=d[1]),(v=m.exec(w))&&(c.variant=v[1]),(y=f.exec(w))&&(c.stretch=y[1]),c.unit){case"pt":c.size/=.75;break;case"pc":c.size*=16;break;case"in":c.size*=96;break;case"cm":c.size*=96/2.54;break;case"mm":c.size*=96/25.4;break;case"%":break;case"em":case"rem":c.size*=u/.75;break;case"q":c.size*=96/25.4/4;break}return p[o]=c},Ai}var Bn;function Cr(){if(Bn)return at;Bn=1;const e=Ar();return at.parseFont=e,at.createCanvas=function(i,t){return Object.assign(document.createElement("canvas"),{width:i,height:t})},at.createImageData=function(i,t,n){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(i);case 2:return new ImageData(i,t);default:return new ImageData(i,t,n)}},at.loadImage=function(i,t){return new Promise(function(n,r){const a=Object.assign(document.createElement("img"),t);function l(){a.onload=null,a.onerror=null}a.onload=function(){l(),n(a)},a.onerror=function(){l(),r(new Error('Failed to load the image "'+i+'"'))},a.src=i})},at}var xt={},Ci={},Le={},Mn;function $a(){if(Mn)return Le;Mn=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.loop=Le.conditional=Le.parse=void 0;var e=function n(r,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:l;if(Array.isArray(a))a.forEach(function(f){return n(r,f,l,h)});else if(typeof a=="function")a(r,l,h,n);else{var m=Object.keys(a)[0];Array.isArray(a[m])?(h[m]={},n(r,a[m],l,h[m])):h[m]=a[m](r,l,h,n)}return l};Le.parse=e;var i=function(r,a){return function(l,h,m,f){a(l,h,m)&&f(l,r,h,m)}};Le.conditional=i;var t=function(r,a){return function(l,h,m,f){for(var g=[],p=l.pos;a(l,h,m);){var u={};if(f(l,r,h,u),l.pos===p)break;p=l.pos,g.push(u)}return g}};return Le.loop=t,Le}var ie={},$n;function za(){if($n)return ie;$n=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.readBits=ie.readArray=ie.readUnsigned=ie.readString=ie.peekBytes=ie.readBytes=ie.peekByte=ie.readByte=ie.buildStream=void 0;var e=function(p){return{data:p,pos:0}};ie.buildStream=e;var i=function(){return function(p){return p.data[p.pos++]}};ie.readByte=i;var t=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return function(u){return u.data[u.pos+p]}};ie.peekByte=t;var n=function(p){return function(u){return u.data.subarray(u.pos,u.pos+=p)}};ie.readBytes=n;var r=function(p){return function(u){return u.data.subarray(u.pos,u.pos+p)}};ie.peekBytes=r;var a=function(p){return function(u){return Array.from(n(p)(u)).map(function(o){return String.fromCharCode(o)}).join("")}};ie.readString=a;var l=function(p){return function(u){var o=n(2)(u);return p?(o[1]<<8)+o[0]:(o[0]<<8)+o[1]}};ie.readUnsigned=l;var h=function(p,u){return function(o,s,c){for(var _=typeof u=="function"?u(o,s,c):u,d=n(p),v=new Array(_),y=0;y<_;y++)v[y]=d(o);return v}};ie.readArray=h;var m=function(p,u,o){for(var s=0,c=0;c<o;c++)s+=p[u+c]&&Math.pow(2,o-c-1);return s},f=function(p){return function(u){for(var o=i()(u),s=new Array(8),c=0;c<8;c++)s[7-c]=!!(o&1<<c);return Object.keys(p).reduce(function(_,d){var v=p[d];return v.length?_[d]=m(s,v.index,v.length):_[d]=s[v.index],_},{})}};return ie.readBits=f,ie}var zn;function Dr(){return zn||(zn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=$a(),t=za(),n={blocks:function(u){for(var o=0,s=[],c=u.data.length,_=0,d=(0,t.readByte)()(u);d!==o&&d;d=(0,t.readByte)()(u)){if(u.pos+d>=c){var v=c-u.pos;s.push((0,t.readBytes)(v)(u)),_+=v;break}s.push((0,t.readBytes)(d)(u)),_+=d}for(var y=new Uint8Array(_),w=0,x=0;x<s.length;x++)y.set(s[x],w),w+=s[x].length;return y}},r=(0,i.conditional)({gce:[{codes:(0,t.readBytes)(2)},{byteSize:(0,t.readByte)()},{extras:(0,t.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,t.readUnsigned)(!0)},{transparentColorIndex:(0,t.readByte)()},{terminator:(0,t.readByte)()}]},function(p){var u=(0,t.peekBytes)(2)(p);return u[0]===33&&u[1]===249}),a=(0,i.conditional)({image:[{code:(0,t.readByte)()},{descriptor:[{left:(0,t.readUnsigned)(!0)},{top:(0,t.readUnsigned)(!0)},{width:(0,t.readUnsigned)(!0)},{height:(0,t.readUnsigned)(!0)},{lct:(0,t.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,i.conditional)({lct:(0,t.readArray)(3,function(p,u,o){return Math.pow(2,o.descriptor.lct.size+1)})},function(p,u,o){return o.descriptor.lct.exists}),{data:[{minCodeSize:(0,t.readByte)()},n]}]},function(p){return(0,t.peekByte)()(p)===44}),l=(0,i.conditional)({text:[{codes:(0,t.readBytes)(2)},{blockSize:(0,t.readByte)()},{preData:function(u,o,s){return(0,t.readBytes)(s.text.blockSize)(u)}},n]},function(p){var u=(0,t.peekBytes)(2)(p);return u[0]===33&&u[1]===1}),h=(0,i.conditional)({application:[{codes:(0,t.readBytes)(2)},{blockSize:(0,t.readByte)()},{id:function(u,o,s){return(0,t.readString)(s.blockSize)(u)}},n]},function(p){var u=(0,t.peekBytes)(2)(p);return u[0]===33&&u[1]===255}),m=(0,i.conditional)({comment:[{codes:(0,t.readBytes)(2)},n]},function(p){var u=(0,t.peekBytes)(2)(p);return u[0]===33&&u[1]===254}),f=[{header:[{signature:(0,t.readString)(3)},{version:(0,t.readString)(3)}]},{lsd:[{width:(0,t.readUnsigned)(!0)},{height:(0,t.readUnsigned)(!0)},{gct:(0,t.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,t.readByte)()},{pixelAspectRatio:(0,t.readByte)()}]},(0,i.conditional)({gct:(0,t.readArray)(3,function(p,u){return Math.pow(2,u.lsd.gct.size+1)})},function(p,u){return u.lsd.gct.exists}),{frames:(0,i.loop)([r,h,m,a,l],function(p){var u=(0,t.peekByte)()(p);return u===33||u===44})}],g=f;e.default=g}(Ci)),Ci}var Et={},Fn;function Tr(){return Fn||(Fn=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.deinterlace=void 0,Et.deinterlace=function(e,i){for(var t=new Array(e.length),n=e.length/i,r=function(g,p){var u=e.slice(p*i,(p+1)*i);t.splice.apply(t,[g*i,i].concat(u))},a=[0,4,2,1],l=[8,8,4,2],h=0,m=0;m<4;m++)for(var f=a[m];f<n;f+=l[m])r(f,h),h++;return t}),Et}var kt={},Nn;function Ir(){return Nn||(Nn=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.lzw=void 0,kt.lzw=function(e,i,t){var n=4096,r=-1,a=t,l,h,m,f,g,p,u,x,o,s,w,c,C,b,S,E,_=new Array(t),d=new Array(n),v=new Array(n),y=new Array(n+1);for(c=e,h=1<<c,g=h+1,l=h+2,u=r,f=c+1,m=(1<<f)-1,o=0;o<h;o++)d[o]=0,v[o]=o;var w,x,C,b,E,S;for(w=x=C=b=E=S=0,s=0;s<a;){if(b===0){if(x<f){w+=i[S]<<x,x+=8,S++;continue}if(o=w&m,w>>=f,x-=f,o>l||o==g)break;if(o==h){f=c+1,m=(1<<f)-1,l=h+2,u=r;continue}if(u==r){y[b++]=v[o],u=o,C=o;continue}for(p=o,o==l&&(y[b++]=C,o=u);o>h;)y[b++]=v[o],o=d[o];C=v[o]&255,y[b++]=C,l<n&&(d[l]=u,v[l]=C,l++,!(l&m)&&l<n&&(f++,m+=l)),u=p}b--,_[E++]=y[b],s++}for(s=E;s<a;s++)_[s]=0;return _}),kt}var Un;function Or(){return Un||(Un=1,function(e){var i=xt&&xt.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0}),e.decompressFrames=e.decompressFrame=e.parseGIF=void 0;var t=i(Dr()),n=$a(),r=za(),a=Tr(),l=Ir();e.parseGIF=function(m){var f=new Uint8Array(m);return n.parse(r.buildStream(f),t.default)};var h=function(m){for(var f=m.pixels.length,g=new Uint8ClampedArray(f*4),p=0;p<f;p++){var u=p*4,o=m.pixels[p],s=m.colorTable[o];g[u]=s[0],g[u+1]=s[1],g[u+2]=s[2],g[u+3]=o!==m.transparentIndex?255:0}return g};e.decompressFrame=function(m,f,g){if(!m.image){console.warn("gif frame does not have associated image.");return}var p=m.image,u=p.descriptor.width*p.descriptor.height,o=l.lzw(p.data.minCodeSize,p.data.blocks,u);p.descriptor.lct.interlaced&&(o=a.deinterlace(o,p.descriptor.width));var s={pixels:o,dims:{top:m.image.descriptor.top,left:m.image.descriptor.left,width:m.image.descriptor.width,height:m.image.descriptor.height}};return p.descriptor.lct&&p.descriptor.lct.exists?s.colorTable=p.lct:s.colorTable=f,m.gce&&(s.delay=(m.gce.delay||10)*10,s.disposalType=m.gce.extras.disposal,m.gce.extras.transparentColorGiven&&(s.transparentIndex=m.gce.transparentColorIndex)),g&&(s.patch=h(s)),s},e.decompressFrames=function(m,f){return m.frames.filter(function(g){return g.image}).map(function(g){return e.decompressFrame(g,m.gct,f)})}}(xt)),xt}var Di,Zn;function Pr(){if(Zn)return Di;Zn=1;var e=100,i=256,t=i-1,n=4,r=16,a=1<<r,l=10,h=10,m=a>>h,f=a<<l-h,g=i>>3,p=6,u=1<<p,o=g*u,s=30,c=10,_=1<<c,d=8,v=1<<d,y=c+d,w=1<<y,x=499,C=491,b=487,E=503,S=3*E;function k(A,N){var B,M,D,U,Y;function z(){B=[],M=new Int32Array(256),D=new Int32Array(i),U=new Int32Array(i),Y=new Int32Array(i>>3);var I,O;for(I=0;I<i;I++)O=(I<<n+8)/i,B[I]=new Float64Array([O,O,O,0]),U[I]=a/i,D[I]=0}function ne(){for(var I=0;I<i;I++)B[I][0]>>=n,B[I][1]>>=n,B[I][2]>>=n,B[I][3]=I}function we(I,O,j,P,Z){B[O][0]-=I*(B[O][0]-j)/_,B[O][1]-=I*(B[O][1]-P)/_,B[O][2]-=I*(B[O][2]-Z)/_}function ke(I,O,j,P,Z){for(var L=Math.abs(O-I),K=Math.min(O+I,i),$=O+1,W=O-1,te=1,X,G;$<K||W>L;)G=Y[te++],$<K&&(X=B[$++],X[0]-=G*(X[0]-j)/w,X[1]-=G*(X[1]-P)/w,X[2]-=G*(X[2]-Z)/w),W>L&&(X=B[W--],X[0]-=G*(X[0]-j)/w,X[1]-=G*(X[1]-P)/w,X[2]-=G*(X[2]-Z)/w)}function R(I,O,j){var P=2147483647,Z=P,L=-1,K=L,$,W,te,X,G;for($=0;$<i;$++)W=B[$],te=Math.abs(W[0]-I)+Math.abs(W[1]-O)+Math.abs(W[2]-j),te<P&&(P=te,L=$),X=te-(D[$]>>r-n),X<Z&&(Z=X,K=$),G=U[$]>>h,U[$]-=G,D[$]+=G<<l;return U[L]+=m,D[L]-=f,K}function oe(){var I,O,j,P,Z,L,K=0,$=0;for(I=0;I<i;I++){for(j=B[I],Z=I,L=j[1],O=I+1;O<i;O++)P=B[O],P[1]<L&&(Z=O,L=P[1]);if(P=B[Z],I!=Z&&(O=P[0],P[0]=j[0],j[0]=O,O=P[1],P[1]=j[1],j[1]=O,O=P[2],P[2]=j[2],j[2]=O,O=P[3],P[3]=j[3],j[3]=O),L!=K){for(M[K]=$+I>>1,O=K+1;O<L;O++)M[O]=I;K=L,$=I}}for(M[K]=$+t>>1,O=K+1;O<256;O++)M[O]=t}function Q(I,O,j){for(var P,Z,L,K=1e3,$=-1,W=M[O],te=W-1;W<i||te>=0;)W<i&&(Z=B[W],L=Z[1]-O,L>=K?W=i:(W++,L<0&&(L=-L),P=Z[0]-I,P<0&&(P=-P),L+=P,L<K&&(P=Z[2]-j,P<0&&(P=-P),L+=P,L<K&&(K=L,$=Z[3])))),te>=0&&(Z=B[te],L=O-Z[1],L>=K?te=-1:(te--,L<0&&(L=-L),P=Z[0]-I,P<0&&(P=-P),L+=P,L<K&&(P=Z[2]-j,P<0&&(P=-P),L+=P,L<K&&(K=L,$=Z[3]))));return $}function me(){var I,O=A.length,j=30+(N-1)/3,P=O/(3*N),Z=~~(P/e),L=_,K=o,$=K>>p;for($<=1&&($=0),I=0;I<$;I++)Y[I]=L*(($*$-I*I)*v/($*$));var W;O<S?(N=1,W=3):O%x!==0?W=3*x:O%C!==0?W=3*C:O%b!==0?W=3*b:W=3*E;var te,X,G,se,Se=0;for(I=0;I<P;)if(te=(A[Se]&255)<<n,X=(A[Se+1]&255)<<n,G=(A[Se+2]&255)<<n,se=R(te,X,G),we(L,se,te,X,G),$!==0&&ke($,se,te,X,G),Se+=W,Se>=O&&(Se-=O),I++,Z===0&&(Z=1),I%Z===0)for(L-=L/j,K-=K/s,$=K>>p,$<=1&&($=0),se=0;se<$;se++)Y[se]=L*(($*$-se*se)*v/($*$))}function T(){z(),me(),ne(),oe()}this.buildColormap=T;function gt(){for(var I=[],O=[],j=0;j<i;j++)O[B[j][3]]=j;for(var P=0,Z=0;Z<i;Z++){var L=O[Z];I[P++]=B[L][0],I[P++]=B[L][1],I[P++]=B[L][2]}return I}this.getColormap=gt,this.lookupRGB=Q}return Di=k,Di}var Ti,Hn;function Lr(){if(Hn)return Ti;Hn=1;var e=-1,i=12,t=5003,n=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function r(a,l,h,m){var f=Math.max(2,m),g=new Uint8Array(256),p=new Int32Array(t),u=new Int32Array(t),o,s=0,c,_=0,d,v=!1,y,w,x,C,b,E;function S(z,ne){g[c++]=z,c>=254&&M(ne)}function k(z){A(t),_=w+2,v=!0,Y(w,z)}function A(z){for(var ne=0;ne<z;++ne)p[ne]=-1}function N(z,ne){var we,ke,R,oe,Q,me,T;for(y=z,v=!1,E=y,d=D(E),w=1<<z-1,x=w+1,_=w+2,c=0,oe=U(),T=0,we=t;we<65536;we*=2)++T;T=8-T,me=t,A(me),Y(w,ne);e:for(;(ke=U())!=e;){if(we=(ke<<i)+oe,R=ke<<T^oe,p[R]===we){oe=u[R];continue}else if(p[R]>=0){Q=me-R,R===0&&(Q=1);do if((R-=Q)<0&&(R+=me),p[R]===we){oe=u[R];continue e}while(p[R]>=0)}Y(oe,ne),oe=ke,_<1<<i?(u[R]=_++,p[R]=we):k(ne)}Y(oe,ne),Y(x,ne)}function B(z){z.writeByte(f),C=a*l,b=0,N(f+1,z),z.writeByte(0)}function M(z){c>0&&(z.writeByte(c),z.writeBytes(g,0,c),c=0)}function D(z){return(1<<z)-1}function U(){if(C===0)return e;--C;var z=h[b++];return z&255}function Y(z,ne){for(o&=n[s],s>0?o|=z<<s:o=z,s+=E;s>=8;)S(o&255,ne),o>>=8,s-=8;if((_>d||v)&&(v?(d=D(E=y),v=!1):(++E,E==i?d=1<<i:d=D(E))),z==x){for(;s>0;)S(o&255,ne),o>>=8,s-=8;M(ne)}}this.encode=B}return Ti=r,Ti}var Ii,Qn;function Br(){if(Qn)return Ii;Qn=1;var e=Pr(),i=Lr();function t(){this.page=-1,this.pages=[],this.newPage()}t.pageSize=4096,t.charMap={};for(var n=0;n<256;n++)t.charMap[n]=String.fromCharCode(n);t.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(t.pageSize),this.cursor=0},t.prototype.getData=function(){for(var a="",l=0;l<this.pages.length;l++)for(var h=0;h<t.pageSize;h++)a+=t.charMap[this.pages[l][h]];return a},t.prototype.toFlattenUint8Array=function(){for(var a=[],l=0;l<this.pages.length;l++)if(l===this.pages.length-1){var h=Uint8Array.from(this.pages[l].slice(0,this.cursor));a.push(h)}else a.push(this.pages[l]);var m=new Uint8Array(a.reduce(function(f,g){return f+g.length},0));return a.reduce(function(f,g){return m.set(g,f),f+g.length},0),m},t.prototype.writeByte=function(a){this.cursor>=t.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=a},t.prototype.writeUTFBytes=function(a){for(var l=a.length,h=0;h<l;h++)this.writeByte(a.charCodeAt(h))},t.prototype.writeBytes=function(a,l,h){for(var m=h||a.length,f=l||0;f<m;f++)this.writeByte(a[f])};function r(a,l){this.width=~~a,this.height=~~l,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new t}return r.prototype.setDelay=function(a){this.delay=Math.round(a/10)},r.prototype.setFrameRate=function(a){this.delay=Math.round(100/a)},r.prototype.setDispose=function(a){a>=0&&(this.dispose=a)},r.prototype.setRepeat=function(a){this.repeat=a},r.prototype.setTransparent=function(a){this.transparent=a},r.prototype.addFrame=function(a){this.image=a,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),!this.firstFrame&&!this.globalPalette&&this.writePalette(),this.writePixels(),this.firstFrame=!1},r.prototype.finish=function(){this.out.writeByte(59)},r.prototype.setQuality=function(a){a<1&&(a=1),this.sample=a},r.prototype.setDither=function(a){a===!0&&(a="FloydSteinberg"),this.dither=a},r.prototype.setGlobalPalette=function(a){this.globalPalette=a},r.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},r.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},r.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new e(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent,!0))},r.prototype.indexPixels=function(a){var l=this.pixels.length/3;this.indexedPixels=new Uint8Array(l);for(var h=0,m=0;m<l;m++){var f=this.findClosestRGB(this.pixels[h++]&255,this.pixels[h++]&255,this.pixels[h++]&255);this.usedEntry[f]=!0,this.indexedPixels[m]=f}},r.prototype.ditherPixels=function(a,l){var h={FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]]};if(!a||!h[a])throw"Unknown dithering kernel: "+a;var m=h[a],f=0,g=this.height,p=this.width,u=this.pixels,o=l?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var s=0;s<g;s++){l&&(o=o*-1);for(var c=o==1?0:p-1,_=o==1?p:0;c!==_;c+=o){f=s*p+c;var d=f*3,v=u[d],y=u[d+1],w=u[d+2];d=this.findClosestRGB(v,y,w),this.usedEntry[d]=!0,this.indexedPixels[f]=d,d*=3;for(var x=this.colorTab[d],C=this.colorTab[d+1],b=this.colorTab[d+2],E=v-x,S=y-C,k=w-b,A=o==1?0:m.length-1,N=o==1?m.length:0;A!==N;A+=o){var B=m[A][1],M=m[A][2];if(B+c>=0&&B+c<p&&M+s>=0&&M+s<g){var D=m[A][0];d=f+B+M*p,d*=3,u[d]=Math.max(0,Math.min(255,u[d]+E*D)),u[d+1]=Math.max(0,Math.min(255,u[d+1]+S*D)),u[d+2]=Math.max(0,Math.min(255,u[d+2]+k*D))}}}}},r.prototype.findClosest=function(a,l){return this.findClosestRGB((a&16711680)>>16,(a&65280)>>8,a&255,l)},r.prototype.findClosestRGB=function(a,l,h,m){if(this.colorTab===null)return-1;if(this.neuQuant&&!m)return this.neuQuant.lookupRGB(a,l,h);for(var f=0,g=256*256*256,p=this.colorTab.length,u=0,o=0;u<p;o++){var s=a-(this.colorTab[u++]&255),c=l-(this.colorTab[u++]&255),_=h-(this.colorTab[u++]&255),d=s*s+c*c+_*_;(!m||this.usedEntry[o])&&d<g&&(g=d,f=o)}return f},r.prototype.getImagePixels=function(){var a=this.width,l=this.height;this.pixels=new Uint8Array(a*l*3);for(var h=this.image,m=0,f=0,g=0;g<l;g++)for(var p=0;p<a;p++)this.pixels[f++]=h[m++],this.pixels[f++]=h[m++],this.pixels[f++]=h[m++],m++},r.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var a,l;this.transparent===null?(a=0,l=0):(a=1,l=2),this.dispose>=0&&(l=this.dispose&7),l<<=2,this.out.writeByte(0|l|0|a),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},r.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},r.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},r.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},r.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var a=3*256-this.colorTab.length,l=0;l<a;l++)this.out.writeByte(0)},r.prototype.writeShort=function(a){this.out.writeByte(a&255),this.out.writeByte(a>>8&255)},r.prototype.writePixels=function(){var a=new i(this.width,this.height,this.indexedPixels,this.colorDepth);a.encode(this.out)},r.prototype.stream=function(){return this.out},Ii=r,Ii}var Gn;function Mr(){if(Gn)return ge;Gn=1;var e=ge&&ge.__assign||function(){return e=Object.assign||function(p){for(var u,o=1,s=arguments.length;o<s;o++){u=arguments[o];for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(p[c]=u[c])}return p},e.apply(this,arguments)},i=ge&&ge.__awaiter||function(p,u,o,s){function c(_){return _ instanceof o?_:new o(function(d){d(_)})}return new(o||(o=Promise))(function(_,d){function v(x){try{w(s.next(x))}catch(C){d(C)}}function y(x){try{w(s.throw(x))}catch(C){d(C)}}function w(x){x.done?_(x.value):c(x.value).then(v,y)}w((s=s.apply(p,u||[])).next())})},t=ge&&ge.__generator||function(p,u){var o={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},s,c,_,d;return d={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function v(w){return function(x){return y([w,x])}}function y(w){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,c&&(_=w[0]&2?c.return:w[0]?c.throw||((_=c.return)&&_.call(c),0):c.next)&&!(_=_.call(c,w[1])).done)return _;switch(c=0,_&&(w=[w[0]&2,_.value]),w[0]){case 0:case 1:_=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,c=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(_=o.trys,!(_=_.length>0&&_[_.length-1])&&(w[0]===6||w[0]===2)){o=0;continue}if(w[0]===3&&(!_||w[1]>_[0]&&w[1]<_[3])){o.label=w[1];break}if(w[0]===6&&o.label<_[1]){o.label=_[1],_=w;break}if(_&&o.label<_[2]){o.label=_[2],o.ops.push(w);break}_[2]&&o.ops.pop(),o.trys.pop();continue}w=u.call(p,o)}catch(x){w=[6,x],c=0}finally{s=_=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},n=ge&&ge.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(ge,"__esModule",{value:!0}),ge.AwesomeQR=void 0;var r=Cr(),a=Or(),l=Ma(),h=n(Br()),m=.4,f=function(){function p(u){var o=Object.assign({},u);if(Object.keys(p.defaultOptions).forEach(function(s){s in o||Object.defineProperty(o,s,{value:p.defaultOptions[s],enumerable:!0,writable:!0})}),o.components?typeof o.components=="object"&&Object.keys(p.defaultComponentOptions).forEach(function(s){s in o.components?Object.defineProperty(o.components,s,{value:e(e({},p.defaultComponentOptions[s]),o.components[s]),enumerable:!0,writable:!0}):Object.defineProperty(o.components,s,{value:p.defaultComponentOptions[s],enumerable:!0,writable:!0})}):o.components=p.defaultComponentOptions,o.dotScale!==null&&o.dotScale!==void 0){if(o.dotScale<=0||o.dotScale>1)throw new Error("dotScale should be in range (0, 1].");o.components.data.scale=o.dotScale,o.components.timing.scale=o.dotScale,o.components.alignment.scale=o.dotScale}this.options=o,this.canvas=r.createCanvas(u.size,u.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new l.QRCodeModel(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}return p.prototype.draw=function(){var u=this;return new Promise(function(o){return u._draw().then(o)})},p.prototype._clear=function(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)},p._prepareRoundedCornerClip=function(u,o,s,c,_,d){u.beginPath(),u.moveTo(o,s),u.arcTo(o+c,s,o+c,s+_,d),u.arcTo(o+c,s+_,o,s+_,d),u.arcTo(o,s+_,o,s,d),u.arcTo(o,s,o+c,s,d),u.closePath()},p._getAverageRGB=function(u){var o=5,s={r:0,g:0,b:0},c,_,d=-4,v={r:0,g:0,b:0},y=0;_=u.naturalHeight||u.height,c=u.naturalWidth||u.width;var w=r.createCanvas(c,_),x=w.getContext("2d");if(!x)return s;x.drawImage(u,0,0);var C;try{C=x.getImageData(0,0,c,_)}catch{return s}for(;(d+=o*4)<C.data.length;)C.data[d]>200||C.data[d+1]>200||C.data[d+2]>200||(++y,v.r+=C.data[d],v.g+=C.data[d+1],v.b+=C.data[d+2]);return v.r=~~(v.r/y),v.g=~~(v.g/y),v.b=~~(v.b/y),v},p._drawDot=function(u,o,s,c,_,d){_===void 0&&(_=0),d===void 0&&(d=1),u.fillRect((o+_)*c,(s+_)*c,d*c,d*c)},p._drawAlignProtector=function(u,o,s,c){u.clearRect((o-2)*c,(s-2)*c,5*c,5*c),u.fillRect((o-2)*c,(s-2)*c,5*c,5*c)},p._drawAlign=function(u,o,s,c,_,d,v,y){_===void 0&&(_=0),d===void 0&&(d=1);var w=u.fillStyle;u.fillStyle=v,new Array(4).fill(0).map(function(x,C){p._drawDot(u,o-2+C,s-2,c,_,d),p._drawDot(u,o+2,s-2+C,c,_,d),p._drawDot(u,o+2-C,s+2,c,_,d),p._drawDot(u,o-2,s+2-C,c,_,d)}),p._drawDot(u,o,s,c,_,d),y||(u.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map(function(x,C){p._drawDot(u,o-1+C,s-1,c,_,d),p._drawDot(u,o+1,s-1+C,c,_,d),p._drawDot(u,o+1-C,s+1,c,_,d),p._drawDot(u,o-1,s+1-C,c,_,d)})),u.fillStyle=w},p.prototype._draw=function(){var u,o,s,c,_,d,v,y,w,x,C,b,E,S,k,A,N,B,M;return i(this,void 0,void 0,function(){var D,U,Y,z,ne,we,ke,R,oe,Q,me,T,gt,I,O,j,P,Z,L,K,$,J,W,te,X,G,se,Se,le,he,hi,et,bn,xe,J,ci,di,yn,de,xn,J,Oe,ue,_e,Gt,ui,J,_i,En,gi,kn,J,Oe,ue,_e,Sn,vt,ze,pt,Fe,wt,jt,Rn,Pe,tt,mt,it,vi,Wt,An,Cn,pi,Dn;return t(this,function(bt){switch(bt.label){case 0:if(D=(u=this.qrCode)===null||u===void 0?void 0:u.moduleCount,U=this.options.size,Y=this.options.margin,(Y<0||Y*2>=U)&&(Y=0),z=Math.ceil(Y),ne=U-2*Y,we=this.options.whiteMargin,ke=this.options.backgroundDimming,R=Math.ceil(ne/D),oe=R*D,Q=oe+2*z,me=r.createCanvas(Q,Q),T=me.getContext("2d"),this._clear(),T.save(),T.translate(z,z),gt=r.createCanvas(Q,Q),I=gt.getContext("2d"),O=null,j=[],!this.options.gifBackground)return[3,1];if(P=a.parseGIF(this.options.gifBackground),O=P,j=a.decompressFrames(P,!0),this.options.autoColor){for(Z=0,L=0,K=0,$=0,J=0;J<j[0].colorTable.length;J++)W=j[0].colorTable[J],!(W[0]>200||W[1]>200||W[2]>200)&&(W[0]===0&&W[1]===0&&W[2]===0||($++,Z+=W[0],L+=W[1],K+=W[2]));Z=~~(Z/$),L=~~(L/$),K=~~(K/$),this.options.colorDark="rgb("+Z+","+L+","+K+")"}return[3,4];case 1:return this.options.backgroundImage?[4,r.loadImage(this.options.backgroundImage)]:[3,3];case 2:return te=bt.sent(),this.options.autoColor&&(X=p._getAverageRGB(te),this.options.colorDark="rgb("+X.r+","+X.g+","+X.b+")"),I.drawImage(te,0,0,te.width,te.height,0,0,Q,Q),I.rect(0,0,Q,Q),I.fillStyle=ke,I.fill(),[3,4];case 3:I.rect(0,0,Q,Q),I.fillStyle=this.options.colorLight,I.fill(),bt.label=4;case 4:for(G=l.QRUtil.getPatternPosition(this.qrCode.typeNumber),se=((s=(o=this.options.components)===null||o===void 0?void 0:o.data)===null||s===void 0?void 0:s.scale)||m,Se=(1-se)*.5,le=0;le<D;le++)for(he=0;he<D;he++){for(hi=this.qrCode.isDark(le,he),et=he<8&&(le<8||le>=D-8)||he>=D-8&&le<8,bn=le==6&&he>=8&&he<=D-8||he==6&&le>=8&&le<=D-8,xe=et||bn,J=1;J<G.length-1;J++)xe=xe||le>=G[J]-2&&le<=G[J]+2&&he>=G[J]-2&&he<=G[J]+2;ci=he*R+(xe?0:Se*R),di=le*R+(xe?0:Se*R),T.strokeStyle=hi?this.options.colorDark:this.options.colorLight,T.lineWidth=.5,T.fillStyle=hi?this.options.colorDark:"rgba(255, 255, 255, 0.6)",G.length===0?xe||T.fillRect(ci,di,(xe?1:se)*R,(xe?1:se)*R):(yn=he<D-4&&he>=D-4-5&&le<D-4&&le>=D-4-5,!xe&&!yn&&T.fillRect(ci,di,(xe?1:se)*R,(xe?1:se)*R))}if(de=G[G.length-1],xn="rgba(255, 255, 255, 0.6)",T.fillStyle=xn,T.fillRect(0,0,8*R,8*R),T.fillRect(0,(D-8)*R,8*R,8*R),T.fillRect((D-8)*R,0,8*R,8*R),!((_=(c=this.options.components)===null||c===void 0?void 0:c.timing)===null||_===void 0)&&_.protectors&&(T.fillRect(8*R,6*R,(D-8-8)*R,R),T.fillRect(6*R,8*R,R,(D-8-8)*R)),!((v=(d=this.options.components)===null||d===void 0?void 0:d.cornerAlignment)===null||v===void 0)&&v.protectors&&p._drawAlignProtector(T,de,de,R),!((w=(y=this.options.components)===null||y===void 0?void 0:y.alignment)===null||w===void 0)&&w.protectors){for(J=0;J<G.length;J++)for(Oe=0;Oe<G.length;Oe++)if(ue=G[Oe],_e=G[J],!(ue===6&&(_e===6||_e===de))){if(_e===6&&(ue===6||ue===de))continue;if(ue===de&&_e===de)continue;p._drawAlignProtector(T,ue,_e,R)}}for(T.fillStyle=this.options.colorDark,T.fillRect(0,0,7*R,R),T.fillRect((D-7)*R,0,7*R,R),T.fillRect(0,6*R,7*R,R),T.fillRect((D-7)*R,6*R,7*R,R),T.fillRect(0,(D-7)*R,7*R,R),T.fillRect(0,(D-7+6)*R,7*R,R),T.fillRect(0,0,R,7*R),T.fillRect(6*R,0,R,7*R),T.fillRect((D-7)*R,0,R,7*R),T.fillRect((D-7+6)*R,0,R,7*R),T.fillRect(0,(D-7)*R,R,7*R),T.fillRect(6*R,(D-7)*R,R,7*R),T.fillRect(2*R,2*R,3*R,3*R),T.fillRect((D-7+2)*R,2*R,3*R,3*R),T.fillRect(2*R,(D-7+2)*R,3*R,3*R),Gt=((C=(x=this.options.components)===null||x===void 0?void 0:x.timing)===null||C===void 0?void 0:C.scale)||m,ui=(1-Gt)*.5,J=0;J<D-8;J+=2)p._drawDot(T,8+J,6,R,ui,Gt),p._drawDot(T,6,8+J,R,ui,Gt);for(_i=((E=(b=this.options.components)===null||b===void 0?void 0:b.cornerAlignment)===null||E===void 0?void 0:E.scale)||m,En=(1-_i)*.5,p._drawAlign(T,de,de,R,En,_i,this.options.colorDark,((k=(S=this.options.components)===null||S===void 0?void 0:S.cornerAlignment)===null||k===void 0?void 0:k.protectors)||!1),gi=((N=(A=this.options.components)===null||A===void 0?void 0:A.alignment)===null||N===void 0?void 0:N.scale)||m,kn=(1-gi)*.5,J=0;J<G.length;J++)for(Oe=0;Oe<G.length;Oe++)if(ue=G[Oe],_e=G[J],!(ue===6&&(_e===6||_e===de))){if(_e===6&&(ue===6||ue===de))continue;if(ue===de&&_e===de)continue;p._drawAlign(T,ue,_e,R,kn,gi,this.options.colorDark,((M=(B=this.options.components)===null||B===void 0?void 0:B.alignment)===null||M===void 0?void 0:M.protectors)||!1)}return we&&(T.fillStyle="#FFFFFF",T.fillRect(-z,-z,Q,z),T.fillRect(-z,oe,Q,z),T.fillRect(oe,-z,z,Q),T.fillRect(-z,-z,z,Q)),this.options.logoImage?[4,r.loadImage(this.options.logoImage)]:[3,6];case 5:Sn=bt.sent(),vt=this.options.logoScale,ze=this.options.logoMargin,pt=this.options.logoCornerRadius,(vt<=0||vt>=1)&&(vt=.2),ze<0&&(ze=0),pt<0&&(pt=0),Fe=oe*vt,wt=.5*(Q-Fe),jt=wt,T.restore(),T.fillStyle="#FFFFFF",T.save(),p._prepareRoundedCornerClip(T,wt-ze,jt-ze,Fe+2*ze,Fe+2*ze,pt+ze),T.clip(),Rn=T.globalCompositeOperation,T.globalCompositeOperation="destination-out",T.fill(),T.globalCompositeOperation=Rn,T.restore(),T.save(),p._prepareRoundedCornerClip(T,wt,jt,Fe,Fe,pt),T.clip(),T.drawImage(Sn,wt,jt,Fe,Fe),T.restore(),T.save(),T.translate(z,z),bt.label=6;case 6:if(O){if(j.forEach(function(Ge){Pe||(Pe=new h.default(U,U),Pe.setDelay(Ge.delay),Pe.setRepeat(0));var qt=Ge.dims,Kt=qt.width,Vt=qt.height;tt||(tt=r.createCanvas(Kt,Vt),mt=tt.getContext("2d"),mt.rect(0,0,tt.width,tt.height),mt.fillStyle="#ffffff",mt.fill()),(!it||!Wt||Kt!==it.width||Vt!==it.height)&&(it=r.createCanvas(Kt,Vt),vi=it.getContext("2d"),Wt=vi.createImageData(Kt,Vt)),Wt.data.set(Ge.patch),vi.putImageData(Wt,0,0),mt.drawImage(it,Ge.dims.left,Ge.dims.top);var Tn=r.createCanvas(Q,Q),yt=Tn.getContext("2d");yt.drawImage(tt,0,0,Q,Q),yt.rect(0,0,Q,Q),yt.fillStyle=ke,yt.fill(),yt.drawImage(me,0,0,Q,Q);var wi=r.createCanvas(U,U),In=wi.getContext("2d");In.drawImage(Tn,0,0,U,U),Pe.addFrame(In.getImageData(0,0,wi.width,wi.height).data)}),!Pe)throw new Error("No frames.");return Pe.finish(),g(this.canvas)?(An=Pe.stream().toFlattenUint8Array(),Cn=An.reduce(function(Ge,qt){return Ge+String.fromCharCode(qt)},""),[2,Promise.resolve("data:image/gif;base64,"+window.btoa(Cn))]):[2,Promise.resolve(Buffer.from(Pe.stream().toFlattenUint8Array()))]}else return I.drawImage(me,0,0,Q,Q),T.drawImage(gt,-z,-z,Q,Q),pi=r.createCanvas(U,U),Dn=pi.getContext("2d"),Dn.drawImage(me,0,0,U,U),this.canvas=pi,g(this.canvas)?[2,Promise.resolve(this.canvas.toDataURL())]:[2,Promise.resolve(this.canvas.toBuffer())]}})})},p.CorrectLevel=l.QRErrorCorrectLevel,p.defaultComponentOptions={data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}},p.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"#ffffff",correctLevel:l.QRErrorCorrectLevel.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:p.defaultComponentOptions,autoColor:!0},p}();ge.AwesomeQR=f;function g(p){try{return p instanceof HTMLElement}catch{return typeof p=="object"&&p.nodeType===1&&typeof p.style=="object"&&typeof p.ownerDocument=="object"}}return ge}var jn;function $r(){return jn||(jn=1,function(e){var i=je&&je.__createBinding||(Object.create?function(r,a,l,h){h===void 0&&(h=l),Object.defineProperty(r,h,{enumerable:!0,get:function(){return a[l]}})}:function(r,a,l,h){h===void 0&&(h=l),r[h]=a[l]}),t=je&&je.__exportStar||function(r,a){for(var l in r)l!=="default"&&!a.hasOwnProperty(l)&&i(a,r,l)};Object.defineProperty(e,"__esModule",{value:!0}),t(Ma(),e);var n=Mr();Object.defineProperty(e,"AwesomeQR",{enumerable:!0,get:function(){return n.AwesomeQR}})}(je)),je}var zr=$r();async function Oi(e){let i=await new zr.AwesomeQR({text:e,size:500}).draw();if(typeof i!="string")throw new Error("expected string data url from AwesomeQR.draw()");return i}class F{constructor(i,t,n,r,a){this._legacyCanvasSize=F.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=i,this.$canvas=document.createElement("canvas"),n&&typeof n=="object"?this._onDecode=t:(console.warn(n||r||a?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t=typeof n=="object"?n:{},this._onDecodeError=t.onDecodeError||(typeof n=="function"?n:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||(typeof r=="function"?r:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||a||this._preferredCamera,this._legacyCanvasSize=typeof n=="number"?n:typeof r=="number"?r:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),i.disablePictureInPicture=!0,i.playsInline=!0,i.muted=!0;let l=!1;if(i.hidden&&(i.hidden=!1,l=!0),document.body.contains(i)||(document.body.appendChild(i),l=!0),n=i.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(r=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),a=this.$overlay.style,a.position="absolute",a.display="none",a.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!r&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}n.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(i),requestAnimationFrame(()=>{let h=window.getComputedStyle(i);h.display==="none"&&(i.style.setProperty("display","block","important"),l=!0),h.visibility!=="visible"&&(i.style.setProperty("visibility","visible","important"),l=!0),l&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),i.style.opacity="0",i.style.width="0",i.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),i.addEventListener("play",this._onPlay),i.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=F.createQrEngine()}static set WORKER_PATH(i){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await F.listCameras(!1)).length}catch{return!1}}static async listCameras(i=!1){if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="videoinput"),n;try{i&&(await t()).every(r=>!r.label)&&(n=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await t()).map((r,a)=>({id:r.deviceId,label:r.label||(a===0?"Default Camera":`Camera ${a+1}`)}))}finally{n&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),F._stopVideoStream(n))}}async hasFlash(){let i;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;i=this.$video.srcObject}else i=(await this._getCameraStream()).stream;return"torch"in i.getVideoTracks()[0].getSettings()}catch{return!1}finally{i&&i!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),F._stopVideoStream(i))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(i){throw this._flashOn=!1,i}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),F._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:i,facingMode:t}=await this._getCameraStream();!this._active||this._paused?F._stopVideoStream(i):(this._setVideoMirror(t),this.$video.srcObject=i,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(i){if(!this._paused)throw this._active=!1,i}}stop(){this.pause(),this._active=!1}async pause(i=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(F._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return i?(t(),!0):(await new Promise(n=>setTimeout(n,300)),this._paused?(t(),!0):!1)}async setCamera(i){i!==this._preferredCamera&&(this._preferredCamera=i,await this._restartVideoStream())}static async scanImage(i,t,n,r,a=!1,l=!1){let h,m=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(h=t.scanRegion,n=t.qrEngine,r=t.canvas,a=t.disallowCanvasResizing||!1,l=t.alsoTryWithoutScanRegion||!1,m=!0):console.warn(t||n||r||a||l?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!n;try{let f,g;[n,f]=await Promise.all([n||F.createQrEngine(),F._loadImage(i)]),[r,g]=F._drawToCanvas(f,h,r,a);let p;if(n instanceof Worker){let u=n;t||F._postWorkerMessageSync(u,"inversionMode","both"),p=await new Promise((o,s)=>{let c,_,d,v=-1;_=w=>{w.data.id===v&&(u.removeEventListener("message",_),u.removeEventListener("error",d),clearTimeout(c),w.data.data!==null?o({data:w.data.data,cornerPoints:F._convertPoints(w.data.cornerPoints,h)}):s(F.NO_QR_CODE_FOUND))},d=w=>{u.removeEventListener("message",_),u.removeEventListener("error",d),clearTimeout(c),s("Scanner error: "+(w?w.message||w:"Unknown Error"))},u.addEventListener("message",_),u.addEventListener("error",d),c=setTimeout(()=>d("timeout"),1e4);let y=g.getImageData(0,0,r.width,r.height);v=F._postWorkerMessageSync(u,"decode",y,[y.data.buffer])})}else p=await Promise.race([new Promise((u,o)=>window.setTimeout(()=>o("Scanner error: timeout"),1e4)),(async()=>{try{var[u]=await n.detect(r);if(!u)throw F.NO_QR_CODE_FOUND;return{data:u.rawValue,cornerPoints:F._convertPoints(u.cornerPoints,h)}}catch(o){if(u=o.message||o,/not implemented|service unavailable/.test(u))return F._disableBarcodeDetector=!0,F.scanImage(i,{scanRegion:h,canvas:r,disallowCanvasResizing:a,alsoTryWithoutScanRegion:l});throw`Scanner error: ${u}`}})()]);return m?p:p.data}catch(f){if(!h||!l)throw f;let g=await F.scanImage(i,{qrEngine:n,canvas:r,disallowCanvasResizing:a});return m?g:g.data}finally{t||F._postWorkerMessage(n,"close")}}setGrayscaleWeights(i,t,n,r=!0){F._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:i,green:t,blue:n,useIntegerApproximation:r})}setInversionMode(i){F._postWorkerMessage(this._qrEnginePromise,"inversionMode",i)}static async createQrEngine(i){if(i&&console.warn("Specifying a worker path is not required and not supported anymore."),i=()=>Rr(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[],import.meta.url).then(n=>n.createWorker()),!(!F._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return i();let t=navigator.userAgentData;return t&&t.brands.some(({brand:n})=>/Chromium/i.test(n))&&/mac ?OS/i.test(t.platform)&&await t.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:n,platformVersion:r})=>/arm/i.test(n||"arm")&&13<=parseInt(r||"13")).catch(()=>!0)?i():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(i){let t=Math.round(.6666666666666666*Math.min(i.videoWidth,i.videoHeight));return{x:Math.round((i.videoWidth-t)/2),y:Math.round((i.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var i=this.$video,t=i.videoWidth,n=i.videoHeight,r=i.offsetWidth,a=i.offsetHeight,l=i.offsetLeft,h=i.offsetTop,m=window.getComputedStyle(i),f=m.objectFit,g=t/n,p=r/a;switch(f){case"none":var u=t,o=n;break;case"fill":u=r,o=a;break;default:(f==="cover"?g>p:g<p)?(o=a,u=o*g):(u=r,o=u/g),f==="scale-down"&&(u=Math.min(u,t),o=Math.min(o,n))}var[s,c]=m.objectPosition.split(" ").map((d,v)=>{const y=parseFloat(d);return d.endsWith("%")?(v?a-o:r-u)*y/100:y});m=this._scanRegion.width||t,p=this._scanRegion.height||n,f=this._scanRegion.x||0;var _=this._scanRegion.y||0;g=this.$overlay.style,g.width=`${m/t*u}px`,g.height=`${p/n*o}px`,g.top=`${h+c+_/n*o}px`,n=/scaleX\(-1\)/.test(i.style.transform),g.left=`${l+(n?r-s-u:s)+(n?t-f-m:f)/t*u}px`,g.transform=i.style.transform}})}static _convertPoints(i,t){if(!t)return i;let n=t.x||0,r=t.y||0,a=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;for(let l of i)l.x=l.x*a+n,l.y=l.y*t+r;return i}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var i=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;i<t&&await new Promise(r=>setTimeout(r,t-i)),this._lastScanTimestamp=Date.now();try{var n=await F.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(r){if(!this._active)return;this._onDecodeError(r)}!F._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=F.createQrEngine()),n?(this._onDecode?this._onDecode(n):this._legacyOnDecode&&this._legacyOnDecode(n.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",n.cornerPoints.map(({x:r,y:a})=>`${r},${a}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(i){i!==F.NO_QR_CODE_FOUND&&console.log(i)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let i=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}],n=t.map(r=>Object.assign({},r,{[i]:{exact:this._preferredCamera}}));for(let r of[...n,...t])try{let a=await navigator.mediaDevices.getUserMedia({video:r,audio:!1}),l=this._getFacingMode(a)||(r.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:a,facingMode:l}}catch{}throw"Camera not found."}async _restartVideoStream(){let i=this._paused;await this.pause(!0)&&!i&&this._active&&await this.start()}static _stopVideoStream(i){for(let t of i.getTracks())t.stop(),i.removeTrack(t)}_setVideoMirror(i){this.$video.style.transform="scaleX("+(i==="user"?-1:1)+")"}_getFacingMode(i){return(i=i.getVideoTracks()[0])?/rear|back|environment/i.test(i.label)?"environment":/front|user|face/i.test(i.label)?"user":null:null}static _drawToCanvas(i,t,n,r=!1){n=n||document.createElement("canvas");let a=t&&t.x?t.x:0,l=t&&t.y?t.y:0,h=t&&t.width?t.width:i.videoWidth||i.width,m=t&&t.height?t.height:i.videoHeight||i.height;return r||(r=t&&t.downScaledWidth?t.downScaledWidth:h,t=t&&t.downScaledHeight?t.downScaledHeight:m,n.width!==r&&(n.width=r),n.height!==t&&(n.height=t)),t=n.getContext("2d",{alpha:!1}),t.imageSmoothingEnabled=!1,t.drawImage(i,a,l,h,m,0,0,n.width,n.height),[n,t]}static async _loadImage(i){if(i instanceof Image)return await F._awaitImageLoad(i),i;if(i instanceof HTMLVideoElement||i instanceof HTMLCanvasElement||i instanceof SVGImageElement||"OffscreenCanvas"in window&&i instanceof OffscreenCanvas||"ImageBitmap"in window&&i instanceof ImageBitmap)return i;if(i instanceof File||i instanceof Blob||i instanceof URL||typeof i=="string"){let t=new Image;t.src=i instanceof File||i instanceof Blob?URL.createObjectURL(i):i.toString();try{return await F._awaitImageLoad(t),t}finally{(i instanceof File||i instanceof Blob)&&URL.revokeObjectURL(t.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(i){i.complete&&i.naturalWidth!==0||await new Promise((t,n)=>{let r=a=>{i.removeEventListener("load",r),i.removeEventListener("error",r),a instanceof ErrorEvent?n("Image load error"):t()};i.addEventListener("load",r),i.addEventListener("error",r)})}static async _postWorkerMessage(i,t,n,r){return F._postWorkerMessageSync(await i,t,n,r)}static _postWorkerMessageSync(i,t,n,r){if(!(i instanceof Worker))return-1;let a=F._workerMessageId++;return i.postMessage({id:a,type:t,data:n},r),a}}F.DEFAULT_CANVAS_SIZE=400;F.NO_QR_CODE_FOUND="No QR code found";F._disableBarcodeDetector=!1;F._workerMessageId=0;/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Fr=4,Wn=0,qn=1,Nr=2;function ct(e){let i=e.length;for(;--i>=0;)e[i]=0}const Ur=0,Fa=1,Zr=2,Hr=3,Qr=258,un=29,Ut=256,Pt=Ut+1+un,lt=30,_n=19,Na=2*Pt+1,We=15,Pi=16,Gr=7,gn=256,Ua=16,Za=17,Ha=18,nn=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ni=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),jr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Qa=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Wr=512,Me=new Array((Pt+2)*2);ct(Me);const Tt=new Array(lt*2);ct(Tt);const Lt=new Array(Wr);ct(Lt);const Bt=new Array(Qr-Hr+1);ct(Bt);const vn=new Array(un);ct(vn);const ai=new Array(lt);ct(ai);function Li(e,i,t,n,r){this.static_tree=e,this.extra_bits=i,this.extra_base=t,this.elems=n,this.max_length=r,this.has_stree=e&&e.length}let Ga,ja,Wa;function Bi(e,i){this.dyn_tree=e,this.max_code=0,this.stat_desc=i}const qa=e=>e<256?Lt[e]:Lt[256+(e>>>7)],Mt=(e,i)=>{e.pending_buf[e.pending++]=i&255,e.pending_buf[e.pending++]=i>>>8&255},ce=(e,i,t)=>{e.bi_valid>Pi-t?(e.bi_buf|=i<<e.bi_valid&65535,Mt(e,e.bi_buf),e.bi_buf=i>>Pi-e.bi_valid,e.bi_valid+=t-Pi):(e.bi_buf|=i<<e.bi_valid&65535,e.bi_valid+=t)},Ce=(e,i,t)=>{ce(e,t[i*2],t[i*2+1])},Ka=(e,i)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--i>0);return t>>>1},qr=e=>{e.bi_valid===16?(Mt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Kr=(e,i)=>{const t=i.dyn_tree,n=i.max_code,r=i.stat_desc.static_tree,a=i.stat_desc.has_stree,l=i.stat_desc.extra_bits,h=i.stat_desc.extra_base,m=i.stat_desc.max_length;let f,g,p,u,o,s,c=0;for(u=0;u<=We;u++)e.bl_count[u]=0;for(t[e.heap[e.heap_max]*2+1]=0,f=e.heap_max+1;f<Na;f++)g=e.heap[f],u=t[t[g*2+1]*2+1]+1,u>m&&(u=m,c++),t[g*2+1]=u,!(g>n)&&(e.bl_count[u]++,o=0,g>=h&&(o=l[g-h]),s=t[g*2],e.opt_len+=s*(u+o),a&&(e.static_len+=s*(r[g*2+1]+o)));if(c!==0){do{for(u=m-1;e.bl_count[u]===0;)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[m]--,c-=2}while(c>0);for(u=m;u!==0;u--)for(g=e.bl_count[u];g!==0;)p=e.heap[--f],!(p>n)&&(t[p*2+1]!==u&&(e.opt_len+=(u-t[p*2+1])*t[p*2],t[p*2+1]=u),g--)}},Va=(e,i,t)=>{const n=new Array(We+1);let r=0,a,l;for(a=1;a<=We;a++)r=r+t[a-1]<<1,n[a]=r;for(l=0;l<=i;l++){let h=e[l*2+1];h!==0&&(e[l*2]=Ka(n[h]++,h))}},Vr=()=>{let e,i,t,n,r;const a=new Array(We+1);for(t=0,n=0;n<un-1;n++)for(vn[n]=t,e=0;e<1<<nn[n];e++)Bt[t++]=n;for(Bt[t-1]=n,r=0,n=0;n<16;n++)for(ai[n]=r,e=0;e<1<<ni[n];e++)Lt[r++]=n;for(r>>=7;n<lt;n++)for(ai[n]=r<<7,e=0;e<1<<ni[n]-7;e++)Lt[256+r++]=n;for(i=0;i<=We;i++)a[i]=0;for(e=0;e<=143;)Me[e*2+1]=8,e++,a[8]++;for(;e<=255;)Me[e*2+1]=9,e++,a[9]++;for(;e<=279;)Me[e*2+1]=7,e++,a[7]++;for(;e<=287;)Me[e*2+1]=8,e++,a[8]++;for(Va(Me,Pt+1,a),e=0;e<lt;e++)Tt[e*2+1]=5,Tt[e*2]=Ka(e,5);Ga=new Li(Me,nn,Ut+1,Pt,We),ja=new Li(Tt,ni,0,lt,We),Wa=new Li(new Array(0),jr,0,_n,Gr)},Xa=e=>{let i;for(i=0;i<Pt;i++)e.dyn_ltree[i*2]=0;for(i=0;i<lt;i++)e.dyn_dtree[i*2]=0;for(i=0;i<_n;i++)e.bl_tree[i*2]=0;e.dyn_ltree[gn*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ja=e=>{e.bi_valid>8?Mt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Kn=(e,i,t,n)=>{const r=i*2,a=t*2;return e[r]<e[a]||e[r]===e[a]&&n[i]<=n[t]},Mi=(e,i,t)=>{const n=e.heap[t];let r=t<<1;for(;r<=e.heap_len&&(r<e.heap_len&&Kn(i,e.heap[r+1],e.heap[r],e.depth)&&r++,!Kn(i,n,e.heap[r],e.depth));)e.heap[t]=e.heap[r],t=r,r<<=1;e.heap[t]=n},Vn=(e,i,t)=>{let n,r,a=0,l,h;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+a++]&255,n+=(e.pending_buf[e.sym_buf+a++]&255)<<8,r=e.pending_buf[e.sym_buf+a++],n===0?Ce(e,r,i):(l=Bt[r],Ce(e,l+Ut+1,i),h=nn[l],h!==0&&(r-=vn[l],ce(e,r,h)),n--,l=qa(n),Ce(e,l,t),h=ni[l],h!==0&&(n-=ai[l],ce(e,n,h)));while(a<e.sym_next);Ce(e,gn,i)},an=(e,i)=>{const t=i.dyn_tree,n=i.stat_desc.static_tree,r=i.stat_desc.has_stree,a=i.stat_desc.elems;let l,h,m=-1,f;for(e.heap_len=0,e.heap_max=Na,l=0;l<a;l++)t[l*2]!==0?(e.heap[++e.heap_len]=m=l,e.depth[l]=0):t[l*2+1]=0;for(;e.heap_len<2;)f=e.heap[++e.heap_len]=m<2?++m:0,t[f*2]=1,e.depth[f]=0,e.opt_len--,r&&(e.static_len-=n[f*2+1]);for(i.max_code=m,l=e.heap_len>>1;l>=1;l--)Mi(e,t,l);f=a;do l=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Mi(e,t,1),h=e.heap[1],e.heap[--e.heap_max]=l,e.heap[--e.heap_max]=h,t[f*2]=t[l*2]+t[h*2],e.depth[f]=(e.depth[l]>=e.depth[h]?e.depth[l]:e.depth[h])+1,t[l*2+1]=t[h*2+1]=f,e.heap[1]=f++,Mi(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Kr(e,i),Va(t,m,e.bl_count)},Xn=(e,i,t)=>{let n,r=-1,a,l=i[0*2+1],h=0,m=7,f=4;for(l===0&&(m=138,f=3),i[(t+1)*2+1]=65535,n=0;n<=t;n++)a=l,l=i[(n+1)*2+1],!(++h<m&&a===l)&&(h<f?e.bl_tree[a*2]+=h:a!==0?(a!==r&&e.bl_tree[a*2]++,e.bl_tree[Ua*2]++):h<=10?e.bl_tree[Za*2]++:e.bl_tree[Ha*2]++,h=0,r=a,l===0?(m=138,f=3):a===l?(m=6,f=3):(m=7,f=4))},Jn=(e,i,t)=>{let n,r=-1,a,l=i[0*2+1],h=0,m=7,f=4;for(l===0&&(m=138,f=3),n=0;n<=t;n++)if(a=l,l=i[(n+1)*2+1],!(++h<m&&a===l)){if(h<f)do Ce(e,a,e.bl_tree);while(--h!==0);else a!==0?(a!==r&&(Ce(e,a,e.bl_tree),h--),Ce(e,Ua,e.bl_tree),ce(e,h-3,2)):h<=10?(Ce(e,Za,e.bl_tree),ce(e,h-3,3)):(Ce(e,Ha,e.bl_tree),ce(e,h-11,7));h=0,r=a,l===0?(m=138,f=3):a===l?(m=6,f=3):(m=7,f=4)}},Xr=e=>{let i;for(Xn(e,e.dyn_ltree,e.l_desc.max_code),Xn(e,e.dyn_dtree,e.d_desc.max_code),an(e,e.bl_desc),i=_n-1;i>=3&&e.bl_tree[Qa[i]*2+1]===0;i--);return e.opt_len+=3*(i+1)+5+5+4,i},Jr=(e,i,t,n)=>{let r;for(ce(e,i-257,5),ce(e,t-1,5),ce(e,n-4,4),r=0;r<n;r++)ce(e,e.bl_tree[Qa[r]*2+1],3);Jn(e,e.dyn_ltree,i-1),Jn(e,e.dyn_dtree,t-1)},Yr=e=>{let i=4093624447,t;for(t=0;t<=31;t++,i>>>=1)if(i&1&&e.dyn_ltree[t*2]!==0)return Wn;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return qn;for(t=32;t<Ut;t++)if(e.dyn_ltree[t*2]!==0)return qn;return Wn};let Yn=!1;const eo=e=>{Yn||(Vr(),Yn=!0),e.l_desc=new Bi(e.dyn_ltree,Ga),e.d_desc=new Bi(e.dyn_dtree,ja),e.bl_desc=new Bi(e.bl_tree,Wa),e.bi_buf=0,e.bi_valid=0,Xa(e)},Ya=(e,i,t,n)=>{ce(e,(Ur<<1)+(n?1:0),3),Ja(e),Mt(e,t),Mt(e,~t),t&&e.pending_buf.set(e.window.subarray(i,i+t),e.pending),e.pending+=t},to=e=>{ce(e,Fa<<1,3),Ce(e,gn,Me),qr(e)},io=(e,i,t,n)=>{let r,a,l=0;e.level>0?(e.strm.data_type===Nr&&(e.strm.data_type=Yr(e)),an(e,e.l_desc),an(e,e.d_desc),l=Xr(e),r=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=r&&(r=a)):r=a=t+5,t+4<=r&&i!==-1?Ya(e,i,t,n):e.strategy===Fr||a===r?(ce(e,(Fa<<1)+(n?1:0),3),Vn(e,Me,Tt)):(ce(e,(Zr<<1)+(n?1:0),3),Jr(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),Vn(e,e.dyn_ltree,e.dyn_dtree)),Xa(e),n&&Ja(e)},no=(e,i,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=i,e.pending_buf[e.sym_buf+e.sym_next++]=i>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,i===0?e.dyn_ltree[t*2]++:(e.matches++,i--,e.dyn_ltree[(Bt[t]+Ut+1)*2]++,e.dyn_dtree[qa(i)*2]++),e.sym_next===e.sym_end);var ao=eo,ro=Ya,oo=io,so=no,lo=to,fo={_tr_init:ao,_tr_stored_block:ro,_tr_flush_block:oo,_tr_tally:so,_tr_align:lo};const ho=(e,i,t,n)=>{let r=e&65535|0,a=e>>>16&65535|0,l=0;for(;t!==0;){l=t>2e3?2e3:t,t-=l;do r=r+i[n++]|0,a=a+r|0;while(--l);r%=65521,a%=65521}return r|a<<16|0};var $t=ho;const co=()=>{let e,i=[];for(var t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;i[t]=e}return i},uo=new Uint32Array(co()),_o=(e,i,t,n)=>{const r=uo,a=n+t;e^=-1;for(let l=n;l<a;l++)e=e>>>8^r[(e^i[l])&255];return e^-1};var ae=_o,Ve={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},dt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:go,_tr_stored_block:rn,_tr_flush_block:vo,_tr_tally:Ze,_tr_align:po}=fo,{Z_NO_FLUSH:He,Z_PARTIAL_FLUSH:wo,Z_FULL_FLUSH:mo,Z_FINISH:be,Z_BLOCK:ea,Z_OK:re,Z_STREAM_END:ta,Z_STREAM_ERROR:De,Z_DATA_ERROR:bo,Z_BUF_ERROR:$i,Z_DEFAULT_COMPRESSION:yo,Z_FILTERED:xo,Z_HUFFMAN_ONLY:Xt,Z_RLE:Eo,Z_FIXED:ko,Z_DEFAULT_STRATEGY:So,Z_UNKNOWN:Ro,Z_DEFLATED:si}=dt,Ao=9,Co=15,Do=8,To=29,Io=256,on=Io+1+To,Oo=30,Po=19,Lo=2*on+1,Bo=15,H=3,Ue=258,Te=Ue+H+1,Mo=32,ft=42,pn=57,sn=69,ln=73,fn=91,hn=103,qe=113,Ct=666,fe=1,ut=2,Xe=3,_t=4,$o=3,Ke=(e,i)=>(e.msg=Ve[i],i),ia=e=>e*2-(e>4?9:0),Ne=e=>{let i=e.length;for(;--i>=0;)e[i]=0},zo=e=>{let i,t,n,r=e.w_size;i=e.hash_size,n=i;do t=e.head[--n],e.head[n]=t>=r?t-r:0;while(--i);i=r,n=i;do t=e.prev[--n],e.prev[n]=t>=r?t-r:0;while(--i)};let Fo=(e,i,t)=>(i<<e.hash_shift^t)&e.hash_mask,Qe=Fo;const ve=e=>{const i=e.state;let t=i.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(i.pending_buf.subarray(i.pending_out,i.pending_out+t),e.next_out),e.next_out+=t,i.pending_out+=t,e.total_out+=t,e.avail_out-=t,i.pending-=t,i.pending===0&&(i.pending_out=0))},pe=(e,i)=>{vo(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,i),e.block_start=e.strstart,ve(e.strm)},V=(e,i)=>{e.pending_buf[e.pending++]=i},St=(e,i)=>{e.pending_buf[e.pending++]=i>>>8&255,e.pending_buf[e.pending++]=i&255},cn=(e,i,t,n)=>{let r=e.avail_in;return r>n&&(r=n),r===0?0:(e.avail_in-=r,i.set(e.input.subarray(e.next_in,e.next_in+r),t),e.state.wrap===1?e.adler=$t(e.adler,i,r,t):e.state.wrap===2&&(e.adler=ae(e.adler,i,r,t)),e.next_in+=r,e.total_in+=r,r)},er=(e,i)=>{let t=e.max_chain_length,n=e.strstart,r,a,l=e.prev_length,h=e.nice_match;const m=e.strstart>e.w_size-Te?e.strstart-(e.w_size-Te):0,f=e.window,g=e.w_mask,p=e.prev,u=e.strstart+Ue;let o=f[n+l-1],s=f[n+l];e.prev_length>=e.good_match&&(t>>=2),h>e.lookahead&&(h=e.lookahead);do if(r=i,!(f[r+l]!==s||f[r+l-1]!==o||f[r]!==f[n]||f[++r]!==f[n+1])){n+=2,r++;do;while(f[++n]===f[++r]&&f[++n]===f[++r]&&f[++n]===f[++r]&&f[++n]===f[++r]&&f[++n]===f[++r]&&f[++n]===f[++r]&&f[++n]===f[++r]&&f[++n]===f[++r]&&n<u);if(a=Ue-(u-n),n=u-Ue,a>l){if(e.match_start=i,l=a,a>=h)break;o=f[n+l-1],s=f[n+l]}}while((i=p[i&g])>m&&--t!==0);return l<=e.lookahead?l:e.lookahead},ht=e=>{const i=e.w_size;let t,n,r;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-Te)&&(e.window.set(e.window.subarray(i,i+i-n),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),zo(e),n+=i),e.strm.avail_in===0)break;if(t=cn(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=H)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=Qe(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=Qe(e,e.ins_h,e.window[r+H-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<H)););}while(e.lookahead<Te&&e.strm.avail_in!==0)},tr=(e,i)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,r,a,l=0,h=e.strm.avail_in;do{if(n=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>a&&(n=a),n<t&&(n===0&&i!==be||i===He||n!==r+e.strm.avail_in)))break;l=i===be&&n===r+e.strm.avail_in?1:0,rn(e,0,0,l),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,ve(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(cn(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(l===0);return h-=e.strm.avail_in,h&&(h>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=h&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-h,e.strm.next_in),e.strstart),e.strstart+=h,e.insert+=h>e.w_size-e.insert?e.w_size-e.insert:h),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),l?_t:i!==He&&i!==be&&e.strm.avail_in===0&&e.strstart===e.block_start?ut:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(cn(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,t=a>e.w_size?e.w_size:a,r=e.strstart-e.block_start,(r>=t||(r||i===be)&&i!==He&&e.strm.avail_in===0&&r<=a)&&(n=r>a?a:r,l=i===be&&e.strm.avail_in===0&&n===r?1:0,rn(e,e.block_start,n,l),e.block_start+=n,ve(e.strm)),l?Xe:fe)},zi=(e,i)=>{let t,n;for(;;){if(e.lookahead<Te){if(ht(e),e.lookahead<Te&&i===He)return fe;if(e.lookahead===0)break}if(t=0,e.lookahead>=H&&(e.ins_h=Qe(e,e.ins_h,e.window[e.strstart+H-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-Te&&(e.match_length=er(e,t)),e.match_length>=H)if(n=Ze(e,e.strstart-e.match_start,e.match_length-H),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=H){e.match_length--;do e.strstart++,e.ins_h=Qe(e,e.ins_h,e.window[e.strstart+H-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Qe(e,e.ins_h,e.window[e.strstart+1]);else n=Ze(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(pe(e,!1),e.strm.avail_out===0))return fe}return e.insert=e.strstart<H-1?e.strstart:H-1,i===be?(pe(e,!0),e.strm.avail_out===0?Xe:_t):e.sym_next&&(pe(e,!1),e.strm.avail_out===0)?fe:ut},rt=(e,i)=>{let t,n,r;for(;;){if(e.lookahead<Te){if(ht(e),e.lookahead<Te&&i===He)return fe;if(e.lookahead===0)break}if(t=0,e.lookahead>=H&&(e.ins_h=Qe(e,e.ins_h,e.window[e.strstart+H-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=H-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-Te&&(e.match_length=er(e,t),e.match_length<=5&&(e.strategy===xo||e.match_length===H&&e.strstart-e.match_start>4096)&&(e.match_length=H-1)),e.prev_length>=H&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-H,n=Ze(e,e.strstart-1-e.prev_match,e.prev_length-H),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=Qe(e,e.ins_h,e.window[e.strstart+H-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=H-1,e.strstart++,n&&(pe(e,!1),e.strm.avail_out===0))return fe}else if(e.match_available){if(n=Ze(e,0,e.window[e.strstart-1]),n&&pe(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return fe}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Ze(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<H-1?e.strstart:H-1,i===be?(pe(e,!0),e.strm.avail_out===0?Xe:_t):e.sym_next&&(pe(e,!1),e.strm.avail_out===0)?fe:ut},No=(e,i)=>{let t,n,r,a;const l=e.window;for(;;){if(e.lookahead<=Ue){if(ht(e),e.lookahead<=Ue&&i===He)return fe;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=H&&e.strstart>0&&(r=e.strstart-1,n=l[r],n===l[++r]&&n===l[++r]&&n===l[++r])){a=e.strstart+Ue;do;while(n===l[++r]&&n===l[++r]&&n===l[++r]&&n===l[++r]&&n===l[++r]&&n===l[++r]&&n===l[++r]&&n===l[++r]&&r<a);e.match_length=Ue-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=H?(t=Ze(e,1,e.match_length-H),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=Ze(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(pe(e,!1),e.strm.avail_out===0))return fe}return e.insert=0,i===be?(pe(e,!0),e.strm.avail_out===0?Xe:_t):e.sym_next&&(pe(e,!1),e.strm.avail_out===0)?fe:ut},Uo=(e,i)=>{let t;for(;;){if(e.lookahead===0&&(ht(e),e.lookahead===0)){if(i===He)return fe;break}if(e.match_length=0,t=Ze(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(pe(e,!1),e.strm.avail_out===0))return fe}return e.insert=0,i===be?(pe(e,!0),e.strm.avail_out===0?Xe:_t):e.sym_next&&(pe(e,!1),e.strm.avail_out===0)?fe:ut};function Re(e,i,t,n,r){this.good_length=e,this.max_lazy=i,this.nice_length=t,this.max_chain=n,this.func=r}const Dt=[new Re(0,0,0,0,tr),new Re(4,4,8,4,zi),new Re(4,5,16,8,zi),new Re(4,6,32,32,zi),new Re(4,4,16,16,rt),new Re(8,16,32,32,rt),new Re(8,16,128,128,rt),new Re(8,32,128,256,rt),new Re(32,128,258,1024,rt),new Re(32,258,258,4096,rt)],Zo=e=>{e.window_size=2*e.w_size,Ne(e.head),e.max_lazy_match=Dt[e.level].max_lazy,e.good_match=Dt[e.level].good_length,e.nice_match=Dt[e.level].nice_length,e.max_chain_length=Dt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=H-1,e.match_available=0,e.ins_h=0};function Ho(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=si,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Lo*2),this.dyn_dtree=new Uint16Array((2*Oo+1)*2),this.bl_tree=new Uint16Array((2*Po+1)*2),Ne(this.dyn_ltree),Ne(this.dyn_dtree),Ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Bo+1),this.heap=new Uint16Array(2*on+1),Ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*on+1),Ne(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Zt=e=>{if(!e)return 1;const i=e.state;return!i||i.strm!==e||i.status!==ft&&i.status!==pn&&i.status!==sn&&i.status!==ln&&i.status!==fn&&i.status!==hn&&i.status!==qe&&i.status!==Ct?1:0},ir=e=>{if(Zt(e))return Ke(e,De);e.total_in=e.total_out=0,e.data_type=Ro;const i=e.state;return i.pending=0,i.pending_out=0,i.wrap<0&&(i.wrap=-i.wrap),i.status=i.wrap===2?pn:i.wrap?ft:qe,e.adler=i.wrap===2?0:1,i.last_flush=-2,go(i),re},nr=e=>{const i=ir(e);return i===re&&Zo(e.state),i},Qo=(e,i)=>Zt(e)||e.state.wrap!==2?De:(e.state.gzhead=i,re),ar=(e,i,t,n,r,a)=>{if(!e)return De;let l=1;if(i===yo&&(i=6),n<0?(l=0,n=-n):n>15&&(l=2,n-=16),r<1||r>Ao||t!==si||n<8||n>15||i<0||i>9||a<0||a>ko||n===8&&l!==1)return Ke(e,De);n===8&&(n=9);const h=new Ho;return e.state=h,h.strm=e,h.status=ft,h.wrap=l,h.gzhead=null,h.w_bits=n,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=r+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+H-1)/H),h.window=new Uint8Array(h.w_size*2),h.head=new Uint16Array(h.hash_size),h.prev=new Uint16Array(h.w_size),h.lit_bufsize=1<<r+6,h.pending_buf_size=h.lit_bufsize*4,h.pending_buf=new Uint8Array(h.pending_buf_size),h.sym_buf=h.lit_bufsize,h.sym_end=(h.lit_bufsize-1)*3,h.level=i,h.strategy=a,h.method=t,nr(e)},Go=(e,i)=>ar(e,i,si,Co,Do,So),jo=(e,i)=>{if(Zt(e)||i>ea||i<0)return e?Ke(e,De):De;const t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===Ct&&i!==be)return Ke(e,e.avail_out===0?$i:De);const n=t.last_flush;if(t.last_flush=i,t.pending!==0){if(ve(e),e.avail_out===0)return t.last_flush=-1,re}else if(e.avail_in===0&&ia(i)<=ia(n)&&i!==be)return Ke(e,$i);if(t.status===Ct&&e.avail_in!==0)return Ke(e,$i);if(t.status===ft&&t.wrap===0&&(t.status=qe),t.status===ft){let r=si+(t.w_bits-8<<4)<<8,a=-1;if(t.strategy>=Xt||t.level<2?a=0:t.level<6?a=1:t.level===6?a=2:a=3,r|=a<<6,t.strstart!==0&&(r|=Mo),r+=31-r%31,St(t,r),t.strstart!==0&&(St(t,e.adler>>>16),St(t,e.adler&65535)),e.adler=1,t.status=qe,ve(e),t.pending!==0)return t.last_flush=-1,re}if(t.status===pn){if(e.adler=0,V(t,31),V(t,139),V(t,8),t.gzhead)V(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),V(t,t.gzhead.time&255),V(t,t.gzhead.time>>8&255),V(t,t.gzhead.time>>16&255),V(t,t.gzhead.time>>24&255),V(t,t.level===9?2:t.strategy>=Xt||t.level<2?4:0),V(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(V(t,t.gzhead.extra.length&255),V(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=ae(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=sn;else if(V(t,0),V(t,0),V(t,0),V(t,0),V(t,0),V(t,t.level===9?2:t.strategy>=Xt||t.level<2?4:0),V(t,$o),t.status=qe,ve(e),t.pending!==0)return t.last_flush=-1,re}if(t.status===sn){if(t.gzhead.extra){let r=t.pending,a=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let h=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+h),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>r&&(e.adler=ae(e.adler,t.pending_buf,t.pending-r,r)),t.gzindex+=h,ve(e),t.pending!==0)return t.last_flush=-1,re;r=0,a-=h}let l=new Uint8Array(t.gzhead.extra);t.pending_buf.set(l.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>r&&(e.adler=ae(e.adler,t.pending_buf,t.pending-r,r)),t.gzindex=0}t.status=ln}if(t.status===ln){if(t.gzhead.name){let r=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>r&&(e.adler=ae(e.adler,t.pending_buf,t.pending-r,r)),ve(e),t.pending!==0)return t.last_flush=-1,re;r=0}t.gzindex<t.gzhead.name.length?a=t.gzhead.name.charCodeAt(t.gzindex++)&255:a=0,V(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>r&&(e.adler=ae(e.adler,t.pending_buf,t.pending-r,r)),t.gzindex=0}t.status=fn}if(t.status===fn){if(t.gzhead.comment){let r=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>r&&(e.adler=ae(e.adler,t.pending_buf,t.pending-r,r)),ve(e),t.pending!==0)return t.last_flush=-1,re;r=0}t.gzindex<t.gzhead.comment.length?a=t.gzhead.comment.charCodeAt(t.gzindex++)&255:a=0,V(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>r&&(e.adler=ae(e.adler,t.pending_buf,t.pending-r,r))}t.status=hn}if(t.status===hn){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(ve(e),t.pending!==0))return t.last_flush=-1,re;V(t,e.adler&255),V(t,e.adler>>8&255),e.adler=0}if(t.status=qe,ve(e),t.pending!==0)return t.last_flush=-1,re}if(e.avail_in!==0||t.lookahead!==0||i!==He&&t.status!==Ct){let r=t.level===0?tr(t,i):t.strategy===Xt?Uo(t,i):t.strategy===Eo?No(t,i):Dt[t.level].func(t,i);if((r===Xe||r===_t)&&(t.status=Ct),r===fe||r===Xe)return e.avail_out===0&&(t.last_flush=-1),re;if(r===ut&&(i===wo?po(t):i!==ea&&(rn(t,0,0,!1),i===mo&&(Ne(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),ve(e),e.avail_out===0))return t.last_flush=-1,re}return i!==be?re:t.wrap<=0?ta:(t.wrap===2?(V(t,e.adler&255),V(t,e.adler>>8&255),V(t,e.adler>>16&255),V(t,e.adler>>24&255),V(t,e.total_in&255),V(t,e.total_in>>8&255),V(t,e.total_in>>16&255),V(t,e.total_in>>24&255)):(St(t,e.adler>>>16),St(t,e.adler&65535)),ve(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?re:ta)},Wo=e=>{if(Zt(e))return De;const i=e.state.status;return e.state=null,i===qe?Ke(e,bo):re},qo=(e,i)=>{let t=i.length;if(Zt(e))return De;const n=e.state,r=n.wrap;if(r===2||r===1&&n.status!==ft||n.lookahead)return De;if(r===1&&(e.adler=$t(e.adler,i,t,0)),n.wrap=0,t>=n.w_size){r===0&&(Ne(n.head),n.strstart=0,n.block_start=0,n.insert=0);let m=new Uint8Array(n.w_size);m.set(i.subarray(t-n.w_size,t),0),i=m,t=n.w_size}const a=e.avail_in,l=e.next_in,h=e.input;for(e.avail_in=t,e.next_in=0,e.input=i,ht(n);n.lookahead>=H;){let m=n.strstart,f=n.lookahead-(H-1);do n.ins_h=Qe(n,n.ins_h,n.window[m+H-1]),n.prev[m&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=m,m++;while(--f);n.strstart=m,n.lookahead=H-1,ht(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=H-1,n.match_available=0,e.next_in=l,e.input=h,e.avail_in=a,n.wrap=r,re};var Ko=Go,Vo=ar,Xo=nr,Jo=ir,Yo=Qo,es=jo,ts=Wo,is=qo,ns="pako deflate (from Nodeca project)",It={deflateInit:Ko,deflateInit2:Vo,deflateReset:Xo,deflateResetKeep:Jo,deflateSetHeader:Yo,deflate:es,deflateEnd:ts,deflateSetDictionary:is,deflateInfo:ns};const as=(e,i)=>Object.prototype.hasOwnProperty.call(e,i);var rs=function(e){const i=Array.prototype.slice.call(arguments,1);for(;i.length;){const t=i.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)as(t,n)&&(e[n]=t[n])}}return e},os=e=>{let i=0;for(let n=0,r=e.length;n<r;n++)i+=e[n].length;const t=new Uint8Array(i);for(let n=0,r=0,a=e.length;n<a;n++){let l=e[n];t.set(l,r),r+=l.length}return t},li={assign:rs,flattenChunks:os};let rr=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{rr=!1}const zt=new Uint8Array(256);for(let e=0;e<256;e++)zt[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;zt[254]=zt[254]=1;var ss=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let i,t,n,r,a,l=e.length,h=0;for(r=0;r<l;r++)t=e.charCodeAt(r),(t&64512)===55296&&r+1<l&&(n=e.charCodeAt(r+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),r++)),h+=t<128?1:t<2048?2:t<65536?3:4;for(i=new Uint8Array(h),a=0,r=0;a<h;r++)t=e.charCodeAt(r),(t&64512)===55296&&r+1<l&&(n=e.charCodeAt(r+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),r++)),t<128?i[a++]=t:t<2048?(i[a++]=192|t>>>6,i[a++]=128|t&63):t<65536?(i[a++]=224|t>>>12,i[a++]=128|t>>>6&63,i[a++]=128|t&63):(i[a++]=240|t>>>18,i[a++]=128|t>>>12&63,i[a++]=128|t>>>6&63,i[a++]=128|t&63);return i};const ls=(e,i)=>{if(i<65534&&e.subarray&&rr)return String.fromCharCode.apply(null,e.length===i?e:e.subarray(0,i));let t="";for(let n=0;n<i;n++)t+=String.fromCharCode(e[n]);return t};var fs=(e,i)=>{const t=i||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,i));let n,r;const a=new Array(t*2);for(r=0,n=0;n<t;){let l=e[n++];if(l<128){a[r++]=l;continue}let h=zt[l];if(h>4){a[r++]=65533,n+=h-1;continue}for(l&=h===2?31:h===3?15:7;h>1&&n<t;)l=l<<6|e[n++]&63,h--;if(h>1){a[r++]=65533;continue}l<65536?a[r++]=l:(l-=65536,a[r++]=55296|l>>10&1023,a[r++]=56320|l&1023)}return ls(a,r)},hs=(e,i)=>{i=i||e.length,i>e.length&&(i=e.length);let t=i-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?i:t+zt[e[t]]>i?t:i},Ft={string2buf:ss,buf2string:fs,utf8border:hs};function cs(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var or=cs;const sr=Object.prototype.toString,{Z_NO_FLUSH:ds,Z_SYNC_FLUSH:us,Z_FULL_FLUSH:_s,Z_FINISH:gs,Z_OK:ri,Z_STREAM_END:vs,Z_DEFAULT_COMPRESSION:ps,Z_DEFAULT_STRATEGY:ws,Z_DEFLATED:ms}=dt;function Ht(e){this.options=li.assign({level:ps,method:ms,chunkSize:16384,windowBits:15,memLevel:8,strategy:ws},e||{});let i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new or,this.strm.avail_out=0;let t=It.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(t!==ri)throw new Error(Ve[t]);if(i.header&&It.deflateSetHeader(this.strm,i.header),i.dictionary){let n;if(typeof i.dictionary=="string"?n=Ft.string2buf(i.dictionary):sr.call(i.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(i.dictionary):n=i.dictionary,t=It.deflateSetDictionary(this.strm,n),t!==ri)throw new Error(Ve[t]);this._dict_set=!0}}Ht.prototype.push=function(e,i){const t=this.strm,n=this.options.chunkSize;let r,a;if(this.ended)return!1;for(i===~~i?a=i:a=i===!0?gs:ds,typeof e=="string"?t.input=Ft.string2buf(e):sr.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(a===us||a===_s)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(r=It.deflate(t,a),r===vs)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),r=It.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===ri;if(t.avail_out===0){this.onData(t.output);continue}if(a>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Ht.prototype.onData=function(e){this.chunks.push(e)};Ht.prototype.onEnd=function(e){e===ri&&(this.result=li.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function wn(e,i){const t=new Ht(i);if(t.push(e,!0),t.err)throw t.msg||Ve[t.err];return t.result}function bs(e,i){return i=i||{},i.raw=!0,wn(e,i)}function ys(e,i){return i=i||{},i.gzip=!0,wn(e,i)}var xs=Ht,Es=wn,ks=bs,Ss=ys,Rs=dt,As={Deflate:xs,deflate:Es,deflateRaw:ks,gzip:Ss,constants:Rs};const Jt=16209,Cs=16191;var Ds=function(i,t){let n,r,a,l,h,m,f,g,p,u,o,s,c,_,d,v,y,w,x,C,b,E,S,k;const A=i.state;n=i.next_in,S=i.input,r=n+(i.avail_in-5),a=i.next_out,k=i.output,l=a-(t-i.avail_out),h=a+(i.avail_out-257),m=A.dmax,f=A.wsize,g=A.whave,p=A.wnext,u=A.window,o=A.hold,s=A.bits,c=A.lencode,_=A.distcode,d=(1<<A.lenbits)-1,v=(1<<A.distbits)-1;e:do{s<15&&(o+=S[n++]<<s,s+=8,o+=S[n++]<<s,s+=8),y=c[o&d];t:for(;;){if(w=y>>>24,o>>>=w,s-=w,w=y>>>16&255,w===0)k[a++]=y&65535;else if(w&16){x=y&65535,w&=15,w&&(s<w&&(o+=S[n++]<<s,s+=8),x+=o&(1<<w)-1,o>>>=w,s-=w),s<15&&(o+=S[n++]<<s,s+=8,o+=S[n++]<<s,s+=8),y=_[o&v];i:for(;;){if(w=y>>>24,o>>>=w,s-=w,w=y>>>16&255,w&16){if(C=y&65535,w&=15,s<w&&(o+=S[n++]<<s,s+=8,s<w&&(o+=S[n++]<<s,s+=8)),C+=o&(1<<w)-1,C>m){i.msg="invalid distance too far back",A.mode=Jt;break e}if(o>>>=w,s-=w,w=a-l,C>w){if(w=C-w,w>g&&A.sane){i.msg="invalid distance too far back",A.mode=Jt;break e}if(b=0,E=u,p===0){if(b+=f-w,w<x){x-=w;do k[a++]=u[b++];while(--w);b=a-C,E=k}}else if(p<w){if(b+=f+p-w,w-=p,w<x){x-=w;do k[a++]=u[b++];while(--w);if(b=0,p<x){w=p,x-=w;do k[a++]=u[b++];while(--w);b=a-C,E=k}}}else if(b+=p-w,w<x){x-=w;do k[a++]=u[b++];while(--w);b=a-C,E=k}for(;x>2;)k[a++]=E[b++],k[a++]=E[b++],k[a++]=E[b++],x-=3;x&&(k[a++]=E[b++],x>1&&(k[a++]=E[b++]))}else{b=a-C;do k[a++]=k[b++],k[a++]=k[b++],k[a++]=k[b++],x-=3;while(x>2);x&&(k[a++]=k[b++],x>1&&(k[a++]=k[b++]))}}else if(w&64){i.msg="invalid distance code",A.mode=Jt;break e}else{y=_[(y&65535)+(o&(1<<w)-1)];continue i}break}}else if(w&64)if(w&32){A.mode=Cs;break e}else{i.msg="invalid literal/length code",A.mode=Jt;break e}else{y=c[(y&65535)+(o&(1<<w)-1)];continue t}break}}while(n<r&&a<h);x=s>>3,n-=x,s-=x<<3,o&=(1<<s)-1,i.next_in=n,i.next_out=a,i.avail_in=n<r?5+(r-n):5-(n-r),i.avail_out=a<h?257+(h-a):257-(a-h),A.hold=o,A.bits=s};const ot=15,na=852,aa=592,ra=0,Fi=1,oa=2,Ts=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Is=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Os=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ps=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ls=(e,i,t,n,r,a,l,h)=>{const m=h.bits;let f=0,g=0,p=0,u=0,o=0,s=0,c=0,_=0,d=0,v=0,y,w,x,C,b,E=null,S;const k=new Uint16Array(ot+1),A=new Uint16Array(ot+1);let N=null,B,M,D;for(f=0;f<=ot;f++)k[f]=0;for(g=0;g<n;g++)k[i[t+g]]++;for(o=m,u=ot;u>=1&&k[u]===0;u--);if(o>u&&(o=u),u===0)return r[a++]=1<<24|64<<16|0,r[a++]=1<<24|64<<16|0,h.bits=1,0;for(p=1;p<u&&k[p]===0;p++);for(o<p&&(o=p),_=1,f=1;f<=ot;f++)if(_<<=1,_-=k[f],_<0)return-1;if(_>0&&(e===ra||u!==1))return-1;for(A[1]=0,f=1;f<ot;f++)A[f+1]=A[f]+k[f];for(g=0;g<n;g++)i[t+g]!==0&&(l[A[i[t+g]]++]=g);if(e===ra?(E=N=l,S=20):e===Fi?(E=Ts,N=Is,S=257):(E=Os,N=Ps,S=0),v=0,g=0,f=p,b=a,s=o,c=0,x=-1,d=1<<o,C=d-1,e===Fi&&d>na||e===oa&&d>aa)return 1;for(;;){B=f-c,l[g]+1<S?(M=0,D=l[g]):l[g]>=S?(M=N[l[g]-S],D=E[l[g]-S]):(M=96,D=0),y=1<<f-c,w=1<<s,p=w;do w-=y,r[b+(v>>c)+w]=B<<24|M<<16|D|0;while(w!==0);for(y=1<<f-1;v&y;)y>>=1;if(y!==0?(v&=y-1,v+=y):v=0,g++,--k[f]===0){if(f===u)break;f=i[t+l[g]]}if(f>o&&(v&C)!==x){for(c===0&&(c=o),b+=p,s=f-c,_=1<<s;s+c<u&&(_-=k[s+c],!(_<=0));)s++,_<<=1;if(d+=1<<s,e===Fi&&d>na||e===oa&&d>aa)return 1;x=v&C,r[x]=o<<24|s<<16|b-a|0}}return v!==0&&(r[b+v]=f-c<<24|64<<16|0),h.bits=o,0};var Ot=Ls;const Bs=0,lr=1,fr=2,{Z_FINISH:sa,Z_BLOCK:Ms,Z_TREES:Yt,Z_OK:Je,Z_STREAM_END:$s,Z_NEED_DICT:zs,Z_STREAM_ERROR:ye,Z_DATA_ERROR:hr,Z_MEM_ERROR:cr,Z_BUF_ERROR:Fs,Z_DEFLATED:la}=dt,fi=16180,fa=16181,ha=16182,ca=16183,da=16184,ua=16185,_a=16186,ga=16187,va=16188,pa=16189,oi=16190,Be=16191,Ni=16192,wa=16193,Ui=16194,ma=16195,ba=16196,ya=16197,xa=16198,ei=16199,ti=16200,Ea=16201,ka=16202,Sa=16203,Ra=16204,Aa=16205,Zi=16206,Ca=16207,Da=16208,ee=16209,dr=16210,ur=16211,Ns=852,Us=592,Zs=15,Hs=Zs,Ta=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Qs(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ye=e=>{if(!e)return 1;const i=e.state;return!i||i.strm!==e||i.mode<fi||i.mode>ur?1:0},_r=e=>{if(Ye(e))return ye;const i=e.state;return e.total_in=e.total_out=i.total=0,e.msg="",i.wrap&&(e.adler=i.wrap&1),i.mode=fi,i.last=0,i.havedict=0,i.flags=-1,i.dmax=32768,i.head=null,i.hold=0,i.bits=0,i.lencode=i.lendyn=new Int32Array(Ns),i.distcode=i.distdyn=new Int32Array(Us),i.sane=1,i.back=-1,Je},gr=e=>{if(Ye(e))return ye;const i=e.state;return i.wsize=0,i.whave=0,i.wnext=0,_r(e)},vr=(e,i)=>{let t;if(Ye(e))return ye;const n=e.state;return i<0?(t=0,i=-i):(t=(i>>4)+5,i<48&&(i&=15)),i&&(i<8||i>15)?ye:(n.window!==null&&n.wbits!==i&&(n.window=null),n.wrap=t,n.wbits=i,gr(e))},pr=(e,i)=>{if(!e)return ye;const t=new Qs;e.state=t,t.strm=e,t.window=null,t.mode=fi;const n=vr(e,i);return n!==Je&&(e.state=null),n},Gs=e=>pr(e,Hs);let Ia=!0,Hi,Qi;const js=e=>{if(Ia){Hi=new Int32Array(512),Qi=new Int32Array(32);let i=0;for(;i<144;)e.lens[i++]=8;for(;i<256;)e.lens[i++]=9;for(;i<280;)e.lens[i++]=7;for(;i<288;)e.lens[i++]=8;for(Ot(lr,e.lens,0,288,Hi,0,e.work,{bits:9}),i=0;i<32;)e.lens[i++]=5;Ot(fr,e.lens,0,32,Qi,0,e.work,{bits:5}),Ia=!1}e.lencode=Hi,e.lenbits=9,e.distcode=Qi,e.distbits=5},wr=(e,i,t,n)=>{let r;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(i.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>n&&(r=n),a.window.set(i.subarray(t-n,t-n+r),a.wnext),n-=r,n?(a.window.set(i.subarray(t-n,t),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0},Ws=(e,i)=>{let t,n,r,a,l,h,m,f,g,p,u,o,s,c,_=0,d,v,y,w,x,C,b,E;const S=new Uint8Array(4);let k,A;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ye(e)||!e.output||!e.input&&e.avail_in!==0)return ye;t=e.state,t.mode===Be&&(t.mode=Ni),l=e.next_out,r=e.output,m=e.avail_out,a=e.next_in,n=e.input,h=e.avail_in,f=t.hold,g=t.bits,p=h,u=m,E=Je;e:for(;;)switch(t.mode){case fi:if(t.wrap===0){t.mode=Ni;break}for(;g<16;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,S[0]=f&255,S[1]=f>>>8&255,t.check=ae(t.check,S,2,0),f=0,g=0,t.mode=fa;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",t.mode=ee;break}if((f&15)!==la){e.msg="unknown compression method",t.mode=ee;break}if(f>>>=4,g-=4,b=(f&15)+8,t.wbits===0&&(t.wbits=b),b>15||b>t.wbits){e.msg="invalid window size",t.mode=ee;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=f&512?pa:Be,f=0,g=0;break;case fa:for(;g<16;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}if(t.flags=f,(t.flags&255)!==la){e.msg="unknown compression method",t.mode=ee;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=ee;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(S[0]=f&255,S[1]=f>>>8&255,t.check=ae(t.check,S,2,0)),f=0,g=0,t.mode=ha;case ha:for(;g<32;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(S[0]=f&255,S[1]=f>>>8&255,S[2]=f>>>16&255,S[3]=f>>>24&255,t.check=ae(t.check,S,4,0)),f=0,g=0,t.mode=ca;case ca:for(;g<16;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(S[0]=f&255,S[1]=f>>>8&255,t.check=ae(t.check,S,2,0)),f=0,g=0,t.mode=da;case da:if(t.flags&1024){for(;g<16;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(S[0]=f&255,S[1]=f>>>8&255,t.check=ae(t.check,S,2,0)),f=0,g=0}else t.head&&(t.head.extra=null);t.mode=ua;case ua:if(t.flags&1024&&(o=t.length,o>h&&(o=h),o&&(t.head&&(b=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(a,a+o),b)),t.flags&512&&t.wrap&4&&(t.check=ae(t.check,n,o,a)),h-=o,a+=o,t.length-=o),t.length))break e;t.length=0,t.mode=_a;case _a:if(t.flags&2048){if(h===0)break e;o=0;do b=n[a+o++],t.head&&b&&t.length<65536&&(t.head.name+=String.fromCharCode(b));while(b&&o<h);if(t.flags&512&&t.wrap&4&&(t.check=ae(t.check,n,o,a)),h-=o,a+=o,b)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=ga;case ga:if(t.flags&4096){if(h===0)break e;o=0;do b=n[a+o++],t.head&&b&&t.length<65536&&(t.head.comment+=String.fromCharCode(b));while(b&&o<h);if(t.flags&512&&t.wrap&4&&(t.check=ae(t.check,n,o,a)),h-=o,a+=o,b)break e}else t.head&&(t.head.comment=null);t.mode=va;case va:if(t.flags&512){for(;g<16;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}if(t.wrap&4&&f!==(t.check&65535)){e.msg="header crc mismatch",t.mode=ee;break}f=0,g=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Be;break;case pa:for(;g<32;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}e.adler=t.check=Ta(f),f=0,g=0,t.mode=oi;case oi:if(t.havedict===0)return e.next_out=l,e.avail_out=m,e.next_in=a,e.avail_in=h,t.hold=f,t.bits=g,zs;e.adler=t.check=1,t.mode=Be;case Be:if(i===Ms||i===Yt)break e;case Ni:if(t.last){f>>>=g&7,g-=g&7,t.mode=Zi;break}for(;g<3;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}switch(t.last=f&1,f>>>=1,g-=1,f&3){case 0:t.mode=wa;break;case 1:if(js(t),t.mode=ei,i===Yt){f>>>=2,g-=2;break e}break;case 2:t.mode=ba;break;case 3:e.msg="invalid block type",t.mode=ee}f>>>=2,g-=2;break;case wa:for(f>>>=g&7,g-=g&7;g<32;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",t.mode=ee;break}if(t.length=f&65535,f=0,g=0,t.mode=Ui,i===Yt)break e;case Ui:t.mode=ma;case ma:if(o=t.length,o){if(o>h&&(o=h),o>m&&(o=m),o===0)break e;r.set(n.subarray(a,a+o),l),h-=o,a+=o,m-=o,l+=o,t.length-=o;break}t.mode=Be;break;case ba:for(;g<14;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}if(t.nlen=(f&31)+257,f>>>=5,g-=5,t.ndist=(f&31)+1,f>>>=5,g-=5,t.ncode=(f&15)+4,f>>>=4,g-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=ee;break}t.have=0,t.mode=ya;case ya:for(;t.have<t.ncode;){for(;g<3;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}t.lens[N[t.have++]]=f&7,f>>>=3,g-=3}for(;t.have<19;)t.lens[N[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,k={bits:t.lenbits},E=Ot(Bs,t.lens,0,19,t.lencode,0,t.work,k),t.lenbits=k.bits,E){e.msg="invalid code lengths set",t.mode=ee;break}t.have=0,t.mode=xa;case xa:for(;t.have<t.nlen+t.ndist;){for(;_=t.lencode[f&(1<<t.lenbits)-1],d=_>>>24,v=_>>>16&255,y=_&65535,!(d<=g);){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}if(y<16)f>>>=d,g-=d,t.lens[t.have++]=y;else{if(y===16){for(A=d+2;g<A;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}if(f>>>=d,g-=d,t.have===0){e.msg="invalid bit length repeat",t.mode=ee;break}b=t.lens[t.have-1],o=3+(f&3),f>>>=2,g-=2}else if(y===17){for(A=d+3;g<A;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}f>>>=d,g-=d,b=0,o=3+(f&7),f>>>=3,g-=3}else{for(A=d+7;g<A;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}f>>>=d,g-=d,b=0,o=11+(f&127),f>>>=7,g-=7}if(t.have+o>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=ee;break}for(;o--;)t.lens[t.have++]=b}}if(t.mode===ee)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=ee;break}if(t.lenbits=9,k={bits:t.lenbits},E=Ot(lr,t.lens,0,t.nlen,t.lencode,0,t.work,k),t.lenbits=k.bits,E){e.msg="invalid literal/lengths set",t.mode=ee;break}if(t.distbits=6,t.distcode=t.distdyn,k={bits:t.distbits},E=Ot(fr,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,k),t.distbits=k.bits,E){e.msg="invalid distances set",t.mode=ee;break}if(t.mode=ei,i===Yt)break e;case ei:t.mode=ti;case ti:if(h>=6&&m>=258){e.next_out=l,e.avail_out=m,e.next_in=a,e.avail_in=h,t.hold=f,t.bits=g,Ds(e,u),l=e.next_out,r=e.output,m=e.avail_out,a=e.next_in,n=e.input,h=e.avail_in,f=t.hold,g=t.bits,t.mode===Be&&(t.back=-1);break}for(t.back=0;_=t.lencode[f&(1<<t.lenbits)-1],d=_>>>24,v=_>>>16&255,y=_&65535,!(d<=g);){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}if(v&&!(v&240)){for(w=d,x=v,C=y;_=t.lencode[C+((f&(1<<w+x)-1)>>w)],d=_>>>24,v=_>>>16&255,y=_&65535,!(w+d<=g);){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}f>>>=w,g-=w,t.back+=w}if(f>>>=d,g-=d,t.back+=d,t.length=y,v===0){t.mode=Aa;break}if(v&32){t.back=-1,t.mode=Be;break}if(v&64){e.msg="invalid literal/length code",t.mode=ee;break}t.extra=v&15,t.mode=Ea;case Ea:if(t.extra){for(A=t.extra;g<A;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,g-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=ka;case ka:for(;_=t.distcode[f&(1<<t.distbits)-1],d=_>>>24,v=_>>>16&255,y=_&65535,!(d<=g);){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}if(!(v&240)){for(w=d,x=v,C=y;_=t.distcode[C+((f&(1<<w+x)-1)>>w)],d=_>>>24,v=_>>>16&255,y=_&65535,!(w+d<=g);){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}f>>>=w,g-=w,t.back+=w}if(f>>>=d,g-=d,t.back+=d,v&64){e.msg="invalid distance code",t.mode=ee;break}t.offset=y,t.extra=v&15,t.mode=Sa;case Sa:if(t.extra){for(A=t.extra;g<A;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,g-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=ee;break}t.mode=Ra;case Ra:if(m===0)break e;if(o=u-m,t.offset>o){if(o=t.offset-o,o>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=ee;break}o>t.wnext?(o-=t.wnext,s=t.wsize-o):s=t.wnext-o,o>t.length&&(o=t.length),c=t.window}else c=r,s=l-t.offset,o=t.length;o>m&&(o=m),m-=o,t.length-=o;do r[l++]=c[s++];while(--o);t.length===0&&(t.mode=ti);break;case Aa:if(m===0)break e;r[l++]=t.length,m--,t.mode=ti;break;case Zi:if(t.wrap){for(;g<32;){if(h===0)break e;h--,f|=n[a++]<<g,g+=8}if(u-=m,e.total_out+=u,t.total+=u,t.wrap&4&&u&&(e.adler=t.check=t.flags?ae(t.check,r,u,l-u):$t(t.check,r,u,l-u)),u=m,t.wrap&4&&(t.flags?f:Ta(f))!==t.check){e.msg="incorrect data check",t.mode=ee;break}f=0,g=0}t.mode=Ca;case Ca:if(t.wrap&&t.flags){for(;g<32;){if(h===0)break e;h--,f+=n[a++]<<g,g+=8}if(t.wrap&4&&f!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=ee;break}f=0,g=0}t.mode=Da;case Da:E=$s;break e;case ee:E=hr;break e;case dr:return cr;case ur:default:return ye}return e.next_out=l,e.avail_out=m,e.next_in=a,e.avail_in=h,t.hold=f,t.bits=g,(t.wsize||u!==e.avail_out&&t.mode<ee&&(t.mode<Zi||i!==sa))&&wr(e,e.output,e.next_out,u-e.avail_out),p-=e.avail_in,u-=e.avail_out,e.total_in+=p,e.total_out+=u,t.total+=u,t.wrap&4&&u&&(e.adler=t.check=t.flags?ae(t.check,r,u,e.next_out-u):$t(t.check,r,u,e.next_out-u)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Be?128:0)+(t.mode===ei||t.mode===Ui?256:0),(p===0&&u===0||i===sa)&&E===Je&&(E=Fs),E},qs=e=>{if(Ye(e))return ye;let i=e.state;return i.window&&(i.window=null),e.state=null,Je},Ks=(e,i)=>{if(Ye(e))return ye;const t=e.state;return t.wrap&2?(t.head=i,i.done=!1,Je):ye},Vs=(e,i)=>{const t=i.length;let n,r,a;return Ye(e)||(n=e.state,n.wrap!==0&&n.mode!==oi)?ye:n.mode===oi&&(r=1,r=$t(r,i,t,0),r!==n.check)?hr:(a=wr(e,i,t,t),a?(n.mode=dr,cr):(n.havedict=1,Je))};var Xs=gr,Js=vr,Ys=_r,el=Gs,tl=pr,il=Ws,nl=qs,al=Ks,rl=Vs,ol="pako inflate (from Nodeca project)",$e={inflateReset:Xs,inflateReset2:Js,inflateResetKeep:Ys,inflateInit:el,inflateInit2:tl,inflate:il,inflateEnd:nl,inflateGetHeader:al,inflateSetDictionary:rl,inflateInfo:ol};function sl(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ll=sl;const mr=Object.prototype.toString,{Z_NO_FLUSH:fl,Z_FINISH:hl,Z_OK:Nt,Z_STREAM_END:Gi,Z_NEED_DICT:ji,Z_STREAM_ERROR:cl,Z_DATA_ERROR:Oa,Z_MEM_ERROR:dl}=dt;function Qt(e){this.options=li.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,i.windowBits===0&&(i.windowBits=-15)),i.windowBits>=0&&i.windowBits<16&&!(e&&e.windowBits)&&(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&(i.windowBits&15||(i.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new or,this.strm.avail_out=0;let t=$e.inflateInit2(this.strm,i.windowBits);if(t!==Nt)throw new Error(Ve[t]);if(this.header=new ll,$e.inflateGetHeader(this.strm,this.header),i.dictionary&&(typeof i.dictionary=="string"?i.dictionary=Ft.string2buf(i.dictionary):mr.call(i.dictionary)==="[object ArrayBuffer]"&&(i.dictionary=new Uint8Array(i.dictionary)),i.raw&&(t=$e.inflateSetDictionary(this.strm,i.dictionary),t!==Nt)))throw new Error(Ve[t])}Qt.prototype.push=function(e,i){const t=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let a,l,h;if(this.ended)return!1;for(i===~~i?l=i:l=i===!0?hl:fl,mr.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),a=$e.inflate(t,l),a===ji&&r&&(a=$e.inflateSetDictionary(t,r),a===Nt?a=$e.inflate(t,l):a===Oa&&(a=ji));t.avail_in>0&&a===Gi&&t.state.wrap>0&&e[t.next_in]!==0;)$e.inflateReset(t),a=$e.inflate(t,l);switch(a){case cl:case Oa:case ji:case dl:return this.onEnd(a),this.ended=!0,!1}if(h=t.avail_out,t.next_out&&(t.avail_out===0||a===Gi))if(this.options.to==="string"){let m=Ft.utf8border(t.output,t.next_out),f=t.next_out-m,g=Ft.buf2string(t.output,m);t.next_out=f,t.avail_out=n-f,f&&t.output.set(t.output.subarray(m,m+f),0),this.onData(g)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===Nt&&h===0)){if(a===Gi)return a=$e.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Qt.prototype.onData=function(e){this.chunks.push(e)};Qt.prototype.onEnd=function(e){e===Nt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=li.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function mn(e,i){const t=new Qt(i);if(t.push(e),t.err)throw t.msg||Ve[t.err];return t.result}function ul(e,i){return i=i||{},i.raw=!0,mn(e,i)}var _l=Qt,gl=mn,vl=ul,pl=mn,wl=dt,ml={Inflate:_l,inflate:gl,inflateRaw:vl,ungzip:pl,constants:wl};const{Deflate:Ll,deflate:Bl,deflateRaw:Ml,gzip:bl}=As,{Inflate:$l,inflate:zl,inflateRaw:Fl,ungzip:yl}=ml;var Wi=bl,qi=yl,xl=Ie("<div><button class=btn style=margin-left:5px;>Invite</button><button class=btn style=margin-left:5px;>Join</button><br>"),El=Ie("<br>");const Pa="7ae48d46-10f2-kitty-",kl=e=>{let[i,t]=dn({pendingInvites:[]});return(()=>{var n=xl(),r=n.firstChild,a=r.nextSibling;return a.nextSibling,r.$$click=async()=>{let l=Sl(),h=new On(Pa+l);h.on("open",m=>{console.log(m),h.on("error",f=>{console.log(f)}),h.on("connection",f=>{f.on("open",()=>{e.onConnection({connection:f}),t("pendingInvites",g=>g.filter(p=>p.value.peer!=h))})}),t("pendingInvites",st(f=>f.push(new Rt({inviteCode:l,peer:h}))))})},a.$$click=async()=>{let l=window.prompt("Enter invite code:");if(l==null||(l=l.trim(),l==""))return;let h=new On;h.on("open",m=>{console.log(m),h.on("error",g=>{console.log(g)});let f=h.connect(Pa+l);f.on("open",()=>{e.onConnection({connection:f})})})},ii(n,q(Ba,{get each(){return i.pendingInvites},children:l=>["Invite: ",At(()=>l.value.inviteCode),El()]}),null),n})()};function Sl(){let e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i="";for(let t=0;t<6;++t){let n=Math.floor(Math.random()*e.length);i+=e.substring(n,n+1)}return i}La(["click"]);function Rl(){let[e,i]=dn({connections:[]});return{connections:()=>e.connections,Render:()=>q(kl,{onConnection:n=>{i("connections",r=>[...r,n.connection])}})}}var Ki=Ie("<img>"),Vi=Ie("<div style=position:relative;><video disablepictureinpicture>"),Xi=Ie("<button class=btn>Do Scan"),Ji=Ie("<button class=btn>Paste"),Ae=Ie("<br>"),Al=Ie("<input>"),Cl=Ie("<div>Automege WebRTC Test<br>Via PeerJs:<br><hr>Via QR Codes:<br>"),Yi=Ie("<button class=btn>Copy");const Nl=()=>{let[e,i]=dn({offer:void 0,answer:void 0,iceCandidates:[],connectionEstablished:!1,doScanOffer:!1,doScanAnswer:!1,doScanIce:!1,messages:[]});const t={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},n=new RTCPeerConnection(t),r=n.createDataChannel("msg");(async()=>{const b=await n.createOffer();await n.setLocalDescription(b),i("offer",new Rt(b))})(),n.addEventListener("icecandidate",b=>{if(b.candidate!=null){let E=b.candidate;i("iceCandidates",st(S=>S.push(new Rt(E))))}}),n.addEventListener("connectionstatechange",b=>{n.connectionState=="connected"&&i("connectionEstablished",!0)}),r.addEventListener("open",b=>{console.log(b)}),r.addEventListener("close",b=>{console.log(b)}),r.addEventListener("message",b=>{i("messages",st(E=>E.push(b.data)))}),n.addEventListener("datachannel",b=>{console.log(b),b.channel.addEventListener("message",E=>{i("messages",st(S=>S.push(E.data)))})});let a=At(()=>{let b=e.offer?.value;if(b==null)return;let E=JSON.stringify(b),k=new TextEncoder().encode(E),A=Wi(k);return en(A)}),l=b=>{let E=tn(b),S=qi(E),A=new TextDecoder("utf-8").decode(S);return JSON.parse(A)},h=At(()=>{let b=e.answer?.value;if(b==null)return;let E=JSON.stringify(b),k=new TextEncoder().encode(E),A=Wi(k);return en(A)}),m=b=>{let E=tn(b),S=qi(E),A=new TextDecoder("utf-8").decode(S);return JSON.parse(A)},f=At(()=>{let b=e.iceCandidates.map(B=>B.value),E=JSON.stringify(b),k=new TextEncoder().encode(E),A=Wi(k);return en(A)}),g=b=>{let E=tn(b),S=qi(E),A=new TextDecoder("utf-8").decode(S);return JSON.parse(A)},p=()=>q(Ee,{get when(){return a()},keyed:!0,children:b=>{let[E]=yi(()=>Oi(b));return q(Ee,{get when(){return E()},children:S=>(()=>{var k=Ki();return xi(()=>mi(k,"src",S())),k})()})}}),u=()=>{let[b,E]=ki();return Si(async()=>{let S=b();if(S==null)return;const k=new F(S,async A=>{let N=l(A.data);console.log(N),await k.stop(),await n.setRemoteDescription(new RTCSessionDescription(N));let B=await n.createAnswer();await n.setLocalDescription(B),i("answer",new Rt(B)),i("doScanOffer",!1)},{highlightScanRegion:!0});await k.start()}),(()=>{var S=Vi(),k=S.firstChild,A=E;return typeof A=="function"?bi(A,k):E=k,k.style.setProperty("border","1px solid green"),k.style.setProperty("width","300px"),k.style.setProperty("height","300px"),S})()},o=()=>q(Ei,{get children(){return[q(nt,{get when(){return!e.doScanOffer},get children(){var b=Xi();return b.$$click=()=>i("doScanOffer",!0),b}}),q(nt,{get when(){return e.doScanOffer},get children(){return q(u,{})}})]}}),s=()=>q(Ee,{get when(){return h()},keyed:!0,children:b=>{let[E]=yi(()=>Oi(b));return q(Ee,{get when(){return E()},children:S=>(()=>{var k=Ki();return xi(()=>mi(k,"src",S())),k})()})}}),c=()=>{let[b,E]=ki();return Si(async()=>{let S=b();if(S==null)return;const k=new F(S,async A=>{let N=m(A.data);console.log(N),await k.stop(),await n.setRemoteDescription(N),i("doScanAnswer",!1)},{highlightScanRegion:!0,highlightCodeOutline:!0});await k.start()}),(()=>{var S=Vi(),k=S.firstChild,A=E;return typeof A=="function"?bi(A,k):E=k,k.style.setProperty("border","1px solid green"),k.style.setProperty("width","300px"),k.style.setProperty("height","300px"),S})()},_=()=>q(Ei,{get children(){return[q(nt,{get when(){return!e.doScanAnswer},get children(){var b=Xi();return b.$$click=()=>i("doScanAnswer",!0),b}}),q(nt,{get when(){return e.doScanAnswer},get children(){return q(c,{})}})]}}),d=()=>q(Ee,{get when(){return f()},keyed:!0,children:b=>{let[E]=yi(()=>Oi(b));return q(Ee,{get when(){return E()},children:S=>(()=>{var k=Ki();return xi(()=>mi(k,"src",S())),k})()})}}),v=()=>{let[b,E]=ki();return Si(async()=>{let S=b();if(S==null)return;const k=new F(S,async A=>{let N=g(A.data);await k.stop();for(let B of N)await n.addIceCandidate(B)},{highlightScanRegion:!0,highlightCodeOutline:!0});await k.start()}),(()=>{var S=Vi(),k=S.firstChild,A=E;return typeof A=="function"?bi(A,k):E=k,k.style.setProperty("border","1px solid green"),k.style.setProperty("width","300px"),k.style.setProperty("height","300px"),S})()},y=()=>q(Ei,{get children(){return[q(nt,{get when(){return!e.doScanIce},get children(){var b=Xi();return b.$$click=()=>i("doScanIce",!0),b}}),q(nt,{get when(){return e.doScanIce},get children(){return q(v,{})}})]}}),w=Rl(),x=At(()=>w.connections().length!=0);br(yr(x,b=>{b&&i("connectionEstablished",!0)})),xr(Er(w.connections,b=>{let E=S=>{i("messages",st(k=>k.push(S)))};b.on("data",E),kr(()=>b.off("data",E))}));let C=b=>Sr(()=>{for(let E of w.connections())E.send(b)});return(()=>{var b=Cl(),E=b.firstChild,S=E.nextSibling,k=S.nextSibling,A=k.nextSibling,N=A.nextSibling,B=N.nextSibling;return B.nextSibling,b.style.setProperty("width","100%"),b.style.setProperty("height","100%"),b.style.setProperty("overflow-y","auto"),ii(b,q(w.Render,{}),N),ii(b,q(Ee,{get when(){return!e.connectionEstablished},get children(){return[q(Ee,{get when(){return a()},children:M=>["Call:",(()=>{var D=Yi();return D.$$click=async()=>{let U=M();await navigator.clipboard.writeText(U)},D})(),Ae(),q(p,{})]}),q(Ee,{get when(){return h()},children:M=>["Answer:",(()=>{var D=Yi();return D.$$click=async()=>{let U=M();await navigator.clipboard.writeText(U)},D})(),Ae(),q(s,{})]}),q(Ee,{get when(){return f()},children:M=>["Ice:",(()=>{var D=Yi();return D.$$click=async()=>{let U=M();await navigator.clipboard.writeText(U)},D})(),Ae(),q(d,{})]}),"Scan Offer:",(()=>{var M=Ji();return M.$$click=async()=>{let D=await navigator.clipboard.readText(),U=l(D);await n.setRemoteDescription(U);let Y=await n.createAnswer();await n.setLocalDescription(Y),i("answer",new Rt(Y))},M})(),Ae(),q(o,{}),Ae(),"Scan Answer:",(()=>{var M=Ji();return M.$$click=async()=>{let D=await navigator.clipboard.readText(),U=m(D);await n.setRemoteDescription(U)},M})(),Ae(),q(_,{}),Ae(),"Scan ICE:",(()=>{var M=Ji();return M.$$click=async()=>{let D=await navigator.clipboard.readText(),U=g(D);for(let Y of U)await n.addIceCandidate(Y)},M})(),Ae(),q(y,{}),Ae()]}}),null),ii(b,q(Ee,{get when(){return e.connectionEstablished},get children(){return[q(Ba,{get each(){return e.messages},children:M=>[M,Ae()]}),"Enter Message:",(()=>{var M=Al();return M.addEventListener("change",D=>{let U=D.currentTarget.value;i("messages",st(Y=>Y.push(U))),r.readyState=="open"&&r.send(U),C(U),D.currentTarget.value=""}),M.style.setProperty("color","black"),M})()]}}),null),b})()};function en(e){for(var i="",t=e.byteLength,n=0;n<t;n++)i+=String.fromCharCode(e[n]);return window.btoa(i)}function tn(e){for(var i=atob(e),t=new Uint8Array(i.length),n=0;n<i.length;n++)t[n]=i.charCodeAt(n);return t}La(["click"]);export{Nl as default};
