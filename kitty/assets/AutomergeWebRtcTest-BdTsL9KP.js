import{d as rr,N as Ne,i as Ve,t as pe,s as at,u as nt}from"./lib-CEVHnkU1.js";import{l as W,q as Ue,F as ir,p as sr,N as lr,m as cr,J as ur,O as hr,S as de,t as ot,s as st,M as De,h as lt,Y as dr,c as ct,Q as ut}from"./dev-B9-ass9r.js";import{a as Dt,p as xe}from"./dev-CC7pdsS5.js";import{_ as fr}from"./index-XNH-lkY3.js";import{$ as Nt,g as ht,u as dt}from"./index-E5_J0wXF.js";var Ee={},ft={},Ut;function ar(){return Ut||(Ut=1,function(w){Object.defineProperty(w,"__esModule",{value:!0}),w.QRMath=w.QRUtil=w.QRMaskPattern=w.QRErrorCorrectLevel=w.QRCodeModel=void 0;function i(t,e,r){var o=c(e),n=t-1,l=0;switch(r){case w.QRErrorCorrectLevel.L:l=s[n][0];break;case w.QRErrorCorrectLevel.M:l=s[n][1];break;case w.QRErrorCorrectLevel.Q:l=s[n][2];break;case w.QRErrorCorrectLevel.H:l=s[n][3];break}return o<=l}function a(t,e){for(var r=1,o=c(t),n=0,l=s.length;n<l;n++){var p=0;switch(e){case w.QRErrorCorrectLevel.L:p=s[n][0];break;case w.QRErrorCorrectLevel.M:p=s[n][1];break;case w.QRErrorCorrectLevel.Q:p=s[n][2];break;case w.QRErrorCorrectLevel.H:p=s[n][3];break}if(o<=p)break;r++}if(r>s.length)throw new Error("Too long data");return r}function c(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=Number(t)?3:0)}var d=function(){function t(e){this.mode=f.MODE_8BIT_BYTE,this.parsedData=[],this.data=e;for(var r=[],o=0,n=this.data.length;o<n;o++){var l=[],p=this.data.charCodeAt(o);p>65536?(l[0]=240|(p&1835008)>>>18,l[1]=128|(p&258048)>>>12,l[2]=128|(p&4032)>>>6,l[3]=128|p&63):p>2048?(l[0]=224|(p&61440)>>>12,l[1]=128|(p&4032)>>>6,l[2]=128|p&63):p>128?(l[0]=192|(p&1984)>>>6,l[1]=128|p&63):l[0]=p,r.push(l)}this.parsedData=Array.prototype.concat.apply([],r),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}return t.prototype.getLength=function(){return this.parsedData.length},t.prototype.write=function(e){for(var r=0,o=this.parsedData.length;r<o;r++)e.put(this.parsedData[r],8)},t}(),h=function(){function t(e,r){e===void 0&&(e=-1),r===void 0&&(r=w.QRErrorCorrectLevel.L),this.moduleCount=0,this.dataList=[],this.typeNumber=e,this.errorCorrectLevel=r,this.moduleCount=0,this.dataList=[]}return t.prototype.addData=function(e){if(this.typeNumber<=0)this.typeNumber=a(e,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error("Invalid QR version: "+this.typeNumber);if(!i(this.typeNumber,e,this.errorCorrectLevel))throw new Error("Data is too long for QR version: "+this.typeNumber)}var r=new d(e);this.dataList.push(r),this.dataCache=void 0},t.prototype.isDark=function(e,r){if(e<0||this.moduleCount<=e||r<0||this.moduleCount<=r)throw new Error(e+","+r);return this.modules[e][r]},t.prototype.getModuleCount=function(){return this.moduleCount},t.prototype.make=function(){this.makeImpl(!1,this.getBestMaskPattern())},t.prototype.makeImpl=function(e,r){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[o][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,r),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)},t.prototype.setupPositionProbePattern=function(e,r){for(var o=-1;o<=7;o++)if(!(e+o<=-1||this.moduleCount<=e+o))for(var n=-1;n<=7;n++)r+n<=-1||this.moduleCount<=r+n||(0<=o&&o<=6&&(n==0||n==6)||0<=n&&n<=6&&(o==0||o==6)||2<=o&&o<=4&&2<=n&&n<=4?this.modules[e+o][r+n]=!0:this.modules[e+o][r+n]=!1)},t.prototype.getBestMaskPattern=function(){if(Number.isInteger(this.maskPattern)&&Object.values(w.QRMaskPattern).includes(this.maskPattern))return this.maskPattern;for(var e=0,r=0,o=0;o<8;o++){this.makeImpl(!0,o);var n=m.getLostPoint(this);(o==0||e>n)&&(e=n,r=o)}return r},t.prototype.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var r=8;r<this.moduleCount-8;r++)this.modules[6][r]==null&&(this.modules[6][r]=r%2==0)},t.prototype.setupPositionAdjustPattern=function(){for(var e=m.getPatternPosition(this.typeNumber),r=0;r<e.length;r++)for(var o=0;o<e.length;o++){var n=e[r],l=e[o];if(this.modules[n][l]==null)for(var p=-2;p<=2;p++)for(var g=-2;g<=2;g++)p==-2||p==2||g==-2||g==2||p==0&&g==0?this.modules[n+p][l+g]=!0:this.modules[n+p][l+g]=!1}},t.prototype.setupTypeNumber=function(e){for(var r=m.getBCHTypeNumber(this.typeNumber),o=0;o<18;o++){var n=!e&&(r>>o&1)==1;this.modules[Math.floor(o/3)][o%3+this.moduleCount-8-3]=n}for(var o=0;o<18;o++){var n=!e&&(r>>o&1)==1;this.modules[o%3+this.moduleCount-8-3][Math.floor(o/3)]=n}},t.prototype.setupTypeInfo=function(e,r){for(var o=this.errorCorrectLevel<<3|r,n=m.getBCHTypeInfo(o),l=0;l<15;l++){var p=!e&&(n>>l&1)==1;l<6?this.modules[l][8]=p:l<8?this.modules[l+1][8]=p:this.modules[this.moduleCount-15+l][8]=p}for(var l=0;l<15;l++){var p=!e&&(n>>l&1)==1;l<8?this.modules[8][this.moduleCount-l-1]=p:l<9?this.modules[8][15-l-1+1]=p:this.modules[8][15-l-1]=p}this.modules[this.moduleCount-8][8]=!e},t.prototype.mapData=function(e,r){for(var o=-1,n=this.moduleCount-1,l=7,p=0,g=this.moduleCount-1;g>0;g-=2)for(g==6&&g--;;){for(var C=0;C<2;C++)if(this.modules[n][g-C]==null){var P=!1;p<e.length&&(P=(e[p]>>>l&1)==1);var y=m.getMask(r,n,g-C);y&&(P=!P),this.modules[n][g-C]=P,l--,l==-1&&(p++,l=7)}if(n+=o,n<0||this.moduleCount<=n){n-=o,o=-o;break}}},t.createData=function(e,r,o){for(var n=R.getRSBlocks(e,r),l=new u,p=0;p<o.length;p++){var g=o[p];l.put(g.mode,4),l.put(g.getLength(),m.getLengthInBits(g.mode,e)),g.write(l)}for(var C=0,p=0;p<n.length;p++)C+=n[p].dataCount;if(l.getLengthInBits()>C*8)throw new Error("code length overflow. ("+l.getLengthInBits()+">"+C*8+")");for(l.getLengthInBits()+4<=C*8&&l.put(0,4);l.getLengthInBits()%8!=0;)l.putBit(!1);for(;!(l.getLengthInBits()>=C*8||(l.put(t.PAD0,8),l.getLengthInBits()>=C*8));)l.put(t.PAD1,8);return t.createBytes(l,n)},t.createBytes=function(e,r){for(var o=0,n=0,l=0,p=new Array(r.length),g=new Array(r.length),C=0;C<r.length;C++){var P=r[C].dataCount,y=r[C].totalCount-P;n=Math.max(n,P),l=Math.max(l,y),p[C]=new Array(P);for(var E=0;E<p[C].length;E++)p[C][E]=255&e.buffer[E+o];o+=P;var x=m.getErrorCorrectPolynomial(y),T=new b(p[C],x.getLength()-1),L=T.mod(x);g[C]=new Array(x.getLength()-1);for(var E=0;E<g[C].length;E++){var V=E+L.getLength()-g[C].length;g[C][E]=V>=0?L.get(V):0}}for(var O=0,E=0;E<r.length;E++)O+=r[E].totalCount;for(var F=new Array(O),B=0,E=0;E<n;E++)for(var C=0;C<r.length;C++)E<p[C].length&&(F[B++]=p[C][E]);for(var E=0;E<l;E++)for(var C=0;C<r.length;C++)E<g[C].length&&(F[B++]=g[C][E]);return F},t.PAD0=236,t.PAD1=17,t}();w.QRCodeModel=h,w.QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var f={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8};w.QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var m=function(){function t(){}return t.getBCHTypeInfo=function(e){for(var r=e<<10;t.getBCHDigit(r)-t.getBCHDigit(t.G15)>=0;)r^=t.G15<<t.getBCHDigit(r)-t.getBCHDigit(t.G15);return(e<<10|r)^t.G15_MASK},t.getBCHTypeNumber=function(e){for(var r=e<<12;t.getBCHDigit(r)-t.getBCHDigit(t.G18)>=0;)r^=t.G18<<t.getBCHDigit(r)-t.getBCHDigit(t.G18);return e<<12|r},t.getBCHDigit=function(e){for(var r=0;e!=0;)r++,e>>>=1;return r},t.getPatternPosition=function(e){return t.PATTERN_POSITION_TABLE[e-1]},t.getMask=function(e,r,o){switch(e){case w.QRMaskPattern.PATTERN000:return(r+o)%2==0;case w.QRMaskPattern.PATTERN001:return r%2==0;case w.QRMaskPattern.PATTERN010:return o%3==0;case w.QRMaskPattern.PATTERN011:return(r+o)%3==0;case w.QRMaskPattern.PATTERN100:return(Math.floor(r/2)+Math.floor(o/3))%2==0;case w.QRMaskPattern.PATTERN101:return r*o%2+r*o%3==0;case w.QRMaskPattern.PATTERN110:return(r*o%2+r*o%3)%2==0;case w.QRMaskPattern.PATTERN111:return(r*o%3+(r+o)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},t.getErrorCorrectPolynomial=function(e){for(var r=new b([1],0),o=0;o<e;o++)r=r.multiply(new b([1,v.gexp(o)],0));return r},t.getLengthInBits=function(e,r){if(1<=r&&r<10)switch(e){case f.MODE_NUMBER:return 10;case f.MODE_ALPHA_NUM:return 9;case f.MODE_8BIT_BYTE:return 8;case f.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(r<27)switch(e){case f.MODE_NUMBER:return 12;case f.MODE_ALPHA_NUM:return 11;case f.MODE_8BIT_BYTE:return 16;case f.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(r<41)switch(e){case f.MODE_NUMBER:return 14;case f.MODE_ALPHA_NUM:return 13;case f.MODE_8BIT_BYTE:return 16;case f.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+r)},t.getLostPoint=function(e){for(var r=e.getModuleCount(),o=0,n=0;n<r;n++)for(var l=0;l<r;l++){for(var p=0,g=e.isDark(n,l),C=-1;C<=1;C++)if(!(n+C<0||r<=n+C))for(var P=-1;P<=1;P++)l+P<0||r<=l+P||C==0&&P==0||g==e.isDark(n+C,l+P)&&p++;p>5&&(o+=3+p-5)}for(var n=0;n<r-1;n++)for(var l=0;l<r-1;l++){var y=0;e.isDark(n,l)&&y++,e.isDark(n+1,l)&&y++,e.isDark(n,l+1)&&y++,e.isDark(n+1,l+1)&&y++,(y==0||y==4)&&(o+=3)}for(var n=0;n<r;n++)for(var l=0;l<r-6;l++)e.isDark(n,l)&&!e.isDark(n,l+1)&&e.isDark(n,l+2)&&e.isDark(n,l+3)&&e.isDark(n,l+4)&&!e.isDark(n,l+5)&&e.isDark(n,l+6)&&(o+=40);for(var l=0;l<r;l++)for(var n=0;n<r-6;n++)e.isDark(n,l)&&!e.isDark(n+1,l)&&e.isDark(n+2,l)&&e.isDark(n+3,l)&&e.isDark(n+4,l)&&!e.isDark(n+5,l)&&e.isDark(n+6,l)&&(o+=40);for(var E=0,l=0;l<r;l++)for(var n=0;n<r;n++)e.isDark(n,l)&&E++;var x=Math.abs(100*E/r/r-50)/5;return o+=x*10,o},t.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],t.G15=1335,t.G18=7973,t.G15_MASK=21522,t}();w.QRUtil=m;var v=function(){function t(){}return t.glog=function(e){if(e<1)throw new Error("glog("+e+")");return t.LOG_TABLE[e]},t.gexp=function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t.EXP_TABLE[e]},t.EXP_TABLE=new Array(256),t.LOG_TABLE=new Array(256),t._constructor=function(){for(var e=0;e<8;e++)t.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)t.EXP_TABLE[e]=t.EXP_TABLE[e-4]^t.EXP_TABLE[e-5]^t.EXP_TABLE[e-6]^t.EXP_TABLE[e-8];for(var e=0;e<255;e++)t.LOG_TABLE[t.EXP_TABLE[e]]=e}(),t}();w.QRMath=v;var b=function(){function t(e,r){if(e.length==null)throw new Error(e.length+"/"+r);for(var o=0;o<e.length&&e[o]==0;)o++;this.num=new Array(e.length-o+r);for(var n=0;n<e.length-o;n++)this.num[n]=e[n+o]}return t.prototype.get=function(e){return this.num[e]},t.prototype.getLength=function(){return this.num.length},t.prototype.multiply=function(e){for(var r=new Array(this.getLength()+e.getLength()-1),o=0;o<this.getLength();o++)for(var n=0;n<e.getLength();n++)r[o+n]^=v.gexp(v.glog(this.get(o))+v.glog(e.get(n)));return new t(r,0)},t.prototype.mod=function(e){if(this.getLength()-e.getLength()<0)return this;for(var r=v.glog(this.get(0))-v.glog(e.get(0)),o=new Array(this.getLength()),n=0;n<this.getLength();n++)o[n]=this.get(n);for(var n=0;n<e.getLength();n++)o[n]^=v.gexp(v.glog(e.get(n))+r);return new t(o,0).mod(e)},t}(),R=function(){function t(e,r){this.totalCount=e,this.dataCount=r}return t.getRSBlocks=function(e,r){var o=t.getRsBlockTable(e,r);if(o==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+r);for(var n=o.length/3,l=[],p=0;p<n;p++)for(var g=o[p*3+0],C=o[p*3+1],P=o[p*3+2],y=0;y<g;y++)l.push(new t(C,P));return l},t.getRsBlockTable=function(e,r){switch(r){case w.QRErrorCorrectLevel.L:return t.RS_BLOCK_TABLE[(e-1)*4+0];case w.QRErrorCorrectLevel.M:return t.RS_BLOCK_TABLE[(e-1)*4+1];case w.QRErrorCorrectLevel.Q:return t.RS_BLOCK_TABLE[(e-1)*4+2];case w.QRErrorCorrectLevel.H:return t.RS_BLOCK_TABLE[(e-1)*4+3];default:return}},t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t}(),u=function(){function t(){this.buffer=[],this.length=0}return t.prototype.get=function(e){var r=Math.floor(e/8);return(this.buffer[r]>>>7-e%8&1)==1},t.prototype.put=function(e,r){for(var o=0;o<r;o++)this.putBit((e>>>r-o-1&1)==1)},t.prototype.getLengthInBits=function(){return this.length},t.prototype.putBit=function(e){var r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),e&&(this.buffer[r]|=128>>>this.length%8),this.length++},t}(),s=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]]}(ft)),ft}var le={},Be={},vt,Ht;function vr(){if(Ht)return vt;Ht=1;const w="bold|bolder|lighter|[1-9]00",i="italic|oblique",a="small-caps",c="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",d="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",h=`'([^']+)'|"([^"]+)"|[\\w\\s-]+`,f=new RegExp(`(${w}) +`,"i"),m=new RegExp(`(${i}) +`,"i"),v=new RegExp(`(${a}) +`,"i"),b=new RegExp(`(${c}) +`,"i"),R=new RegExp(`([\\d\\.]+)(${d}) *((?:${h})( *, *(?:${h}))*)`),u={},s=16;return vt=t=>{if(u[t])return u[t];const e=R.exec(t);if(!e)return;const r={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(e[1]),unit:e[2],family:e[3].replace(/["']/g,"").replace(/ *, */g,",")};let o,n,l,p;const g=t.substring(0,e.index);switch((o=f.exec(g))&&(r.weight=o[1]),(n=m.exec(g))&&(r.style=n[1]),(l=v.exec(g))&&(r.variant=l[1]),(p=b.exec(g))&&(r.stretch=p[1]),r.unit){case"pt":r.size/=.75;break;case"pc":r.size*=16;break;case"in":r.size*=96;break;case"cm":r.size*=96/2.54;break;case"mm":r.size*=96/25.4;break;case"%":break;case"em":case"rem":r.size*=s/.75;break;case"q":r.size*=96/25.4/4;break}return u[t]=r},vt}var Gt;function gr(){if(Gt)return Be;Gt=1;const w=vr();return Be.parseFont=w,Be.createCanvas=function(i,a){return Object.assign(document.createElement("canvas"),{width:i,height:a})},Be.createImageData=function(i,a,c){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(i);case 2:return new ImageData(i,a);default:return new ImageData(i,a,c)}},Be.loadImage=function(i,a){return new Promise(function(c,d){const h=Object.assign(document.createElement("img"),a);function f(){h.onload=null,h.onerror=null}h.onload=function(){f(),c(h)},h.onerror=function(){f(),d(new Error('Failed to load the image "'+i+'"'))},h.src=i})},Be}var $e={},gt={},ye={},qt;function nr(){if(qt)return ye;qt=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.loop=ye.conditional=ye.parse=void 0;var w=function c(d,h){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:f;if(Array.isArray(h))h.forEach(function(b){return c(d,b,f,m)});else if(typeof h=="function")h(d,f,m,c);else{var v=Object.keys(h)[0];Array.isArray(h[v])?(m[v]={},c(d,h[v],f,m[v])):m[v]=h[v](d,f,m,c)}return f};ye.parse=w;var i=function(d,h){return function(f,m,v,b){h(f,m,v)&&b(f,d,m,v)}};ye.conditional=i;var a=function(d,h){return function(f,m,v,b){for(var R=[],u=f.pos;h(f,m,v);){var s={};if(b(f,d,m,s),f.pos===u)break;u=f.pos,R.push(s)}return R}};return ye.loop=a,ye}var Y={},zt;function or(){if(zt)return Y;zt=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.readBits=Y.readArray=Y.readUnsigned=Y.readString=Y.peekBytes=Y.readBytes=Y.peekByte=Y.readByte=Y.buildStream=void 0;var w=function(u){return{data:u,pos:0}};Y.buildStream=w;var i=function(){return function(u){return u.data[u.pos++]}};Y.readByte=i;var a=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return function(s){return s.data[s.pos+u]}};Y.peekByte=a;var c=function(u){return function(s){return s.data.subarray(s.pos,s.pos+=u)}};Y.readBytes=c;var d=function(u){return function(s){return s.data.subarray(s.pos,s.pos+u)}};Y.peekBytes=d;var h=function(u){return function(s){return Array.from(c(u)(s)).map(function(t){return String.fromCharCode(t)}).join("")}};Y.readString=h;var f=function(u){return function(s){var t=c(2)(s);return u?(t[1]<<8)+t[0]:(t[0]<<8)+t[1]}};Y.readUnsigned=f;var m=function(u,s){return function(t,e,r){for(var o=typeof s=="function"?s(t,e,r):s,n=c(u),l=new Array(o),p=0;p<o;p++)l[p]=n(t);return l}};Y.readArray=m;var v=function(u,s,t){for(var e=0,r=0;r<t;r++)e+=u[s+r]&&Math.pow(2,t-r-1);return e},b=function(u){return function(s){for(var t=i()(s),e=new Array(8),r=0;r<8;r++)e[7-r]=!!(t&1<<r);return Object.keys(u).reduce(function(o,n){var l=u[n];return l.length?o[n]=v(e,l.index,l.length):o[n]=e[l.index],o},{})}};return Y.readBits=b,Y}var Wt;function pr(){return Wt||(Wt=1,function(w){Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var i=nr(),a=or(),c={blocks:function(s){for(var t=0,e=[],r=s.data.length,o=0,n=(0,a.readByte)()(s);n!==t&&n;n=(0,a.readByte)()(s)){if(s.pos+n>=r){var l=r-s.pos;e.push((0,a.readBytes)(l)(s)),o+=l;break}e.push((0,a.readBytes)(n)(s)),o+=n}for(var p=new Uint8Array(o),g=0,C=0;C<e.length;C++)p.set(e[C],g),g+=e[C].length;return p}},d=(0,i.conditional)({gce:[{codes:(0,a.readBytes)(2)},{byteSize:(0,a.readByte)()},{extras:(0,a.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,a.readUnsigned)(!0)},{transparentColorIndex:(0,a.readByte)()},{terminator:(0,a.readByte)()}]},function(u){var s=(0,a.peekBytes)(2)(u);return s[0]===33&&s[1]===249}),h=(0,i.conditional)({image:[{code:(0,a.readByte)()},{descriptor:[{left:(0,a.readUnsigned)(!0)},{top:(0,a.readUnsigned)(!0)},{width:(0,a.readUnsigned)(!0)},{height:(0,a.readUnsigned)(!0)},{lct:(0,a.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,i.conditional)({lct:(0,a.readArray)(3,function(u,s,t){return Math.pow(2,t.descriptor.lct.size+1)})},function(u,s,t){return t.descriptor.lct.exists}),{data:[{minCodeSize:(0,a.readByte)()},c]}]},function(u){return(0,a.peekByte)()(u)===44}),f=(0,i.conditional)({text:[{codes:(0,a.readBytes)(2)},{blockSize:(0,a.readByte)()},{preData:function(s,t,e){return(0,a.readBytes)(e.text.blockSize)(s)}},c]},function(u){var s=(0,a.peekBytes)(2)(u);return s[0]===33&&s[1]===1}),m=(0,i.conditional)({application:[{codes:(0,a.readBytes)(2)},{blockSize:(0,a.readByte)()},{id:function(s,t,e){return(0,a.readString)(e.blockSize)(s)}},c]},function(u){var s=(0,a.peekBytes)(2)(u);return s[0]===33&&s[1]===255}),v=(0,i.conditional)({comment:[{codes:(0,a.readBytes)(2)},c]},function(u){var s=(0,a.peekBytes)(2)(u);return s[0]===33&&s[1]===254}),b=[{header:[{signature:(0,a.readString)(3)},{version:(0,a.readString)(3)}]},{lsd:[{width:(0,a.readUnsigned)(!0)},{height:(0,a.readUnsigned)(!0)},{gct:(0,a.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,a.readByte)()},{pixelAspectRatio:(0,a.readByte)()}]},(0,i.conditional)({gct:(0,a.readArray)(3,function(u,s){return Math.pow(2,s.lsd.gct.size+1)})},function(u,s){return s.lsd.gct.exists}),{frames:(0,i.loop)([d,m,v,h,f],function(u){var s=(0,a.peekByte)()(u);return s===33||s===44})}],R=b;w.default=R}(gt)),gt}var Fe={},jt;function mr(){return jt||(jt=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.deinterlace=void 0,Fe.deinterlace=function(w,i){for(var a=new Array(w.length),c=w.length/i,d=function(R,u){var s=w.slice(u*i,(u+1)*i);a.splice.apply(a,[R*i,i].concat(s))},h=[0,4,2,1],f=[8,8,4,2],m=0,v=0;v<4;v++)for(var b=h[v];b<c;b+=f[v])d(b,m),m++;return a}),Fe}var Qe={},Vt;function wr(){return Vt||(Vt=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.lzw=void 0,Qe.lzw=function(w,i,a){var c=4096,d=-1,h=a,f,m,v,b,R,u,s,C,t,e,g,r,P,y,x,E,o=new Array(a),n=new Array(c),l=new Array(c),p=new Array(c+1);for(r=w,m=1<<r,R=m+1,f=m+2,s=d,b=r+1,v=(1<<b)-1,t=0;t<m;t++)n[t]=0,l[t]=t;var g,C,P,y,E,x;for(g=C=P=y=E=x=0,e=0;e<h;){if(y===0){if(C<b){g+=i[x]<<C,C+=8,x++;continue}if(t=g&v,g>>=b,C-=b,t>f||t==R)break;if(t==m){b=r+1,v=(1<<b)-1,f=m+2,s=d;continue}if(s==d){p[y++]=l[t],s=t,P=t;continue}for(u=t,t==f&&(p[y++]=P,t=s);t>m;)p[y++]=l[t],t=n[t];P=l[t]&255,p[y++]=P,f<c&&(n[f]=s,l[f]=P,f++,!(f&v)&&f<c&&(b++,v+=f)),s=u}y--,o[E++]=p[y],e++}for(e=E;e<h;e++)o[e]=0;return o}),Qe}var Jt;function yr(){return Jt||(Jt=1,function(w){var i=$e&&$e.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(w,"__esModule",{value:!0}),w.decompressFrames=w.decompressFrame=w.parseGIF=void 0;var a=i(pr()),c=nr(),d=or(),h=mr(),f=wr();w.parseGIF=function(v){var b=new Uint8Array(v);return c.parse(d.buildStream(b),a.default)};var m=function(v){for(var b=v.pixels.length,R=new Uint8ClampedArray(b*4),u=0;u<b;u++){var s=u*4,t=v.pixels[u],e=v.colorTable[t];R[s]=e[0],R[s+1]=e[1],R[s+2]=e[2],R[s+3]=t!==v.transparentIndex?255:0}return R};w.decompressFrame=function(v,b,R){if(!v.image){console.warn("gif frame does not have associated image.");return}var u=v.image,s=u.descriptor.width*u.descriptor.height,t=f.lzw(u.data.minCodeSize,u.data.blocks,s);u.descriptor.lct.interlaced&&(t=h.deinterlace(t,u.descriptor.width));var e={pixels:t,dims:{top:v.image.descriptor.top,left:v.image.descriptor.left,width:v.image.descriptor.width,height:v.image.descriptor.height}};return u.descriptor.lct&&u.descriptor.lct.exists?e.colorTable=u.lct:e.colorTable=b,v.gce&&(e.delay=(v.gce.delay||10)*10,e.disposalType=v.gce.extras.disposal,v.gce.extras.transparentColorGiven&&(e.transparentIndex=v.gce.transparentColorIndex)),R&&(e.patch=m(e)),e},w.decompressFrames=function(v,b){return v.frames.filter(function(R){return R.image}).map(function(R){return w.decompressFrame(R,v.gct,b)})}}($e)),$e}var pt,Kt;function _r(){if(Kt)return pt;Kt=1;var w=100,i=256,a=i-1,c=4,d=16,h=1<<d,f=10,m=10,v=h>>m,b=h<<f-m,R=i>>3,u=6,s=1<<u,t=R*s,e=30,r=10,o=1<<r,n=8,l=1<<n,p=r+n,g=1<<p,C=499,P=491,y=487,E=503,x=3*E;function T(L,V){var O,F,B,N,X;function $(){O=[],F=new Int32Array(256),B=new Int32Array(i),N=new Int32Array(i),X=new Int32Array(i>>3);var D,A;for(D=0;D<i;D++)A=(D<<c+8)/i,O[D]=new Float64Array([A,A,A,0]),N[D]=h/i,B[D]=0}function ee(){for(var D=0;D<i;D++)O[D][0]>>=c,O[D][1]>>=c,O[D][2]>>=c,O[D][3]=D}function ce(D,A,q,k,U){O[A][0]-=D*(O[A][0]-q)/o,O[A][1]-=D*(O[A][1]-k)/o,O[A][2]-=D*(O[A][2]-U)/o}function fe(D,A,q,k,U){for(var M=Math.abs(A-D),j=Math.min(A+D,i),I=A+1,z=A-1,Z=1,J,G;I<j||z>M;)G=X[Z++],I<j&&(J=O[I++],J[0]-=G*(J[0]-q)/g,J[1]-=G*(J[1]-k)/g,J[2]-=G*(J[2]-U)/g),z>M&&(J=O[z--],J[0]-=G*(J[0]-q)/g,J[1]-=G*(J[1]-k)/g,J[2]-=G*(J[2]-U)/g)}function _(D,A,q){var k=2147483647,U=k,M=-1,j=M,I,z,Z,J,G;for(I=0;I<i;I++)z=O[I],Z=Math.abs(z[0]-D)+Math.abs(z[1]-A)+Math.abs(z[2]-q),Z<k&&(k=Z,M=I),J=Z-(B[I]>>d-c),J<U&&(U=J,j=I),G=N[I]>>m,N[I]-=G,B[I]+=G<<f;return N[M]+=v,B[M]-=b,j}function te(){var D,A,q,k,U,M,j=0,I=0;for(D=0;D<i;D++){for(q=O[D],U=D,M=q[1],A=D+1;A<i;A++)k=O[A],k[1]<M&&(U=A,M=k[1]);if(k=O[U],D!=U&&(A=k[0],k[0]=q[0],q[0]=A,A=k[1],k[1]=q[1],q[1]=A,A=k[2],k[2]=q[2],q[2]=A,A=k[3],k[3]=q[3],q[3]=A),M!=j){for(F[j]=I+D>>1,A=j+1;A<M;A++)F[A]=D;j=M,I=D}}for(F[j]=I+a>>1,A=j+1;A<256;A++)F[A]=a}function H(D,A,q){for(var k,U,M,j=1e3,I=-1,z=F[A],Z=z-1;z<i||Z>=0;)z<i&&(U=O[z],M=U[1]-A,M>=j?z=i:(z++,M<0&&(M=-M),k=U[0]-D,k<0&&(k=-k),M+=k,M<j&&(k=U[2]-q,k<0&&(k=-k),M+=k,M<j&&(j=M,I=U[3])))),Z>=0&&(U=O[Z],M=A-U[1],M>=j?Z=-1:(Z--,M<0&&(M=-M),k=U[0]-D,k<0&&(k=-k),M+=k,M<j&&(k=U[2]-q,k<0&&(k=-k),M+=k,M<j&&(j=M,I=U[3]))));return I}function ue(){var D,A=L.length,q=30+(V-1)/3,k=A/(3*V),U=~~(k/w),M=o,j=t,I=j>>u;for(I<=1&&(I=0),D=0;D<I;D++)X[D]=M*((I*I-D*D)*l/(I*I));var z;A<x?(V=1,z=3):A%C!==0?z=3*C:A%P!==0?z=3*P:A%y!==0?z=3*y:z=3*E;var Z,J,G,re,ve=0;for(D=0;D<k;)if(Z=(L[ve]&255)<<c,J=(L[ve+1]&255)<<c,G=(L[ve+2]&255)<<c,re=_(Z,J,G),ce(M,re,Z,J,G),I!==0&&fe(I,re,Z,J,G),ve+=z,ve>=A&&(ve-=A),D++,U===0&&(U=1),D%U===0)for(M-=M/q,j-=j/e,I=j>>u,I<=1&&(I=0),re=0;re<I;re++)X[re]=M*((I*I-re*re)*l/(I*I))}function S(){$(),ue(),ee(),te()}this.buildColormap=S;function Te(){for(var D=[],A=[],q=0;q<i;q++)A[O[q][3]]=q;for(var k=0,U=0;U<i;U++){var M=A[U];D[k++]=O[M][0],D[k++]=O[M][1],D[k++]=O[M][2]}return D}this.getColormap=Te,this.lookupRGB=H}return pt=T,pt}var mt,Xt;function br(){if(Xt)return mt;Xt=1;var w=-1,i=12,a=5003,c=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function d(h,f,m,v){var b=Math.max(2,v),R=new Uint8Array(256),u=new Int32Array(a),s=new Int32Array(a),t,e=0,r,o=0,n,l=!1,p,g,C,P,y,E;function x($,ee){R[r++]=$,r>=254&&F(ee)}function T($){L(a),o=g+2,l=!0,X(g,$)}function L($){for(var ee=0;ee<$;++ee)u[ee]=-1}function V($,ee){var ce,fe,_,te,H,ue,S;for(p=$,l=!1,E=p,n=B(E),g=1<<$-1,C=g+1,o=g+2,r=0,te=N(),S=0,ce=a;ce<65536;ce*=2)++S;S=8-S,ue=a,L(ue),X(g,ee);e:for(;(fe=N())!=w;){if(ce=(fe<<i)+te,_=fe<<S^te,u[_]===ce){te=s[_];continue}else if(u[_]>=0){H=ue-_,_===0&&(H=1);do if((_-=H)<0&&(_+=ue),u[_]===ce){te=s[_];continue e}while(u[_]>=0)}X(te,ee),te=fe,o<1<<i?(s[_]=o++,u[_]=ce):T(ee)}X(te,ee),X(C,ee)}function O($){$.writeByte(b),P=h*f,y=0,V(b+1,$),$.writeByte(0)}function F($){r>0&&($.writeByte(r),$.writeBytes(R,0,r),r=0)}function B($){return(1<<$)-1}function N(){if(P===0)return w;--P;var $=m[y++];return $&255}function X($,ee){for(t&=c[e],e>0?t|=$<<e:t=$,e+=E;e>=8;)x(t&255,ee),t>>=8,e-=8;if((o>n||l)&&(l?(n=B(E=p),l=!1):(++E,E==i?n=1<<i:n=B(E))),$==C){for(;e>0;)x(t&255,ee),t>>=8,e-=8;F(ee)}}this.encode=O}return mt=d,mt}var wt,Zt;function Cr(){if(Zt)return wt;Zt=1;var w=_r(),i=br();function a(){this.page=-1,this.pages=[],this.newPage()}a.pageSize=4096,a.charMap={};for(var c=0;c<256;c++)a.charMap[c]=String.fromCharCode(c);a.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(a.pageSize),this.cursor=0},a.prototype.getData=function(){for(var h="",f=0;f<this.pages.length;f++)for(var m=0;m<a.pageSize;m++)h+=a.charMap[this.pages[f][m]];return h},a.prototype.toFlattenUint8Array=function(){for(var h=[],f=0;f<this.pages.length;f++)if(f===this.pages.length-1){var m=Uint8Array.from(this.pages[f].slice(0,this.cursor));h.push(m)}else h.push(this.pages[f]);var v=new Uint8Array(h.reduce(function(b,R){return b+R.length},0));return h.reduce(function(b,R){return v.set(R,b),b+R.length},0),v},a.prototype.writeByte=function(h){this.cursor>=a.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=h},a.prototype.writeUTFBytes=function(h){for(var f=h.length,m=0;m<f;m++)this.writeByte(h.charCodeAt(m))},a.prototype.writeBytes=function(h,f,m){for(var v=m||h.length,b=f||0;b<v;b++)this.writeByte(h[b])};function d(h,f){this.width=~~h,this.height=~~f,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new a}return d.prototype.setDelay=function(h){this.delay=Math.round(h/10)},d.prototype.setFrameRate=function(h){this.delay=Math.round(100/h)},d.prototype.setDispose=function(h){h>=0&&(this.dispose=h)},d.prototype.setRepeat=function(h){this.repeat=h},d.prototype.setTransparent=function(h){this.transparent=h},d.prototype.addFrame=function(h){this.image=h,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),!this.firstFrame&&!this.globalPalette&&this.writePalette(),this.writePixels(),this.firstFrame=!1},d.prototype.finish=function(){this.out.writeByte(59)},d.prototype.setQuality=function(h){h<1&&(h=1),this.sample=h},d.prototype.setDither=function(h){h===!0&&(h="FloydSteinberg"),this.dither=h},d.prototype.setGlobalPalette=function(h){this.globalPalette=h},d.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},d.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},d.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new w(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent,!0))},d.prototype.indexPixels=function(h){var f=this.pixels.length/3;this.indexedPixels=new Uint8Array(f);for(var m=0,v=0;v<f;v++){var b=this.findClosestRGB(this.pixels[m++]&255,this.pixels[m++]&255,this.pixels[m++]&255);this.usedEntry[b]=!0,this.indexedPixels[v]=b}},d.prototype.ditherPixels=function(h,f){var m={FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]]};if(!h||!m[h])throw"Unknown dithering kernel: "+h;var v=m[h],b=0,R=this.height,u=this.width,s=this.pixels,t=f?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var e=0;e<R;e++){f&&(t=t*-1);for(var r=t==1?0:u-1,o=t==1?u:0;r!==o;r+=t){b=e*u+r;var n=b*3,l=s[n],p=s[n+1],g=s[n+2];n=this.findClosestRGB(l,p,g),this.usedEntry[n]=!0,this.indexedPixels[b]=n,n*=3;for(var C=this.colorTab[n],P=this.colorTab[n+1],y=this.colorTab[n+2],E=l-C,x=p-P,T=g-y,L=t==1?0:v.length-1,V=t==1?v.length:0;L!==V;L+=t){var O=v[L][1],F=v[L][2];if(O+r>=0&&O+r<u&&F+e>=0&&F+e<R){var B=v[L][0];n=b+O+F*u,n*=3,s[n]=Math.max(0,Math.min(255,s[n]+E*B)),s[n+1]=Math.max(0,Math.min(255,s[n+1]+x*B)),s[n+2]=Math.max(0,Math.min(255,s[n+2]+T*B))}}}}},d.prototype.findClosest=function(h,f){return this.findClosestRGB((h&16711680)>>16,(h&65280)>>8,h&255,f)},d.prototype.findClosestRGB=function(h,f,m,v){if(this.colorTab===null)return-1;if(this.neuQuant&&!v)return this.neuQuant.lookupRGB(h,f,m);for(var b=0,R=256*256*256,u=this.colorTab.length,s=0,t=0;s<u;t++){var e=h-(this.colorTab[s++]&255),r=f-(this.colorTab[s++]&255),o=m-(this.colorTab[s++]&255),n=e*e+r*r+o*o;(!v||this.usedEntry[t])&&n<R&&(R=n,b=t)}return b},d.prototype.getImagePixels=function(){var h=this.width,f=this.height;this.pixels=new Uint8Array(h*f*3);for(var m=this.image,v=0,b=0,R=0;R<f;R++)for(var u=0;u<h;u++)this.pixels[b++]=m[v++],this.pixels[b++]=m[v++],this.pixels[b++]=m[v++],v++},d.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var h,f;this.transparent===null?(h=0,f=0):(h=1,f=2),this.dispose>=0&&(f=this.dispose&7),f<<=2,this.out.writeByte(0|f|0|h),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},d.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},d.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},d.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},d.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var h=3*256-this.colorTab.length,f=0;f<h;f++)this.out.writeByte(0)},d.prototype.writeShort=function(h){this.out.writeByte(h&255),this.out.writeByte(h>>8&255)},d.prototype.writePixels=function(){var h=new i(this.width,this.height,this.indexedPixels,this.colorDepth);h.encode(this.out)},d.prototype.stream=function(){return this.out},wt=d,wt}var Yt;function Er(){if(Yt)return le;Yt=1;var w=le&&le.__assign||function(){return w=Object.assign||function(u){for(var s,t=1,e=arguments.length;t<e;t++){s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(u[r]=s[r])}return u},w.apply(this,arguments)},i=le&&le.__awaiter||function(u,s,t,e){function r(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(C){try{g(e.next(C))}catch(P){n(P)}}function p(C){try{g(e.throw(C))}catch(P){n(P)}}function g(C){C.done?o(C.value):r(C.value).then(l,p)}g((e=e.apply(u,s||[])).next())})},a=le&&le.__generator||function(u,s){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,n;return n={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function l(g){return function(C){return p([g,C])}}function p(g){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,r&&(o=g[0]&2?r.return:g[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,g[1])).done)return o;switch(r=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,r=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=s.call(u,t)}catch(C){g=[6,C],r=0}finally{e=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},c=le&&le.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(le,"__esModule",{value:!0}),le.AwesomeQR=void 0;var d=gr(),h=yr(),f=ar(),m=c(Cr()),v=.4,b=function(){function u(s){var t=Object.assign({},s);if(Object.keys(u.defaultOptions).forEach(function(e){e in t||Object.defineProperty(t,e,{value:u.defaultOptions[e],enumerable:!0,writable:!0})}),t.components?typeof t.components=="object"&&Object.keys(u.defaultComponentOptions).forEach(function(e){e in t.components?Object.defineProperty(t.components,e,{value:w(w({},u.defaultComponentOptions[e]),t.components[e]),enumerable:!0,writable:!0}):Object.defineProperty(t.components,e,{value:u.defaultComponentOptions[e],enumerable:!0,writable:!0})}):t.components=u.defaultComponentOptions,t.dotScale!==null&&t.dotScale!==void 0){if(t.dotScale<=0||t.dotScale>1)throw new Error("dotScale should be in range (0, 1].");t.components.data.scale=t.dotScale,t.components.timing.scale=t.dotScale,t.components.alignment.scale=t.dotScale}this.options=t,this.canvas=d.createCanvas(s.size,s.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new f.QRCodeModel(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}return u.prototype.draw=function(){var s=this;return new Promise(function(t){return s._draw().then(t)})},u.prototype._clear=function(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)},u._prepareRoundedCornerClip=function(s,t,e,r,o,n){s.beginPath(),s.moveTo(t,e),s.arcTo(t+r,e,t+r,e+o,n),s.arcTo(t+r,e+o,t,e+o,n),s.arcTo(t,e+o,t,e,n),s.arcTo(t,e,t+r,e,n),s.closePath()},u._getAverageRGB=function(s){var t=5,e={r:0,g:0,b:0},r,o,n=-4,l={r:0,g:0,b:0},p=0;o=s.naturalHeight||s.height,r=s.naturalWidth||s.width;var g=d.createCanvas(r,o),C=g.getContext("2d");if(!C)return e;C.drawImage(s,0,0);var P;try{P=C.getImageData(0,0,r,o)}catch{return e}for(;(n+=t*4)<P.data.length;)P.data[n]>200||P.data[n+1]>200||P.data[n+2]>200||(++p,l.r+=P.data[n],l.g+=P.data[n+1],l.b+=P.data[n+2]);return l.r=~~(l.r/p),l.g=~~(l.g/p),l.b=~~(l.b/p),l},u._drawDot=function(s,t,e,r,o,n){o===void 0&&(o=0),n===void 0&&(n=1),s.fillRect((t+o)*r,(e+o)*r,n*r,n*r)},u._drawAlignProtector=function(s,t,e,r){s.clearRect((t-2)*r,(e-2)*r,5*r,5*r),s.fillRect((t-2)*r,(e-2)*r,5*r,5*r)},u._drawAlign=function(s,t,e,r,o,n,l,p){o===void 0&&(o=0),n===void 0&&(n=1);var g=s.fillStyle;s.fillStyle=l,new Array(4).fill(0).map(function(C,P){u._drawDot(s,t-2+P,e-2,r,o,n),u._drawDot(s,t+2,e-2+P,r,o,n),u._drawDot(s,t+2-P,e+2,r,o,n),u._drawDot(s,t-2,e+2-P,r,o,n)}),u._drawDot(s,t,e,r,o,n),p||(s.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map(function(C,P){u._drawDot(s,t-1+P,e-1,r,o,n),u._drawDot(s,t+1,e-1+P,r,o,n),u._drawDot(s,t+1-P,e+1,r,o,n),u._drawDot(s,t-1,e+1-P,r,o,n)})),s.fillStyle=g},u.prototype._draw=function(){var s,t,e,r,o,n,l,p,g,C,P,y,E,x,T,L,V,O,F;return i(this,void 0,void 0,function(){var B,N,X,$,ee,ce,fe,_,te,H,ue,S,Te,D,A,q,k,U,M,j,I,K,z,Z,J,G,re,ve,ie,ae,Je,Re,Bt,he,K,Ke,Xe,xt,ne,Tt,K,me,oe,se,He,Ze,K,Ye,At,et,kt,K,me,oe,se,Mt,Ae,_e,ke,be,Me,Ge,Lt,we,Se,Le,Pe,tt,qe,Ot,It,rt,$t;return a(this,function(Oe){switch(Oe.label){case 0:if(B=(s=this.qrCode)===null||s===void 0?void 0:s.moduleCount,N=this.options.size,X=this.options.margin,(X<0||X*2>=N)&&(X=0),$=Math.ceil(X),ee=N-2*X,ce=this.options.whiteMargin,fe=this.options.backgroundDimming,_=Math.ceil(ee/B),te=_*B,H=te+2*$,ue=d.createCanvas(H,H),S=ue.getContext("2d"),this._clear(),S.save(),S.translate($,$),Te=d.createCanvas(H,H),D=Te.getContext("2d"),A=null,q=[],!this.options.gifBackground)return[3,1];if(k=h.parseGIF(this.options.gifBackground),A=k,q=h.decompressFrames(k,!0),this.options.autoColor){for(U=0,M=0,j=0,I=0,K=0;K<q[0].colorTable.length;K++)z=q[0].colorTable[K],!(z[0]>200||z[1]>200||z[2]>200)&&(z[0]===0&&z[1]===0&&z[2]===0||(I++,U+=z[0],M+=z[1],j+=z[2]));U=~~(U/I),M=~~(M/I),j=~~(j/I),this.options.colorDark="rgb("+U+","+M+","+j+")"}return[3,4];case 1:return this.options.backgroundImage?[4,d.loadImage(this.options.backgroundImage)]:[3,3];case 2:return Z=Oe.sent(),this.options.autoColor&&(J=u._getAverageRGB(Z),this.options.colorDark="rgb("+J.r+","+J.g+","+J.b+")"),D.drawImage(Z,0,0,Z.width,Z.height,0,0,H,H),D.rect(0,0,H,H),D.fillStyle=fe,D.fill(),[3,4];case 3:D.rect(0,0,H,H),D.fillStyle=this.options.colorLight,D.fill(),Oe.label=4;case 4:for(G=f.QRUtil.getPatternPosition(this.qrCode.typeNumber),re=((e=(t=this.options.components)===null||t===void 0?void 0:t.data)===null||e===void 0?void 0:e.scale)||v,ve=(1-re)*.5,ie=0;ie<B;ie++)for(ae=0;ae<B;ae++){for(Je=this.qrCode.isDark(ie,ae),Re=ae<8&&(ie<8||ie>=B-8)||ae>=B-8&&ie<8,Bt=ie==6&&ae>=8&&ae<=B-8||ae==6&&ie>=8&&ie<=B-8,he=Re||Bt,K=1;K<G.length-1;K++)he=he||ie>=G[K]-2&&ie<=G[K]+2&&ae>=G[K]-2&&ae<=G[K]+2;Ke=ae*_+(he?0:ve*_),Xe=ie*_+(he?0:ve*_),S.strokeStyle=Je?this.options.colorDark:this.options.colorLight,S.lineWidth=.5,S.fillStyle=Je?this.options.colorDark:"rgba(255, 255, 255, 0.6)",G.length===0?he||S.fillRect(Ke,Xe,(he?1:re)*_,(he?1:re)*_):(xt=ae<B-4&&ae>=B-4-5&&ie<B-4&&ie>=B-4-5,!he&&!xt&&S.fillRect(Ke,Xe,(he?1:re)*_,(he?1:re)*_))}if(ne=G[G.length-1],Tt="rgba(255, 255, 255, 0.6)",S.fillStyle=Tt,S.fillRect(0,0,8*_,8*_),S.fillRect(0,(B-8)*_,8*_,8*_),S.fillRect((B-8)*_,0,8*_,8*_),!((o=(r=this.options.components)===null||r===void 0?void 0:r.timing)===null||o===void 0)&&o.protectors&&(S.fillRect(8*_,6*_,(B-8-8)*_,_),S.fillRect(6*_,8*_,_,(B-8-8)*_)),!((l=(n=this.options.components)===null||n===void 0?void 0:n.cornerAlignment)===null||l===void 0)&&l.protectors&&u._drawAlignProtector(S,ne,ne,_),!((g=(p=this.options.components)===null||p===void 0?void 0:p.alignment)===null||g===void 0)&&g.protectors){for(K=0;K<G.length;K++)for(me=0;me<G.length;me++)if(oe=G[me],se=G[K],!(oe===6&&(se===6||se===ne))){if(se===6&&(oe===6||oe===ne))continue;if(oe===ne&&se===ne)continue;u._drawAlignProtector(S,oe,se,_)}}for(S.fillStyle=this.options.colorDark,S.fillRect(0,0,7*_,_),S.fillRect((B-7)*_,0,7*_,_),S.fillRect(0,6*_,7*_,_),S.fillRect((B-7)*_,6*_,7*_,_),S.fillRect(0,(B-7)*_,7*_,_),S.fillRect(0,(B-7+6)*_,7*_,_),S.fillRect(0,0,_,7*_),S.fillRect(6*_,0,_,7*_),S.fillRect((B-7)*_,0,_,7*_),S.fillRect((B-7+6)*_,0,_,7*_),S.fillRect(0,(B-7)*_,_,7*_),S.fillRect(6*_,(B-7)*_,_,7*_),S.fillRect(2*_,2*_,3*_,3*_),S.fillRect((B-7+2)*_,2*_,3*_,3*_),S.fillRect(2*_,(B-7+2)*_,3*_,3*_),He=((P=(C=this.options.components)===null||C===void 0?void 0:C.timing)===null||P===void 0?void 0:P.scale)||v,Ze=(1-He)*.5,K=0;K<B-8;K+=2)u._drawDot(S,8+K,6,_,Ze,He),u._drawDot(S,6,8+K,_,Ze,He);for(Ye=((E=(y=this.options.components)===null||y===void 0?void 0:y.cornerAlignment)===null||E===void 0?void 0:E.scale)||v,At=(1-Ye)*.5,u._drawAlign(S,ne,ne,_,At,Ye,this.options.colorDark,((T=(x=this.options.components)===null||x===void 0?void 0:x.cornerAlignment)===null||T===void 0?void 0:T.protectors)||!1),et=((V=(L=this.options.components)===null||L===void 0?void 0:L.alignment)===null||V===void 0?void 0:V.scale)||v,kt=(1-et)*.5,K=0;K<G.length;K++)for(me=0;me<G.length;me++)if(oe=G[me],se=G[K],!(oe===6&&(se===6||se===ne))){if(se===6&&(oe===6||oe===ne))continue;if(oe===ne&&se===ne)continue;u._drawAlign(S,oe,se,_,kt,et,this.options.colorDark,((F=(O=this.options.components)===null||O===void 0?void 0:O.alignment)===null||F===void 0?void 0:F.protectors)||!1)}return ce&&(S.fillStyle="#FFFFFF",S.fillRect(-$,-$,H,$),S.fillRect(-$,te,H,$),S.fillRect(te,-$,$,H),S.fillRect(-$,-$,$,H)),this.options.logoImage?[4,d.loadImage(this.options.logoImage)]:[3,6];case 5:Mt=Oe.sent(),Ae=this.options.logoScale,_e=this.options.logoMargin,ke=this.options.logoCornerRadius,(Ae<=0||Ae>=1)&&(Ae=.2),_e<0&&(_e=0),ke<0&&(ke=0),be=te*Ae,Me=.5*(H-be),Ge=Me,S.restore(),S.fillStyle="#FFFFFF",S.save(),u._prepareRoundedCornerClip(S,Me-_e,Ge-_e,be+2*_e,be+2*_e,ke+_e),S.clip(),Lt=S.globalCompositeOperation,S.globalCompositeOperation="destination-out",S.fill(),S.globalCompositeOperation=Lt,S.restore(),S.save(),u._prepareRoundedCornerClip(S,Me,Ge,be,be,ke),S.clip(),S.drawImage(Mt,Me,Ge,be,be),S.restore(),S.save(),S.translate($,$),Oe.label=6;case 6:if(A){if(q.forEach(function(Ce){we||(we=new m.default(N,N),we.setDelay(Ce.delay),we.setRepeat(0));var ze=Ce.dims,We=ze.width,je=ze.height;Se||(Se=d.createCanvas(We,je),Le=Se.getContext("2d"),Le.rect(0,0,Se.width,Se.height),Le.fillStyle="#ffffff",Le.fill()),(!Pe||!qe||We!==Pe.width||je!==Pe.height)&&(Pe=d.createCanvas(We,je),tt=Pe.getContext("2d"),qe=tt.createImageData(We,je)),qe.data.set(Ce.patch),tt.putImageData(qe,0,0),Le.drawImage(Pe,Ce.dims.left,Ce.dims.top);var Ft=d.createCanvas(H,H),Ie=Ft.getContext("2d");Ie.drawImage(Se,0,0,H,H),Ie.rect(0,0,H,H),Ie.fillStyle=fe,Ie.fill(),Ie.drawImage(ue,0,0,H,H);var it=d.createCanvas(N,N),Qt=it.getContext("2d");Qt.drawImage(Ft,0,0,N,N),we.addFrame(Qt.getImageData(0,0,it.width,it.height).data)}),!we)throw new Error("No frames.");return we.finish(),R(this.canvas)?(Ot=we.stream().toFlattenUint8Array(),It=Ot.reduce(function(Ce,ze){return Ce+String.fromCharCode(ze)},""),[2,Promise.resolve("data:image/gif;base64,"+window.btoa(It))]):[2,Promise.resolve(Buffer.from(we.stream().toFlattenUint8Array()))]}else return D.drawImage(ue,0,0,H,H),S.drawImage(Te,-$,-$,H,H),rt=d.createCanvas(N,N),$t=rt.getContext("2d"),$t.drawImage(ue,0,0,N,N),this.canvas=rt,R(this.canvas)?[2,Promise.resolve(this.canvas.toDataURL())]:[2,Promise.resolve(this.canvas.toBuffer())]}})})},u.CorrectLevel=f.QRErrorCorrectLevel,u.defaultComponentOptions={data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}},u.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"#ffffff",correctLevel:f.QRErrorCorrectLevel.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:u.defaultComponentOptions,autoColor:!0},u}();le.AwesomeQR=b;function R(u){try{return u instanceof HTMLElement}catch{return typeof u=="object"&&u.nodeType===1&&typeof u.style=="object"&&typeof u.ownerDocument=="object"}}return le}var er;function Rr(){return er||(er=1,function(w){var i=Ee&&Ee.__createBinding||(Object.create?function(d,h,f,m){m===void 0&&(m=f),Object.defineProperty(d,m,{enumerable:!0,get:function(){return h[f]}})}:function(d,h,f,m){m===void 0&&(m=f),d[m]=h[f]}),a=Ee&&Ee.__exportStar||function(d,h){for(var f in d)f!=="default"&&!h.hasOwnProperty(f)&&i(h,d,f)};Object.defineProperty(w,"__esModule",{value:!0}),a(ar(),w);var c=Er();Object.defineProperty(w,"AwesomeQR",{enumerable:!0,get:function(){return c.AwesomeQR}})}(Ee)),Ee}var Sr=Rr();async function yt(w){let i=await new Sr.AwesomeQR({text:w,size:500}).draw();if(typeof i!="string")throw new Error("expected string data url from AwesomeQR.draw()");return i}class Q{constructor(i,a,c,d,h){this._legacyCanvasSize=Q.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=i,this.$canvas=document.createElement("canvas"),c&&typeof c=="object"?this._onDecode=a:(console.warn(c||d||h?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=a),a=typeof c=="object"?c:{},this._onDecodeError=a.onDecodeError||(typeof c=="function"?c:this._onDecodeError),this._calculateScanRegion=a.calculateScanRegion||(typeof d=="function"?d:this._calculateScanRegion),this._preferredCamera=a.preferredCamera||h||this._preferredCamera,this._legacyCanvasSize=typeof c=="number"?c:typeof d=="number"?d:this._legacyCanvasSize,this._maxScansPerSecond=a.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),i.disablePictureInPicture=!0,i.playsInline=!0,i.muted=!0;let f=!1;if(i.hidden&&(i.hidden=!1,f=!0),document.body.contains(i)||(document.body.appendChild(i),f=!0),c=i.parentElement,a.highlightScanRegion||a.highlightCodeOutline){if(d=!!a.overlay,this.$overlay=a.overlay||document.createElement("div"),h=this.$overlay.style,h.position="absolute",h.display="none",h.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!d&&a.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}c.insertBefore(this.$overlay,this.$video.nextSibling)}a.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(i),requestAnimationFrame(()=>{let m=window.getComputedStyle(i);m.display==="none"&&(i.style.setProperty("display","block","important"),f=!0),m.visibility!=="visible"&&(i.style.setProperty("visibility","visible","important"),f=!0),f&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),i.style.opacity="0",i.style.width="0",i.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),i.addEventListener("play",this._onPlay),i.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=Q.createQrEngine()}static set WORKER_PATH(i){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await Q.listCameras(!1)).length}catch{return!1}}static async listCameras(i=!1){if(!navigator.mediaDevices)return[];let a=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(d=>d.kind==="videoinput"),c;try{i&&(await a()).every(d=>!d.label)&&(c=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await a()).map((d,h)=>({id:d.deviceId,label:d.label||(h===0?"Default Camera":`Camera ${h+1}`)}))}finally{c&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),Q._stopVideoStream(c))}}async hasFlash(){let i;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;i=this.$video.srcObject}else i=(await this._getCameraStream()).stream;return"torch"in i.getVideoTracks()[0].getSettings()}catch{return!1}finally{i&&i!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),Q._stopVideoStream(i))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(i){throw this._flashOn=!1,i}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),Q._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:i,facingMode:a}=await this._getCameraStream();!this._active||this._paused?Q._stopVideoStream(i):(this._setVideoMirror(a),this.$video.srcObject=i,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(i){if(!this._paused)throw this._active=!1,i}}stop(){this.pause(),this._active=!1}async pause(i=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let a=()=>{this.$video.srcObject instanceof MediaStream&&(Q._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return i?(a(),!0):(await new Promise(c=>setTimeout(c,300)),this._paused?(a(),!0):!1)}async setCamera(i){i!==this._preferredCamera&&(this._preferredCamera=i,await this._restartVideoStream())}static async scanImage(i,a,c,d,h=!1,f=!1){let m,v=!1;a&&("scanRegion"in a||"qrEngine"in a||"canvas"in a||"disallowCanvasResizing"in a||"alsoTryWithoutScanRegion"in a||"returnDetailedScanResult"in a)?(m=a.scanRegion,c=a.qrEngine,d=a.canvas,h=a.disallowCanvasResizing||!1,f=a.alsoTryWithoutScanRegion||!1,v=!0):console.warn(a||c||d||h||f?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),a=!!c;try{let b,R;[c,b]=await Promise.all([c||Q.createQrEngine(),Q._loadImage(i)]),[d,R]=Q._drawToCanvas(b,m,d,h);let u;if(c instanceof Worker){let s=c;a||Q._postWorkerMessageSync(s,"inversionMode","both"),u=await new Promise((t,e)=>{let r,o,n,l=-1;o=g=>{g.data.id===l&&(s.removeEventListener("message",o),s.removeEventListener("error",n),clearTimeout(r),g.data.data!==null?t({data:g.data.data,cornerPoints:Q._convertPoints(g.data.cornerPoints,m)}):e(Q.NO_QR_CODE_FOUND))},n=g=>{s.removeEventListener("message",o),s.removeEventListener("error",n),clearTimeout(r),e("Scanner error: "+(g?g.message||g:"Unknown Error"))},s.addEventListener("message",o),s.addEventListener("error",n),r=setTimeout(()=>n("timeout"),1e4);let p=R.getImageData(0,0,d.width,d.height);l=Q._postWorkerMessageSync(s,"decode",p,[p.data.buffer])})}else u=await Promise.race([new Promise((s,t)=>window.setTimeout(()=>t("Scanner error: timeout"),1e4)),(async()=>{try{var[s]=await c.detect(d);if(!s)throw Q.NO_QR_CODE_FOUND;return{data:s.rawValue,cornerPoints:Q._convertPoints(s.cornerPoints,m)}}catch(t){if(s=t.message||t,/not implemented|service unavailable/.test(s))return Q._disableBarcodeDetector=!0,Q.scanImage(i,{scanRegion:m,canvas:d,disallowCanvasResizing:h,alsoTryWithoutScanRegion:f});throw`Scanner error: ${s}`}})()]);return v?u:u.data}catch(b){if(!m||!f)throw b;let R=await Q.scanImage(i,{qrEngine:c,canvas:d,disallowCanvasResizing:h});return v?R:R.data}finally{a||Q._postWorkerMessage(c,"close")}}setGrayscaleWeights(i,a,c,d=!0){Q._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:i,green:a,blue:c,useIntegerApproximation:d})}setInversionMode(i){Q._postWorkerMessage(this._qrEnginePromise,"inversionMode",i)}static async createQrEngine(i){if(i&&console.warn("Specifying a worker path is not required and not supported anymore."),i=()=>fr(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[],import.meta.url).then(c=>c.createWorker()),!(!Q._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return i();let a=navigator.userAgentData;return a&&a.brands.some(({brand:c})=>/Chromium/i.test(c))&&/mac ?OS/i.test(a.platform)&&await a.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:c,platformVersion:d})=>/arm/i.test(c||"arm")&&13<=parseInt(d||"13")).catch(()=>!0)?i():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(i){let a=Math.round(.6666666666666666*Math.min(i.videoWidth,i.videoHeight));return{x:Math.round((i.videoWidth-a)/2),y:Math.round((i.videoHeight-a)/2),width:a,height:a,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var i=this.$video,a=i.videoWidth,c=i.videoHeight,d=i.offsetWidth,h=i.offsetHeight,f=i.offsetLeft,m=i.offsetTop,v=window.getComputedStyle(i),b=v.objectFit,R=a/c,u=d/h;switch(b){case"none":var s=a,t=c;break;case"fill":s=d,t=h;break;default:(b==="cover"?R>u:R<u)?(t=h,s=t*R):(s=d,t=s/R),b==="scale-down"&&(s=Math.min(s,a),t=Math.min(t,c))}var[e,r]=v.objectPosition.split(" ").map((n,l)=>{const p=parseFloat(n);return n.endsWith("%")?(l?h-t:d-s)*p/100:p});v=this._scanRegion.width||a,u=this._scanRegion.height||c,b=this._scanRegion.x||0;var o=this._scanRegion.y||0;R=this.$overlay.style,R.width=`${v/a*s}px`,R.height=`${u/c*t}px`,R.top=`${m+r+o/c*t}px`,c=/scaleX\(-1\)/.test(i.style.transform),R.left=`${f+(c?d-e-s:e)+(c?a-b-v:b)/a*s}px`,R.transform=i.style.transform}})}static _convertPoints(i,a){if(!a)return i;let c=a.x||0,d=a.y||0,h=a.width&&a.downScaledWidth?a.width/a.downScaledWidth:1;a=a.height&&a.downScaledHeight?a.height/a.downScaledHeight:1;for(let f of i)f.x=f.x*h+c,f.y=f.y*a+d;return i}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var i=Date.now()-this._lastScanTimestamp,a=1e3/this._maxScansPerSecond;i<a&&await new Promise(d=>setTimeout(d,a-i)),this._lastScanTimestamp=Date.now();try{var c=await Q.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(d){if(!this._active)return;this._onDecodeError(d)}!Q._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=Q.createQrEngine()),c?(this._onDecode?this._onDecode(c):this._legacyOnDecode&&this._legacyOnDecode(c.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",c.cornerPoints.map(({x:d,y:h})=>`${d},${h}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(i){i!==Q.NO_QR_CODE_FOUND&&console.log(i)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let i=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",a=[{width:{min:1024}},{width:{min:768}},{}],c=a.map(d=>Object.assign({},d,{[i]:{exact:this._preferredCamera}}));for(let d of[...c,...a])try{let h=await navigator.mediaDevices.getUserMedia({video:d,audio:!1}),f=this._getFacingMode(h)||(d.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:h,facingMode:f}}catch{}throw"Camera not found."}async _restartVideoStream(){let i=this._paused;await this.pause(!0)&&!i&&this._active&&await this.start()}static _stopVideoStream(i){for(let a of i.getTracks())a.stop(),i.removeTrack(a)}_setVideoMirror(i){this.$video.style.transform="scaleX("+(i==="user"?-1:1)+")"}_getFacingMode(i){return(i=i.getVideoTracks()[0])?/rear|back|environment/i.test(i.label)?"environment":/front|user|face/i.test(i.label)?"user":null:null}static _drawToCanvas(i,a,c,d=!1){c=c||document.createElement("canvas");let h=a&&a.x?a.x:0,f=a&&a.y?a.y:0,m=a&&a.width?a.width:i.videoWidth||i.width,v=a&&a.height?a.height:i.videoHeight||i.height;return d||(d=a&&a.downScaledWidth?a.downScaledWidth:m,a=a&&a.downScaledHeight?a.downScaledHeight:v,c.width!==d&&(c.width=d),c.height!==a&&(c.height=a)),a=c.getContext("2d",{alpha:!1}),a.imageSmoothingEnabled=!1,a.drawImage(i,h,f,m,v,0,0,c.width,c.height),[c,a]}static async _loadImage(i){if(i instanceof Image)return await Q._awaitImageLoad(i),i;if(i instanceof HTMLVideoElement||i instanceof HTMLCanvasElement||i instanceof SVGImageElement||"OffscreenCanvas"in window&&i instanceof OffscreenCanvas||"ImageBitmap"in window&&i instanceof ImageBitmap)return i;if(i instanceof File||i instanceof Blob||i instanceof URL||typeof i=="string"){let a=new Image;a.src=i instanceof File||i instanceof Blob?URL.createObjectURL(i):i.toString();try{return await Q._awaitImageLoad(a),a}finally{(i instanceof File||i instanceof Blob)&&URL.revokeObjectURL(a.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(i){i.complete&&i.naturalWidth!==0||await new Promise((a,c)=>{let d=h=>{i.removeEventListener("load",d),i.removeEventListener("error",d),h instanceof ErrorEvent?c("Image load error"):a()};i.addEventListener("load",d),i.addEventListener("error",d)})}static async _postWorkerMessage(i,a,c,d){return Q._postWorkerMessageSync(await i,a,c,d)}static _postWorkerMessageSync(i,a,c,d){if(!(i instanceof Worker))return-1;let h=Q._workerMessageId++;return i.postMessage({id:h,type:a,data:c},d),h}}Q.DEFAULT_CANVAS_SIZE=400;Q.NO_QR_CODE_FOUND="No QR code found";Q._disableBarcodeDetector=!1;Q._workerMessageId=0;var Pr=pe("<div><button class=btn style=margin-left:5px;>Invite</button><button class=btn style=margin-left:5px;>Join</button><br>"),Dr=pe("<br>");const tr="7ae48d46-10f2-kitty-",Br=w=>{let[i,a]=Dt({pendingInvites:[]});return(()=>{var c=Pr(),d=c.firstChild,h=d.nextSibling;return h.nextSibling,d.$$click=async()=>{let f=xr(),m=new Nt(tr+f);m.on("open",v=>{console.log(v),m.on("error",b=>{console.log(b)}),m.on("connection",b=>{b.on("open",()=>{w.onConnection({connection:b}),a("pendingInvites",R=>R.filter(u=>u.value.peer!=m))})}),a("pendingInvites",xe(b=>b.push(new Ne({inviteCode:f,peer:m}))))})},h.$$click=async()=>{let f=window.prompt("Enter invite code:");if(f==null||(f=f.trim(),f==""))return;let m=new Nt;m.on("open",v=>{console.log(v),m.on("error",R=>{console.log(R)});let b=m.connect(tr+f);b.on("open",()=>{w.onConnection({connection:b})})})},Ve(c,W(ir,{get each(){return i.pendingInvites},children:f=>["Invite: ",Ue(()=>f.value.inviteCode),Dr()]}),null),c})()};function xr(){let w="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i="";for(let a=0;a<6;++a){let c=Math.floor(Math.random()*w.length);i+=w.substring(c,c+1)}return i}rr(["click"]);function Tr(){let[w,i]=Dt({connections:[]});return{connections:()=>w.connections,Render:()=>W(Br,{onConnection:c=>{i("connections",d=>[...d,c.connection])}})}}var _t=pe("<img>"),bt=pe("<div style=position:relative;><video disablepictureinpicture>"),Ct=pe("<button class=btn>Do Scan"),Et=pe("<button class=btn>Paste"),ge=pe("<br>"),Ar=pe("<input>"),kr=pe("<div>Automege WebRTC Test<br>Via PeerJs:<br><hr>Via QR Codes:<br>"),Rt=pe("<button class=btn>Copy");const Fr=()=>{let[w,i]=Dt({offer:void 0,answer:void 0,iceCandidates:[],connectionEstablished:!1,doScanOffer:!1,doScanAnswer:!1,doScanIce:!1,messages:[]});const a={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},c=new RTCPeerConnection(a),d=c.createDataChannel("msg");(async()=>{const y=await c.createOffer();await c.setLocalDescription(y),i("offer",new Ne(y))})(),c.addEventListener("icecandidate",y=>{if(y.candidate!=null){let E=y.candidate;i("iceCandidates",xe(x=>x.push(new Ne(E))))}}),c.addEventListener("connectionstatechange",y=>{c.connectionState=="connected"&&i("connectionEstablished",!0)}),d.addEventListener("open",y=>{console.log(y)}),d.addEventListener("close",y=>{console.log(y)}),d.addEventListener("message",y=>{i("messages",xe(E=>E.push(y.data)))}),c.addEventListener("datachannel",y=>{console.log(y),y.channel.addEventListener("message",E=>{i("messages",xe(x=>x.push(E.data)))})});let h=Ue(()=>{let y=w.offer?.value;if(y==null)return;let E=JSON.stringify(y),T=new TextEncoder().encode(E),L=ht(T);return St(L)}),f=y=>{let E=Pt(y),x=dt(E),L=new TextDecoder("utf-8").decode(x);return JSON.parse(L)},m=Ue(()=>{let y=w.answer?.value;if(y==null)return;let E=JSON.stringify(y),T=new TextEncoder().encode(E),L=ht(T);return St(L)}),v=y=>{let E=Pt(y),x=dt(E),L=new TextDecoder("utf-8").decode(x);return JSON.parse(L)},b=Ue(()=>{let y=w.iceCandidates.map(O=>O.value),E=JSON.stringify(y),T=new TextEncoder().encode(E),L=ht(T);return St(L)}),R=y=>{let E=Pt(y),x=dt(E),L=new TextDecoder("utf-8").decode(x);return JSON.parse(L)},u=()=>W(de,{get when(){return h()},keyed:!0,children:y=>{let[E]=ot(()=>yt(y));return W(de,{get when(){return E()},children:x=>(()=>{var T=_t();return st(()=>at(T,"src",x())),T})()})}}),s=()=>{let[y,E]=ct();return ut(async()=>{let x=y();if(x==null)return;const T=new Q(x,async L=>{let V=f(L.data);console.log(V),await T.stop(),await c.setRemoteDescription(new RTCSessionDescription(V));let O=await c.createAnswer();await c.setLocalDescription(O),i("answer",new Ne(O)),i("doScanOffer",!1)},{highlightScanRegion:!0});await T.start()}),(()=>{var x=bt(),T=x.firstChild,L=E;return typeof L=="function"?nt(L,T):E=T,T.style.setProperty("border","1px solid green"),T.style.setProperty("width","300px"),T.style.setProperty("height","300px"),x})()},t=()=>W(lt,{get children(){return[W(De,{get when(){return!w.doScanOffer},get children(){var y=Ct();return y.$$click=()=>i("doScanOffer",!0),y}}),W(De,{get when(){return w.doScanOffer},get children(){return W(s,{})}})]}}),e=()=>W(de,{get when(){return m()},keyed:!0,children:y=>{let[E]=ot(()=>yt(y));return W(de,{get when(){return E()},children:x=>(()=>{var T=_t();return st(()=>at(T,"src",x())),T})()})}}),r=()=>{let[y,E]=ct();return ut(async()=>{let x=y();if(x==null)return;const T=new Q(x,async L=>{let V=v(L.data);console.log(V),await T.stop(),await c.setRemoteDescription(V),i("doScanAnswer",!1)},{highlightScanRegion:!0,highlightCodeOutline:!0});await T.start()}),(()=>{var x=bt(),T=x.firstChild,L=E;return typeof L=="function"?nt(L,T):E=T,T.style.setProperty("border","1px solid green"),T.style.setProperty("width","300px"),T.style.setProperty("height","300px"),x})()},o=()=>W(lt,{get children(){return[W(De,{get when(){return!w.doScanAnswer},get children(){var y=Ct();return y.$$click=()=>i("doScanAnswer",!0),y}}),W(De,{get when(){return w.doScanAnswer},get children(){return W(r,{})}})]}}),n=()=>W(de,{get when(){return b()},keyed:!0,children:y=>{let[E]=ot(()=>yt(y));return W(de,{get when(){return E()},children:x=>(()=>{var T=_t();return st(()=>at(T,"src",x())),T})()})}}),l=()=>{let[y,E]=ct();return ut(async()=>{let x=y();if(x==null)return;const T=new Q(x,async L=>{let V=R(L.data);await T.stop();for(let O of V)await c.addIceCandidate(O)},{highlightScanRegion:!0,highlightCodeOutline:!0});await T.start()}),(()=>{var x=bt(),T=x.firstChild,L=E;return typeof L=="function"?nt(L,T):E=T,T.style.setProperty("border","1px solid green"),T.style.setProperty("width","300px"),T.style.setProperty("height","300px"),x})()},p=()=>W(lt,{get children(){return[W(De,{get when(){return!w.doScanIce},get children(){var y=Ct();return y.$$click=()=>i("doScanIce",!0),y}}),W(De,{get when(){return w.doScanIce},get children(){return W(l,{})}})]}}),g=Tr(),C=Ue(()=>g.connections().length!=0);sr(lr(C,y=>{y&&i("connectionEstablished",!0)})),cr(ur(g.connections,y=>{let E=x=>{i("messages",xe(T=>T.push(x)))};y.on("data",E),hr(()=>y.off("data",E))}));let P=y=>dr(()=>{for(let E of g.connections())E.send(y)});return(()=>{var y=kr(),E=y.firstChild,x=E.nextSibling,T=x.nextSibling,L=T.nextSibling,V=L.nextSibling,O=V.nextSibling;return O.nextSibling,y.style.setProperty("width","100%"),y.style.setProperty("height","100%"),y.style.setProperty("overflow-y","auto"),Ve(y,W(g.Render,{}),V),Ve(y,W(de,{get when(){return!w.connectionEstablished},get children(){return[W(de,{get when(){return h()},children:F=>["Call:",(()=>{var B=Rt();return B.$$click=async()=>{let N=F();await navigator.clipboard.writeText(N)},B})(),ge(),W(u,{})]}),W(de,{get when(){return m()},children:F=>["Answer:",(()=>{var B=Rt();return B.$$click=async()=>{let N=F();await navigator.clipboard.writeText(N)},B})(),ge(),W(e,{})]}),W(de,{get when(){return b()},children:F=>["Ice:",(()=>{var B=Rt();return B.$$click=async()=>{let N=F();await navigator.clipboard.writeText(N)},B})(),ge(),W(n,{})]}),"Scan Offer:",(()=>{var F=Et();return F.$$click=async()=>{let B=await navigator.clipboard.readText(),N=f(B);await c.setRemoteDescription(N);let X=await c.createAnswer();await c.setLocalDescription(X),i("answer",new Ne(X))},F})(),ge(),W(t,{}),ge(),"Scan Answer:",(()=>{var F=Et();return F.$$click=async()=>{let B=await navigator.clipboard.readText(),N=v(B);await c.setRemoteDescription(N)},F})(),ge(),W(o,{}),ge(),"Scan ICE:",(()=>{var F=Et();return F.$$click=async()=>{let B=await navigator.clipboard.readText(),N=R(B);for(let X of N)await c.addIceCandidate(X)},F})(),ge(),W(p,{}),ge()]}}),null),Ve(y,W(de,{get when(){return w.connectionEstablished},get children(){return[W(ir,{get each(){return w.messages},children:F=>[F,ge()]}),"Enter Message:",(()=>{var F=Ar();return F.addEventListener("change",B=>{let N=B.currentTarget.value;i("messages",xe(X=>X.push(N))),d.readyState=="open"&&d.send(N),P(N),B.currentTarget.value=""}),F.style.setProperty("color","black"),F})()]}}),null),y})()};function St(w){for(var i="",a=w.byteLength,c=0;c<a;c++)i+=String.fromCharCode(w[c]);return window.btoa(i)}function Pt(w){for(var i=atob(w),a=new Uint8Array(i.length),c=0;c<i.length;c++)a[c]=i.charCodeAt(c);return a}rr(["click"]);export{Fr as default};
