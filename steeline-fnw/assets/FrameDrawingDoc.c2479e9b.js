import{a as C,l as j,c as G,A as Q,g as J,b as _,s as c,i as N,I as P,e as $,t as S}from"./index.5aba22ff.js";import{T as F}from"./Component.6024a649.js";import{a as w,V as x}from"./Vec3.ce1f4f7a.js";import{m as K,S as ee}from"./SvgWithPanZoomState.e2089103.js";import{S as te}from"./StandardBorderLandscapeDoc.be2b9e86.js";const ne=S('<div style="flex-grow: 1; display: flex; flex-direction: row;"><div><b style="font-size: 10pt; white-space: nowrap;">Member Schedule</b><table style="border-spacing: 0; width: 100%;"><thead><tr><th style="font-size: 8pt; border-left: black 2px solid; border-top: black 2px solid; border-bottom: 2px solid;">Label</th><th style="font-size: 8pt; border: black 2px solid;">Description</th></tr></thead><tbody></tbody></table></div></div>'),le=S('<img style="max-width: 3cm;">'),re=S('<svg><path fill="transparent" style="stroke-width:1;stroke:black;fill:none;" vector-effect="non-scaling-stroke"></path></svg>',4,!0),ae=S('<svg><rect style="stroke-width:1;stroke:black;fill:none;" vector-effect="non-scaling-stroke"></rect></svg>',4,!0),ie=S("<svg><circle></circle></svg>",4,!0),oe=S('<svg><rect fill="blue"></rect></svg>',4,!0),se=S('<svg><text font-weight="bold" text-anchor="middle" dominant-baseline="middle" style="fill:black;"></text></svg>',4,!0),T=S('<svg><path fill="transparent" stroke="black" stroke-width="3"></path></svg>',4,!0),Y=S('<svg><line stroke="black" stroke-width="1" vector-effect="non-scaling-stroke"></line></svg>',4,!0),de=S('<svg><text fill="black" text-anchor="middle" font-weight="bold"></text></svg>',4,!0),fe=S('<tr><td style="border-left: black 1px solid; border-bottom: black 1px solid; font-size: 8pt;"></td><td style="border-left: black 1px solid; border-bottom: black 1px solid; border-right: black 1px solid; font-size: 8pt;"></td></tr>');async function ue(){let p=new Image;await new Promise(D=>{p.src="./img/steeline-logo.png",p.addEventListener("load",()=>{D()})});let A=document.createElement("canvas");A.width=p.width,A.height=p.height;let L=A.getContext("2d");if(L!=null)return L.drawImage(p,0,0),A.toDataURL("image/png")}let he=await ue();const be=p=>{let A=C(()=>p.dimensionStrings==null?[]:p.dimensionStrings),[L,D]=j(void 0);const[I,R]=G({...K(),scale:.2,panX:-1e3,panY:-3e3});let W=C(()=>{let d=[];for(let e of p.components){let n;if(e.transform==null?n=F.identity:n=e.transform(),e.ceeProperties!=null&&e.length!=null){let a=e.length(),o=e.ceeProperties(),s=Math.atan2(-n.u.z,n.u.x)*180/Math.PI,t;{let r;n.v.y<0?r=w.zero:r=n.w.scale(e.ceeProperties().flangeSize),t=n.o.add(r)}let l="translate("+t.x+","+-t.z+") rotate("+s+")";d.push({transform:l,pos:x.create(t.x,-t.z),angle:s,width:a,height:o.flangeSize})}if(e.panelMemberProperties!=null&&e.length!=null){let a=e.length(),o=e.panelMemberProperties(),s=Math.atan2(-n.u.z,n.u.x)*180/Math.PI,t,l=o.flangeSize;{let i;n.v.y<0?i=w.zero:i=n.w.scale(l),t=n.o.add(i)}let r="translate("+t.x+","+-t.z+") rotate("+s+")";d.push({transform:r,pos:x.create(t.x,-t.z),angle:s,width:a,height:l})}if(e.shsProperties!=null&&e.length!=null){let a=e.length(),o=e.shsProperties(),s=Math.atan2(-n.u.z,n.u.x)*180/Math.PI,t;{let i;n.v.y<0?i=w.zero:i=n.w.scale(e.shsProperties().size),t=n.o.add(i)}let l="translate("+t.x+","+-t.z+") rotate("+s+")",r=Math.sign(n.v.y);d.push({transform:l,pos:x.create(t.x,-t.z),angle:s,width:a,height:o.size,backCutAngle:e.backBackCutAngle==null?void 0:r*e.backBackCutAngle(),frontCutAngle:e.frontBackCutAngle==null?void 0:r*e.frontBackCutAngle(),backMidCutAngle:e.backMidBackCutAngle==null?void 0:r*e.backMidBackCutAngle()})}if(e.rhsProperties!=null&&e.length!=null)if(Math.abs(n.w.y)>.5){let a=e.length(),o=e.rhsProperties(),s=Math.atan2(-n.u.z,n.u.x)*180/Math.PI,t;{let r;n.w.y>0?r=w.zero:r=n.v.scale(e.rhsProperties().webSize),t=n.o.add(r)}let l="translate("+t.x+","+-t.z+") rotate("+s+")";d.push({transform:l,pos:x.create(t.x,-t.z),angle:s,width:a,height:o.webSize,backCutAngle:e.backBackCutAngleType2==null?void 0:e.backBackCutAngleType2(),frontCutAngle:e.frontBackCutAngleType2==null?void 0:e.frontBackCutAngleType2()})}else{let a=e.length(),o=e.rhsProperties(),s=Math.atan2(-n.u.z,n.u.x)*180/Math.PI,t;{let r;n.v.y<0?r=w.zero:r=n.w.scale(e.rhsProperties().flangeSize),t=n.o.add(r)}let l="translate("+t.x+","+-t.z+") rotate("+s+")";d.push({transform:l,pos:x.create(t.x,-t.z),angle:s,width:a,height:o.flangeSize,backCutAngle:e.backBackCutAngle==null?void 0:e.backBackCutAngle(),frontCutAngle:e.frontBackCutAngle==null?void 0:e.frontBackCutAngle(),backMidCutAngle:e.backMidBackCutAngle==null?void 0:e.backMidBackCutAngle()})}if(e.flatProperties!=null&&e.length!=null&&e.itemName!=null&&e.itemName().indexOf("Strap")!=-1){let o=e.length(),s=e.flatProperties(),t=Math.atan2(-n.u.z,n.u.x)*180/Math.PI,l;{let i;n.w.y<0?i=w.zero:i=n.w.scale(e.flatProperties().width),l=n.o.add(i)}let r="translate("+l.x+","+-l.z+") rotate("+t+")";d.push({transform:r,pos:x.create(l.x,-l.z),angle:t,width:o,height:s.width})}}return d}),q=C(()=>{let d=[];for(let e of p.components){let n;if(e.transform==null?n=F.identity:n=e.transform(),e.flangePunches!=null&&e.flangePunchDistFromWeb!=null){let a=e.flangePunches(),o=e.flangePunchDistFromWeb();for(let s of a){let t=n.pointFromThisSpace(w.create(s,0,o));d.push({pos:x.create(t.x,t.z),radius:9,colour:"blue"})}}}return d}),U=C(()=>{let d=[];for(let e of p.components){let n;if(e.transform==null?n=F.identity:n=e.transform(),e.webNotchRanges!=null){let a=n.o,o=n.u,s=n.w;for(let t of e.webNotchRanges()){let l=a.add(o.scale(t.from)),r="matrix("+o.x+" "+s.x+" "+-o.z+" "+-s.z+" "+l.x+" "+-l.z+")";d.push({transform:r,width:t.to-t.from,height:10})}}}return d}),Z=C(()=>{let d=[];for(let e of p.components){let n;if(e.transform==null?n=F.identity:n=e.transform(),e.shsProperties!=null&&e.length!=null&&e.hasLabel!=null&&e.hasLabel()){let a=p.labeler.lookupLabelForComponent(e);if(a!=null){let o=e.length(),s=e.shsProperties(),t;Math.abs(n.u.x)>Math.abs(n.u.z)?n.u.x<0:n.u.z<0,t=n.o.add(n.u.scale(.5*o)).add(n.w.scale(.5*s.size));let l="translate("+t.x+","+-t.z+")";d.push({transform:l,label:a})}}if(e.rhsProperties!=null&&e.length!=null&&e.hasLabel!=null&&e.hasLabel()){let a=p.labeler.lookupLabelForComponent(e);if(a!=null){let o=e.length(),s=e.rhsProperties(),t;if(Math.abs(n.w.y)>.5){let r=.5;t=n.o.add(n.u.scale(.5*o)).add(n.v.scale(s.webSize*r))}else{let r;Math.abs(n.u.x)>Math.abs(n.u.z)?n.u.x<0?r=.8:r=.3:n.u.z<0?r=.3:r=.7,t=n.o.add(n.u.scale(.5*o)).add(n.w.scale(s.flangeSize*r))}let l="translate("+t.x+","+-t.z+")";d.push({transform:l,label:a})}}if(e.ceeProperties!=null&&e.length!=null&&e.hasLabel!=null&&e.hasLabel()){let a=p.labeler.lookupLabelForComponent(e);if(a!=null){let o=e.length(),s=e.ceeProperties(),t;{let r;Math.abs(n.u.x)>Math.abs(n.u.z)?n.u.x<0?r=.8:r=.3:n.u.z<0?r=.3:r=.7,t=n.o.add(n.u.scale(.5*o)).add(n.w.scale(s.flangeSize*r))}let l="translate("+t.x+","+-t.z+")";d.push({transform:l,label:a})}}if(e.flatProperties!=null&&e.length!=null&&e.hasLabel!=null&&e.hasLabel()&&e.itemName!=null&&e.itemName().indexOf("Strap")!=-1){let a=e.length(),o=e.flatProperties(),s=p.labeler.lookupLabelForComponent(e);if(s!=null){let t;{let r;r=.3,t=n.o.add(n.u.scale(.4*a)).add(n.v.scale(o.width*r))}let l="translate("+t.x+","+-t.z+")";d.push({transform:l,label:s})}}}return d}),O=C(()=>{let d=[];for(let e of p.components){let n=e.transform==null?F.identity:e.transform(),a=n.u,o=n.w;if(!(Math.abs(a.z)<.2)&&e.panelMemberProperties!=null&&e.length!=null){let s=e.panelMemberProperties(),t=e.length(),l;a.z>0?l=n.o.x:l=n.o.add(a.scale(t)).x;let r;o.x<0?r="Left":r="Right";let i=s.webSize*.8,g=s.flangeSize*.8;d.push({x:l,openSide:r,webSize:i,flangeSize:g})}}return d}),H=C(()=>{let d=[];for(let e of p.components){let n=e.transform==null?F.identity:e.transform(),a=n.u,o=n.w;if(!(Math.abs(a.z)>.05)&&e.panelMemberProperties!=null&&e.length!=null){let s=e.panelMemberProperties(),t=e.length(),l;a.x>0?l=n.o.z:l=n.o.add(a.scale(t)).z;let r;o.z<0?r="Down":r="Up";let i=s.webSize*.8,g=s.flangeSize*.8;d.push({y:l,openSide:r,webSize:i,flangeSize:g})}}return d});Q(()=>{let d=L();if(d==null)return;let e,n,a,o;for(let u of W()){let h=u.angle*Math.PI/180,b=Math.cos(h),z=Math.sin(h),v=x.create(b,z),f=x.create(-v.y,v.x),B=[u.pos,u.pos.add(v.scale(u.width)),u.pos.add(v.scale(u.width)).add(f.scale(u.height)),u.pos.add(f.scale(u.height))];for(let M of B)(e==null||M.x<e)&&(e=M.x),(n==null||M.x>n)&&(n=M.x),(a==null||M.y<a)&&(a=M.y),(o==null||M.y>o)&&(o=M.y)}for(let u of A()){let h,b;for(let f of u.markers)(h==null||f<h)&&(h=f),(b==null||f>b)&&(b=f);if(h==null||b==null)continue;let z=u.space.pointFromThisSpace(w.create(h,0,0)),v=u.space.pointFromThisSpace(w.create(b,0,0));for(let f of[z,v])(e==null||f.x<e)&&(e=f.x),(n==null||f.x>n)&&(n=f.x),(a==null||-f.z<a)&&(a=-f.z),(o==null||-f.z>o)&&(o=-f.z)}if(e==null||n==null||a==null||o==null)return;let s=d.clientWidth,t=d.clientHeight,l=n-e,r=o-a,i=s/l,g=t/r,m=Math.min(i,g)*.9,k=-.5*s/m+.5*l,y=a-.5*(t/m-r);J(()=>{R("panX",k),R("panY",y),R("scale",m)})});let V=C(()=>{let d={};for(let n of p.components)if(n.hasLabel!=null&&n.hasLabel()&&n.itemName!=null&&n.length!=null){let a=p.labeler.lookupLabelForComponent(n);if(a!=null){let o=d[a];if(o!=null)o.qty+=1;else{let s={label:a,itemName:n.itemName(),qty:n.qty==null?1:n.qty(),length:n.length()};d[a]=s}}}let e=[];for(let n in d)e.push(d[n]);return e.sort((n,a)=>n.label.localeCompare(a.label)),e});return _(te,{get logo(){return(()=>{const d=le.cloneNode(!0);return c(d,"src",he),d})()},companyDetails:{name:"Steeline FNW",abn:"12345678",address1:"300 Anzac Avenue",address2:"Harristown QLD 4350",phone:"(07) 4580 4244",fax:"(07) 4304 8012",email:"info@fnw.com.au",website:"fnw.au"},get title(){return p.title},projectNumber:"12-3456",customerName:"Customer Name",clientName:"Client Name",siteAddress1:"Site Address 1",siteAddress2:"Site Address 2",lot:"12345",rpsp:"12345",date:"00/00/0000",ultWindSpeed:"N/A",drawingNo:"12-3456;A",get children(){const d=ne.cloneNode(!0),e=d.firstChild,n=e.firstChild,a=n.nextSibling,o=a.firstChild,s=o.nextSibling;return N(d,_(ee,{onRefSvg:t=>{D(t)},showGrid:!1,fontSize:12,state:I,style:{width:"100%",height:"100%",border:"none"},get children(){return[_(P,{get each(){return W()},children:t=>{let l=t().frontCutAngle??0,r=t().backCutAngle??0,i=t().backMidCutAngle??0;if(l!=0||r!=0||i!=0){let g=Math.tan(l*Math.PI/180),m=Math.tan(r*Math.PI/180),k=Math.tan(i*Math.PI/180),y=[x.create(Math.max(0,g)*t().height,0),...i==0?[x.create(t().width-Math.max(0,m)*t().height,0)]:[x.create(t().width-Math.max(0,k)*.5*t().height,0)],...i==0?[]:[x.create(t().width,.5*t().height)],...i==0?[x.create(t().width-Math.max(0,-m)*t().height,t().height)]:[x.create(t().width-Math.max(0,k)*.5*t().height,t().height)],x.create(Math.max(0,-g)*t().height,t().height)];return(()=>{const u=re.cloneNode(!0);return $(h=>{const b=t().transform,z="M"+y[0].x+" "+y[0].y+y.slice(1).map(v=>" L"+v.x+" "+v.y).join("")+" Z";return b!==h._v$&&c(u,"transform",h._v$=b),z!==h._v$2&&c(u,"d",h._v$2=z),h},{_v$:void 0,_v$2:void 0}),u})()}else return(()=>{const g=ae.cloneNode(!0);return $(m=>{const k=t().transform,y=t().width,u=t().height;return k!==m._v$3&&c(g,"transform",m._v$3=k),y!==m._v$4&&c(g,"width",m._v$4=y),u!==m._v$5&&c(g,"height",m._v$5=u),m},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),g})()}}),_(P,{get each(){return q()},children:t=>(()=>{const l=ie.cloneNode(!0);return $(r=>{const i=t().pos.x,g=-t().pos.y,m=t().radius,k=t().colour;return i!==r._v$6&&c(l,"cx",r._v$6=i),g!==r._v$7&&c(l,"cy",r._v$7=g),m!==r._v$8&&c(l,"r",r._v$8=m),k!==r._v$9&&c(l,"fill",r._v$9=k),r},{_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0}),l})()}),_(P,{get each(){return U()},children:t=>(()=>{const l=oe.cloneNode(!0);return $(r=>{const i=t().transform,g=t().width,m=t().height;return i!==r._v$10&&c(l,"transform",r._v$10=i),g!==r._v$11&&c(l,"width",r._v$11=g),m!==r._v$12&&c(l,"height",r._v$12=m),r},{_v$10:void 0,_v$11:void 0,_v$12:void 0}),l})()}),_(P,{get each(){return Z()},children:t=>(()=>{const l=se.cloneNode(!0);return N(l,()=>t().label),$(r=>{const i=t().transform,g=(10/I.scale).toString();return i!==r._v$13&&c(l,"transform",r._v$13=i),g!==r._v$14&&c(l,"font-size",r._v$14=g),r},{_v$13:void 0,_v$14:void 0}),l})()}),_(P,{get each(){return O()},children:t=>{let l=t(),r=100;switch(l.openSide){case"Left":return(()=>{const i=T.cloneNode(!0);return $(()=>c(i,"d","M"+(l.x-l.flangeSize)+" "+r+" l "+l.flangeSize+" 0 l 0 "+-l.webSize+" l "+-l.flangeSize+" 0")),i})();case"Right":return(()=>{const i=T.cloneNode(!0);return $(()=>c(i,"d","M"+(l.x+l.flangeSize)+" "+r+" l "+-l.flangeSize+" 0 l 0 "+-l.webSize+" l "+l.flangeSize+" 0")),i})()}}}),_(P,{get each(){return H()},children:t=>{let l=t(),r=-100;switch(l.openSide){case"Down":return(()=>{const i=T.cloneNode(!0);return $(()=>c(i,"d","M"+r+" "+(-l.y+l.flangeSize)+" l 0 "+-l.flangeSize+" l "+l.webSize+" 0 l 0 "+ +l.flangeSize)),i})();case"Up":return(()=>{const i=T.cloneNode(!0);return $(()=>c(i,"d","M"+r+" "+(l.y-l.flangeSize)+" l 0 "+l.flangeSize+" l "+l.webSize+" 0 l 0 "+-l.flangeSize)),i})()}}}),_(P,{get each(){return A()},children:t=>{if(t().markers.length==0)return[];let l=[...t().markers].sort((u,h)=>u-h),r=l[0],i=l[l.length-1],g=t().space.pointFromThisSpace(w.create(r,0,0)),m=t().space.pointFromThisSpace(w.create(i,0,0)),k=t().space.v,y=Math.atan(-t().space.u.z/t().space.u.x)*180/Math.PI;return[(()=>{const u=Y.cloneNode(!0);return $(h=>{const b=g.x,z=-g.z,v=m.x,f=-m.z;return b!==h._v$15&&c(u,"x1",h._v$15=b),z!==h._v$16&&c(u,"y1",h._v$16=z),v!==h._v$17&&c(u,"x2",h._v$17=v),f!==h._v$18&&c(u,"y2",h._v$18=f),h},{_v$15:void 0,_v$16:void 0,_v$17:void 0,_v$18:void 0}),u})(),_(P,{each:l,children:u=>{let h=t().space.pointFromThisSpace(w.create(u(),0,0)),b=h.sub(k.scale(30)),z=h.add(k.scale(30));return(()=>{const v=Y.cloneNode(!0);return $(f=>{const B=b.x,M=-b.z,E=z.x,X=-z.z;return B!==f._v$19&&c(v,"x1",f._v$19=B),M!==f._v$20&&c(v,"y1",f._v$20=M),E!==f._v$21&&c(v,"x2",f._v$21=E),X!==f._v$22&&c(v,"y2",f._v$22=X),f},{_v$19:void 0,_v$20:void 0,_v$21:void 0,_v$22:void 0}),v})()}}),_(P,{get each(){return[...Array(l.length-1).keys()]},children:u=>{let h=l[u()],b=l[u()+1],z=t().space.pointFromThisSpace(w.create(.5*(h+b),20,0)),v="translate("+z.x+","+-z.z+") rotate("+y+")";return(()=>{const f=de.cloneNode(!0);return c(f,"transform",v),N(f,()=>Math.round(b-h)+" mm"),$(()=>c(f,"font-size",(10/I.scale).toString())),f})()}})]}})]}}),e),N(s,_(P,{get each(){return V()},children:t=>(()=>{const l=fe.cloneNode(!0),r=l.firstChild,i=r.nextSibling;return N(r,()=>t().label),N(i,()=>t().qty+" x "+t().itemName+" @ "+t().length.toFixed(0)+" mm"),l})()})),d}})};export{be as F};
