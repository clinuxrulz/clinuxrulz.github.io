import{J as me,_ as xe,c as Z,a as w,l as we,o as ee,z as ye,A as be,i as p,b as o,S as A,M as D,e as N,d as te,I as ve,f as Se,t as f,F as le,u as ue,g as $e,B as _e}from"./index.5aba22ff.js";import{G as ae,H as Le,z as X,W as ke,S as Ce,C as Me,P as Fe,$ as Ne,j as Pe,g as de,V as F,l as Te,a as De,A as Oe,a7 as Ve}from"./Component.6024a649.js";import{O as Ie}from"./OrbitControls.3e0e93be.js";import{G as Ee}from"./GLTFExporter.c7bd8ba1.js";import{m as Y,j as Q,P as ze,d as Be}from"./PropertiesForm.c69fa44e.js";import{a as We}from"./Vec3.ce1f4f7a.js";import{f as Ae}from"./ad_components.dbddf843.js";import{c as Ge,t as Re,O as He,v as Ue,d as je}from"./components_to_order_lines.80e80e01.js";import{g as oe,a as se}from"./Gutter.196a297e.js";import{L as Je}from"./LockerShed.98091ec0.js";import Ke from"./RestrictedAreaLogin.5f1b5767.js";import{h as Xe}from"./three_js_component_renderer.95a2237b.js";import"./LineKit.f6b732de.js";import"./Component.fa73bdbc.js";import"./Line3D.2b8117f1.js";import"./Labeler.42ece7e8.js";import"./utils.6e3ab489.js";import"./Plane3D.472a05fa.js";const Ye=f('<button class="btn btn-primary" style="margin-left: 10px;">Close</button>'),qe=f('<button class="btn btn-primary" style="margin-left: 10px;">Load Pricing</button>'),Qe=f('<button class="btn btn-primary" style="margin-left: 10px;">Sign In</button>'),Ze=f('<div class="nav nav-tabs"><a class="nav-link" style="cursor: pointer;">Model</a><a class="nav-link" style="cursor: pointer;">BOM</a><a class="nav-link" style="cursor: pointer;">Drawings</a></div>'),G=f("<br>"),et=f('<select style="margin-left: 5px;"></select>'),ce=f("<b></b>"),tt=f("<b>35%</b>"),nt=f('<div style="flex-grow: 1; display: flex; flex-direction: row; overflow: hidden;"><div></div><div style="position: relative; flex-grow: 1; overflow: hidden; display: flex; flex-direction: row;"><div style="position: absolute; left: 0; top: 0; background: rgba(255,255,255,0.5); z-index: 1;"><input id="LockerShedDesigner_chkShowCladding" type="checkbox"><label for="LockerShedDesigner_chkShowCladding" style="padding-left:5px;">Show Cladding</label><br><input id="LockerShedDesigner_chkSheetingLowPoly" type="checkbox"><label for="LockerShedDesigner_chkSheetingLowPoly" style="padding-left: 5px;">Sheeting Low Poly?</label></div></div></div>'),it=f('<div style="flex-grow: 1; display: flex; flex-direction: column; overflow: hidden;"><div style="display: flex; flex-direction: row; align-items: center;"><h2>Locker Shed Designer</h2><button class="btn btn-primary" style="margin-left: 10px;">Export Model</button></div></div>'),rt=f("<option></option>"),lt=f('<div style="whitespace: nowrap; width: 100%;"><b>"Max"</b>(<!>)</div>'),at=f('<div style="whitespace: nowrap; width: 100%;"></div>'),dt=f('<div style="display: flex; flex-direction: column;"><div style="display: flex; flex-direction: row;"><input id="LockerShedDesigner_maxLenOrFixLenField_max" type="radio" name="LockerShedDesigner_maxLenOrFixLenField_group"><label style="whitespace: nowrap; padding-left: 2px;" for="LockerShedDesigner_maxLenOrFixLenField_max"><b>"Max"</b>(<!>)</label></div><div style="display: flex; flex-direction: row;"><input id="LockerShedDesigner_maxLenOrFixLenField_fixed" type="radio" name="LockerShedDesigner_maxLenOrFixLenField_group"><label style="whitespace: nowrap; padding-left: 2px;" for="LockerShedDesigner_maxLenOrFixLenField_fixed"><input type="text" size="5" style="padding-left: 2px;">mm</label></div><div style="text-align: right; margin-top: 5px;"><button class="btn btn-primary" style="margin-right: 5px;">OK</button><button class="btn btn-primary" style="margin-right: 5px;">Cancel</button></div></div>'),ot=me(()=>xe(()=>import("./LockerShedDrawings.69f76598.js"),["LockerShedDrawings.69f76598.js","index.5aba22ff.js","index.8628b9c4.css","FrameDrawingDoc.c2479e9b.js","Component.6024a649.js","Vec3.ce1f4f7a.js","SvgWithPanZoomState.e2089103.js","StandardBorderLandscapeDoc.be2b9e86.js","DocumentsView.ab8d138b.js","DocumentView.3a121409.js"],import.meta.url)),Mt=c=>{let[a,m]=Z({showSignInPage:!1,selectedTab:"Model",showCladding:!0,sheetingLowPoly:!1,propertiesExpanded:!0,selectedBranch:"Toow"}),S=w(()=>{if(a.adComponents!=null)return a.adComponents.lookupBranches()}),[n,u]=Z({span:1100,length:3655,height:2330,pitch:5,sheetingType:"Steelclad 0.42",sheetingDirection:"Horizontal",openingSide:"Sidewall A",openingWidth:{type:"Max"}}),O=w(()=>[{displayName:"Properties",fields:[Y({displayName:()=>"Span",value:()=>n.span,setValue:e=>u("span",e)}),Y({displayName:()=>"Length",value:()=>n.length,setValue:e=>u("length",e)}),Y({displayName:()=>"Height",value:()=>n.height,setValue:e=>u("height",e)}),Y({displayName:()=>"Pitch",value:()=>n.pitch,setValue:e=>u("pitch",e)}),Q({displayName:()=>"Sheeting Type",value:()=>n.sheetingType,setValue:e=>u("sheetingType",e),possibleValues:w(()=>["Steelclad 0.42","Corrugated 0.42"])}),Q({displayName:()=>"Sheeting Direction",value:()=>n.sheetingDirection,setValue:e=>u("sheetingDirection",e),possibleValues:w(()=>["Vertical","Horizontal"])}),Q({displayName:()=>"Opening Side",value:()=>n.openingSide,setValue:e=>u("openingSide",e),possibleValues:w(()=>["Sidewall A","Sidewall B"])}),st({displayName:()=>"Opening Width",value:()=>n.openingWidth,setValue:e=>u("openingWidth",e),maxValue:()=>V.maxOpeningWidth()})],expanded:()=>a.propertiesExpanded,setExpanded:e=>{m("propertiesExpanded",e),y()}}]),s,i=document.createElement("canvas"),r,l,k=new ae,t,$,_;const R=()=>{if(i==null||t==null||_==null)return;let e=new F(t.matrix.elements[4],t.matrix.elements[5],t.matrix.elements[6]),d=new F(t.matrix.elements[8],t.matrix.elements[9],t.matrix.elements[10]),g=.5*i.height/Math.tan(.5*t.fov*Math.PI/180);_.uniforms.resolution.value=new de(i.width,i.height),_.uniforms.screenDistance.value=g,_.uniforms.cameraLocation.value=new F(t.position.x,-t.position.z,t.position.y),_.uniforms.cameraForward.value=new F(-d.x,d.z,-d.y),_.uniforms.cameraUp.value=new F(e.x,-e.z,e.y)};let[H,z]=we(0),q=()=>{z(1-_e(()=>H()))};ee(()=>{if(s==null||i==null)return;i.width=s.clientWidth,i.height=s.clientHeight,r=new ke({canvas:i,antialias:!0}),r.useLegacyLights=!0,r.setPixelRatio(window.devicePixelRatio),l=new Ce;let e=new ae;e.rotateX(-90*Math.PI/180),e.position.setY(100/1e3),e.add(k),l.add(e),l.background=new Me(16777215),t=new Fe(45,i.clientWidth/i.clientHeight,.01,100),t.position.set(6,3,6);{let g=new Ne(-70,-70,-70);_=new Pe({uniforms:{resolution:{value:new de},screenDistance:{value:0},cameraLocation:{value:new F},cameraForward:{value:new F},cameraUp:{value:new F}},vertexShader:Ue,fragmentShader:je});let L=new Te(g,_);L.onBeforeRender=R,l.add(L)}$=new Ie(t,i),$.target.set(0,0,0),t.lookAt(0,0,0),$.maxPolarAngle=.5*Math.PI,$.addEventListener("change",()=>{r==null||l==null||t==null||(r.render(l,t),q())}),$.update();const d=[];d[0]=new De(16777215,1,0),d[0].position.set(200,300,500),l.add(d[0]);{const g=new Oe(4210752,4);l.add(g)}r.render(l,t)}),i.style.backgroundColor="black",i.style.position="absolute",i.style.left="0",i.style.top="0";const y=()=>{s==null||i==null||r==null||l==null||t==null||!i.isConnected||(i.style.width=s.clientWidth+"px",i.style.height=s.clientHeight+"px",i.width=s.clientWidth,i.height=s.clientHeight,t.aspect=s.clientWidth/s.clientHeight,t.updateProjectionMatrix(),r.setSize(i.width,i.height),r.render(l,t))},U=()=>{y()};ee(()=>{window.addEventListener("resize",U),y()}),ye(()=>{window.removeEventListener("resize",U)});let C=new Le,V=new Je({span:()=>n.span,length:()=>n.length,height:()=>n.height,pitch:()=>n.pitch,sheetingType:()=>n.sheetingType,sheetingDirection:()=>n.sheetingDirection,openingSide:()=>n.openingSide,openingWidth:()=>n.openingWidth,sheetingLowPoly:()=>a.sheetingLowPoly,textures:w(()=>{let e=C.load(oe(),()=>{r==null||l==null||t==null||r.render(l,t)});e.wrapS=X,e.repeat.set(11,1);let d=C.load(oe(),()=>{r==null||l==null||t==null||r.render(l,t)});d.wrapS=X,d.repeat.set(11,1),d.rotation=.5*Math.PI;let g=C.load(se(),()=>{r==null||l==null||t==null||r.render(l,t)});g.wrapS=X,g.repeat.set(4,1);let L=C.load(se(),()=>{r==null||l==null||t==null||r.render(l,t)});return L.wrapS=X,L.repeat.set(4,1),L.rotation=.5*Math.PI,{corroNormalMap:e,horizontalCorroNormalMap:d,steelCladNormalMap:g,horizontalSteelCladNormalMap:L}})}),B=V.components;Xe({group:k,components:B,rerender:()=>{r!=null&&l!=null&&t!=null&&r.render(l,t)},isLayerVisible:e=>{switch(e){case Ve.Cladding:return a.showCladding;default:return!0}}});let b=w(()=>We.create(.5*n.length,.5*n.height,-.5*n.span));be(()=>{let e=b();r!=null&&t!=null&&l!=null&&$!=null&&($.target.set(e.x/1e3,e.y/1e3,e.z/1e3),t.lookAt(e.x/1e3,e.y/1e3,e.z/1e3),$.update(),r.render(l,t))});const j=async()=>{try{m("adComponents",await Ae())}catch(e){alert(e)}};let ne=w(()=>Ge(B(),V.labeler(),a.adComponents,a.selectedBranch)),ie=w(()=>Re(ne())),ge=w(()=>"$"+ie().toFixed(2)),he=w(()=>ie()*1.1*1.35),pe=w(()=>"$"+he().toFixed(2));const fe=()=>{if(k==null)return;new Ee().parse(k,d=>{if(d instanceof ArrayBuffer){let g=new Blob([d],{type:"model/gltf-binary"});le.saveAs(g,"export.glb")}else{let g=new Blob([JSON.stringify(d)],{type:"model/gltf+json"});le.saveAs(g,"export.gltf")}},d=>{console.log(d)},{})};return(()=>{const e=it.cloneNode(!0),d=e.firstChild,g=d.firstChild,L=g.nextSibling;return p(d,o(A,{get when(){return c.onClose!=null},get children(){const h=Ye.cloneNode(!0);return h.$$click=()=>{c.onClose!=null&&c.onClose()},h}}),L),L.$$click=()=>{fe()},p(d,o(A,{get when(){return a.adComponents==null&&c.signedIn},get children(){const h=qe.cloneNode(!0);return h.$$click=()=>j(),h}}),null),p(d,o(A,{get when(){return!c.signedIn},get children(){const h=Qe.cloneNode(!0);return h.$$click=()=>m("showSignInPage",!0),h}}),null),p(e,o(te,{get children(){return[o(D,{get when(){return a.showSignInPage},get children(){return o(Ke,{onSiteIn:()=>{m("showSignInPage",!1),c.onSiteIn()}})}}),o(D,{get when(){return!a.showSignInPage},get children(){return[(()=>{const h=Ze.cloneNode(!0),I=h.firstChild,M=I.nextSibling,W=M.nextSibling;return I.$$click=()=>{m("selectedTab","Model"),y()},M.$$click=()=>{m("selectedTab","BOM")},W.$$click=()=>{m("selectedTab","Drawings")},N(v=>{const J=a.selectedTab=="Model",K=a.selectedTab=="BOM",E=a.selectedTab=="Drawings";return J!==v._v$&&I.classList.toggle("active",v._v$=J),K!==v._v$2&&M.classList.toggle("active",v._v$2=K),E!==v._v$3&&W.classList.toggle("active",v._v$3=E),v},{_v$:void 0,_v$2:void 0,_v$3:void 0}),h})(),o(te,{get children(){return[o(D,{get when(){return a.selectedTab=="Model"},get children(){const h=nt.cloneNode(!0),I=h.firstChild,M=I.nextSibling,W=M.firstChild,v=W.firstChild,J=v.nextSibling,K=J.nextSibling,E=K.nextSibling;E.nextSibling,p(I,o(ze,{get fieldGroups(){return O()}}));const re=s;return typeof re=="function"?ue(re,M):s=M,v.addEventListener("change",x=>{let P=x.target;m("showCladding",P.checked)}),E.addEventListener("change",x=>{m("sheetingLowPoly",x.currentTarget.checked)}),p(W,o(A,{get when(){return a.adComponents!=null},get children(){return[G.cloneNode(!0),G.cloneNode(!0),o(A,{get when(){return S()!=null},get children(){return["Region:",(()=>{const x=et.cloneNode(!0);return x.addEventListener("change",P=>{let T=P.currentTarget.selectedOptions;T.length!=0&&m("selectedBranch",T[0].value)}),p(x,o(ve,{get each(){return S()??[]},children:P=>(()=>{const T=rt.cloneNode(!0);return p(T,P),N(()=>T.selected=P()==a.selectedBranch),N(()=>T.value=P()),T})()})),x})(),G.cloneNode(!0)]}}),"Cost: ",(()=>{const x=ce.cloneNode(!0);return p(x,ge),x})(),G.cloneNode(!0),"Markup: ",tt.cloneNode(!0),G.cloneNode(!0),"Price (Inc. GST & Markup): ",(()=>{const x=ce.cloneNode(!0);return p(x,pe),x})()]}}),null),p(M,i,null),N(()=>v.checked=a.showCladding),N(()=>E.checked=a.sheetingLowPoly),h}}),o(D,{get when(){return a.selectedTab=="BOM"},get children(){return o(He,{get orderLines(){return ne()}})}}),o(D,{get when(){return a.selectedTab=="Drawings"},get children(){return o(ot,{shed:V})}})]}})]}})]}}),null),e})()};function st(c){return Be({displayName:c.displayName,component:({editing:a,onDoneEdit:m})=>o(te,{get children(){return[o(D,{get when(){return!a()},children:()=>{let S=c.value();switch(S.type){case"Max":return(()=>{const n=lt.cloneNode(!0),u=n.firstChild,O=u.nextSibling,s=O.nextSibling;return s.nextSibling,p(n,()=>c.maxValue()+" mm",s),n})();case"Fixed":return(()=>{const n=at.cloneNode(!0);return p(n,()=>S.value+" mm"),n})()}}}),o(D,{get when(){return a()},children:()=>{let S;{let r=c.value();r.type=="Max"?S=c.maxValue():S=r.value}let[n,u]=Z({type:c.value().type,fixedLength:S}),O=w(()=>{switch(n.type){case"Max":return!0;case"Fixed":return n.fixedLength!=null}}),s=()=>{!O()||$e(()=>{switch(m()(),n.type){case"Max":c.setValue({type:"Max"});break;case"Fixed":n.fixedLength!=null&&c.setValue({type:"Fixed",value:n.fixedLength});break}})},i;return ee(()=>{if(c.value().type=="Fixed"){if(i==null)return;i.select()}}),(()=>{const r=dt.cloneNode(!0),l=r.firstChild,k=l.firstChild,t=k.nextSibling,$=t.firstChild,_=$.nextSibling,R=_.nextSibling;R.nextSibling;const H=l.nextSibling,z=H.firstChild,q=z.nextSibling,y=q.firstChild,U=H.nextSibling,C=U.firstChild,V=C.nextSibling;k.addEventListener("change",b=>{b.currentTarget.checked&&u("type","Max")}),p(t,()=>c.maxValue()+" mm",R),z.addEventListener("change",b=>{b.currentTarget.checked&&u("type","Fixed")}),y.$$keydown=b=>{b.key=="Enter"&&s()},y.$$input=b=>{let j=Number.parseFloat(b.currentTarget.value);Number.isFinite(j)?u("fixedLength",j):u("fixedLength",void 0)},y.$$click=b=>{n.type!="Fixed"&&u("type","Fixed"),b.currentTarget.select()};const B=i;return typeof B=="function"?ue(B,y):i=y,y.value=S??"",C.$$click=()=>s(),V.$$click=()=>{m()()},N(()=>C.disabled=!O()),N(()=>k.checked=n.type=="Max"),N(()=>z.checked=n.type=="Fixed"),r})()}})]}})})}Se(["click","input","keydown"]);export{Mt as default};
