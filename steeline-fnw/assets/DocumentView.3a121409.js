import{c as W,g as C,o as b,z as T,A as U,i as j,b as A,e as g,s as v,t as m,K as B,u as D}from"./index.5aba22ff.js";import{m as G,a as K,S as V}from"./SvgWithPanZoomState.e2089103.js";const X=m('<svg><rect stroke="none" fill="grey"></rect></svg>',4,!0),Y=m('<svg><rect stroke="black" fill="white"></rect></svg>',4,!0),q=m('<svg><rect stroke="blue" fill="none"></rect></svg>',4,!0),F=m('<svg><foreignObject style="pointer-events: none;"><div style="width: 100%; height: 100%; overflow: hidden;"></div></foreignObject></svg>',6,!0),I=m('<div style="flex-grow: 1; display: flex; flex-direction: row; background: lightgrey"></div>'),Q=l=>{let c;const[_,M]=W({svgWidth:400,svgHeight:300,unitScale:1}),o=e=>e/_.unitScale,[$,x]=W({...G(),panX:o(-15),panY:o(-15)}),S=new ResizeObserver(e=>{for(const a of e)a.contentBoxSize&&C(()=>{M("svgWidth",a.contentRect.width),M("svgHeight",a.contentRect.height)})});b(()=>{c!=null&&S.observe(c)}),T(()=>{c!=null&&(S.unobserve(c),S.disconnect())});const k=()=>l.disablePan??!1;let u=new K({state:$,setState:x,disablePan:k});const E=e=>{u.onMouseDown(e)},O=e=>{u.onMouseUp(e)},Z=e=>{u.onMouseMove(e)},z=e=>{u.onWheel(e)},N=e=>{u.onTouchStart(e),e.preventDefault()},H=e=>{u.onTouchMove(e),e.preventDefault()},R=e=>{u.onTouchEnd(e),e.preventDefault()};let h,f,w;return b(()=>{h!=null&&(w=h.attachShadow({mode:"closed"}),l.init!=null&&l.init({screenPtToWorldPt:e=>u.screenPtToWorldPt(e.x,e.y),worldPtToScreenPt:e=>u.worldPtToScreenPt(e),scale:()=>$.scale}))}),U(()=>{if(w==null)return;let e=l.document;f?.(),f=B(()=>e,w)}),T(()=>{f?.()}),(()=>{const e=I.cloneNode(!0),a=c;return typeof a=="function"?D(a,e):c=e,j(e,A(V,{get svgWidth(){return _.svgWidth},get svgHeight(){return _.svgHeight},showGrid:!1,fontSize:12,state:$,get uiSvgOverlay(){return l.uiSvgOverlay},onMouseDown:E,onMouseUp:O,onMouseMove:Z,onWheel:z,onTouchStart:N,onTouchMove:H,onTouchEnd:R,get children(){return[(()=>{const n=X.cloneNode(!0);return g(t=>{const i=o(5)+"mm",r=o(5)+"mm",s=o(297)+"mm",d=o(210)+"mm";return i!==t._v$&&v(n,"x",t._v$=i),r!==t._v$2&&v(n,"y",t._v$2=r),s!==t._v$3&&v(n,"width",t._v$3=s),d!==t._v$4&&v(n,"height",t._v$4=d),t},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),n})(),(()=>{const n=Y.cloneNode(!0);return g(t=>{const i=o(0)+"mm",r=o(0)+"mm",s=o(297)+"mm",d=o(210)+"mm";return i!==t._v$5&&v(n,"x",t._v$5=i),r!==t._v$6&&v(n,"y",t._v$6=r),s!==t._v$7&&v(n,"width",t._v$7=s),d!==t._v$8&&v(n,"height",t._v$8=d),t},{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),n})(),(()=>{const n=q.cloneNode(!0);return g(t=>{const i=o(5)+"mm",r=o(0+5)+"mm",s=o(297-10)+"mm",d=o(210-10)+"mm";return i!==t._v$9&&v(n,"x",t._v$9=i),r!==t._v$10&&v(n,"y",t._v$10=r),s!==t._v$11&&v(n,"width",t._v$11=s),d!==t._v$12&&v(n,"height",t._v$12=d),t},{_v$9:void 0,_v$10:void 0,_v$11:void 0,_v$12:void 0}),n})(),(()=>{const n=F.cloneNode(!0),t=n.firstChild,i=h;return typeof i=="function"?D(i,t):h=t,g(r=>{const s=o(5)+"mm",d=o(0+5)+"mm",P=o(297-10)+"mm",y=o(210-10)+"mm";return s!==r._v$13&&v(n,"x",r._v$13=s),d!==r._v$14&&v(n,"y",r._v$14=d),P!==r._v$15&&v(n,"width",r._v$15=P),y!==r._v$16&&v(n,"height",r._v$16=y),r},{_v$13:void 0,_v$14:void 0,_v$15:void 0,_v$16:void 0}),n})()]}})),e})()};export{Q as D};
