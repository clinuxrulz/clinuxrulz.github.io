import{a as D}from"./index.5aba22ff.js";import{L as R,P as O}from"./Line2D.139781b3.js";import{b as z,T as H,Q as I}from"./Component.6024a649.js";import{R as A}from"./Ray2D.01cdc921.js";import{V as g,a as v}from"./Vec3.ce1f4f7a.js";import{C as W,r as E}from"./Component.fa73bdbc.js";import{i as Y,Z,T as j,l as Q,n as q,o as G}from"./PropertiesForm.c69fa44e.js";let J={itemName:{displayName:"Item Name",typeSchema:{type:"String"},defaultValue:""},length:{displayName:"Length",typeSchema:{type:"Number"},defaultValue:1e3},frontBackCutAngle:{displayName:"Front Back Cut Angle",typeSchema:{type:"MaybeUndefined",elemTypeSchema:{type:"Number"}},defaultValue:0},backBackCutAngle:{displayName:"Back Back Cut Angle",typeSchema:{type:"MaybeUndefined",elemTypeSchema:{type:"Number"}},defaultValue:0},flangePunchDistFromWeb:{displayName:"Flange Dist From Web",typeSchema:{type:"MaybeUndefined",elemTypeSchema:{type:"Number"}},optional:!0,defaultValue:void 0},flangePunches:{displayName:"Flange Punches",typeSchema:{type:"MaybeUndefined",elemTypeSchema:{type:"Array",elemTypeSchema:{type:"Number"}}},optional:!0,defaultValue:void 0},webNotchRanges:{displayName:"Web Notch Ranges",typeSchema:{type:"MaybeUndefined",elemTypeSchema:{type:"Array",elemTypeSchema:{type:"Object",properties:{from:{displayName:"From",typeSchema:{type:"Number"},defaultValue:0},to:{displayName:"To",typeSchema:{type:"Number"},defaultValue:0}}}}},optional:!0,defaultValue:void 0},id:{displayName:"Id",typeSchema:{type:"MaybeUndefined",elemTypeSchema:{type:"String"}},optional:!0,defaultValue:void 0},localLabel:{displayName:"Local Label",typeSchema:{type:"MaybeUndefined",elemTypeSchema:{type:"String"}},optional:!0,defaultValue:void 0},usage:{displayName:"Usage",typeSchema:{type:"MaybeUndefined",elemTypeSchema:{type:"String"}},optional:!0,defaultValue:void 0},hasLabel:{displayName:"Has Label",typeSchema:{type:"MaybeUndefined",elemTypeSchema:{type:"Boolean"}},optional:!0,defaultValue:void 0},labelKey:{displayName:"Label Key",typeSchema:{type:"MaybeUndefined",elemTypeSchema:{type:"Object",properties:{prefix:{displayName:"Prefix",typeSchema:{type:"String"},defaultValue:""},key:{displayName:"Key",typeSchema:{type:"String"},defaultValue:""}}}},optional:!0,defaultValue:void 0}};const X=new W({typeName:"ProfileMember",displayName:"Profile Member",propertiesSchema:J}),_=X;class ${constructor(){this.componentType=_}create(t,m,o,i,l){return new te(m,o,i,l)}}let L=new $;E(L);const ee=L;class te{constructor(t,m,o,i){this.type=L,this.state=t,this.setState=m,this.kitsUserEdits=o,this.setKitsUserEdits=i;let l=a=>{if(a!=null){let f=a;return()=>f}};this.components=D(()=>[new z({itemName:()=>t.itemName,length:()=>t.length,ceeProperties:l(Y[t.itemName]),zedProperties:l(Z[t.itemName]),topHatProperties:l(j[t.itemName]),panelMemberProperties:l(Q[t.itemName]),shsProperties:l(q[t.itemName]),flatProperties:l(G(t.itemName)),frontBackCutAngle:l(t.frontBackCutAngle),backBackCutAngle:l(t.backBackCutAngle),flangePunches:l(t.flangePunches),flangePunchDistFromWeb:l(t.flangePunchDistFromWeb),webNotchRanges:l(t.webNotchRanges),id:l(t.id),localLabel:l(t.localLabel),usage:l(t.usage),labelKey:()=>t.labelKey?.key,hasLabel:()=>t.hasLabel??!1})]),this.allocateLabels=a=>{(t.hasLabel??!1)&&(t.labelKey!=null?a.genPrefixedLabelForKey({prefix:t.labelKey.prefix,key:t.labelKey.key}):a.genLabelForComponent(this.components()[0]))}}}const se=e=>e==null?[]:[e];function pe(e){let t=e.dimpleLine;e.inverted&&(t=R.create(t.v2,t.v1));let m=t.v2.sub(t.v1).normalize(),o=g.create(-m.y,m.x),i=t.v1.sub(o.scale(e.profile.profile.dimpleDistFromWeb*(e.inverted?-1:1))),l=t.length(),a=D(()=>H.create(v.create(i.x,.5*(e.maxWebSize-e.profile.profile.webSize)*(e.inverted?-1:1)+(e.inverted?e.maxWebSize:0),i.y),I.fromUV(v.create(m.x,0,m.y),e.inverted?v.negUnitY:v.unitY)));return e.subKitCreator.mkKit({id:e.id,kitType:ee,state:{itemName:()=>e.profile.itemName,length:()=>l,flangePunchDistFromWeb:()=>e.profile.profile.dimpleDistFromWeb,flangePunches:e.flangePunches,webNotchRanges:e.webNotchRanges,id:()=>e.componentId,localLabel:e.localLabel,usage:e.usage},space:a})()}const ye=(e,t,m)=>{let o=A.fromOriginDirection(e.v1,e.v2.sub(e.v1)),i=e.length(),l=[];for(let a of m){let f=O.fromPointToPoint(a.v1,a.v2),N=A.fromOriginDirection(a.v1,a.v2.sub(a.v1)),s=o.intersectionTime(f);if(s==null||s<0||s>1)continue;let d=o.pointFromTime(s),p=N.closestTimeToPoint(d);p<0||p>1||l.push(s*i)}if(t)for(let a=0;a<l.length;++a)l[a]=i-l[a];return l},ue=(e,t,m,o,i)=>{let l=e.v2.sub(e.v1),a=l.scale(1/l.length()),f=g.create(-a.y,a.x),N=e.v1.sub(f.scale(m.dimpleDistFromWeb)),s=e.length(),d=(r,y)=>{if(r.y<=0&&y.y>=0||y.y<=0&&r.y>=0){let c=r.x+(0-r.y)*(y.x-r.x)/(y.y-r.y);return Number.isFinite(c)?c:void 0}},p=[];for(let{dimpleLine:r,params:y}of o){let c=r.length(),C=y.flangeSize,F=r.v2.sub(r.v1),S=F.scale(1/F.length()),B=g.create(-S.y,S.x),V=r.v1.sub(B.scale(y.dimpleDistFromWeb)),k=g.create(V.sub(N).dot(a),V.sub(N).dot(f)),M=g.create(S.dot(a),S.dot(f)),U=g.create(-M.y,M.x),T=k,P=k.add(M.scale(c)),K=P.add(U.scale(C)),w=T.add(U.scale(C)),u=[],n=d(T,P);if(n!=null&&u.push(n),n=d(P,K),n!=null&&u.push(n),n=d(K,w),n!=null&&u.push(n),n=d(w,T),n!=null&&u.push(n),u.length<2)continue;let h=Math.max(0,Math.min(s,u[0])),b=Math.max(0,Math.min(s,u[0]));for(let x=1;x<u.length;++x)n=Math.max(0,Math.min(s,u[x])),n<h&&(h=n),n>b&&(b=n);b-h<.001||(h=Math.max(0,h-i),b=Math.min(s,b+i),p.push({from:h,to:b}))}if(t)for(let r=0;r<p.length;++r){let y=s-p[r].to,c=s-p[r].from;p[r].from=y,p[r].to=c}return p};function fe(e,t,m){let o;m||t?e<=1600?o={type:"Boxed Stud"}:e<=2200?o={type:"Triple Stud"}:e<=3600?o={type:"Cee",itemName:"C20024"}:o={type:"Cee",itemName:"C25024"}:e<=3600?o={type:"Single Stud"}:o={type:"Boxed Stud"};let i;return m?e<=1900?i={type:"Trussed Header"}:e<=3600?i={type:"Cee",itemName:"C20024"}:i={type:"Cee",itemName:"C25024"}:t?e<=1600?i={type:"Single Plate"}:i={type:"Trussed Header"}:e<=1800?i={type:"Single Plate"}:i={type:"Trussed Header"},{studType:o,headType:i}}export{ee as a,pe as b,fe as c,ye as d,se as o,_ as p,ue as w};
