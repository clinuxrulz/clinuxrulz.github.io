import{V as I,b as K}from"./Component.6024a649.js";import{C as k,r as R}from"./Component.fa73bdbc.js";import{a as w,g as B}from"./index.5aba22ff.js";import{m as v}from"./PropertiesForm.c69fa44e.js";import{a as A}from"./Vec3.ce1f4f7a.js";import{L as b}from"./Line3D.2b8117f1.js";class z{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}clone(){return new z(this.x,this.y,this.z)}negate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}times(t){return this.x*=t,this.y*=t,this.z*=t,this}dividedBy(t){return this.x/=t,this.y/=t,this.z/=t,this}lerp(t,e){return this.add(new z().copy(t).sub(this).times(e))}unit(){return this.dividedBy(this.length())}length(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))}normalize(){return this.unit()}cross(t){const e=this.clone(),n=e.x,i=e.y,s=e.z,x=t.x,r=t.y,o=t.z;return this.x=i*o-s*r,this.y=s*x-n*o,this.z=n*r-i*x,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}toVector3(){return new I(this.x,this.y,this.z)}}class N{constructor(t,e){this.normal=t,this.w=e,this.normal=t,this.w=e}clone(){return new N(this.normal.clone(),this.w)}flip(){this.normal.negate(),this.w=-this.w}splitPolygon(t,e,n,i,s){let l=0;const c=[];for(let u=0;u<t.vertices.length;u++){const d=this.normal.dot(t.vertices[u].pos)-this.w,m=d<-N.EPSILON?2:d>N.EPSILON?1:0;l|=m,c.push(m)}switch(l){case 0:(this.normal.dot(t.plane.normal)>0?e:n).push(t);break;case 1:i.push(t);break;case 2:s.push(t);break;case 3:{const u=[],d=[];for(let m=0;m<t.vertices.length;m++){const y=(m+1)%t.vertices.length,a=c[m],g=c[y],f=t.vertices[m],P=t.vertices[y];if(a!=2&&u.push(f),a!=1&&d.push(a!=2?f.clone():f),(a|g)==3){const F=(this.w-this.normal.dot(f.pos))/this.normal.dot(new z().copy(P.pos).sub(f.pos)),M=f.interpolate(P,F);u.push(M),d.push(M.clone())}}u.length>=3&&i.push(new T(u,t.shared)),d.length>=3&&s.push(new T(d,t.shared));break}}}static fromPoints(t,e,n){const i=new z().copy(e).sub(t).cross(new z().copy(n).sub(t)).normalize();return new N(i.clone(),i.dot(t))}}N.EPSILON=1e-5;class T{constructor(t,e){this.vertices=t,this.shared=e,this.plane=N.fromPoints(t[0].pos,t[1].pos,t[2].pos)}clone(){return new T(this.vertices.map(t=>t.clone()),this.shared)}flip(){this.vertices.reverse().map(t=>t.flip()),this.plane.flip()}}const O=2,j=2,V=2,E=Math.cos(10*Math.PI/180),G=Math.sin(10*Math.PI/180),$={start:{x:-70-15*E+O,y:-15*G+O},segments:[{turnAngle:10,length:15},{turnAngle:-10,length:70},{turnAngle:-90,length:130},{turnAngle:-45,length:30}]},_={start:{x:-V,y:50-V},segments:[{turnAngle:-90,length:50},{turnAngle:90,length:50}]},tt={start:{x:0,y:-26},segments:[{turnAngle:-90,length:72},{turnAngle:90,length:130},{turnAngle:90,length:98}]};function et(p){let t=Math.cos(p.pitch*Math.PI/180),e=Math.sin(p.pitch*Math.PI/180);return{start:{x:-200*t,y:-200*e+j},segments:[{turnAngle:p.pitch,length:200},{turnAngle:-2*p.pitch,length:200}]}}function st(p,t){if(p.start==null)return;let e={...p.start},n=0,i=[];i.push({...e});for(let r of p.segments){for(n+=r.turnAngle;n<-180;)n+=360;for(;n>180;)n-=360;let o=n*Math.PI/180,h=Math.cos(o),l=Math.sin(o);e.x+=r.length*h,e.y+=r.length*l,i.push({...e})}let s=[];for(let r=0;r<i.length;++r){let o,h;if(r>0){let y=i[r].x-i[r-1].x,a=i[r].y-i[r-1].y,g=Math.sqrt(y*y+a*a),f=y/g;o=-(a/g),h=f}else o=void 0,h=void 0;let l,c;if(r<i.length-1){let y=i[r+1].x-i[r].x,a=i[r+1].y-i[r].y,g=Math.sqrt(y*y+a*a),f=y/g;l=-(a/g),c=f}else l=void 0,c=void 0;if(l==null||c==null){if(o==null||h==null)continue;l=o,c=h}(o==null||h==null)&&(o=l,h=c);let u=(l*o+c*h)/(o*o+h*h),d=o*u,m=h*u;s.push({x:i[r].x+(o+l-d)*t,y:i[r].y+(h+c-m)*t})}let x=[];for(let r of i)x.push(r);for(let r=s.length-1;r>=0;--r)x.push(s[r]);return x}const L={type:"Object",properties:{x:{displayName:"X",typeSchema:{type:"Number"},defaultValue:0},y:{displayName:"X",typeSchema:{type:"Number"},defaultValue:0},z:{displayName:"Z",typeSchema:{type:"Number"},defaultValue:0}}};let S={from:{displayName:"From",typeSchema:L,defaultValue:{x:0,y:0,z:0}},to:{displayName:"To",typeSchema:L,defaultValue:{x:1,y:0,z:0}}};const X=new k({typeName:"Line",displayName:"Line",propertiesSchema:S}),q=X;class Z{constructor(){this.useStandardKitInsert=!1,this.noMultiForm=!0,this.componentType=q}create(t,e,n,i,s){return new U(e,n,i,s)}}let C=new Z;R(C);const it=C;class U{constructor(t,e,n,i){this.type=C,this.state=t,this.setState=e,this.kitsUserEdits=n,this.setKitsUserEdits=i,this.components=w(()=>[new K({line:w(()=>b.create(A.create(t.from.x,t.from.y,t.from.z),A.create(t.to.x,t.to.y,t.to.z)))})]),this.properties=w(()=>[{displayName:"Properties",fields:[v({displayName:()=>"From X",value:()=>t.from.x,setValue:s=>e("from","x",s)}),v({displayName:()=>"From Y",value:()=>t.from.y,setValue:s=>e("from","y",s)}),v({displayName:()=>"From Z",value:()=>t.from.z,setValue:s=>e("from","z",s)}),v({displayName:()=>"To X",value:()=>t.to.x,setValue:s=>e("to","x",s)}),v({displayName:()=>"To Y",value:()=>t.to.y,setValue:s=>e("to","y",s)}),v({displayName:()=>"To Z",value:()=>t.to.z,setValue:s=>e("to","z",s)})],expanded:()=>!0}]),this.line=w(()=>b.create(A.create(t.from.x,t.from.y,t.from.z),A.create(t.to.x,t.to.y,t.to.z))),this.updateLine=s=>{B(()=>{e("from","x",s.v1.x),e("from","y",s.v1.y),e("from","z",s.v1.z),e("to","x",s.v2.x),e("to","y",s.v2.y),e("to","z",s.v2.z)})}}}export{U as L,T as P,z as V,it as a,$ as b,_ as e,st as f,q as l,et as m,tt as r};
