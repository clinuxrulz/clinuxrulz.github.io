import{a as e,z as G}from"./index.5aba22ff.js";import{T as D,Q as I,b as f,G as q,J as L,K as z,O as T,Y as A,X as E,l as F,Z as U}from"./Component.6024a649.js";import{V as r,a as d}from"./Vec3.ce1f4f7a.js";class B{constructor(n){let g=e(()=>({plate:new k({outline:e(()=>{let t=n.baseDiameter(),l=[];for(let i=0;i<6;++i){let c=2*Math.PI*i/6;l.push(r.create(Math.cos(c)*.5*t,Math.sin(c)*.5*t))}return l}),thickness:()=>4}),space:e(()=>D.create(d.create(0,0,n.baseHeight()),I.identity))})),o=e(()=>new f({children:g().plate.components,transform:g().space})),m=e(()=>{let t=n.baseDiameter(),l=[],i;i=new k({outline:e(()=>{let a=n.baseDiameter()*Math.cos(Math.PI/3),s=n.diameter()*Math.cos(Math.PI/3),h;{let p=.5*(n.diameter()-n.baseDiameter())*Math.sin(Math.PI/3),M=n.headHeight()-n.baseHeight();h=Math.sqrt(p*p+M*M)}return[r.create(0,0),r.create(a,0),r.create(a+.5*(s-a),h),r.create(-.5*(s-a),h)]}),thickness:()=>4});let c;{let a=.5*(n.diameter()-n.baseDiameter())*Math.sin(Math.PI/3),s=n.headHeight()-n.baseHeight(),h=Math.sqrt(a*a+s*s);c=r.create(a/h,s/h)}for(let a=0;a<6;++a){let s=2*Math.PI*a/6,h=2*Math.PI*(a+1)/6,p=Math.cos(s)*.5*t,M=Math.sin(s)*.5*t,x=Math.cos(h)*.5*t,C=Math.sin(h)*.5*t,H=d.create(x-p,C-M,0).normalize(),V=d.create(H.y*c.x,-H.x*c.x,c.y);l.push({plate:i,space:e(()=>D.create(d.create(p,M,n.baseHeight()),I.fromUV(H,V)))})}return l}),b=e(()=>m().map(({plate:t,space:l})=>new f({children:t.components,transform:l}))),u=e(()=>{let t=n.legPitch()*Math.PI/180,l=Math.cos(t),i=Math.sin(t),c=new k({outline:e(()=>[r.zero,r.create(100,0),r.create(100+150*l,150*i),r.create(230*l,230*i)]),thickness:()=>4}),a=[],s=.5*n.baseDiameter()+100+150*l;for(let h=0;h<6;++h){let p=2*Math.PI*h/6,M=Math.cos(p),x=Math.sin(p),C=D.create(d.create(M*s,x*s,4),I.fromUV(d.create(-M,-x,0),d.unitZ));a.push({plate:c,space:()=>C})}return a}),w=e(()=>u().map(({plate:t,space:l})=>new f({children:t.components,transform:l}))),P=e(()=>{let t=new k({outline:e(()=>[r.zero,r.create(40,0),r.create(40,140),r.create(0,140)]),thickness:()=>4});return u().map(({space:l})=>({plate:t,space:e(()=>{let i=l().o,c=l().u,a=l().w;return D.create(i.sub(a.scale(.5*40)).add(c.scale(.5*100-.5*140)).sub(d.create(0,0,4)),I.fromWU(d.unitZ,a))})}))}),y=e(()=>P().map(({plate:t,space:l})=>new f({children:t.components,transform:l})));this.components=e(()=>[o(),...b(),...w(),...y()]),this.totalPlateArea=e(()=>[g(),...m(),...u(),...P()].reduce((t,l)=>t+l.plate.plateArea(),0)),this.allocateLabels=t=>{},this.mkPlatesForDoc=t=>e(()=>[e(()=>({label:"Base Plate",quantity:1,outline:g().plate.outline()})),e(()=>({label:"Side Plate",quantity:6,outline:m()[0].plate.outline()})),e(()=>({label:"Leg Plate",quantity:6,outline:u()[0].plate.outline()})),e(()=>({label:"Feet",quantity:6,outline:P()[0].plate.outline()}))])}}class k{constructor(n){let g=e(()=>new f({mkObject3d:e(()=>{let o=n.outline();if(o.length<3)return()=>new q;let m=n.thickness();return b=>{let u=.001,w=new L;w.moveTo(o[0].x*u,o[0].y*u);for(let s=1;s<o.length;++s)w.lineTo(o[s].x*u,o[s].y*u);w.closePath();let P=new z(w,{bevelEnabled:!1,depth:m*u}),y=new T({color:"#808080"}),t=new A(P),l=new E({color:"black"});G(()=>{P.dispose(),y.dispose(),t.dispose(),l.dispose()});let i=new F(P,y),c=new U(t,l),a=new q;return a.add(i),a.add(c),a}})}));this.outline=n.outline,this.components=e(()=>[g()]),this.plateArea=e(()=>{let o=n.outline(),m=0;for(let b=0;b<o.length;++b){let u=(b+1)%o.length;m+=o[b].cross(o[u])}return .5*Math.abs(m)/1e6})}}export{B as H};
