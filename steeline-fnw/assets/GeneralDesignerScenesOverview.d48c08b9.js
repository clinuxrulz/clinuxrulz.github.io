import{c as G,o as L,a as S,A as M,i as u,b as $,S as y,e as h,I as P,f as z,t as a,an as K,az as U,aA as q}from"./index.5aba22ff.js";const B=a('<button class="btn btn-primary">Close</button>'),H=a("<br>"),J=a('<button class="btn btn-primary" style="margin-left: 10px;">Open</button>'),Q=a('<button class="btn btn-primary" style="margin-left: 10px;">New</button>'),V=a('<div style="flex-grow: 1; display: flex; flex-direction: column; overflow: hidden;"><div><h2>General Designer Scenes Overview</h2>Search:<input type="text"><button class="btn btn-primary">Clear</button><button class="btn btn-primary" style="margin-left: 10px;">Delete</button><button class="btn btn-primary" style="margin-left: 10px;">Rename</button></div><div style="flex-grow: 1; overflow: auto; border: 1px solid black;"><table class="table" tabindex="0"><thead><tr><th style="white-space: nowrap;">Filename</th></tr></thead><tbody></tbody></table></div></div>'),W=a('<tr><td style="white-space: nowrap;"></td></tr>'),Y=i=>{const[e,c]=G({searchText:"",files:[]}),_=async()=>{let t=await K();c("files",t)};L(()=>{_()});const w=S(()=>e.searchText==""?e.files:(()=>{let t=e.searchText.toLowerCase();return e.files.filter(l=>!!l.filename.toLowerCase().includes(t))})()),p=()=>{c("searchText","")},k=t=>{c("searchText",t)},R=()=>{c("selectedRowIndex",void 0)},m=t=>{c("selectedRowIndex",t)};M(()=>{e.searchText,R()});const C=()=>{if(e.selectedRowIndex==null||i.onOpen==null)return;let t=w();if(e.selectedRowIndex<0||e.selectedRowIndex>=t.length)return;let l=t[e.selectedRowIndex];i.onOpen(l.objectId,l.filename)},F=()=>{i.onNew!=null&&i.onNew()},N=async()=>{if(e.selectedRowIndex==null)return;let t=w();if(e.selectedRowIndex<0||e.selectedRowIndex>=t.length)return;let l=t[e.selectedRowIndex];if(window.confirm("Are you sure you wish to delete file "+l.filename+"?"))try{await U({objectId:l.objectId}),await _()}catch(r){alert(r)}},T=async()=>{if(e.selectedRowIndex==null)return;let t=w();if(e.selectedRowIndex<0||e.selectedRowIndex>=t.length)return;let l=t[e.selectedRowIndex],r=window.prompt("Enter new file name",void 0);if(!(r==null||r.trim().length==0)){r=r.trim();try{await q({objectId:l.objectId,filename:r});let o=e.files.findIndex(({objectId:f})=>f==l.objectId);c("files",o,"filename",r)}catch(o){alert(o)}}},D=t=>{switch(t.key){case"Escape":{R();break}case"ArrowDown":{e.selectedRowIndex!=null&&e.selectedRowIndex<e.files.length-1&&m(e.selectedRowIndex+1);break}case"ArrowUp":{e.selectedRowIndex!=null&&e.selectedRowIndex>0&&m(e.selectedRowIndex-1);break}}};return(()=>{const t=V.cloneNode(!0),l=t.firstChild,r=l.firstChild,o=r.nextSibling,f=o.nextSibling,g=f.nextSibling,I=g.nextSibling,b=I.nextSibling,O=l.nextSibling,v=O.firstChild,j=v.firstChild,E=j.nextSibling;return u(l,$(y,{get when(){return i.onClose!=null},get children(){return[(()=>{const n=B.cloneNode(!0);return n.$$click=()=>{i.onClose!=null&&i.onClose()},n})(),H.cloneNode(!0)]}}),o),f.$$input=n=>{let s=n.target;k(s.value)},g.$$click=()=>p(),I.$$click=()=>N(),u(l,$(y,{get when(){return i.onOpen!=null},get children(){const n=J.cloneNode(!0);return n.$$click=()=>C(),h(()=>n.disabled=e.selectedRowIndex==null),n}}),b),u(l,$(y,{get when(){return i.onNew!=null},get children(){const n=Q.cloneNode(!0);return n.$$click=()=>F(),n}}),b),b.$$click=()=>T(),v.$$keydown=D,u(E,$(P,{get each(){return w()},children:(n,s)=>{let x=S(()=>e.selectedRowIndex==null?!1:e.selectedRowIndex==s);return(()=>{const d=W.cloneNode(!0),A=d.firstChild;return d.$$click=()=>m(s),d.style.setProperty("cursor","pointer"),u(A,()=>n().filename),h(()=>d.style.setProperty("background-color",x()?"#80FF80":"")),d})()}})),h(n=>{const s=e.searchText=="",x=e.selectedRowIndex==null,d=e.selectedRowIndex==null;return s!==n._v$&&(g.disabled=n._v$=s),x!==n._v$2&&(I.disabled=n._v$2=x),d!==n._v$3&&(b.disabled=n._v$3=d),n},{_v$:void 0,_v$2:void 0,_v$3:void 0}),h(()=>f.value=e.searchText),t})()};z(["click","input","keydown"]);export{Y as default};
