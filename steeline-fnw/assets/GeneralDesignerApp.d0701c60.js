import{J as I,_,l as b,am as y,c as h,o as G,an as O,ao as g,w as m,x as D,H as u,b as s,M as w,a as T,p as j,q as A,ap as x,aq as E,g as N,d as C}from"./index.5aba22ff.js";import J from"./RestrictedAreaLogin.5f1b5767.js";const M=I(()=>_(()=>import("./GeneralDesigner.a8eb10cc.js"),["GeneralDesigner.a8eb10cc.js","index.5aba22ff.js","index.8628b9c4.css","Component.6024a649.js","Vec3.ce1f4f7a.js","OrderIndexComponent.f19bd260.js","Component.fa73bdbc.js","PropertiesForm.c69fa44e.js","Gutter.196a297e.js","LineKit.f6b732de.js","Line3D.2b8117f1.js","utils.6e3ab489.js","Plane3D.472a05fa.js","PanelUtils.894b6d74.js","Line2D.139781b3.js","Ray2D.01cdc921.js","SvgWithPanZoomState.e2089103.js","StandardBorderLandscapeDoc.be2b9e86.js","Labeler.42ece7e8.js","LockerShed.98091ec0.js","MezzanineFloor.5f8c35cf.js","Transform2D.200bb15c.js","Ray3D.5e4c723f.js","GableTruss.fea81d7b.js","HexagonalFirePit.41ea653b.js","OpenWebColumnRafterSection.d2fefac8.js","Fascia.ecb69f90.js","WeldedUBColumnRafterSection.79a51e85.js","three_js_component_renderer.95a2237b.js","components_to_order_lines.80e80e01.js","ad_components.dbddf843.js","DocumentsView.ab8d138b.js","DocumentView.3a121409.js","DrawLinesMode.1925dcb4.js","FrameDrawingDoc.c2479e9b.js","GLTFExporter.c7bd8ba1.js","Dialog.aed5b9f2.js","UndoManager.be70fe9a.js"],import.meta.url)),P=I(()=>_(()=>import("./GeneralDesignerScenesOverview.d48c08b9.js"),["GeneralDesignerScenesOverview.d48c08b9.js","index.5aba22ff.js","index.8628b9c4.css"],import.meta.url)),R=l=>{const[S,p]=b(void 0);(async()=>{let a=await y();p(a)})();let[t,r]=h();return G(()=>{l.onInit&&l.onInit({open:async a=>{let e=(await O()).find(({filename:v})=>v==a);if(e==null){alert("File `"+a+"` not found.");return}let o=await g({objectId:e.objectId}),c=m(o),f=D(c),d=new TextDecoder().decode(f),n=JSON.parse(d);r("openedScene",u({file:{objectId:e.objectId,filename:e.filename,initData:n}}))}})}),s(C,{get children(){return[s(w,{get when(){return S()==!0},get children(){return T(()=>{let a=t.openedScene;return a==null?s(P,{get onClose(){return l.onClose},onNew:()=>{r("openedScene",u({}))},onOpen:async(i,e)=>{let o=await g({objectId:i}),c=m(o),f=D(c),d=new TextDecoder().decode(f),n=JSON.parse(d);r("openedScene",u({file:{objectId:i,filename:e,initData:n}}))}}):s(M,{get rootDiv(){return l.rootDiv},onInit:({load:i})=>{if(t.openedScene==null||t.openedScene.file==null)return;let e=t.openedScene.file.initData;e!=null&&(i(e),r("openedScene","file","initData",void 0))},onClose:()=>r("openedScene",void 0),onSave:async i=>{if(t.openedScene==null)return;let e=t.openedScene.file?.filename;if(e==null){let n=window.prompt("Please enter a filename:");if(n==null)return;e=n}let o=JSON.stringify(i),c=new TextEncoder().encode(o),f=j(c),d=A(f);if(t.openedScene.file==null){let{objectId:n}=await x({filename:e,data:d});r("openedScene","file",{objectId:n,filename:e}),alert("Save successful")}else{let n=await E({objectId:t.openedScene.file.objectId,data:d});alert(n.type=="success"?"Save successful":n.message)}},get filename(){return a.file?.filename??"Untitled"}})})}}),s(w,{get when(){return S()==!1},get children(){return s(J,{onSiteIn:()=>{N(()=>{l.setSignedIn(!0),p(!0)})}})}})]}})};export{R as default};
