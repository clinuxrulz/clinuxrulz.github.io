import{a as u}from"./index.5aba22ff.js";import{T as b,b as h}from"./Component.6024a649.js";import{V as N,a as c}from"./Vec3.ce1f4f7a.js";import{P as Y}from"./Plane3D.472a05fa.js";import{i as g}from"./Component.fa73bdbc.js";const I=g(({x:a,y:t})=>N.create(a,t),a=>({x:a.x,y:a.y}),{type:"Object",properties:{x:{displayName:"X",typeSchema:{type:"Number"},defaultValue:0},y:{displayName:"Y",typeSchema:{type:"Number"},defaultValue:0}}});function q(a,t){return u(()=>a().map(l=>{let n=l.transform==null?()=>b.identity:l.transform;return{...l,transform:()=>t().fromThisSpace(n())}}))}function _(a,t){return u(()=>a().map(l=>({...l,usage:t})))}function F(a,t){return u(()=>a().map(l=>{let n=l.transform==null?()=>b.identity:l.transform;return{...l,transform:()=>t().toThisSpace(n())}}))}function w(a,t){let l=0;for(let n=0;n<t.length;++n){let o=t[n],e=t[(n+1)%t.length],r=Math.min(o.y,e.y),m=Math.max(o.y,e.y);if(r<=a.y&&a.y<=m){let y=e.x-o.x,p=e.y-o.y,f=o.x+(a.y-o.y)*y/p;a.x<f&&++l}}return(l&1)!=0}let V=(a,t,l)=>{let n=l??{minY:0,maxY:0};n.minY=Number.POSITIVE_INFINITY,n.maxY=Number.NEGATIVE_INFINITY;for(let o=0;o<a.length;++o){let e=a[o],r=a[(o+1)%a.length],m=Math.min(e.x,r.x),y=Math.max(e.x,r.x);if(m<=t&&t<=y){let p=r.x-e.x,f=r.y-e.y,x=e.y+(t-e.x)*f/p;if(!Number.isFinite(x))continue;n.minY=Math.min(n.minY,x),n.maxY=Math.max(n.maxY,x)}}if(!!Number.isFinite(n.minY))return n};function C(a,t){let l={};for(let e of t){let r=a.lookupLabelForComponent(e);if(r==null)continue;let m=l[r];m!=null?m.qty+=e.qty==null?1:e.qty():(m={component:e,qty:e.qty==null?1:e.qty()},l[r]=m)}let n=[];for(let e in l){let{component:r,qty:m}=l[e];n.push({label:e,component:r,qty:m})}n.sort((e,r)=>e.label.localeCompare(r.label));let o=[];for(let{component:e,qty:r}of n)o.push(new h({...e,qty:()=>r}));return o}function P(a){let t=a.length;if(t<3)return;let l=c.zero;for(let s of a)l=l.add(s);let n=l.scale(1/t),o=0,e=0,r=0,m=0,y=0,p=0;for(let s of a){let i=s.sub(n);o+=i.x*i.x,e+=i.x*i.y,r+=i.x*i.z,m+=i.y*i.y,y+=i.y*i.z,p+=i.z*i.z}o/=t,e/=t,r/=t,m/=t,y/=t,p/=t;let f=c.zero;{let s=m*p-y*y,i=c.create(s,r*y-e*p,e*y-r*m),d=s*s;f.dot(i)<0&&(d=-d),f=f.add(i.scale(d))}{let s=o*p-r*r,i=c.create(r*y-e*p,s,e*r-y*o),d=s*s;f.dot(i)<0&&(d=-d),f=f.add(i.scale(d))}{let s=o*m-e*e,i=c.create(e*y-r*m,e*r-y*o,s),d=s*s;f.dot(i)<0&&(d=-d),f=f.add(i.scale(d))}let x=f.normalize();if(!!Number.isFinite(x.x))return Y.fromKnownPtAndNormal(n,x)}export{q as a,F as b,C as g,w as i,_ as m,V as o,P as p,I as v};
