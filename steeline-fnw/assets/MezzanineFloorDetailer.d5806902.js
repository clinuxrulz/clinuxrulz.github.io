import{a as k,i as m,b as c,I as T,t as y,o as q,c as C,S as O,M,d as P,e as E,f as V}from"./index.5aba22ff.js";import j from"./ComponentScene3D.8d7811a7.js";import{P as L,m as $,a as F,b as D}from"./PropertiesForm.c69fa44e.js";import{V as B,a as z}from"./Vec3.ce1f4f7a.js";import{M as I}from"./MezzanineFloor.5f8c35cf.js";import"./Component.6024a649.js";import"./OrbitControls.3e0e93be.js";import"./GLTFExporter.c7bd8ba1.js";import"./three_js_component_renderer.95a2237b.js";import"./LineKit.f6b732de.js";import"./Component.fa73bdbc.js";import"./Line3D.2b8117f1.js";import"./utils.6e3ab489.js";import"./Plane3D.472a05fa.js";import"./Transform2D.200bb15c.js";const H=y('<div style="flex-grow: 1; overflow-y: scroll;"><table class="table"><thead><tr><th style="background: #FFF;">Item Name</th><th style="background: #FFF;">Qty</th><th style="background: #FFF;">Length</th><th style="background: #FFF;">Usage</th></tr></thead><tbody></tbody></table></div>'),Q=y("<tr><td></td><td></td><td></td><td></td></tr>"),U=d=>{const f=k(()=>{let g=d.components,t={};for(let e of g){if(e.itemName==null)continue;let n;e.length==null?n="--":n=Math.round(e.length()).toFixed(0)+" mm";let i=e.itemName+"_"+n,l=t[i];if(l==null){let a=new Map;e.usage!=null&&a.set(e.usage(),e.qty==null?1:e.qty()),t[i]={itemName:e.itemName(),qty:e.qty==null?1:e.qty(),usage:a,length:n}}else if(l.qty+=e.qty==null?1:e.qty(),e.usage!=null){let a=l.usage.get(e.usage())??0;l.usage.set(e.usage(),a+(e.qty==null?1:e.qty()))}}let s=[];for(let e in t){let n=t[e],i="";{let l=!0;for(let[a,h]of n.usage)l?l=!1:i+="; ",i+=a+" ("+h+")"}s.push({itemName:n.itemName,qty:n.qty,length:n.length,usage:i})}return s.sort((e,n)=>{let i=e.itemName.localeCompare(n.itemName);if(i!=0)return i;{let l=Number.parseFloat(e.length),a=Number.parseFloat(n.length);return Number.isFinite(l)&&Number.isFinite(a)?l-a:e.length.localeCompare(n.length)}}),s});return(()=>{const g=H.cloneNode(!0),t=g.firstChild,s=t.firstChild,e=s.nextSibling;return m(e,c(T,{get each(){return f()},children:n=>(()=>{const i=Q.cloneNode(!0),l=i.firstChild,a=l.nextSibling,h=a.nextSibling,b=h.nextSibling;return m(l,()=>n().itemName),m(a,()=>n().qty),m(h,()=>n().length),m(b,()=>n().usage),i})()})),g})()},A=y('<button class="btn btn-primary" style="margin-left: 5px; margin-bottom: 5px;">Close</button>'),G=y("<br>"),J=y('<div style="flex-grow: 1; display: flex; flex-direction: row; overflow-y: hidden;"><div style="overflow-y: auto;"></div><div style="flex-grow: 1; display: flex; flex-direction: column; overflow: hidden;"></div></div>'),K=y('<div style="flex-grow: 1; display: flex; flex-direction: column; overflow-y: hidden;"><div><h2>Mezzanine Floor Detailer</h2><ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link" style="cursor: pointer;">Model</a></li><li class="nav-item"><a class="nav-link" style="cursor: pointer;">BOM</a></li></ul></div></div>');var u;(function(d){d[d.Model=0]="Model",d[d.BOM=1]="BOM"})(u||(u={}));const ue=d=>{q(()=>{document.title="Tool Box - Mezzanine Floor Detailer"});let[f,g]=C({selectedTab:u.Model}),[t,s]=C({span:12e3,length:5e3,height:2500,numEndBays:2,numSideBays:1,joistCentres:600,hasStairs:!0});const e=()=>{g("selectedTab",u.Model)},n=()=>{g("selectedTab",u.BOM)},i=new I({span:()=>t.span,length:()=>t.length,height:()=>t.height,numEndBays:()=>t.numEndBays,numSideBays:()=>t.numSideBays,joistCentres:()=>t.joistCentres,girderParams:()=>({itemName:"UB250x25",webSize:254,flangeSize:152,thickness:3}),joistParams:()=>({itemName:"C20024",webSize:203,flangeSize:74,lipSize:10,thickness:2.4}),columnParams:()=>({itemName:"100x3.0 SHS",size:100,thickness:3}),plateThickness:()=>10,stairsOp:()=>t.hasStairs?{entryFloorPt:B.create(t.length-1500,.5*152),dir:B.create(1,0),width:1200,headClearance:2e3}:void 0}),l=k(()=>i.components());return(()=>{const a=K.cloneNode(!0),h=a.firstChild,b=h.firstChild,x=b.nextSibling,N=x.firstChild,S=N.firstChild,w=N.nextSibling,_=w.firstChild;return m(h,c(O,{get when(){return d.onClose!=null},get children(){return[(()=>{const o=A.cloneNode(!0);return o.$$click=()=>{d.onClose!=null&&d.onClose()},o})(),G.cloneNode(!0)]}}),x),S.$$click=()=>e(),_.$$click=()=>n(),m(a,c(P,{get children(){return[c(M,{get when(){return f.selectedTab==u.Model},get children(){const o=J.cloneNode(!0),p=o.firstChild,v=p.nextSibling;return m(p,c(L,{get fieldGroups(){return[{displayName:"Mezzanine",fields:[$({displayName:()=>"Span",value:()=>t.span,setValue:r=>s("span",r)}),$({displayName:()=>"Length",value:()=>t.length,setValue:r=>s("length",r)}),$({displayName:()=>"Height",value:()=>t.height,setValue:r=>s("height",r)}),F({displayName:()=>"# End Bays",value:()=>t.numEndBays,setValue:r=>s("numEndBays",r)}),F({displayName:()=>"# Side Bays",value:()=>t.numSideBays,setValue:r=>s("numSideBays",r)}),$({displayName:()=>"Joist Centres",value:()=>t.joistCentres,setValue:r=>s("joistCentres",r)}),D({displayName:()=>"Stairs?",value:()=>t.hasStairs,setValue:r=>s("hasStairs",r)})],expanded:()=>!0}]}})),m(v,c(j,{get components(){return l()},get initCamPos(){return z.create(-15e3,1e3,15e3)},get initCamLookAt(){return z.create(2500,6e3,1250)}})),o}}),c(M,{get when(){return f.selectedTab==u.BOM},get children(){return c(U,{get components(){return l()}})}})]}}),null),E(o=>{const p=f.selectedTab==u.Model,v=f.selectedTab==u.BOM;return p!==o._v$&&S.classList.toggle("active",o._v$=p),v!==o._v$2&&_.classList.toggle("active",o._v$2=v),o},{_v$:void 0,_v$2:void 0}),a})()};V(["click"]);export{ue as default};
