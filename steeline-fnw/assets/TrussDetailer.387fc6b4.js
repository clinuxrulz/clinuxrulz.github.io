import{o as G,z as le,c as L,i as X,b as P,S as E,e as w,s as d,a as z,I as T,f as oe,t as _,g as k,u as I}from"./index.5aba22ff.js";import{m as W,a as ue,b as fe,P as ce}from"./PropertiesForm.c69fa44e.js";import{L as Y}from"./Line2D.139781b3.js";import{a as D,V as m}from"./Vec3.ce1f4f7a.js";import{G as ve}from"./GableTruss.fea81d7b.js";import"./Ray2D.01cdc921.js";import"./Component.6024a649.js";const he=_('<button class="btn btn-primary">Close</button>'),me=_("<br>"),ge=_('<svg><rect fill="url(#grid)"></rect></svg>',4,!0),pe=_('<div style="flex-grow: 1; display: flex; flex-direction: column;"><div><h2>Truss Detailer</h2></div><br><div style="flex-grow: 1; display: flex; flex-direction: row; overflow: none;"><div><div class="modal-header"><h5 class="modal-title">Properties</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"></div></div><div style="flex-grow: 1;"><svg><defs><pattern id="smallGrid" width="8" height="8" patternUnits="userSpaceOnUse"><path d="M 8 0 L 0 0 0 8" fill="none" stroke="gray" stroke-width="0.5"></path></pattern><pattern id="grid" width="80" height="80" patternUnits="userSpaceOnUse"><rect width="80" height="80" fill="url(#smallGrid)"></rect><path d="M 80 0 L 0 0 0 80" fill="none" stroke="gray" stroke-width="1"></path></pattern><marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7"></polygon></marker></defs><g></g></svg></div></div></div>'),$e=_('<svg><rect style="stroke-width:1;stroke:rgb(0,0,0);fill:none;"></rect></svg>',4,!0),_e=_('<svg><line stroke="blue" stroke-dasharray="10,5"></line></svg>',4,!0),be=_("<svg><circle></circle></svg>",4,!0),Se=_('<svg><rect style="fill:red;"></rect></svg>',4,!0),Ye=N=>{G(()=>{document.title="Tool Box - Truss Detailer"});var y=void 0,M=void 0;const O=new ResizeObserver(a=>{for(const f of a)f.contentBoxSize&&M!=null&&k(()=>{s("svgWidth",f.contentRect.width),s("svgHeight",f.contentRect.height)})});G(()=>{y!=null&&O.observe(y)}),le(()=>{y!=null&&(O.unobserve(y),O.disconnect())});const[t,s]=L({svgWidth:600,svgHeight:400,scale:1,panX:0,panY:-500,isPanning:!1,showGrid:!0,unitScale:10/8,fontSize:12}),U=(a,f)=>{k(()=>{s("isPanning",!0),s("panStartScreenX",a),s("panStartScreenY",f),s("panStartWorldX",t.panX),s("panStartWorldY",t.panY)})},B=()=>{k(()=>{s("isPanning",!1),s("panStartScreenX",void 0),s("panStartScreenY",void 0),s("panStartWorldX",void 0),s("panStartWorldY",void 0)})},A=(a,f)=>{k(()=>{t.panStartScreenX!=null&&t.panStartScreenY!=null&&t.panStartWorldX!=null&&t.panStartWorldY!=null&&(s("panX",t.panStartWorldX-(a-t.panStartScreenX)/t.scale),s("panY",t.panStartWorldY-(f-t.panStartScreenY)/t.scale))})},K=(a,f)=>{k(()=>{s("panX",t.panX+a*.1/(t.scale*1.1)),s("panY",t.panY+f*.1/(t.scale*1.1)),s("scale",t.scale*1.1)})},j=(a,f)=>{k(()=>{s("panX",t.panX-a*.1/t.scale),s("panY",t.panY-f*.1/t.scale),s("scale",t.scale/1.1)})},u=a=>a/t.unitScale,q=a=>{t.isPanning||U(a.clientX,a.clientY)},J=a=>{t.isPanning&&B()},Q=a=>{t.isPanning&&A(a.clientX,a.clientY)},Z=a=>{a.deltaY>0?j(a.offsetX,a.offsetY):a.deltaY<0&&K(a.offsetX,a.offsetY)},[h,b]=L({span:6e3,pitch:15,kneeHeight:30,numWebSpacingPerSide:4,leftOverhang:0,rightOverhang:0,boxed:!1}),ee=new ve({span:()=>h.span,pitch:()=>h.pitch,kneeHeight:()=>h.kneeHeight,numWebSpacingPerSize:()=>h.numWebSpacingPerSide,leftOverhang:()=>0,rightOverhang:()=>0,boxed:()=>!1}).members;return(()=>{const a=pe.cloneNode(!0),f=a.firstChild;f.firstChild;const ne=f.nextSibling,te=ne.nextSibling,V=te.firstChild,re=V.firstChild,ie=re.nextSibling,C=V.nextSibling,v=C.firstChild,ae=v.firstChild,H=ae.nextSibling;X(f,P(E,{get when(){return N.onClose!=null},get children(){return[(()=>{const n=he.cloneNode(!0);return n.$$click=()=>{N.onClose!=null&&N.onClose()},n})(),me.cloneNode(!0)]}}),null),X(ie,P(ce,{get fieldGroups(){return[{displayName:"Truss",fields:[W({displayName:()=>"Span",value:()=>h.span,setValue:n=>b("span",n)}),W({displayName:()=>"Pitch",value:()=>h.pitch,setValue:n=>b("pitch",n)}),W({displayName:()=>"Knee Height",value:()=>h.kneeHeight,setValue:n=>b("kneeHeight",n)}),ue({displayName:()=>"Num Web Spacing Per Side",value:()=>h.numWebSpacingPerSide,setValue:n=>b("numWebSpacingPerSide",n)}),W({displayName:()=>"Left Overhang",value:()=>h.leftOverhang,setValue:n=>b("leftOverhang",n)}),W({displayName:()=>"Right Overhang",value:()=>h.rightOverhang,setValue:n=>b("rightOverhang",n)}),fe({displayName:()=>"Boxed?",value:()=>h.boxed,setValue:n=>b("boxed",n)})],expanded:()=>!0}]}}));const R=y;typeof R=="function"?I(R,C):y=C,v.addEventListener("wheel",Z),v.$$mousemove=Q,v.$$mouseup=J,v.$$mousedown=q;const F=M;return typeof F=="function"?I(F,v):M=v,v.style.setProperty("border","solid"),v.style.setProperty("border-width","1px"),X(H,P(E,{get when(){return t.showGrid},get children(){const n=ge.cloneNode(!0);return w(l=>{const g=t.panX,p=t.panY,S=t.svgWidth/t.scale+"px",x=t.svgHeight/t.scale+"px";return g!==l._v$&&d(n,"x",l._v$=g),p!==l._v$2&&d(n,"y",l._v$2=p),S!==l._v$3&&d(n,"width",l._v$3=S),x!==l._v$4&&d(n,"height",l._v$4=x),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),n}}),null),X(H,P(T,{get each(){return ee()},children:n=>{let l=n()();if(l==null)return[];if(l.transform==null)return[];if(l.length==null)return[];if(l.panelMemberProperties==null)return[];let g=z(()=>{let e=n()();return e==null||e.transform==null?0:Math.atan2(-e.transform().u.z,e.transform().u.x)*180/Math.PI}),p=z(()=>{let e=n()();return e==null?D.zero:e.transform==null?D.zero:e.panelMemberProperties==null?D.zero:e.transform().o.add(e.transform().w.scale(e.panelMemberProperties().flangeSize))}),S=z(()=>{let e=n()();return e==null||e.length==null?0:e.length()}),x=z(()=>{let e=n()();if(e==null)return Y.create(m.zero,m.zero);if(e.length==null)return Y.create(m.zero,m.zero);if(e.transform==null)return Y.create(m.zero,m.zero);if(e.panelMemberProperties==null)return Y.create(m.zero,m.zero);let r=e.transform().o.add(e.transform().w.scale(e.panelMemberProperties().dimpleDistFromWeb)),i=e.transform().o.add(e.transform().u.scale(e.length())).add(e.transform().w.scale(e.panelMemberProperties().dimpleDistFromWeb));return Y.create(m.create(r.x,r.z),m.create(i.x,i.z))}),se=z(()=>{let e=n()();if(e==null)return[];if(e.length==null)return[];if(e.transform==null)return[];if(e.panelMemberProperties==null)return[];if(e.flangePunches==null)return[];let r=[];for(let i of e.flangePunches()){let o=e.transform().o.add(e.transform().u.scale(i)).add(e.transform().w.scale(e.panelMemberProperties().dimpleDistFromWeb));r.push(m.create(o.x,o.z))}return r}),de=z(()=>{let e=n()();if(e==null)return[];if(e.length==null)return[];if(e.transform==null)return[];if(e.panelMemberProperties==null)return[];if(e.webNotchRanges==null)return[];if(e.webNotchRanges.length==0)return[];let r=[],i=3;for(let o of e.webNotchRanges()){let c=e.transform().o.add(e.transform().u.scale(o.from)).add(e.transform().v.scale(i));r.push({transform:"translate("+u(c.x)+","+u(-c.z)+") rotate("+g()+")",width:u(o.to-o.from),height:u(i)})}return r});return[(()=>{const e=$e.cloneNode(!0);return w(r=>{const i="translate("+u(p().x)+","+u(-p().z)+") rotate("+g()+")",o=u(S()),c=u(l.panelMemberProperties().flangeSize);return i!==r._v$9&&d(e,"transform",r._v$9=i),o!==r._v$10&&d(e,"width",r._v$10=o),c!==r._v$11&&d(e,"height",r._v$11=c),r},{_v$9:void 0,_v$10:void 0,_v$11:void 0}),e})(),(()=>{const e=_e.cloneNode(!0);return w(r=>{const i=u(x().v1.x),o=u(-x().v1.y),c=u(x().v2.x),$=u(-x().v2.y);return i!==r._v$12&&d(e,"x1",r._v$12=i),o!==r._v$13&&d(e,"y1",r._v$13=o),c!==r._v$14&&d(e,"x2",r._v$14=c),$!==r._v$15&&d(e,"y2",r._v$15=$),r},{_v$12:void 0,_v$13:void 0,_v$14:void 0,_v$15:void 0}),e})(),P(T,{get each(){return se()},children:e=>(()=>{const r=be.cloneNode(!0);return w(i=>{const o=u(e().x),c=u(-e().y),$=u(6);return o!==i._v$16&&d(r,"cx",i._v$16=o),c!==i._v$17&&d(r,"cy",i._v$17=c),$!==i._v$18&&d(r,"r",i._v$18=$),i},{_v$16:void 0,_v$17:void 0,_v$18:void 0}),r})()}),P(T,{get each(){return de()},children:e=>(()=>{const r=Se.cloneNode(!0);return w(i=>{const o=e().transform,c=e().width,$=e().height;return o!==i._v$19&&d(r,"transform",i._v$19=o),c!==i._v$20&&d(r,"width",i._v$20=c),$!==i._v$21&&d(r,"height",i._v$21=$),i},{_v$19:void 0,_v$20:void 0,_v$21:void 0}),r})()})]}}),null),w(n=>{const l=t.svgWidth,g=t.svgHeight,p=t.fontSize+"pt",S="scale("+t.scale+") translate("+-t.panX+"px, "+-t.panY+"px)";return l!==n._v$5&&d(v,"width",n._v$5=l),g!==n._v$6&&d(v,"height",n._v$6=g),p!==n._v$7&&v.style.setProperty("font-size",n._v$7=p),S!==n._v$8&&H.style.setProperty("transform",n._v$8=S),n},{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),a})()};oe(["click","mousedown","mouseup","mousemove"]);export{Ye as default};
