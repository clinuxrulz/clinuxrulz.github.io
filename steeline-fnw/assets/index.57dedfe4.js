import{j as U}from"./index.5aba22ff.js";var Te={},Yt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.QRMath=e.QRUtil=e.QRMaskPattern=e.QRErrorCorrectLevel=e.QRCodeModel=void 0;function n(s,r,o){var h=l(r),i=s-1,a=0;switch(o){case e.QRErrorCorrectLevel.L:a=y[i][0];break;case e.QRErrorCorrectLevel.M:a=y[i][1];break;case e.QRErrorCorrectLevel.Q:a=y[i][2];break;case e.QRErrorCorrectLevel.H:a=y[i][3];break}return h<=a}function t(s,r){for(var o=1,h=l(s),i=0,a=y.length;i<a;i++){var v=0;switch(r){case e.QRErrorCorrectLevel.L:v=y[i][0];break;case e.QRErrorCorrectLevel.M:v=y[i][1];break;case e.QRErrorCorrectLevel.Q:v=y[i][2];break;case e.QRErrorCorrectLevel.H:v=y[i][3];break}if(h<=v)break;o++}if(o>y.length)throw new Error("Too long data");return o}function l(s){var r=encodeURI(s).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return r.length+(r.length!=Number(s)?3:0)}var u=function(){function s(r){this.mode=d.MODE_8BIT_BYTE,this.parsedData=[],this.data=r;for(var o=[],h=0,i=this.data.length;h<i;h++){var a=[],v=this.data.charCodeAt(h);v>65536?(a[0]=240|(v&1835008)>>>18,a[1]=128|(v&258048)>>>12,a[2]=128|(v&4032)>>>6,a[3]=128|v&63):v>2048?(a[0]=224|(v&61440)>>>12,a[1]=128|(v&4032)>>>6,a[2]=128|v&63):v>128?(a[0]=192|(v&1984)>>>6,a[1]=128|v&63):a[0]=v,o.push(a)}this.parsedData=Array.prototype.concat.apply([],o),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}return s.prototype.getLength=function(){return this.parsedData.length},s.prototype.write=function(r){for(var o=0,h=this.parsedData.length;o<h;o++)r.put(this.parsedData[o],8)},s}(),f=function(){function s(r,o){r===void 0&&(r=-1),o===void 0&&(o=e.QRErrorCorrectLevel.L),this.moduleCount=0,this.dataList=[],this.typeNumber=r,this.errorCorrectLevel=o,this.moduleCount=0,this.dataList=[]}return s.prototype.addData=function(r){if(this.typeNumber<=0)this.typeNumber=t(r,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error("Invalid QR version: "+this.typeNumber);if(!n(this.typeNumber,r,this.errorCorrectLevel))throw new Error("Data is too long for QR version: "+this.typeNumber)}var o=new u(r);this.dataList.push(o),this.dataCache=void 0},s.prototype.isDark=function(r,o){if(r<0||this.moduleCount<=r||o<0||this.moduleCount<=o)throw new Error(r+","+o);return this.modules[r][o]},s.prototype.getModuleCount=function(){return this.moduleCount},s.prototype.make=function(){this.makeImpl(!1,this.getBestMaskPattern())},s.prototype.makeImpl=function(r,o){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var h=0;h<this.moduleCount;h++){this.modules[h]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[h][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(r,o),this.typeNumber>=7&&this.setupTypeNumber(r),this.dataCache==null&&(this.dataCache=s.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,o)},s.prototype.setupPositionProbePattern=function(r,o){for(var h=-1;h<=7;h++)if(!(r+h<=-1||this.moduleCount<=r+h))for(var i=-1;i<=7;i++)o+i<=-1||this.moduleCount<=o+i||(0<=h&&h<=6&&(i==0||i==6)||0<=i&&i<=6&&(h==0||h==6)||2<=h&&h<=4&&2<=i&&i<=4?this.modules[r+h][o+i]=!0:this.modules[r+h][o+i]=!1)},s.prototype.getBestMaskPattern=function(){if(Number.isInteger(this.maskPattern)&&Object.values(e.QRMaskPattern).includes(this.maskPattern))return this.maskPattern;for(var r=0,o=0,h=0;h<8;h++){this.makeImpl(!0,h);var i=b.getLostPoint(this);(h==0||r>i)&&(r=i,o=h)}return o},s.prototype.setupTimingPattern=function(){for(var r=8;r<this.moduleCount-8;r++)this.modules[r][6]==null&&(this.modules[r][6]=r%2==0);for(var o=8;o<this.moduleCount-8;o++)this.modules[6][o]==null&&(this.modules[6][o]=o%2==0)},s.prototype.setupPositionAdjustPattern=function(){for(var r=b.getPatternPosition(this.typeNumber),o=0;o<r.length;o++)for(var h=0;h<r.length;h++){var i=r[o],a=r[h];if(this.modules[i][a]==null)for(var v=-2;v<=2;v++)for(var c=-2;c<=2;c++)v==-2||v==2||c==-2||c==2||v==0&&c==0?this.modules[i+v][a+c]=!0:this.modules[i+v][a+c]=!1}},s.prototype.setupTypeNumber=function(r){for(var o=b.getBCHTypeNumber(this.typeNumber),h=0;h<18;h++){var i=!r&&(o>>h&1)==1;this.modules[Math.floor(h/3)][h%3+this.moduleCount-8-3]=i}for(var h=0;h<18;h++){var i=!r&&(o>>h&1)==1;this.modules[h%3+this.moduleCount-8-3][Math.floor(h/3)]=i}},s.prototype.setupTypeInfo=function(r,o){for(var h=this.errorCorrectLevel<<3|o,i=b.getBCHTypeInfo(h),a=0;a<15;a++){var v=!r&&(i>>a&1)==1;a<6?this.modules[a][8]=v:a<8?this.modules[a+1][8]=v:this.modules[this.moduleCount-15+a][8]=v}for(var a=0;a<15;a++){var v=!r&&(i>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=v:a<9?this.modules[8][15-a-1+1]=v:this.modules[8][15-a-1]=v}this.modules[this.moduleCount-8][8]=!r},s.prototype.mapData=function(r,o){for(var h=-1,i=this.moduleCount-1,a=7,v=0,c=this.moduleCount-1;c>0;c-=2)for(c==6&&c--;;){for(var p=0;p<2;p++)if(this.modules[i][c-p]==null){var _=!1;v<r.length&&(_=(r[v]>>>a&1)==1);var C=b.getMask(o,i,c-p);C&&(_=!_),this.modules[i][c-p]=_,a--,a==-1&&(v++,a=7)}if(i+=h,i<0||this.moduleCount<=i){i-=h,h=-h;break}}},s.createData=function(r,o,h){for(var i=A.getRSBlocks(r,o),a=new B,v=0;v<h.length;v++){var c=h[v];a.put(c.mode,4),a.put(c.getLength(),b.getLengthInBits(c.mode,r)),c.write(a)}for(var p=0,v=0;v<i.length;v++)p+=i[v].dataCount;if(a.getLengthInBits()>p*8)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+p*8+")");for(a.getLengthInBits()+4<=p*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=p*8||(a.put(s.PAD0,8),a.getLengthInBits()>=p*8));)a.put(s.PAD1,8);return s.createBytes(a,i)},s.createBytes=function(r,o){for(var h=0,i=0,a=0,v=new Array(o.length),c=new Array(o.length),p=0;p<o.length;p++){var _=o[p].dataCount,C=o[p].totalCount-_;i=Math.max(i,_),a=Math.max(a,C),v[p]=new Array(_);for(var P=0;P<v[p].length;P++)v[p][P]=255&r.buffer[P+h];h+=_;var x=b.getErrorCorrectPolynomial(C),T=new w(v[p],x.getLength()-1),g=T.mod(x);c[p]=new Array(x.getLength()-1);for(var P=0;P<c[p].length;P++){var k=P+g.getLength()-c[p].length;c[p][P]=k>=0?g.get(k):0}}for(var E=0,P=0;P<o.length;P++)E+=o[P].totalCount;for(var D=new Array(E),R=0,P=0;P<i;P++)for(var p=0;p<o.length;p++)P<v[p].length&&(D[R++]=v[p][P]);for(var P=0;P<a;P++)for(var p=0;p<o.length;p++)P<c[p].length&&(D[R++]=c[p][P]);return D},s.PAD0=236,s.PAD1=17,s}();e.QRCodeModel=f,e.QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var d={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};e.QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var b=function(){function s(){}return s.getBCHTypeInfo=function(r){for(var o=r<<10;s.getBCHDigit(o)-s.getBCHDigit(s.G15)>=0;)o^=s.G15<<s.getBCHDigit(o)-s.getBCHDigit(s.G15);return(r<<10|o)^s.G15_MASK},s.getBCHTypeNumber=function(r){for(var o=r<<12;s.getBCHDigit(o)-s.getBCHDigit(s.G18)>=0;)o^=s.G18<<s.getBCHDigit(o)-s.getBCHDigit(s.G18);return r<<12|o},s.getBCHDigit=function(r){for(var o=0;r!=0;)o++,r>>>=1;return o},s.getPatternPosition=function(r){return s.PATTERN_POSITION_TABLE[r-1]},s.getMask=function(r,o,h){switch(r){case e.QRMaskPattern.PATTERN000:return(o+h)%2==0;case e.QRMaskPattern.PATTERN001:return o%2==0;case e.QRMaskPattern.PATTERN010:return h%3==0;case e.QRMaskPattern.PATTERN011:return(o+h)%3==0;case e.QRMaskPattern.PATTERN100:return(Math.floor(o/2)+Math.floor(h/3))%2==0;case e.QRMaskPattern.PATTERN101:return o*h%2+o*h%3==0;case e.QRMaskPattern.PATTERN110:return(o*h%2+o*h%3)%2==0;case e.QRMaskPattern.PATTERN111:return(o*h%3+(o+h)%2)%2==0;default:throw new Error("bad maskPattern:"+r)}},s.getErrorCorrectPolynomial=function(r){for(var o=new w([1],0),h=0;h<r;h++)o=o.multiply(new w([1,m.gexp(h)],0));return o},s.getLengthInBits=function(r,o){if(1<=o&&o<10)switch(r){case d.MODE_NUMBER:return 10;case d.MODE_ALPHA_NUM:return 9;case d.MODE_8BIT_BYTE:return 8;case d.MODE_KANJI:return 8;default:throw new Error("mode:"+r)}else if(o<27)switch(r){case d.MODE_NUMBER:return 12;case d.MODE_ALPHA_NUM:return 11;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 10;default:throw new Error("mode:"+r)}else if(o<41)switch(r){case d.MODE_NUMBER:return 14;case d.MODE_ALPHA_NUM:return 13;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 12;default:throw new Error("mode:"+r)}else throw new Error("type:"+o)},s.getLostPoint=function(r){for(var o=r.getModuleCount(),h=0,i=0;i<o;i++)for(var a=0;a<o;a++){for(var v=0,c=r.isDark(i,a),p=-1;p<=1;p++)if(!(i+p<0||o<=i+p))for(var _=-1;_<=1;_++)a+_<0||o<=a+_||p==0&&_==0||c==r.isDark(i+p,a+_)&&v++;v>5&&(h+=3+v-5)}for(var i=0;i<o-1;i++)for(var a=0;a<o-1;a++){var C=0;r.isDark(i,a)&&C++,r.isDark(i+1,a)&&C++,r.isDark(i,a+1)&&C++,r.isDark(i+1,a+1)&&C++,(C==0||C==4)&&(h+=3)}for(var i=0;i<o;i++)for(var a=0;a<o-6;a++)r.isDark(i,a)&&!r.isDark(i,a+1)&&r.isDark(i,a+2)&&r.isDark(i,a+3)&&r.isDark(i,a+4)&&!r.isDark(i,a+5)&&r.isDark(i,a+6)&&(h+=40);for(var a=0;a<o;a++)for(var i=0;i<o-6;i++)r.isDark(i,a)&&!r.isDark(i+1,a)&&r.isDark(i+2,a)&&r.isDark(i+3,a)&&r.isDark(i+4,a)&&!r.isDark(i+5,a)&&r.isDark(i+6,a)&&(h+=40);for(var P=0,a=0;a<o;a++)for(var i=0;i<o;i++)r.isDark(i,a)&&P++;var x=Math.abs(100*P/o/o-50)/5;return h+=x*10,h},s.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],s.G15=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,s.G18=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,s.G15_MASK=1<<14|1<<12|1<<10|1<<4|1<<1,s}();e.QRUtil=b;var m=function(){function s(){}return s.glog=function(r){if(r<1)throw new Error("glog("+r+")");return s.LOG_TABLE[r]},s.gexp=function(r){for(;r<0;)r+=255;for(;r>=256;)r-=255;return s.EXP_TABLE[r]},s.EXP_TABLE=new Array(256),s.LOG_TABLE=new Array(256),s._constructor=function(){for(var r=0;r<8;r++)s.EXP_TABLE[r]=1<<r;for(var r=8;r<256;r++)s.EXP_TABLE[r]=s.EXP_TABLE[r-4]^s.EXP_TABLE[r-5]^s.EXP_TABLE[r-6]^s.EXP_TABLE[r-8];for(var r=0;r<255;r++)s.LOG_TABLE[s.EXP_TABLE[r]]=r}(),s}();e.QRMath=m;var w=function(){function s(r,o){if(r.length==null)throw new Error(r.length+"/"+o);for(var h=0;h<r.length&&r[h]==0;)h++;this.num=new Array(r.length-h+o);for(var i=0;i<r.length-h;i++)this.num[i]=r[i+h]}return s.prototype.get=function(r){return this.num[r]},s.prototype.getLength=function(){return this.num.length},s.prototype.multiply=function(r){for(var o=new Array(this.getLength()+r.getLength()-1),h=0;h<this.getLength();h++)for(var i=0;i<r.getLength();i++)o[h+i]^=m.gexp(m.glog(this.get(h))+m.glog(r.get(i)));return new s(o,0)},s.prototype.mod=function(r){if(this.getLength()-r.getLength()<0)return this;for(var o=m.glog(this.get(0))-m.glog(r.get(0)),h=new Array(this.getLength()),i=0;i<this.getLength();i++)h[i]=this.get(i);for(var i=0;i<r.getLength();i++)h[i]^=m.gexp(m.glog(r.get(i))+o);return new s(h,0).mod(r)},s}(),A=function(){function s(r,o){this.totalCount=r,this.dataCount=o}return s.getRSBlocks=function(r,o){var h=s.getRsBlockTable(r,o);if(h==null)throw new Error("bad rs block @ typeNumber:"+r+"/errorCorrectLevel:"+o);for(var i=h.length/3,a=[],v=0;v<i;v++)for(var c=h[v*3+0],p=h[v*3+1],_=h[v*3+2],C=0;C<c;C++)a.push(new s(p,_));return a},s.getRsBlockTable=function(r,o){switch(o){case e.QRErrorCorrectLevel.L:return s.RS_BLOCK_TABLE[(r-1)*4+0];case e.QRErrorCorrectLevel.M:return s.RS_BLOCK_TABLE[(r-1)*4+1];case e.QRErrorCorrectLevel.Q:return s.RS_BLOCK_TABLE[(r-1)*4+2];case e.QRErrorCorrectLevel.H:return s.RS_BLOCK_TABLE[(r-1)*4+3];default:return}},s.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],s}(),B=function(){function s(){this.buffer=[],this.length=0}return s.prototype.get=function(r){var o=Math.floor(r/8);return(this.buffer[o]>>>7-r%8&1)==1},s.prototype.put=function(r,o){for(var h=0;h<o;h++)this.putBit((r>>>o-h-1&1)==1)},s.prototype.getLengthInBits=function(){return this.length},s.prototype.putBit=function(r){var o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),r&&(this.buffer[o]|=128>>>this.length%8),this.length++},s}(),y=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]]})(Yt);var St={},Bt={};const ke="bold|bolder|lighter|[1-9]00",Me="italic|oblique",Le="small-caps",Ie="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",Fe="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",de=`'([^']+)'|"([^"]+)"|[\\w\\s-]+`,Se=new RegExp(`(${ke}) +`,"i"),Qe=new RegExp(`(${Me}) +`,"i"),Oe=new RegExp(`(${Le}) +`,"i"),Ne=new RegExp(`(${Ie}) +`,"i"),Ue=new RegExp(`([\\d\\.]+)(${Fe}) *((?:${de})( *, *(?:${de}))*)`),Zt={},Ge=16;var ze=e=>{if(Zt[e])return Zt[e];const n=Ue.exec(e);if(!n)return;const t={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(n[1]),unit:n[2],family:n[3].replace(/["']/g,"").replace(/ *, */g,",")};let l,u,f,d;const b=e.substring(0,n.index);switch((l=Se.exec(b))&&(t.weight=l[1]),(u=Qe.exec(b))&&(t.style=u[1]),(f=Oe.exec(b))&&(t.variant=f[1]),(d=Ne.exec(b))&&(t.stretch=d[1]),t.unit){case"pt":t.size/=.75;break;case"pc":t.size*=16;break;case"in":t.size*=96;break;case"cm":t.size*=96/2.54;break;case"mm":t.size*=96/25.4;break;case"%":break;case"em":case"rem":t.size*=Ge/.75;break;case"q":t.size*=96/25.4/4;break}return Zt[e]=t};const He=ze;Bt.parseFont=He;Bt.createCanvas=function(e,n){return Object.assign(document.createElement("canvas"),{width:e,height:n})};Bt.createImageData=function(e,n,t){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(e);case 2:return new ImageData(e,n);default:return new ImageData(e,n,t)}};Bt.loadImage=function(e,n){return new Promise(function(t,l){const u=Object.assign(document.createElement("img"),n);function f(){u.onload=null,u.onerror=null}u.onload=function(){f(),t(u)},u.onerror=function(){f(),l(new Error('Failed to load the image "'+e+'"'))},u.src=e})};var Be={},Pe={},q={};Object.defineProperty(q,"__esModule",{value:!0});q.loop=q.conditional=q.parse=void 0;var je=function e(n,t){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:l;if(Array.isArray(t))t.forEach(function(d){return e(n,d,l,u)});else if(typeof t=="function")t(n,l,u,e);else{var f=Object.keys(t)[0];Array.isArray(t[f])?(u[f]={},e(n,t[f],l,u[f])):u[f]=t[f](n,l,u,e)}return l};q.parse=je;var Ke=function(n,t){return function(l,u,f,d){t(l,u,f)&&d(l,n,u,f)}};q.conditional=Ke;var $e=function(n,t){return function(l,u,f,d){for(var b=[],m=l.pos;t(l,u,f);){var w={};if(d(l,n,u,w),l.pos===m)break;m=l.pos,b.push(w)}return b}};q.loop=$e;var F={};Object.defineProperty(F,"__esModule",{value:!0});F.readBits=F.readArray=F.readUnsigned=F.readString=F.peekBytes=F.readBytes=F.peekByte=F.readByte=F.buildStream=void 0;var Xe=function(n){return{data:n,pos:0}};F.buildStream=Xe;var Ce=function(){return function(n){return n.data[n.pos++]}};F.readByte=Ce;var Je=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return function(t){return t.data[t.pos+n]}};F.peekByte=Je;var Qt=function(n){return function(t){return t.data.subarray(t.pos,t.pos+=n)}};F.readBytes=Qt;var We=function(n){return function(t){return t.data.subarray(t.pos,t.pos+n)}};F.peekBytes=We;var Ze=function(n){return function(t){return Array.from(Qt(n)(t)).map(function(l){return String.fromCharCode(l)}).join("")}};F.readString=Ze;var Ve=function(n){return function(t){var l=Qt(2)(t);return n?(l[1]<<8)+l[0]:(l[0]<<8)+l[1]}};F.readUnsigned=Ve;var Ye=function(n,t){return function(l,u,f){for(var d=typeof t=="function"?t(l,u,f):t,b=Qt(n),m=new Array(d),w=0;w<d;w++)m[w]=b(l);return m}};F.readArray=Ye;var qe=function(n,t,l){for(var u=0,f=0;f<l;f++)u+=n[t+f]&&Math.pow(2,l-f-1);return u},tr=function(n){return function(t){for(var l=Ce()(t),u=new Array(8),f=0;f<8;f++)u[7-f]=!!(l&1<<f);return Object.keys(n).reduce(function(d,b){var m=n[b];return m.length?d[b]=qe(u,m.index,m.length):d[b]=u[m.index],d},{})}};F.readBits=tr;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=q,t=F,l={blocks:function(y){for(var s=0,r=[],o=y.data.length,h=0,i=(0,t.readByte)()(y);i!==s&&i;i=(0,t.readByte)()(y)){if(y.pos+i>=o){var a=o-y.pos;r.push((0,t.readBytes)(a)(y)),h+=a;break}r.push((0,t.readBytes)(i)(y)),h+=i}for(var v=new Uint8Array(h),c=0,p=0;p<r.length;p++)v.set(r[p],c),c+=r[p].length;return v}},u=(0,n.conditional)({gce:[{codes:(0,t.readBytes)(2)},{byteSize:(0,t.readByte)()},{extras:(0,t.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,t.readUnsigned)(!0)},{transparentColorIndex:(0,t.readByte)()},{terminator:(0,t.readByte)()}]},function(B){var y=(0,t.peekBytes)(2)(B);return y[0]===33&&y[1]===249}),f=(0,n.conditional)({image:[{code:(0,t.readByte)()},{descriptor:[{left:(0,t.readUnsigned)(!0)},{top:(0,t.readUnsigned)(!0)},{width:(0,t.readUnsigned)(!0)},{height:(0,t.readUnsigned)(!0)},{lct:(0,t.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,n.conditional)({lct:(0,t.readArray)(3,function(B,y,s){return Math.pow(2,s.descriptor.lct.size+1)})},function(B,y,s){return s.descriptor.lct.exists}),{data:[{minCodeSize:(0,t.readByte)()},l]}]},function(B){return(0,t.peekByte)()(B)===44}),d=(0,n.conditional)({text:[{codes:(0,t.readBytes)(2)},{blockSize:(0,t.readByte)()},{preData:function(y,s,r){return(0,t.readBytes)(r.text.blockSize)(y)}},l]},function(B){var y=(0,t.peekBytes)(2)(B);return y[0]===33&&y[1]===1}),b=(0,n.conditional)({application:[{codes:(0,t.readBytes)(2)},{blockSize:(0,t.readByte)()},{id:function(y,s,r){return(0,t.readString)(r.blockSize)(y)}},l]},function(B){var y=(0,t.peekBytes)(2)(B);return y[0]===33&&y[1]===255}),m=(0,n.conditional)({comment:[{codes:(0,t.readBytes)(2)},l]},function(B){var y=(0,t.peekBytes)(2)(B);return y[0]===33&&y[1]===254}),w=[{header:[{signature:(0,t.readString)(3)},{version:(0,t.readString)(3)}]},{lsd:[{width:(0,t.readUnsigned)(!0)},{height:(0,t.readUnsigned)(!0)},{gct:(0,t.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,t.readByte)()},{pixelAspectRatio:(0,t.readByte)()}]},(0,n.conditional)({gct:(0,t.readArray)(3,function(B,y){return Math.pow(2,y.lsd.gct.size+1)})},function(B,y){return y.lsd.gct.exists}),{frames:(0,n.loop)([u,b,m,f,d],function(B){var y=(0,t.peekByte)()(B);return y===33||y===44})}],A=w;e.default=A})(Pe);var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.deinterlace=void 0;Ot.deinterlace=function(e,n){for(var t=new Array(e.length),l=e.length/n,u=function(A,B){var y=e.slice(B*n,(B+1)*n);t.splice.apply(t,[A*n,n].concat(y))},f=[0,4,2,1],d=[8,8,4,2],b=0,m=0;m<4;m++)for(var w=f[m];w<l;w+=d[m])u(w,b),b++;return t};var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.lzw=void 0;Nt.lzw=function(e,n,t){var l=4096,u=-1,f=t,d,b,m,w,A,B,y,p,s,r,c,o,_,C,x,P,h=new Array(t),i=new Array(l),a=new Array(l),v=new Array(l+1);for(o=e,b=1<<o,A=b+1,d=b+2,y=u,w=o+1,m=(1<<w)-1,s=0;s<b;s++)i[s]=0,a[s]=s;var c,p,_,C,P,x;for(c=p=_=C=P=x=0,r=0;r<f;){if(C===0){if(p<w){c+=n[x]<<p,p+=8,x++;continue}if(s=c&m,c>>=w,p-=w,s>d||s==A)break;if(s==b){w=o+1,m=(1<<w)-1,d=b+2,y=u;continue}if(y==u){v[C++]=a[s],y=s,_=s;continue}for(B=s,s==d&&(v[C++]=_,s=y);s>b;)v[C++]=a[s],s=i[s];_=a[s]&255,v[C++]=_,d<l&&(i[d]=y,a[d]=_,d++,(d&m)===0&&d<l&&(w++,m+=d)),y=B}C--,h[P++]=v[C],r++}for(r=P;r<f;r++)h[r]=0;return h};(function(e){var n=U&&U.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0}),e.decompressFrames=e.decompressFrame=e.parseGIF=void 0;var t=n(Pe),l=q,u=F,f=Ot,d=Nt;e.parseGIF=function(m){var w=new Uint8Array(m);return l.parse(u.buildStream(w),t.default)};var b=function(m){for(var w=m.pixels.length,A=new Uint8ClampedArray(w*4),B=0;B<w;B++){var y=B*4,s=m.pixels[B],r=m.colorTable[s];A[y]=r[0],A[y+1]=r[1],A[y+2]=r[2],A[y+3]=s!==m.transparentIndex?255:0}return A};e.decompressFrame=function(m,w,A){if(!m.image){console.warn("gif frame does not have associated image.");return}var B=m.image,y=B.descriptor.width*B.descriptor.height,s=d.lzw(B.data.minCodeSize,B.data.blocks,y);B.descriptor.lct.interlaced&&(s=f.deinterlace(s,B.descriptor.width));var r={pixels:s,dims:{top:m.image.descriptor.top,left:m.image.descriptor.left,width:m.image.descriptor.width,height:m.image.descriptor.height}};return B.descriptor.lct&&B.descriptor.lct.exists?r.colorTable=B.lct:r.colorTable=w,m.gce&&(r.delay=(m.gce.delay||10)*10,r.disposalType=m.gce.extras.disposal,m.gce.extras.transparentColorGiven&&(r.transparentIndex=m.gce.transparentColorIndex)),A&&(r.patch=b(r)),r},e.decompressFrames=function(m,w){return m.frames.filter(function(A){return A.image}).map(function(A){return e.decompressFrame(A,m.gct,w)})}})(Be);var er=100,S=256,ve=S-1,at=4,Re=16,qt=1<<Re,Ee=10,te=10,rr=qt>>te,ir=qt<<Ee-te,ar=S>>3,Vt=6,nr=1<<Vt,or=ar*nr,sr=30,Ae=10,Tt=1<<Ae,xe=8,ge=1<<xe,lr=Ae+xe,ft=1<<lr,pe=499,me=491,we=487,De=503,ur=3*De;function fr(e,n){var t,l,u,f,d;function b(){t=[],l=new Int32Array(256),u=new Int32Array(S),f=new Int32Array(S),d=new Int32Array(S>>3);var i,a;for(i=0;i<S;i++)a=(i<<at+8)/S,t[i]=new Float64Array([a,a,a,0]),f[i]=qt/S,u[i]=0}function m(){for(var i=0;i<S;i++)t[i][0]>>=at,t[i][1]>>=at,t[i][2]>>=at,t[i][3]=i}function w(i,a,v,c,p){t[a][0]-=i*(t[a][0]-v)/Tt,t[a][1]-=i*(t[a][1]-c)/Tt,t[a][2]-=i*(t[a][2]-p)/Tt}function A(i,a,v,c,p){for(var _=Math.abs(a-i),C=Math.min(a+i,S),P=a+1,x=a-1,T=1,g,k;P<C||x>_;)k=d[T++],P<C&&(g=t[P++],g[0]-=k*(g[0]-v)/ft,g[1]-=k*(g[1]-c)/ft,g[2]-=k*(g[2]-p)/ft),x>_&&(g=t[x--],g[0]-=k*(g[0]-v)/ft,g[1]-=k*(g[1]-c)/ft,g[2]-=k*(g[2]-p)/ft)}function B(i,a,v){var c=2147483647,p=c,_=-1,C=_,P,x,T,g,k;for(P=0;P<S;P++)x=t[P],T=Math.abs(x[0]-i)+Math.abs(x[1]-a)+Math.abs(x[2]-v),T<c&&(c=T,_=P),g=T-(u[P]>>Re-at),g<p&&(p=g,C=P),k=f[P]>>te,f[P]-=k,u[P]+=k<<Ee;return f[_]+=rr,u[_]-=ir,C}function y(){var i,a,v,c,p,_,C=0,P=0;for(i=0;i<S;i++){for(v=t[i],p=i,_=v[1],a=i+1;a<S;a++)c=t[a],c[1]<_&&(p=a,_=c[1]);if(c=t[p],i!=p&&(a=c[0],c[0]=v[0],v[0]=a,a=c[1],c[1]=v[1],v[1]=a,a=c[2],c[2]=v[2],v[2]=a,a=c[3],c[3]=v[3],v[3]=a),_!=C){for(l[C]=P+i>>1,a=C+1;a<_;a++)l[a]=i;C=_,P=i}}for(l[C]=P+ve>>1,a=C+1;a<256;a++)l[a]=ve}function s(i,a,v){for(var c,p,_,C=1e3,P=-1,x=l[a],T=x-1;x<S||T>=0;)x<S&&(p=t[x],_=p[1]-a,_>=C?x=S:(x++,_<0&&(_=-_),c=p[0]-i,c<0&&(c=-c),_+=c,_<C&&(c=p[2]-v,c<0&&(c=-c),_+=c,_<C&&(C=_,P=p[3])))),T>=0&&(p=t[T],_=a-p[1],_>=C?T=-1:(T--,_<0&&(_=-_),c=p[0]-i,c<0&&(c=-c),_+=c,_<C&&(c=p[2]-v,c<0&&(c=-c),_+=c,_<C&&(C=_,P=p[3]))));return P}function r(){var i,a=e.length,v=30+(n-1)/3,c=a/(3*n),p=~~(c/er),_=Tt,C=or,P=C>>Vt;for(P<=1&&(P=0),i=0;i<P;i++)d[i]=_*((P*P-i*i)*ge/(P*P));var x;a<ur?(n=1,x=3):a%pe!==0?x=3*pe:a%me!==0?x=3*me:a%we!==0?x=3*we:x=3*De;var T,g,k,E,D=0;for(i=0;i<c;)if(T=(e[D]&255)<<at,g=(e[D+1]&255)<<at,k=(e[D+2]&255)<<at,E=B(T,g,k),w(_,E,T,g,k),P!==0&&A(P,E,T,g,k),D+=x,D>=a&&(D-=a),i++,p===0&&(p=1),i%p===0)for(_-=_/v,C-=C/sr,P=C>>Vt,P<=1&&(P=0),E=0;E<P;E++)d[E]=_*((P*P-E*E)*ge/(P*P))}function o(){b(),r(),m(),y()}this.buildColormap=o;function h(){for(var i=[],a=[],v=0;v<S;v++)a[t[v][3]]=v;for(var c=0,p=0;p<S;p++){var _=a[p];i[c++]=t[_][0],i[c++]=t[_][1],i[c++]=t[_][2]}return i}this.getColormap=h,this.lookupRGB=s}var hr=fr,ye=-1,kt=12,_t=5003,cr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function dr(e,n,t,l){var u=Math.max(2,l),f=new Uint8Array(256),d=new Int32Array(_t),b=new Int32Array(_t),m,w=0,A,B=0,y,s=!1,r,o,h,i,a,v;function c(E,D){f[A++]=E,A>=254&&x(D)}function p(E){_(_t),B=o+2,s=!0,k(o,E)}function _(E){for(var D=0;D<E;++D)d[D]=-1}function C(E,D){var R,tt,I,K,Z,et,$;for(r=E,s=!1,v=r,y=T(v),o=1<<E-1,h=o+1,B=o+2,A=0,K=g(),$=0,R=_t;R<65536;R*=2)++$;$=8-$,et=_t,_(et),k(o,D);t:for(;(tt=g())!=ye;){if(R=(tt<<kt)+K,I=tt<<$^K,d[I]===R){K=b[I];continue}else if(d[I]>=0){Z=et-I,I===0&&(Z=1);do if((I-=Z)<0&&(I+=et),d[I]===R){K=b[I];continue t}while(d[I]>=0)}k(K,D),K=tt,B<1<<kt?(b[I]=B++,d[I]=R):p(D)}k(K,D),k(h,D)}function P(E){E.writeByte(u),i=e*n,a=0,C(u+1,E),E.writeByte(0)}function x(E){A>0&&(E.writeByte(A),E.writeBytes(f,0,A),A=0)}function T(E){return(1<<E)-1}function g(){if(i===0)return ye;--i;var E=t[a++];return E&255}function k(E,D){for(m&=cr[w],w>0?m|=E<<w:m=E,w+=v;w>=8;)c(m&255,D),m>>=8,w-=8;if((B>y||s)&&(s?(y=T(v=r),s=!1):(++v,v==kt?y=1<<kt:y=T(v))),E==h){for(;w>0;)c(m&255,D),m>>=8,w-=8;x(D)}}this.encode=P}var vr=dr,gr=hr,pr=vr;function G(){this.page=-1,this.pages=[],this.newPage()}G.pageSize=4096;G.charMap={};for(var Mt=0;Mt<256;Mt++)G.charMap[Mt]=String.fromCharCode(Mt);G.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(G.pageSize),this.cursor=0};G.prototype.getData=function(){for(var e="",n=0;n<this.pages.length;n++)for(var t=0;t<G.pageSize;t++)e+=G.charMap[this.pages[n][t]];return e};G.prototype.toFlattenUint8Array=function(){for(var e=[],n=0;n<this.pages.length;n++)if(n===this.pages.length-1){var t=Uint8Array.from(this.pages[n].slice(0,this.cursor));e.push(t)}else e.push(this.pages[n]);var l=new Uint8Array(e.reduce(function(u,f){return u+f.length},0));return e.reduce(function(u,f){return l.set(f,u),u+f.length},0),l};G.prototype.writeByte=function(e){this.cursor>=G.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=e};G.prototype.writeUTFBytes=function(e){for(var n=e.length,t=0;t<n;t++)this.writeByte(e.charCodeAt(t))};G.prototype.writeBytes=function(e,n,t){for(var l=t||e.length,u=n||0;u<l;u++)this.writeByte(e[u])};function L(e,n){this.width=~~e,this.height=~~n,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new G}L.prototype.setDelay=function(e){this.delay=Math.round(e/10)};L.prototype.setFrameRate=function(e){this.delay=Math.round(100/e)};L.prototype.setDispose=function(e){e>=0&&(this.dispose=e)};L.prototype.setRepeat=function(e){this.repeat=e};L.prototype.setTransparent=function(e){this.transparent=e};L.prototype.addFrame=function(e){this.image=e,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),!this.firstFrame&&!this.globalPalette&&this.writePalette(),this.writePixels(),this.firstFrame=!1};L.prototype.finish=function(){this.out.writeByte(59)};L.prototype.setQuality=function(e){e<1&&(e=1),this.sample=e};L.prototype.setDither=function(e){e===!0&&(e="FloydSteinberg"),this.dither=e};L.prototype.setGlobalPalette=function(e){this.globalPalette=e};L.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};L.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};L.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new gr(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent,!0))};L.prototype.indexPixels=function(e){var n=this.pixels.length/3;this.indexedPixels=new Uint8Array(n);for(var t=0,l=0;l<n;l++){var u=this.findClosestRGB(this.pixels[t++]&255,this.pixels[t++]&255,this.pixels[t++]&255);this.usedEntry[u]=!0,this.indexedPixels[l]=u}};L.prototype.ditherPixels=function(e,n){var t={FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]]};if(!e||!t[e])throw"Unknown dithering kernel: "+e;var l=t[e],u=0,f=this.height,d=this.width,b=this.pixels,m=n?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var w=0;w<f;w++){n&&(m=m*-1);for(var A=m==1?0:d-1,B=m==1?d:0;A!==B;A+=m){u=w*d+A;var y=u*3,s=b[y],r=b[y+1],o=b[y+2];y=this.findClosestRGB(s,r,o),this.usedEntry[y]=!0,this.indexedPixels[u]=y,y*=3;for(var h=this.colorTab[y],i=this.colorTab[y+1],a=this.colorTab[y+2],v=s-h,c=r-i,p=o-a,_=m==1?0:l.length-1,C=m==1?l.length:0;_!==C;_+=m){var P=l[_][1],x=l[_][2];if(P+A>=0&&P+A<d&&x+w>=0&&x+w<f){var T=l[_][0];y=u+P+x*d,y*=3,b[y]=Math.max(0,Math.min(255,b[y]+v*T)),b[y+1]=Math.max(0,Math.min(255,b[y+1]+c*T)),b[y+2]=Math.max(0,Math.min(255,b[y+2]+p*T))}}}}};L.prototype.findClosest=function(e,n){return this.findClosestRGB((e&16711680)>>16,(e&65280)>>8,e&255,n)};L.prototype.findClosestRGB=function(e,n,t,l){if(this.colorTab===null)return-1;if(this.neuQuant&&!l)return this.neuQuant.lookupRGB(e,n,t);for(var u=0,f=256*256*256,d=this.colorTab.length,b=0,m=0;b<d;m++){var w=e-(this.colorTab[b++]&255),A=n-(this.colorTab[b++]&255),B=t-(this.colorTab[b++]&255),y=w*w+A*A+B*B;(!l||this.usedEntry[m])&&y<f&&(f=y,u=m)}return u};L.prototype.getImagePixels=function(){var e=this.width,n=this.height;this.pixels=new Uint8Array(e*n*3);for(var t=this.image,l=0,u=0,f=0;f<n;f++)for(var d=0;d<e;d++)this.pixels[u++]=t[l++],this.pixels[u++]=t[l++],this.pixels[u++]=t[l++],l++};L.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var e,n;this.transparent===null?(e=0,n=0):(e=1,n=2),this.dispose>=0&&(n=this.dispose&7),n<<=2,this.out.writeByte(0|n|0|e),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)};L.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)};L.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)};L.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)};L.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var e=3*256-this.colorTab.length,n=0;n<e;n++)this.out.writeByte(0)};L.prototype.writeShort=function(e){this.out.writeByte(e&255),this.out.writeByte(e>>8&255)};L.prototype.writePixels=function(){var e=new pr(this.width,this.height,this.indexedPixels,this.colorDepth);e.encode(this.out)};L.prototype.stream=function(){return this.out};var mr=L,Ft=U&&U.__assign||function(){return Ft=Object.assign||function(e){for(var n,t=1,l=arguments.length;t<l;t++){n=arguments[t];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u])}return e},Ft.apply(this,arguments)},wr=U&&U.__awaiter||function(e,n,t,l){function u(f){return f instanceof t?f:new t(function(d){d(f)})}return new(t||(t=Promise))(function(f,d){function b(A){try{w(l.next(A))}catch(B){d(B)}}function m(A){try{w(l.throw(A))}catch(B){d(B)}}function w(A){A.done?f(A.value):u(A.value).then(b,m)}w((l=l.apply(e,n||[])).next())})},yr=U&&U.__generator||function(e,n){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,u,f,d;return d={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function b(w){return function(A){return m([w,A])}}function m(w){if(l)throw new TypeError("Generator is already executing.");for(;t;)try{if(l=1,u&&(f=w[0]&2?u.return:w[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,w[1])).done)return f;switch(u=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,u=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=n.call(e,t)}catch(A){w=[6,A],u=0}finally{l=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},br=U&&U.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(St,"__esModule",{value:!0});St.AwesomeQR=void 0;var J=Bt,be=Be,Lt=Yt,_r=br(mr),It=.4,Br=function(){function e(n){var t=Object.assign({},n);if(Object.keys(e.defaultOptions).forEach(function(l){l in t||Object.defineProperty(t,l,{value:e.defaultOptions[l],enumerable:!0,writable:!0})}),t.components?typeof t.components=="object"&&Object.keys(e.defaultComponentOptions).forEach(function(l){l in t.components?Object.defineProperty(t.components,l,{value:Ft(Ft({},e.defaultComponentOptions[l]),t.components[l]),enumerable:!0,writable:!0}):Object.defineProperty(t.components,l,{value:e.defaultComponentOptions[l],enumerable:!0,writable:!0})}):t.components=e.defaultComponentOptions,t.dotScale!==null&&t.dotScale!==void 0){if(t.dotScale<=0||t.dotScale>1)throw new Error("dotScale should be in range (0, 1].");t.components.data.scale=t.dotScale,t.components.timing.scale=t.dotScale,t.components.alignment.scale=t.dotScale}this.options=t,this.canvas=J.createCanvas(n.size,n.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new Lt.QRCodeModel(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}return e.prototype.draw=function(){var n=this;return new Promise(function(t){return n._draw().then(t)})},e.prototype._clear=function(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)},e._prepareRoundedCornerClip=function(n,t,l,u,f,d){n.beginPath(),n.moveTo(t,l),n.arcTo(t+u,l,t+u,l+f,d),n.arcTo(t+u,l+f,t,l+f,d),n.arcTo(t,l+f,t,l,d),n.arcTo(t,l,t+u,l,d),n.closePath()},e._getAverageRGB=function(n){var t=5,l={r:0,g:0,b:0},u,f,d=-4,b={r:0,g:0,b:0},m=0;f=n.naturalHeight||n.height,u=n.naturalWidth||n.width;var w=J.createCanvas(u,f),A=w.getContext("2d");if(!A)return l;A.drawImage(n,0,0);var B;try{B=A.getImageData(0,0,u,f)}catch{return l}for(;(d+=t*4)<B.data.length;)B.data[d]>200||B.data[d+1]>200||B.data[d+2]>200||(++m,b.r+=B.data[d],b.g+=B.data[d+1],b.b+=B.data[d+2]);return b.r=~~(b.r/m),b.g=~~(b.g/m),b.b=~~(b.b/m),b},e._drawDot=function(n,t,l,u,f,d){f===void 0&&(f=0),d===void 0&&(d=1),n.fillRect((t+f)*u,(l+f)*u,d*u,d*u)},e._drawAlignProtector=function(n,t,l,u){n.clearRect((t-2)*u,(l-2)*u,5*u,5*u),n.fillRect((t-2)*u,(l-2)*u,5*u,5*u)},e._drawAlign=function(n,t,l,u,f,d,b,m){f===void 0&&(f=0),d===void 0&&(d=1);var w=n.fillStyle;n.fillStyle=b,new Array(4).fill(0).map(function(A,B){e._drawDot(n,t-2+B,l-2,u,f,d),e._drawDot(n,t+2,l-2+B,u,f,d),e._drawDot(n,t+2-B,l+2,u,f,d),e._drawDot(n,t-2,l+2-B,u,f,d)}),e._drawDot(n,t,l,u,f,d),m||(n.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map(function(A,B){e._drawDot(n,t-1+B,l-1,u,f,d),e._drawDot(n,t+1,l-1+B,u,f,d),e._drawDot(n,t+1-B,l+1,u,f,d),e._drawDot(n,t-1,l+1-B,u,f,d)})),n.fillStyle=w},e.prototype._draw=function(){var n,t,l,u,f,d,b,m,w,A,B,y,s,r,o,h,i,a,v;return wr(this,void 0,void 0,function(){var c,p,_,C,P,x,T,g,k,E,D,R,tt,I,K,Z,et,$,ht,ct,dt,M,W,vt,Pt,Q,ot,Ut,O,N,Gt,st,ee,X,M,zt,Ht,re,z,ie,M,V,H,j,Ct,jt,M,Kt,ae,$t,ne,M,V,H,j,oe,gt,rt,pt,it,mt,Rt,se,Y,lt,wt,ut,Xt,Et,le,ue,Jt,fe;return yr(this,function(yt){switch(yt.label){case 0:if(c=(n=this.qrCode)===null||n===void 0?void 0:n.moduleCount,p=this.options.size,_=this.options.margin,(_<0||_*2>=p)&&(_=0),C=Math.ceil(_),P=p-2*_,x=this.options.whiteMargin,T=this.options.backgroundDimming,g=Math.ceil(P/c),k=g*c,E=k+2*C,D=J.createCanvas(E,E),R=D.getContext("2d"),this._clear(),R.save(),R.translate(C,C),tt=J.createCanvas(E,E),I=tt.getContext("2d"),K=null,Z=[],!this.options.gifBackground)return[3,1];if(et=be.parseGIF(this.options.gifBackground),K=et,Z=be.decompressFrames(et,!0),this.options.autoColor){for($=0,ht=0,ct=0,dt=0,M=0;M<Z[0].colorTable.length;M++)W=Z[0].colorTable[M],!(W[0]>200||W[1]>200||W[2]>200)&&(W[0]===0&&W[1]===0&&W[2]===0||(dt++,$+=W[0],ht+=W[1],ct+=W[2]));$=~~($/dt),ht=~~(ht/dt),ct=~~(ct/dt),this.options.colorDark="rgb("+$+","+ht+","+ct+")"}return[3,4];case 1:return this.options.backgroundImage?[4,J.loadImage(this.options.backgroundImage)]:[3,3];case 2:return vt=yt.sent(),this.options.autoColor&&(Pt=e._getAverageRGB(vt),this.options.colorDark="rgb("+Pt.r+","+Pt.g+","+Pt.b+")"),I.drawImage(vt,0,0,vt.width,vt.height,0,0,E,E),I.rect(0,0,E,E),I.fillStyle=T,I.fill(),[3,4];case 3:I.rect(0,0,E,E),I.fillStyle=this.options.colorLight,I.fill(),yt.label=4;case 4:for(Q=Lt.QRUtil.getPatternPosition(this.qrCode.typeNumber),ot=((l=(t=this.options.components)===null||t===void 0?void 0:t.data)===null||l===void 0?void 0:l.scale)||It,Ut=(1-ot)*.5,O=0;O<c;O++)for(N=0;N<c;N++){for(Gt=this.qrCode.isDark(O,N),st=N<8&&(O<8||O>=c-8)||N>=c-8&&O<8,ee=O==6&&N>=8&&N<=c-8||N==6&&O>=8&&O<=c-8,X=st||ee,M=1;M<Q.length-1;M++)X=X||O>=Q[M]-2&&O<=Q[M]+2&&N>=Q[M]-2&&N<=Q[M]+2;zt=N*g+(X?0:Ut*g),Ht=O*g+(X?0:Ut*g),R.strokeStyle=Gt?this.options.colorDark:this.options.colorLight,R.lineWidth=.5,R.fillStyle=Gt?this.options.colorDark:"rgba(255, 255, 255, 0.6)",Q.length===0?X||R.fillRect(zt,Ht,(X?1:ot)*g,(X?1:ot)*g):(re=N<c-4&&N>=c-4-5&&O<c-4&&O>=c-4-5,!X&&!re&&R.fillRect(zt,Ht,(X?1:ot)*g,(X?1:ot)*g))}if(z=Q[Q.length-1],ie="rgba(255, 255, 255, 0.6)",R.fillStyle=ie,R.fillRect(0,0,8*g,8*g),R.fillRect(0,(c-8)*g,8*g,8*g),R.fillRect((c-8)*g,0,8*g,8*g),!((f=(u=this.options.components)===null||u===void 0?void 0:u.timing)===null||f===void 0)&&f.protectors&&(R.fillRect(8*g,6*g,(c-8-8)*g,g),R.fillRect(6*g,8*g,g,(c-8-8)*g)),!((b=(d=this.options.components)===null||d===void 0?void 0:d.cornerAlignment)===null||b===void 0)&&b.protectors&&e._drawAlignProtector(R,z,z,g),!((w=(m=this.options.components)===null||m===void 0?void 0:m.alignment)===null||w===void 0)&&w.protectors){for(M=0;M<Q.length;M++)for(V=0;V<Q.length;V++)if(H=Q[V],j=Q[M],!(H===6&&(j===6||j===z))){if(j===6&&(H===6||H===z))continue;if(H===z&&j===z)continue;e._drawAlignProtector(R,H,j,g)}}for(R.fillStyle=this.options.colorDark,R.fillRect(0,0,7*g,g),R.fillRect((c-7)*g,0,7*g,g),R.fillRect(0,6*g,7*g,g),R.fillRect((c-7)*g,6*g,7*g,g),R.fillRect(0,(c-7)*g,7*g,g),R.fillRect(0,(c-7+6)*g,7*g,g),R.fillRect(0,0,g,7*g),R.fillRect(6*g,0,g,7*g),R.fillRect((c-7)*g,0,g,7*g),R.fillRect((c-7+6)*g,0,g,7*g),R.fillRect(0,(c-7)*g,g,7*g),R.fillRect(6*g,(c-7)*g,g,7*g),R.fillRect(2*g,2*g,3*g,3*g),R.fillRect((c-7+2)*g,2*g,3*g,3*g),R.fillRect(2*g,(c-7+2)*g,3*g,3*g),Ct=((B=(A=this.options.components)===null||A===void 0?void 0:A.timing)===null||B===void 0?void 0:B.scale)||It,jt=(1-Ct)*.5,M=0;M<c-8;M+=2)e._drawDot(R,8+M,6,g,jt,Ct),e._drawDot(R,6,8+M,g,jt,Ct);for(Kt=((s=(y=this.options.components)===null||y===void 0?void 0:y.cornerAlignment)===null||s===void 0?void 0:s.scale)||It,ae=(1-Kt)*.5,e._drawAlign(R,z,z,g,ae,Kt,this.options.colorDark,((o=(r=this.options.components)===null||r===void 0?void 0:r.cornerAlignment)===null||o===void 0?void 0:o.protectors)||!1),$t=((i=(h=this.options.components)===null||h===void 0?void 0:h.alignment)===null||i===void 0?void 0:i.scale)||It,ne=(1-$t)*.5,M=0;M<Q.length;M++)for(V=0;V<Q.length;V++)if(H=Q[V],j=Q[M],!(H===6&&(j===6||j===z))){if(j===6&&(H===6||H===z))continue;if(H===z&&j===z)continue;e._drawAlign(R,H,j,g,ne,$t,this.options.colorDark,((v=(a=this.options.components)===null||a===void 0?void 0:a.alignment)===null||v===void 0?void 0:v.protectors)||!1)}return x&&(R.fillStyle="#FFFFFF",R.fillRect(-C,-C,E,C),R.fillRect(-C,k,E,C),R.fillRect(k,-C,C,E),R.fillRect(-C,-C,C,E)),this.options.logoImage?[4,J.loadImage(this.options.logoImage)]:[3,6];case 5:oe=yt.sent(),gt=this.options.logoScale,rt=this.options.logoMargin,pt=this.options.logoCornerRadius,(gt<=0||gt>=1)&&(gt=.2),rt<0&&(rt=0),pt<0&&(pt=0),it=k*gt,mt=.5*(E-it),Rt=mt,R.restore(),R.fillStyle="#FFFFFF",R.save(),e._prepareRoundedCornerClip(R,mt-rt,Rt-rt,it+2*rt,it+2*rt,pt+rt),R.clip(),se=R.globalCompositeOperation,R.globalCompositeOperation="destination-out",R.fill(),R.globalCompositeOperation=se,R.restore(),R.save(),e._prepareRoundedCornerClip(R,mt,Rt,it,it,pt),R.clip(),R.drawImage(oe,mt,Rt,it,it),R.restore(),R.save(),R.translate(C,C),yt.label=6;case 6:if(K){if(Z.forEach(function(nt){Y||(Y=new _r.default(p,p),Y.setDelay(nt.delay),Y.setRepeat(0));var At=nt.dims,xt=At.width,Dt=At.height;lt||(lt=J.createCanvas(xt,Dt),wt=lt.getContext("2d"),wt.rect(0,0,lt.width,lt.height),wt.fillStyle="#ffffff",wt.fill()),(!ut||!Et||xt!==ut.width||Dt!==ut.height)&&(ut=J.createCanvas(xt,Dt),Xt=ut.getContext("2d"),Et=Xt.createImageData(xt,Dt)),Et.data.set(nt.patch),Xt.putImageData(Et,0,0),wt.drawImage(ut,nt.dims.left,nt.dims.top);var he=J.createCanvas(E,E),bt=he.getContext("2d");bt.drawImage(lt,0,0,E,E),bt.rect(0,0,E,E),bt.fillStyle=T,bt.fill(),bt.drawImage(D,0,0,E,E);var Wt=J.createCanvas(p,p),ce=Wt.getContext("2d");ce.drawImage(he,0,0,p,p),Y.addFrame(ce.getImageData(0,0,Wt.width,Wt.height).data)}),!Y)throw new Error("No frames.");return Y.finish(),_e(this.canvas)?(le=Y.stream().toFlattenUint8Array(),ue=le.reduce(function(nt,At){return nt+String.fromCharCode(At)},""),[2,Promise.resolve("data:image/gif;base64,"+window.btoa(ue))]):[2,Promise.resolve(Buffer.from(Y.stream().toFlattenUint8Array()))]}else return I.drawImage(D,0,0,E,E),R.drawImage(tt,-C,-C,E,E),Jt=J.createCanvas(p,p),fe=Jt.getContext("2d"),fe.drawImage(D,0,0,p,p),this.canvas=Jt,_e(this.canvas)?[2,Promise.resolve(this.canvas.toDataURL())]:[2,Promise.resolve(this.canvas.toBuffer())]}})})},e.CorrectLevel=Lt.QRErrorCorrectLevel,e.defaultComponentOptions={data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}},e.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"#ffffff",correctLevel:Lt.QRErrorCorrectLevel.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:e.defaultComponentOptions,autoColor:!0},e}();St.AwesomeQR=Br;function _e(e){try{return e instanceof HTMLElement}catch{return typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object"}}(function(e){var n=U&&U.__createBinding||(Object.create?function(u,f,d,b){b===void 0&&(b=d),Object.defineProperty(u,b,{enumerable:!0,get:function(){return f[d]}})}:function(u,f,d,b){b===void 0&&(b=d),u[b]=f[d]}),t=U&&U.__exportStar||function(u,f){for(var d in u)d!=="default"&&!f.hasOwnProperty(d)&&n(f,u,d)};Object.defineProperty(e,"__esModule",{value:!0}),t(Yt,e);var l=St;Object.defineProperty(e,"AwesomeQR",{enumerable:!0,get:function(){return l.AwesomeQR}})})(Te);export{Te as l};
